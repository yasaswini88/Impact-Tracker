/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var sm=function(e,t){return sm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},sm(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");sm(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}export var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}export function __decorate(e,t,r,i){var s=arguments.length,n=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n}export function __param(e,t){return function(r,i){t(r,i,e)}}export function __esDecorate(e,t,r,i,s,n){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?i.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,d=!1,f=r.length-1;f>=0;f--){var g={};for(var v in i)g[v]=v==="access"?{}:i[v];for(var v in i.access)g.access[v]=i.access[v];g.addInitializer=function(E){if(d)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(E||null))};var y=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(h=o(y.get))&&(u.get=h),(h=o(y.set))&&(u.set=h),(h=o(y.init))&&s.unshift(h)}else(h=o(y))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,i.name,u),d=!0}export function __runInitializers(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}export function __generator(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(i=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(l[0]===6&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],s=0}finally{i=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]};export function __exportStar(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(t,e,r)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i}export function __spreadArray(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(g){return Promise.resolve(g).then(f,h)}}function a(f,g){i[f]&&(s[f]=function(v){return new Promise(function(y,E){n.push([f,v,y,E])>1||c(f,v)})},g&&(s[f]=g(s[f])))}function c(f,g){try{l(i[f](g))}catch(v){d(n[0][3],v)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):d(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function d(f,g){f(g),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,r;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,n){t[s]=e[s]?function(o){return(r=!r)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var BI=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return BI(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}export function __classPrivateFieldSet(e,t,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var _I=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};export function __disposeResources(e){function t(i){e.error=e.hasError?new _I(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function r(){for(;e.stack.length;){var i=e.stack.pop();try{var s=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(s).then(r,function(n){return t(n),r()})}catch(n){t(n)}}if(e.hasError)throw e.error}return r()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var zI=Object.create,nm=Object.defineProperty,WI=Object.getOwnPropertyDescriptor,Zy=Object.getOwnPropertyNames,VI=Object.getPrototypeOf,qI=Object.prototype.hasOwnProperty,GI=(e,t)=>function(){return t||(0,e[Zy(e)[0]])((t={exports:{}}).exports,t),t.exports},JI=(e,t)=>{for(var r in t)nm(e,r,{get:t[r],enumerable:!0})},QI=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Zy(t))!qI.call(e,s)&&s!==r&&nm(e,s,{get:()=>t[s],enumerable:!(i=WI(t,s))||i.enumerable});return e},Ky=(e,t,r)=>(r=e!=null?zI(VI(e)):{},QI(t||!e||!e.__esModule?nm(r,"default",{value:e,enumerable:!0}):r,e)),e4=GI({"node_modules/minimist/index.js"(e,t){"use strict";function r(n,o){var a=n;o.slice(0,-1).forEach(function(l){a=a[l]||{}});var c=o[o.length-1];return c in a}function i(n){return typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}function s(n,o){return o==="constructor"&&typeof n[o]=="function"||o==="__proto__"}t.exports=function(n,o){o||(o={});var a={bools:{},strings:{},unknownFn:null};typeof o.unknown=="function"&&(a.unknownFn=o.unknown),typeof o.boolean=="boolean"&&o.boolean?a.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(U){a.bools[U]=!0});var c={};function l(U){return c[U].some(function(ne){return a.bools[ne]})}Object.keys(o.alias||{}).forEach(function(U){c[U]=[].concat(o.alias[U]),c[U].forEach(function(ne){c[ne]=[U].concat(c[U].filter(function(ce){return ne!==ce}))})}),[].concat(o.string).filter(Boolean).forEach(function(U){a.strings[U]=!0,c[U]&&[].concat(c[U]).forEach(function(ne){a.strings[ne]=!0})});var u=o.default||{},h={_:[]};function d(U,ne){return a.allBools&&/^--[^=]+$/.test(ne)||a.strings[U]||a.bools[U]||c[U]}function f(U,ne,ce){for(var ve=U,We=0;We<ne.length-1;We++){var G=ne[We];if(s(ve,G))return;ve[G]===void 0&&(ve[G]={}),(ve[G]===Object.prototype||ve[G]===Number.prototype||ve[G]===String.prototype)&&(ve[G]={}),ve[G]===Array.prototype&&(ve[G]=[]),ve=ve[G]}var B=ne[ne.length-1];s(ve,B)||((ve===Object.prototype||ve===Number.prototype||ve===String.prototype)&&(ve={}),ve===Array.prototype&&(ve=[]),ve[B]===void 0||a.bools[B]||typeof ve[B]=="boolean"?ve[B]=ce:Array.isArray(ve[B])?ve[B].push(ce):ve[B]=[ve[B],ce])}function g(U,ne,ce){if(!(ce&&a.unknownFn&&!d(U,ce)&&a.unknownFn(ce)===!1)){var ve=!a.strings[U]&&i(ne)?Number(ne):ne;f(h,U.split("."),ve),(c[U]||[]).forEach(function(We){f(h,We.split("."),ve)})}}Object.keys(a.bools).forEach(function(U){g(U,u[U]===void 0?!1:u[U])});var v=[];n.indexOf("--")!==-1&&(v=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var y=0;y<n.length;y++){var E=n[y],k,I;if(/^--.+=/.test(E)){var D=E.match(/^--([^=]+)=([\s\S]*)$/);k=D[1];var T=D[2];a.bools[k]&&(T=T!=="false"),g(k,T,E)}else if(/^--no-.+/.test(E))k=E.match(/^--no-(.+)/)[1],g(k,!1,E);else if(/^--.+/.test(E))k=E.match(/^--(.+)/)[1],I=n[y+1],I!==void 0&&!/^(-|--)[^-]/.test(I)&&!a.bools[k]&&!a.allBools&&(!c[k]||!l(k))?(g(k,I,E),y+=1):/^(true|false)$/.test(I)?(g(k,I==="true",E),y+=1):g(k,a.strings[k]?"":!0,E);else if(/^-[^-]+/.test(E)){for(var _=E.slice(1,-1).split(""),q=!1,W=0;W<_.length;W++){if(I=E.slice(W+2),I==="-"){g(_[W],I,E);continue}if(/[A-Za-z]/.test(_[W])&&I[0]==="="){g(_[W],I.slice(1),E),q=!0;break}if(/[A-Za-z]/.test(_[W])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(I)){g(_[W],I,E),q=!0;break}if(_[W+1]&&_[W+1].match(/\W/)){g(_[W],E.slice(W+2),E),q=!0;break}else g(_[W],a.strings[_[W]]?"":!0,E)}k=E.slice(-1)[0],!q&&k!=="-"&&(n[y+1]&&!/^(-|--)[^-]/.test(n[y+1])&&!a.bools[k]&&(!c[k]||!l(k))?(g(k,n[y+1],E),y+=1):n[y+1]&&/^(true|false)$/.test(n[y+1])?(g(k,n[y+1]==="true",E),y+=1):g(k,a.strings[k]?"":!0,E))}else if((!a.unknownFn||a.unknownFn(E)!==!1)&&h._.push(a.strings._||!i(E)?E:Number(E)),o.stopEarly){h._.push.apply(h._,n.slice(y+1));break}}return Object.keys(u).forEach(function(U){r(h,U.split("."))||(f(h,U.split("."),u[U]),(c[U]||[]).forEach(function(ne){f(h,ne.split("."),u[U])}))}),o["--"]?h["--"]=v.slice():v.forEach(function(U){h._.push(U)}),h}}}),YI=Ky(e4(),1);import*as XI from"net";var t4;function om(e,t){const r=Object.create(null);for(const i of e){const s=t(i);let n=r[s];n||(n=r[s]=[]),n.push(i)}return r}function ZI(e,t){const r=[],i=[];for(const s of e)t.has(s)||r.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:r,added:i}}var QW=class{static{t4=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[t4]="SetWithKey";for(const r of e)this.add(r)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(r=>e.call(t,r,r,this))}[Symbol.iterator](){return this.values()}},KI=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?oi.isErrorNoTelemetry(e)?new oi(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},wh=new KI;function am(e){wh.setUnexpectedErrorHandler(e)}function eP(e){if(!e||typeof e!="object")return!1;const t=e;return t.code==="EPIPE"&&t.syscall?.toUpperCase()==="WRITE"}function bh(e){wh.onUnexpectedError(e)}function pt(e){Ni(e)||wh.onUnexpectedError(e)}function cm(e){Ni(e)||wh.onUnexpectedExternalError(e)}function Nc(e){if(e instanceof Error){const{name:t,message:r}=e,i=e.stacktrace||e.stack;return{$isError:!0,name:t,message:r,stack:i,noTelemetry:oi.isErrorNoTelemetry(e)}}return e}function tP(e){let t;return e.noTelemetry?t=new oi:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,t}var yh="Canceled";function Ni(e){return e instanceof Xt?!0:e instanceof Error&&e.name===yh&&e.message===yh}var Xt=class extends Error{constructor(){super(yh),this.name=this.message}};function Fc(){const e=new Error(yh);return e.name=e.message,e}function Se(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function lm(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var Nn=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}};function r4(e){return e?e.message?e.message:e.stack?e.stack.split(`
`)[0]:String(e):"Error"}var rP=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},um=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},oi=class Iy extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Iy)return t;const r=new Iy;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},qo=class h3 extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,h3.prototype)}};function xh(e,t){const r=this;let i=!1,s;return function(){if(i)return s;if(i=!0,t)try{s=e.apply(r,arguments)}finally{t()}else s=e.apply(r,arguments);return s}}function iP(e,t){const r=sP(e,t);if(r!==-1)return e[r]}function sP(e,t,r=e.length-1){for(let i=r;i>=0;i--){const s=e[i];if(t(s))return i}return-1}function nP(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}function oP(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?n=o:s=o+1}return s}var YW=class d3{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(d3.assertInvariants){if(this.d){for(const i of this.e)if(this.d(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const r=nP(this.e,t,this.c);return this.c=r+1,r===-1?void 0:this.e[r]}};function Fi(e,t,r=(i,s)=>i===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}function aP(e,t){const r=[];let i;for(const s of e.slice(0).sort(t))!i||t(i[0],s)!==0?(i=[s],r.push(i)):i.push(s);return r}function i4(e,t,r){const i=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=r(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return i}function cP(e,t,r){const i=i4(e,t,r),s=[],n=[];for(const o of i)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function lP(e,t,r,i,s){return r===0?Promise.resolve([]):new Promise((n,o)=>{(async()=>{const a=e.length,c=e.slice(0,r).sort(t);for(let l=r,u=Math.min(r+i,a);l<a;l=u,u=Math.min(u+i,a)){if(l>r&&await new Promise(h=>setTimeout(h)),s&&s.isCancellationRequested)throw new Xt;uP(e,t,c,l,u)}return c})().then(n,o)})}function uP(e,t,r,i,s){for(const n=r.length;i<s;i++){const o=e[i];if(t(o,r[n-1])<0){r.pop();const a=oP(r,c=>t(o,c)<0);r.splice(a,0,o)}}}function St(e){return e.filter(t=>!!t)}function hP(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function hm(e){return!Array.isArray(e)||e.length===0}function Oc(e){return Array.isArray(e)&&e.length>0}function Go(e,t=r=>r){const r=new Set;return e.filter(i=>{const s=t(i);return r.has(s)?!1:(r.add(s),!0)})}function s4(e,t){return e.push(t),()=>dP(e,t)}function dP(e,t){const r=e.indexOf(t);if(r>-1)return e.splice(r,1),t}function n4(e,t){let r;if(typeof t=="number"){let i=t;r=()=>{const s=Math.sin(i++)*179426549;return s-Math.floor(s)}}else r=Math.random;for(let i=e.length-1;i>0;i-=1){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}}function Eh(e,t){return Array.isArray(e)?e.map(t):t(e)}function Oi(e){return Array.isArray(e)?e:[e]}var dm;(function(e){function t(n){return n<0}e.isLessThan=t;function r(n){return n<=0}e.isLessThanOrEqual=r;function i(n){return n>0}e.isGreaterThan=i;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(dm||(dm={}));function fP(e,t){return(r,i)=>t(e(r),e(i))}var pP=(e,t)=>e-t,XW=class jg{static{this.empty=new jg(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(r=>(t(r),!0))}toArray(){const t=[];return this.iterate(r=>(t.push(r),!0)),t}filter(t){return new jg(r=>this.iterate(i=>t(i)?r(i):!0))}map(t){return new jg(r=>this.iterate(i=>r(t(i))))}some(t){let r=!1;return this.iterate(i=>(r=t(i),!r)),r}findFirst(t){let r;return this.iterate(i=>t(i)?(r=i,!1):!0),r}findLast(t){let r;return this.iterate(i=>(t(i)&&(r=i),!0)),r}findLastMaxBy(t){let r,i=!0;return this.iterate(s=>((i||dm.isGreaterThan(t(s,r)))&&(i=!1,r=s),!0)),r}},o4,a4,c4;function gP(e,t,r){let i=e.get(t);return i===void 0&&(i=r,e.set(t,i)),i}var mP=class{constructor(e,t){this.uri=e,this.value=t}};function vP(e){return Array.isArray(e)}var zt=class ah{static{this.c=t=>t.toString()}constructor(t,r){if(this[o4]="ResourceMap",t instanceof ah)this.d=new Map(t.d),this.e=r??ah.c;else if(vP(t)){this.d=new Map,this.e=r??ah.c;for(const[i,s]of t)this.set(i,s)}else this.d=new Map,this.e=t??ah.c}set(t,r){return this.d.set(this.e(t),new mP(t,r)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,r){typeof r<"u"&&(t=t.bind(r));for(const[i,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(o4=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},l4=class{constructor(e,t){this[a4]="ResourceSet",!e||typeof e=="function"?this.c=new zt(e):(this.c=new zt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(a4=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},u4;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(u4||(u4={}));var wP=class{constructor(){this[c4]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const r=this.c.get(e);if(r)return t!==0&&this.m(r,t),r.value}set(e,t,r=0){let i=this.c.get(e);if(i)i.value=t,r!==0&&this.m(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.k(i);break;case 1:this.j(i);break;case 2:this.k(i);break;default:this.k(i);break}this.c.set(e,i),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.l(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.l(e),this.f--,e.value}forEach(e,t){const r=this.g;let i=this.d;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this.g!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[(c4=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.next,r--;this.d=t,this.f=r,t&&(t.previous=void 0),this.g++}i(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.previous,r--;this.e=t,this.f=r,t&&(t.next=void 0),this.g++}j(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}k(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}l(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this.g++}m(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const r=e.next,i=e.previous;e===this.e?(i.next=void 0,this.e=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const r=e.next,i=e.previous;e===this.d?(r.previous=void 0,this.d=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}},bP=class extends wP{constructor(e,t=1){super(),this.n=e,this.o=Math.min(Math.max(0,t),1)}get limit(){return this.n}set limit(e){this.n=e,this.p()}get ratio(){return this.o}set ratio(e){this.o=Math.min(Math.max(0,e),1),this.p()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}p(){this.size>this.n&&this.q(Math.round(this.n*this.o))}},Mc=class extends bP{constructor(e,t=1){super(e,t)}q(e){this.h(e)}set(e,t){return super.set(e,t),this.p(),this}},h4=class{constructor(){this.c=new Map}add(e,t){let r=this.c.get(e);r||(r=new Set,this.c.set(e,r)),r.add(t)}delete(e,t){const r=this.c.get(e);r&&(r.delete(t),r.size===0&&this.c.delete(e))}forEach(e,t){const r=this.c.get(e);r&&r.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}},Hr;(function(e){function t(D){return D&&typeof D=="object"&&typeof D[Symbol.iterator]=="function"}e.is=t;const r=Object.freeze([]);function i(){return r}e.empty=i;function*s(D){yield D}e.single=s;function n(D){return t(D)?D:s(D)}e.wrap=n;function o(D){return D||r}e.from=o;function*a(D){for(let T=D.length-1;T>=0;T--)yield D[T]}e.reverse=a;function c(D){return!D||D[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(D){return D[Symbol.iterator]().next().value}e.first=l;function u(D,T){let _=0;for(const q of D)if(T(q,_++))return!0;return!1}e.some=u;function h(D,T){for(const _ of D)if(T(_))return _}e.find=h;function*d(D,T){for(const _ of D)T(_)&&(yield _)}e.filter=d;function*f(D,T){let _=0;for(const q of D)yield T(q,_++)}e.map=f;function*g(D,T){let _=0;for(const q of D)yield*T(q,_++)}e.flatMap=g;function*v(...D){for(const T of D)yield*T}e.concat=v;function y(D,T,_){let q=_;for(const W of D)q=T(q,W);return q}e.reduce=y;function*E(D,T,_=D.length){for(T<-D.length&&(T=0),T<0&&(T+=D.length),_<0?_+=D.length:_>D.length&&(_=D.length);T<_;T++)yield D[T]}e.slice=E;function k(D,T=Number.POSITIVE_INFINITY){const _=[];if(T===0)return[_,D];const q=D[Symbol.iterator]();for(let W=0;W<T;W++){const U=q.next();if(U.done)return[_,e.empty()];_.push(U.value)}return[_,{[Symbol.iterator](){return q}}]}e.consume=k;async function I(D){const T=[];for await(const _ of D)T.push(_);return Promise.resolve(T)}e.asyncToArray=I})(Hr||(Hr={}));var yP=!1,Jo=null,ZW=class f3{constructor(){this.b=new Map}static{this.a=0}c(t){let r=this.b.get(t);return r||(r={parent:null,source:null,isSingleton:!1,value:t,idx:f3.a++},this.b.set(t,r)),r}trackDisposable(t){const r=this.c(t);r.source||(r.source=new Error().stack)}setParent(t,r){const i=this.c(t);i.parent=r}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,r){const i=r.get(t);if(i)return i;const s=t.parent?this.f(this.c(t.parent),r):t;return r.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,i])=>i.source!==null&&!this.f(i,t).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(t=10,r){let i;if(r)i=r;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(i=l.filter(h=>!(h.parent&&u.has(h.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function s(c){function l(h,d){for(;h.length>0&&d.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new h4;for(const c of i){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}i.sort(fP(c=>c.idx,pP));let o="",a=0;for(const c of i.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let d=l[h];d=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${i.length} leaks) at ${d}`;const g=n.get(l.slice(0,h).join(`
`)),v=om([...g].map(y=>s(y)[h]),y=>y);delete v[l[h]];for(const[y,E]of Object.entries(v))u.unshift(`    - stacktraces of ${E.length} other leaks continue with ${y}`);u.unshift(d)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>t&&(o+=`


... and ${i.length-t} more leaking disposables

`),{leaks:i,details:o}}};function xP(e){Jo=e}if(yP){const e="__is_disposable_tracked__";xP(new class{trackDisposable(t){const r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(r)},3e3)}setParent(t,r){if(t&&t!==K.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==K.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function Qo(e){return Jo?.trackDisposable(e),e}function Yo(e){Jo?.markAsDisposed(e)}function Uc(e,t){Jo?.setParent(e,t)}function EP(e,t){if(Jo)for(const r of e)Jo.setParent(r,t)}function kP(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function ai(e){if(Hr.is(e)){const t=[];for(const r of e)if(r)try{r.dispose()}catch(i){t.push(i)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function d4(...e){const t=te(()=>ai(e));return EP(e,t),t}function te(e){const t=Qo({dispose:xh(()=>{Yo(t),e()})});return t}var he=class p3{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,Qo(this)}dispose(){this.g||(Yo(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{ai(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Uc(t,this),this.g?p3.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Uc(t,null))}},K=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new he,Qo(this),Uc(this.q,this)}dispose(){Yo(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},os=class{constructor(){this.b=!1,Qo(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Uc(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,Yo(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Uc(e,null),e}},kh=class{constructor(){this.a=new Map,this.b=!1,Qo(this)}dispose(){Yo(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{ai(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,r=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),r||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},$t=class Hg{static{this.Undefined=new Hg(void 0)}constructor(t){this.element=t,this.next=Hg.Undefined,this.prev=Hg.Undefined}},jc=class{constructor(){this.a=$t.Undefined,this.b=$t.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===$t.Undefined}clear(){let e=this.a;for(;e!==$t.Undefined;){const t=e.next;e.prev=$t.Undefined,e.next=$t.Undefined,e=t}this.a=$t.Undefined,this.b=$t.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const r=new $t(e);if(this.a===$t.Undefined)this.a=r,this.b=r;else if(t){const s=this.b;this.b=r,r.prev=s,s.next=r}else{const s=this.a;this.a=r,r.next=s,s.prev=r}this.c+=1;let i=!1;return()=>{i||(i=!0,this.e(r))}}shift(){if(this.a!==$t.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==$t.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==$t.Undefined&&e.next!==$t.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===$t.Undefined&&e.next===$t.Undefined?(this.a=$t.Undefined,this.b=$t.Undefined):e.next===$t.Undefined?(this.b=this.b.prev,this.b.next=$t.Undefined):e.prev===$t.Undefined&&(this.a=this.a.next,this.a.prev=$t.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==$t.Undefined;)yield e.element,e=e.next}},SP=globalThis.performance&&typeof globalThis.performance.now=="function",Ar=class g3{static create(t){return new g3(t)}constructor(t){this.c=SP&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},$P=!1,f4=!1,CP=!1,je;(function(e){e.None=()=>K.None;function t(G){if(CP){const{onDidAddListener:B}=G,Z=fm.create();let z=0;G.onDidAddListener=()=>{++z===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Z.print()),B?.()}}}function r(G,B){return f(G,()=>{},0,void 0,!0,void 0,B)}e.defer=r;function i(G){return(B,Z=null,z)=>{let ae=!1,ye;return ye=G(de=>{if(!ae)return ye?ye.dispose():ae=!0,B.call(Z,de)},null,z),ae&&ye.dispose(),ye}}e.once=i;function s(G,B){return e.once(e.filter(G,B))}e.onceIf=s;function n(G,B,Z){return h((z,ae=null,ye)=>G(de=>z.call(ae,B(de)),null,ye),Z)}e.map=n;function o(G,B,Z){return h((z,ae=null,ye)=>G(de=>{B(de),z.call(ae,de)},null,ye),Z)}e.forEach=o;function a(G,B,Z){return h((z,ae=null,ye)=>G(de=>B(de)&&z.call(ae,de),null,ye),Z)}e.filter=a;function c(G){return G}e.signal=c;function l(...G){return(B,Z=null,z)=>{const ae=d4(...G.map(ye=>ye(de=>B.call(Z,de))));return d(ae,z)}}e.any=l;function u(G,B,Z,z){let ae=Z;return n(G,ye=>(ae=B(ae,ye),ae),z)}e.reduce=u;function h(G,B){let Z;const z={onWillAddFirstListener(){Z=G(ae.fire,ae)},onDidRemoveLastListener(){Z?.dispose()}};B||t(z);const ae=new P(z);return B?.add(ae),ae.event}function d(G,B){return B instanceof Array?B.push(G):B&&B.add(G),G}function f(G,B,Z=100,z=!1,ae=!1,ye,de){let et,Qe,Rt,Dt=0,Qt;const at={leakWarningThreshold:ye,onWillAddFirstListener(){et=G(Vs=>{Dt++,Qe=B(Qe,Vs),z&&!Rt&&(or.fire(Qe),Qe=void 0),Qt=()=>{const rs=Qe;Qe=void 0,Rt=void 0,(!z||Dt>1)&&or.fire(rs),Dt=0},typeof Z=="number"?(clearTimeout(Rt),Rt=setTimeout(Qt,Z)):Rt===void 0&&(Rt=0,queueMicrotask(Qt))})},onWillRemoveListener(){ae&&Dt>0&&Qt?.()},onDidRemoveLastListener(){Qt=void 0,et.dispose()}};de||t(at);const or=new P(at);return de?.add(or),or.event}e.debounce=f;function g(G,B=0,Z){return e.debounce(G,(z,ae)=>z?(z.push(ae),z):[ae],B,void 0,!0,void 0,Z)}e.accumulate=g;function v(G,B=(z,ae)=>z===ae,Z){let z=!0,ae;return a(G,ye=>{const de=z||!B(ye,ae);return z=!1,ae=ye,de},Z)}e.latch=v;function y(G,B,Z){return[e.filter(G,B,Z),e.filter(G,z=>!B(z),Z)]}e.split=y;function E(G,B=!1,Z=[],z){let ae=Z.slice(),ye=G(Qe=>{ae?ae.push(Qe):et.fire(Qe)});z&&z.add(ye);const de=()=>{ae?.forEach(Qe=>et.fire(Qe)),ae=null},et=new P({onWillAddFirstListener(){ye||(ye=G(Qe=>et.fire(Qe)),z&&z.add(ye))},onDidAddFirstListener(){ae&&(B?setTimeout(de):de())},onDidRemoveLastListener(){ye&&ye.dispose(),ye=null}});return z&&z.add(et),et.event}e.buffer=E;function k(G,B){return(z,ae,ye)=>{const de=B(new D);return G(function(et){const Qe=de.evaluate(et);Qe!==I&&z.call(ae,Qe)},void 0,ye)}}e.chain=k;const I=Symbol("HaltChainable");class D{constructor(){this.f=[]}map(B){return this.f.push(B),this}forEach(B){return this.f.push(Z=>(B(Z),Z)),this}filter(B){return this.f.push(Z=>B(Z)?Z:I),this}reduce(B,Z){let z=Z;return this.f.push(ae=>(z=B(z,ae),z)),this}latch(B=(Z,z)=>Z===z){let Z=!0,z;return this.f.push(ae=>{const ye=Z||!B(ae,z);return Z=!1,z=ae,ye?ae:I}),this}evaluate(B){for(const Z of this.f)if(B=Z(B),B===I)break;return B}}function T(G,B,Z=z=>z){const z=(...et)=>de.fire(Z(...et)),ae=()=>G.on(B,z),ye=()=>G.removeListener(B,z),de=new P({onWillAddFirstListener:ae,onDidRemoveLastListener:ye});return de.event}e.fromNodeEventEmitter=T;function _(G,B,Z=z=>z){const z=(...et)=>de.fire(Z(...et)),ae=()=>G.addEventListener(B,z),ye=()=>G.removeEventListener(B,z),de=new P({onWillAddFirstListener:ae,onDidRemoveLastListener:ye});return de.event}e.fromDOMEventEmitter=_;function q(G){return new Promise(B=>i(G)(B))}e.toPromise=q;function W(G){const B=new P;return G.then(Z=>{B.fire(Z)},()=>{B.fire(void 0)}).finally(()=>{B.dispose()}),B.event}e.fromPromise=W;function U(G,B){return G(Z=>B.fire(Z))}e.forward=U;function ne(G,B,Z){return B(Z),G(z=>B(z))}e.runAndSubscribe=ne;class ce{constructor(B,Z){this._observable=B,this.f=0,this.g=!1;const z={onWillAddFirstListener:()=>{B.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{B.removeObserver(this)}};Z||t(z),this.emitter=new P(z),Z&&Z.add(this.emitter)}beginUpdate(B){this.f++}handlePossibleChange(B){}handleChange(B,Z){this.g=!0}endUpdate(B){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function ve(G,B){return new ce(G,B).emitter.event}e.fromObservable=ve;function We(G){return(B,Z,z)=>{let ae=0,ye=!1;const de={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(G.reportChanges(),ye&&(ye=!1,B.call(Z)))},handlePossibleChange(){},handleChange(){ye=!0}};G.addObserver(de),G.reportChanges();const et={dispose(){G.removeObserver(de)}};return z instanceof he?z.add(et):Array.isArray(z)&&z.push(et),et}}e.fromObservableLight=We})(je||(je={}));var IP=class Py{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Py.f++}`,Py.all.add(this)}start(t){this.g=new Ar,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},p4=-1,PP=class m3{static{this.f=1}constructor(t,r,i=(m3.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=r,this.name=i,this.h=0}dispose(){this.g?.clear()}check(t,r){const i=this.threshold;if(i<=0||r<i)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=i*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new DP(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,r=0;for(const[i,s]of this.g)(!t||r<s)&&(t=[i,s],r=s);return t}},fm=class v3{static create(){const t=new Error;return new v3(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},DP=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},AP=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},TP=0,Sh=class{constructor(e){this.value=e,this.id=TP++}},RP=2,g4=(e,t)=>{if(e instanceof Sh)t(e);else for(let r=0;r<e.length;r++){const i=e[r];i&&t(i)}},$h;if($P){const e=[];setInterval(()=>{e.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(e.join(`
`)),e.length=0)},3e3),$h=new FinalizationRegistry(t=>{typeof t=="string"&&e.push(t)})}var P=class{constructor(e){this.z=0,this.f=e,this.g=p4>0||this.f?.leakWarningThreshold?new PP(e?.onListenerError??pt,this.f?.leakWarningThreshold??p4):void 0,this.j=this.f?._profName?new IP(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(f4){const e=this.u;queueMicrotask(()=>{g4(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,r)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new AP(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||pt)(l),K.None}if(this.m)return K.None;t&&(e=e.bind(t));const i=new Sh(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(i.stack=fm.create(),s=this.g.check(i.stack,this.z+1)),f4&&(i.stack=n??fm.create()),this.u?this.u instanceof Sh?(this.w??=new LP,this.u=[this.u,i]):this.u.push(i):(this.f?.onWillAddFirstListener?.(this),this.u=i,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=te(()=>{$h?.unregister(o),s?.(),this.A(i)});if(r instanceof he?r.add(o):Array.isArray(r)&&r.push(o),$h){const a=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);$h.register(o,c?.[2]??a,o)}return o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[r]=void 0;const i=this.w.current===this;if(this.z*RP<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:i&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const r=this.f?.onListenerError||pt;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Sh)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},LP=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Hc=class extends P{async fireAsync(e,t,r){if(this.u)for(this.h||(this.h=new jc),g4(this.u,i=>this.h.push([i.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[i,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");r&&(a=r(a,i)),n.push(a)}};try{i(o)}catch(a){pt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&pt(c.reason)})}}},Bc=class extends P{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new jc,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},NP=class extends Bc{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},FP=class{constructor(){this.f=!1,this.g=je.None,this.h=K.None,this.j=new P({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(e){this.g=e,this.f&&(this.h.dispose(),this.h=e(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}},m4=Object.freeze(function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),Xe;(function(e){function t(r){return r===e.None||r===e.Cancelled||r instanceof Ch?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:je.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:m4})})(Xe||(Xe={}));var Ch=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?m4:(this.b||(this.b=new P),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},rt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Ch),this.f}cancel(){this.f?this.f instanceof Ch&&this.f.cancel():this.f=Xe.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Ch&&this.f.dispose():this.f=Xe.None}};function OP(){return globalThis._VSCODE_NLS_MESSAGES}function v4(){return globalThis._VSCODE_NLS_LANGUAGE}var MP=v4()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Ih(e,t){let r;return t.length===0?r=e:r=e.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0],o=t[n];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),MP&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function p(e,t,...r){return Ih(typeof e=="number"?w4(e,t):t,r)}function w4(e,t){const r=OP()?.[e];if(typeof r!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return r}function pm(e,t,...r){let i;typeof e=="number"?i=w4(e,t):i=t;const s=Ih(i,r);return{value:s,original:t===i?s:Ih(t,r)}}var Gs="en",_c=!1,zc=!1,Wc=!1,UP=!1,b4=!1,gm=!1,jP=!1,y4=!1,x4=!1,HP=!1,Ph=void 0,Dh=Gs,E4=Gs,BP=void 0,as=void 0,cs=globalThis,Br=void 0;typeof cs.vscode<"u"&&typeof cs.vscode.process<"u"?Br=cs.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Br=process);var k4=typeof Br?.versions?.electron=="string",_P=k4&&Br?.type==="renderer";if(typeof Br=="object"){_c=Br.platform==="win32",zc=Br.platform==="darwin",Wc=Br.platform==="linux",UP=Wc&&!!Br.env.SNAP&&!!Br.env.SNAP_REVISION,jP=k4,x4=!!Br.env.CI||!!Br.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Ph=Gs,Dh=Gs;const e=Br.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Ph=t.userLocale,E4=t.osLocale,Dh=t.resolvedLanguage||Gs,BP=t.languagePack?.translationsConfigFile}catch{}b4=!0}else typeof navigator=="object"&&!_P?(as=navigator.userAgent,_c=as.indexOf("Windows")>=0,zc=as.indexOf("Macintosh")>=0,y4=(as.indexOf("Macintosh")>=0||as.indexOf("iPad")>=0||as.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Wc=as.indexOf("Linux")>=0,HP=as?.indexOf("Mobi")>=0,gm=!0,Dh=v4()||Gs,Ph=navigator.language.toLowerCase(),E4=Ph):console.error("Unable to resolve platform.");var S4;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(S4||(S4={}));function zP(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Ah=0;zc?Ah=1:_c?Ah=3:Wc&&(Ah=2);var ze=_c,Nt=zc,bt=Wc,$4=b4,mm=gm,WP=gm&&typeof cs.importScripts=="function",VP=WP?cs.origin:void 0,Fn=x4,qP=Ah,Mi=as,Js=Dh,C4;(function(e){function t(){return Js}e.value=t;function r(){return Js.length===2?Js==="en":Js.length>=3?Js[0]==="e"&&Js[1]==="n"&&Js[2]==="-":!1}e.isDefaultVariant=r;function i(){return Js==="en"}e.isDefault=i})(C4||(C4={}));var GP=typeof cs.postMessage=="function"&&!cs.importScripts,I4=(()=>{if(GP){const e=[];cs.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.id===r.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),cs.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),P4;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(P4||(P4={}));var vm=zc||y4?2:_c?1:3,D4=!0,A4=!1;function T4(){if(!A4){A4=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,D4=new Uint16Array(e.buffer)[0]===513}return D4}var wm=!!(Mi&&Mi.indexOf("Chrome")>=0),JP=!!(Mi&&Mi.indexOf("Firefox")>=0),QP=!!(!wm&&Mi&&Mi.indexOf("Safari")>=0),R4=!!(Mi&&Mi.indexOf("Edg/")>=0),KW=!!(Mi&&Mi.indexOf("Android")>=0),On,bm=globalThis.vscode;if(typeof bm<"u"&&typeof bm.process<"u"){const e=bm.process;On={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?On={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:On={get platform(){return ze?"win32":Nt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Mn=On.cwd,Un=On.env,YP=On.platform,eV=On.arch,XP=65,ZP=97,KP=90,eD=122,Qs=46,Zt=47,Tr=92,Ys=58,tD=63,L4=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${i} of type ${t}`;n+=`. Received type ${typeof r}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function rD(e,t){if(e===null||typeof e!="object")throw new L4(t,"Object",e)}function At(e,t){if(typeof e!="string")throw new L4(t,"string",e)}var Rr=YP==="win32";function De(e){return e===Zt||e===Tr}function ym(e){return e===Zt}function Xs(e){return e>=XP&&e<=KP||e>=ZP&&e<=eD}function Th(e,t,r,i){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=Zt}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==Qs||s.charCodeAt(s.length-2)!==Qs){if(s.length>2){const u=s.lastIndexOf(r);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(r)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${r}..`:"..",n=2)}else s.length>0?s+=`${r}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===Qs&&a!==-1?++a:a=-1}return s}function iD(e){return e?`${e[0]==="."?"":"."}${e}`:""}function N4(e,t){rD(t,"pathObject");const r=t.dir||t.root,i=t.base||`${t.name||""}${iD(t.ext)}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}var Tt={resolve(...e){let t="",r="",i=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],At(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=Mn():(n=Un[`=${t}`]||Mn(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Tr)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)De(u)&&(a=1,l=!0);else if(De(u))if(l=!0,De(n.charCodeAt(1))){let h=2,d=h;for(;h<o&&!De(n.charCodeAt(h));)h++;if(h<o&&h!==d){const f=n.slice(d,h);for(d=h;h<o&&De(n.charCodeAt(h));)h++;if(h<o&&h!==d){for(d=h;h<o&&!De(n.charCodeAt(h));)h++;(h===o||h!==d)&&(c=`\\\\${f}\\${n.slice(d,h)}`,a=h)}}}else a=1;else Xs(u)&&n.charCodeAt(1)===Ys&&(c=n.slice(0,2),a=2,o>2&&De(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(r=`${n.slice(a)}\\${r}`,i=l,l&&t.length>0)break}return r=Th(r,!i,"\\",De),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){At(e,"path");const t=e.length;if(t===0)return".";let r=0,i,s=!1;const n=e.charCodeAt(0);if(t===1)return ym(n)?"\\":e;if(De(n))if(s=!0,De(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!De(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&De(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!De(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${e.slice(c,a)}`,r=a)}}}else r=1;else Xs(n)&&e.charCodeAt(1)===Ys&&(i=e.slice(0,2),r=2,t>2&&De(e.charCodeAt(2))&&(s=!0,r=3));let o=r<t?Th(e.slice(r),!s,"\\",De):"";return o.length===0&&!s&&(o="."),o.length>0&&De(e.charCodeAt(t-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){At(e,"path");const t=e.length;if(t===0)return!1;const r=e.charCodeAt(0);return De(r)||t>2&&Xs(r)&&e.charCodeAt(1)===Ys&&De(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,r;for(let n=0;n<e.length;++n){const o=e[n];At(o,"path"),o.length>0&&(t===void 0?t=r=o:t+=`\\${o}`)}if(t===void 0)return".";let i=!0,s=0;if(typeof r=="string"&&De(r.charCodeAt(0))){++s;const n=r.length;n>1&&De(r.charCodeAt(1))&&(++s,n>2&&(De(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<t.length&&De(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Tt.normalize(t)},relative(e,t){if(At(e,"from"),At(t,"to"),e===t)return"";const r=Tt.resolve(e),i=Tt.resolve(t);if(r===i||(e=r.toLowerCase(),t=i.toLowerCase(),e===t))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===Tr;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Tr;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Tr;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Tr;)c--;const l=c-a,u=o<l?o:l;let h=-1,d=0;for(;d<u;d++){const g=e.charCodeAt(s+d);if(g!==t.charCodeAt(a+d))break;g===Tr&&(h=d)}if(d!==u){if(h===-1)return i}else{if(l>u){if(t.charCodeAt(a+d)===Tr)return i.slice(a+d+1);if(d===2)return i.slice(a+d)}o>u&&(e.charCodeAt(s+d)===Tr?h=d:d===2&&(h=3)),h===-1&&(h=0)}let f="";for(d=s+h+1;d<=n;++d)(d===n||e.charCodeAt(d)===Tr)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${i.slice(a,c)}`:(i.charCodeAt(a)===Tr&&++a,i.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Tt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Tr){if(t.charCodeAt(1)===Tr){const r=t.charCodeAt(2);if(r!==tD&&r!==Qs)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Xs(t.charCodeAt(0))&&t.charCodeAt(1)===Ys&&t.charCodeAt(2)===Tr)return`\\\\?\\${t}`;return e},dirname(e){At(e,"path");const t=e.length;if(t===0)return".";let r=-1,i=0;const s=e.charCodeAt(0);if(t===1)return De(s)?e:".";if(De(s)){if(r=i=1,De(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!De(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&De(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!De(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(r=i=a+1)}}}}else Xs(s)&&e.charCodeAt(1)===Ys&&(r=t>2&&De(e.charCodeAt(2))?3:2,i=r);let n=-1,o=!0;for(let a=t-1;a>=i;--a)if(De(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(r===-1)return".";n=r}return e.slice(0,n)},basename(e,t){t!==void 0&&At(t,"suffix"),At(e,"path");let r=0,i=-1,s=!0,n;if(e.length>=2&&Xs(e.charCodeAt(0))&&e.charCodeAt(1)===Ys&&(r=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(De(c)){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(De(e.charCodeAt(n))){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){At(e,"path");let t=0,r=-1,i=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===Ys&&Xs(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(De(c)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===Qs?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===i+1?"":e.slice(r,s)},format:N4.bind(null,"\\"),parse(e){At(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.length;let i=0,s=e.charCodeAt(0);if(r===1)return De(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(De(s)){if(i=1,De(e.charCodeAt(1))){let h=2,d=h;for(;h<r&&!De(e.charCodeAt(h));)h++;if(h<r&&h!==d){for(d=h;h<r&&De(e.charCodeAt(h));)h++;if(h<r&&h!==d){for(d=h;h<r&&!De(e.charCodeAt(h));)h++;h===r?i=h:h!==d&&(i=h+1)}}}}else if(Xs(s)&&e.charCodeAt(1)===Ys){if(r<=2)return t.root=t.dir=e,t;if(i=2,De(e.charCodeAt(2))){if(r===3)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let n=-1,o=i,a=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(s=e.charCodeAt(l),De(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===Qs?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==i?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},sD=(()=>{if(Rr){const e=/\\/g;return()=>{const t=Mn().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>Mn()})(),Re={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=-1&&!r;i--){const s=i>=0?e[i]:sD();At(s,`paths[${i}]`),s.length!==0&&(t=`${s}/${t}`,r=s.charCodeAt(0)===Zt)}return t=Th(t,!r,"/",ym),r?`/${t}`:t.length>0?t:"."},normalize(e){if(At(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Zt,r=e.charCodeAt(e.length-1)===Zt;return e=Th(e,!t,"/",ym),e.length===0?t?"/":r?"./":".":(r&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return At(e,"path"),e.length>0&&e.charCodeAt(0)===Zt},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];At(i,"path"),i.length>0&&(t===void 0?t=i:t+=`/${i}`)}return t===void 0?".":Re.normalize(t)},relative(e,t){if(At(e,"from"),At(t,"to"),e===t||(e=Re.resolve(e),t=Re.resolve(t),e===t))return"";const r=1,i=e.length,s=i-r,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(r+l);if(h!==t.charCodeAt(n+l))break;h===Zt&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Zt)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(r+l)===Zt?c=l:l===0&&(c=0));let u="";for(l=r+c+1;l<=i;++l)(l===i||e.charCodeAt(l)===Zt)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(At(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Zt;let r=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Zt){if(!i){r=s;break}}else i=!1;return r===-1?t?"/":".":t&&r===1?"//":e.slice(0,r)},basename(e,t){t!==void 0&&At(t,"ext"),At(e,"path");let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Zt){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Zt){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){At(e,"path");let t=-1,r=0,i=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===Zt){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===Qs?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:N4.bind(null,"/"),parse(e){At(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.charCodeAt(0)===Zt;let i;r?(t.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const u=e.charCodeAt(c);if(u===Zt){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===Qs?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&r?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Re.win32=Tt.win32=Tt,Re.posix=Tt.posix=Re;var ls=Rr?Tt.normalize:Re.normalize,Ui=Rr?Tt.isAbsolute:Re.isAbsolute,Ve=Rr?Tt.join:Re.join,nD=Rr?Tt.resolve:Re.resolve,Xo=Rr?Tt.relative:Re.relative,gr=Rr?Tt.dirname:Re.dirname,ut=Rr?Tt.basename:Re.basename,Rh=Rr?Tt.extname:Re.extname,tV=Rr?Tt.format:Re.format,rV=Rr?Tt.parse:Re.parse,iV=Rr?Tt.toNamespacedPath:Re.toNamespacedPath,gt=Rr?Tt.sep:Re.sep,F4=Rr?Tt.delimiter:Re.delimiter;function oD(e){return e}var aD=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=oD):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},Lr=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}};function Lh(e){return!e||typeof e!="string"?!0:e.trim().length===0}var cD=/{([^}]+)}/g;function O4(e,t){return Object.keys(t).length===0?e:e.replace(cD,(r,i)=>t[i]??r)}function Zs(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function lD(e,t){let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function uD(e,t){if(!e||!t)return e;const r=t.length;if(r===0||e.length===0)return e;let i=0;for(;e.indexOf(t,i)===i;)i=i+r;return e.substring(i)}function Ks(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+r!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function hD(e){return e.replace(/\*/g,"")}function M4(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Zs(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function U4(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function j4(e){return e.split(/\r\n|\r|\n/)}function xm(e){for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function dD(e,t=e.length-1){for(let r=t;r>=0;r--){const i=e.charCodeAt(r);if(i!==32&&i!==9)return r}return-1}function fD(e,t,r){const i=[];let s=0;for(const n of e.matchAll(t)){if(i.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,i.push(r(n[0],...n.slice(1),n.index,e,n.groups))}return i.push(e.slice(s)),Promise.all(i).then(n=>n.join(""))}function jn(e,t){return e<t?-1:e>t?1:0}function Em(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){const c=e.charCodeAt(r),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function H4(e,t){return Vc(e,t,0,e.length,0,t.length)}function Vc(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){let c=e.charCodeAt(r),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Em(e.toLowerCase(),t.toLowerCase(),r,i,s,n);B4(c)&&(c-=32),B4(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function B4(e){return e>=97&&e<=122}function _4(e){return e>=65&&e<=90}function ci(e,t){return e.length===t.length&&Vc(e,t)===0}function Nh(e,t){const r=t.length;return t.length>e.length?!1:Vc(e,t,0,r)===0}function pD(e,t){const r=Math.min(e.length,t.length);let i;for(i=0;i<r;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return r}function Fh(e){return 55296<=e&&e<=56319}function Oh(e){return 56320<=e&&e<=57343}function km(e,t){return(e-55296<<10)+(t-56320)+65536}function z4(e,t,r){const i=e.charCodeAt(r);if(Fh(i)&&r+1<t){const s=e.charCodeAt(r+1);if(Oh(s))return km(i,s)}return i}function gD(e,t){const r=e.charCodeAt(t-1);if(Oh(r)&&t>1){const i=e.charCodeAt(t-2);if(Fh(i))return km(i,r)}return r}var mD=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=gD(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=z4(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},vD=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new mD(e,t)}nextGraphemeLength(){const e=Y4.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(J4(i,n)){t.setOffset(s);break}i=n}return t.offset-r}prevGraphemeLength(){const e=Y4.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(J4(n,i)){t.setOffset(s);break}i=n}return r-t.offset}eol(){return this.c.eol()}};function W4(e,t){return new vD(e,t).nextGraphemeLength()}var Sm=void 0;function wD(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function V4(e){return Sm||(Sm=wD()),Sm.test(e)}var bD=/^[\t\n\r\x20-\x7E]*$/;function yD(e){return bD.test(e)}var xD=/[\u2028\u2029]/;function q4(e){return xD.test(e)}var ED="\uFEFF";function kD(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function SD(e,t){if(!e||!t||e.length<t.length)return!1;const r=t.length,i=e.toLowerCase();let s=0,n=-1;for(;s<r;){const o=i.indexOf(t[s],n+1);if(o<0)return!1;n=o,s++}return!0}function G4(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function $D(e){return e.charAt(0).toUpperCase()+e.slice(1)}function CD(e,t=1){if(t===0)return"";let r=-1;do r=e.indexOf(`
`,r+1),t--;while(t>0&&r>=0);return r===-1?e:(e[r-1]==="\r"&&r--,e.substr(0,r))}function J4(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var Q4;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(Q4||(Q4={}));var Y4=class ch{static{this.c=null}static getInstance(){return ch.c||(ch.c=new ch),ch.c}constructor(){this.d=ID()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const r=this.d,i=r.length/3;let s=1;for(;s<=i;)if(t<r[3*s])s=2*s;else if(t>r[3*s+1])s=2*s+1;else return r[3*s+2];return 0}};function ID(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var X4;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(X4||(X4={}));var sV=class lh{static{this.c=new Lr(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new aD({getCacheKey:JSON.stringify},t=>{function r(u){const h=new Map;for(let d=0;d<u.length;d+=2)h.set(u[d],u[d+1]);return h}function i(u,h){const d=new Map(u);for(const[f,g]of h)d.set(f,g);return d}function s(u,h){if(!u)return h;const d=new Map;for(const[f,g]of u)h.has(f)&&d.set(f,g);return d}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=r(n[u]);a=s(a,h)}const c=r(n._common),l=i(c,a);return new lh(l)})}static getInstance(t){return lh.d.get(Array.from(t))}static{this.e=new Lr(()=>Object.keys(lh.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return lh.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},nV=class uh{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(uh.c())),this.d}static isInvisibleCharacter(t){return uh.e().has(t)}static containsInvisibleCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&uh.isInvisibleCharacter(i))return!0}return!1}static get codePoints(){return uh.e()}};function Pe(e){return typeof e=="string"}function PD(e){return Array.isArray(e)&&e.every(t=>Pe(t))}function mt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function DD(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function _r(e){return typeof e=="number"&&!isNaN(e)}function Z4(e){return e===!0||e===!1}function qc(e){return typeof e>"u"}function Hn(e){return!yt(e)}function yt(e){return qc(e)||e===null}function K4(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function Zo(e){if(yt(e))throw new Error("Assertion Failed: argument is undefined or null");return e}var AD=Object.prototype.hasOwnProperty;function e5(e){if(!mt(e))return!1;for(const t in e)if(AD.call(e,t))return!1;return!0}function TD(e){return typeof e=="function"}function RD(e,t){if(Pe(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(TD(t)){try{if(e instanceof t)return}catch{}if(!yt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function en(e){return e===47||e===92}function t5(e){return e.replace(/[\\/]/g,Re.sep)}function LD(e){return e.indexOf("/")===-1&&(e=t5(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function $m(e,t=Re.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(en(i)){if(en(e.charCodeAt(1))&&!en(e.charCodeAt(2))){let n=3;const o=n;for(;n<r&&!en(e.charCodeAt(n));n++);if(o!==n&&!en(e.charCodeAt(n+1))){for(n+=1;n<r;n++)if(en(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(r5(i)&&e.charCodeAt(1)===58)return en(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<r;s++)if(en(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var ND=/[\\/:\*\?"<>\|]/g,FD=/[/]/g,OD=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function MD(e,t=ze){const r=t?ND:FD;return!(!e||e.length===0||/^\s+$/.test(e)||(r.lastIndex=0,r.test(e))||t&&OD.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Cm(e,t,r){const i=e===t;return!r||i?i:!e||!t?!1:ci(e,t)}function Bn(e,t,r,i=gt){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(r){if(!Nh(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),e.indexOf(t)===0}function r5(e){return e>=65&&e<=90||e>=97&&e<=122}function UD(e){return ze?(e=Ks(e,gt),e.endsWith(":")&&(e+=gt)):(e=Ks(e,gt),e||(e=gt)),e}function i5(e){const t=ls(e);return ze?e.length>3?!1:Im(t)&&(e.length===2||t.charCodeAt(2)===92):t===Re.sep}function Im(e,t=ze){return t?r5(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function s5(e,t=ze){return Im(e,t)?e[0]:void 0}var jD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",HD="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function BD(e,t,r=8){let i="";for(let n=0;n<r;n++){let o;n===0&&ze&&!t&&(r===3||r===4)?o=HD:o=jD,i+=o.charAt(Math.floor(Math.random()*o.length))}let s;return t?s=`${t}-${i}`:s=i,e?Ve(e,s):s}var _D=/^\w[\w\d+.-]*$/,zD=/^\//,WD=/^\/\//;function VD(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!_D.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!zD.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(WD.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function qD(e,t){return!e&&!t?"file":e}function GD(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==li&&(t=li+t):t=li;break}return t}var ht="",li="/",JD=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,x=class Bg{static isUri(t){return t instanceof Bg?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,r,i,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ht,this.authority=t.authority||ht,this.path=t.path||ht,this.query=t.query||ht,this.fragment=t.fragment||ht):(this.scheme=qD(t,o),this.authority=r||ht,this.path=GD(this.scheme,i||ht),this.query=s||ht,this.fragment=n||ht,VD(this,o))}get fsPath(){return Mh(this,!1)}with(t){if(!t)return this;let{scheme:r,authority:i,path:s,query:n,fragment:o}=t;return r===void 0?r=this.scheme:r===null&&(r=ht),i===void 0?i=this.authority:i===null&&(i=ht),s===void 0?s=this.path:s===null&&(s=ht),n===void 0?n=this.query:n===null&&(n=ht),o===void 0?o=this.fragment:o===null&&(o=ht),r===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Ko(r,i,s,n,o)}static parse(t,r=!1){const i=JD.exec(t);return i?new Ko(i[2]||ht,Uh(i[4]||ht),Uh(i[5]||ht),Uh(i[7]||ht),Uh(i[9]||ht),r):new Ko(ht,ht,ht,ht,ht)}static file(t){let r=ht;if(ze&&(t=t.replace(/\\/g,li)),t[0]===li&&t[1]===li){const i=t.indexOf(li,2);i===-1?(r=t.substring(2),t=li):(r=t.substring(2,i),t=t.substring(i)||li)}return new Ko("file",r,t,ht,ht)}static from(t,r){return new Ko(t.scheme,t.authority,t.path,t.query,t.fragment,r)}static joinPath(t,...r){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return ze&&t.scheme==="file"?i=Bg.file(Tt.join(Mh(t,!0),...r)).path:i=Re.join(t.path,...r),t.with({path:i})}toString(t=!1){return Pm(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Bg)return t;{const r=new Ko(t);return r._formatted=t.external??null,r._fsPath=t._sep===o5?t.fsPath??null:null,r}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function n5(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var o5=ze?1:void 0,Ko=class extends x{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Mh(this,!1)),this._fsPath}toString(e=!1){return e?Pm(this,!0):(this._formatted||(this._formatted=Pm(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=o5),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},a5={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function c5(e,t,r){let i,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||r&&o===91||r&&o===93||r&&o===58)s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i!==void 0&&(i+=e.charAt(n));else{i===void 0&&(i=e.substr(0,n));const a=a5[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i+=a):s===-1&&(s=n)}}return s!==-1&&(i+=encodeURIComponent(e.substring(s))),i!==void 0?i:e}function QD(e){let t;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);i===35||i===63?(t===void 0&&(t=e.substr(0,r)),t+=a5[i]):t!==void 0&&(t+=e[r])}return t!==void 0?t:e}function Mh(e,t){let r;return e.authority&&e.path.length>1&&e.scheme==="file"?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?r=e.path.substr(1):r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,ze&&(r=r.replace(/\//g,"\\")),r}function Pm(e,t){const r=t?QD:c5;let i="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=li,i+=li),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=r(u,!1,!1):(i+=r(u.substr(0,l),!1,!1),i+=":",i+=r(u.substr(l+1),!1,!0)),i+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?i+=r(n,!1,!0):(i+=r(n.substr(0,l),!1,!0),i+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=r(o,!0,!1)}return a&&(i+="?",i+=r(a,!1,!1)),c&&(i+="#",i+=t?c:c5(c,!1,!1)),i}function l5(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+l5(e.substr(3)):e}}var u5=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Uh(e){return e.match(u5)?e.replace(u5,t=>l5(t)):e}var V;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(V||(V={}));function Dm(e,t){return x.isUri(e)?ci(e.scheme,t):Nh(e,t+":")}function YD(e,...t){return t.some(r=>Dm(e,r))}var XD="tkn",ZD=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=KD(e,t)}getServerRootPath(){return this.f}get g(){return Re.join(this.f,V.vscodeRemoteResource)}set(e,t,r){this.a[e]=t,this.b[e]=r}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return pt(o),e}const t=e.authority;let r=this.a[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);const i=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${XD}=${encodeURIComponent(s)}`),x.from({scheme:mm?this.d:V.vscodeRemoteResource,authority:`${r}:${i}`,path:this.g,query:n})}},h5=new ZD;function KD(e,t){return Re.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}var d5="vscode-app",e2=class _g{static{this.a=d5}asBrowserUri(t){const r=this.b(t);return this.uriToBrowserUri(r)}uriToBrowserUri(t){return t.scheme===V.vscodeRemote?h5.rewrite(t):t.scheme===V.file&&($4||VP===`${V.vscodeFileResource}://${_g.a}`)?t.with({scheme:V.vscodeFileResource,authority:t.authority||_g.a,query:null,fragment:null}):t}asFileUri(t){const r=this.b(t);return this.uriToFileUri(r)}uriToFileUri(t){return t.scheme===V.vscodeFileResource?t.with({scheme:V.file,authority:t.authority!==_g.a?t.authority:null,query:null,fragment:null}):t}b(t,r){if(x.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return x.joinPath(x.parse(i,!0),t);const s=Ve(i,t);return x.file(s)}return x.parse(r.toUrl(t))}},f5=new e2,p5;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const r="vscode-coi";function i(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:x.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(r);if(a)return t.get(a)}e.getHeadersFromQuery=i;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(r,c):n[r]=c}e.addSearchParam=s})(p5||(p5={}));function ui(e){return Mh(e,!0)}var Gc=class{constructor(e){this.a=e}compare(e,t,r=!1){return e===t?0:jn(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===V.file)return Bn(ui(e),ui(t),this.a(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(v5(e.authority,t.authority))return Bn(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return x.joinPath(e,...t)}basenameOrAuthority(e){return ji(e)||e.authority}basename(e){return Re.basename(e.path)}extname(e){return Re.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===V.file?t=x.file(gr(ui(e))).path:(t=Re.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===V.file?t=x.file(ls(ui(e))).path:t=Re.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!v5(e.authority,t.authority))return;if(e.scheme===V.file){const s=Xo(ui(e),ui(t));return ze?t5(s):s}let r=e.path||"/";const i=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(r.length,i.length);s<n&&!(r.charCodeAt(s)!==i.charCodeAt(s)&&r.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);r=i.substr(0,s)+r.substr(s)}return Re.relative(r,i)}resolvePath(e,t){if(e.scheme===V.file){const r=x.file(nD(ui(e),t));return e.with({authority:r.authority,path:r.path})}return t=LD(t),e.with({path:Re.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ci(e,t)}hasTrailingPathSeparator(e,t=gt){if(e.scheme===V.file){const r=ui(e);return r.length>$m(r).length&&r[r.length-1]===t}else{const r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=gt){return w5(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=gt){let r=!1;if(e.scheme===V.file){const i=ui(e);r=i!==void 0&&i.length===$m(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!w5(e,t)?e.with({path:e.path+"/"}):e}},He=new Gc(()=>!1),Am=new Gc(e=>e.scheme===V.file?!bt:!0),t2=new Gc(e=>!0),g5=He.isEqual.bind(He),oV=He.isEqualOrParent.bind(He),aV=He.getComparisonKey.bind(He),Tm=He.basenameOrAuthority.bind(He),ji=He.basename.bind(He),r2=He.extname.bind(He),jh=He.dirname.bind(He),Ct=He.joinPath.bind(He),cV=He.normalizePath.bind(He),m5=He.relativePath.bind(He),lV=He.resolvePath.bind(He),i2=He.isAbsolutePath.bind(He),v5=He.isEqualAuthority.bind(He),w5=He.hasTrailingPathSeparator.bind(He),uV=He.removeTrailingPathSeparator.bind(He),hV=He.addTrailingPathSeparator.bind(He),b5;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(r){const i=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}e.parseMetaData=t})(b5||(b5={}));var s2=Symbol("MicrotaskDelay");function tn(e){return!!e&&typeof e.then=="function"}function us(e){const t=new rt,r=e(t.token),i=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new Xt)});Promise.resolve(r).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return i.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function y5(e,t,r){return new Promise((i,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),i(r)});e.then(i,s).finally(()=>n.dispose())})}function n2(e,t){return new Promise((r,i)=>{const s=t.onCancellationRequested(()=>{s.dispose(),i(new Xt)});e.then(r,i).finally(()=>s.dispose())})}function sr(e){return new Promise((t,r)=>{const i=e();tn(i)?i.then(t,r):t(i)})}function x5(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}var o2=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(t,t).then(r)})}return new Promise((t,r)=>{this.b.then(t,r)})}return this.a=e(),new Promise((t,r)=>{this.a.then(i=>{this.a=null,t(i)},i=>{this.a=null,r(i)})})}dispose(){this.f=!0}},a2=(e,t)=>{let r=!0;const i=setTimeout(()=>{r=!1,t()},e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(i),r=!1}}},c2=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},E5=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((i,s)=>{this.d=i,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const i=this.g;return this.g=null,i()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=t===s2?c2(r):a2(t,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new Xt),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},Hh=class{constructor(e){this.a=new E5(e),this.b=new o2}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},Xr=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function lr(e,t){return t?new Promise((r,i)=>{const s=setTimeout(()=>{n.dispose(),r()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),i(new Xt)})}):us(r=>lr(e,r))}function k5(e,t=0,r){const i=setTimeout(()=>{e(),r&&s.dispose()},t),s=te(()=>{clearTimeout(i),r?.deleteAndLeak(s)});return r?.add(s),s}function l2(e,t=i=>!!i,r=null){if(e.length===0)return Promise.resolve(r);let i=e.length;const s=()=>{i=-1;for(const n of e)n.cancel?.()};return new Promise((n,o)=>{for(const a of e)a.then(c=>{--i>=0&&t(c)?(s(),n(c)):i===0&&n(r)}).catch(c=>{--i>=0&&(s(),o(c))})})}var u2=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new P}whenIdle(){return this.size>0?je.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,r)=>{this.g.push({factory:e,c:t,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},h2=class extends u2{constructor(){super(1)}},S5=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new rn;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=He){const r=t.getComparisonKey(e);return this.a.get(r)?.size??0}queueFor(e,t,r=He){const i=r.getComparisonKey(e);let s=this.a.get(i);if(!s){s=new h2;const n=this.f++,o=je.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(i),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new kh),this.d.set(n,o),this.a.set(i,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},$5=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,r=globalThis){if(this.f)throw new qo("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=r.setInterval(()=>{e()},t);this.d=te(()=>{r.clearInterval(i),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},hs=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},C5=class{constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=e,this.b=t,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}},d2=class extends hs{constructor(e,t){super(e,t),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}},f2=class extends K{constructor(e,t){super(),this.h=e,this.j=t,this.a=[],this.b=this.B(new os),this.f=!1,this.g=0}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.h.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.h.maxBufferedWork)return!1}else if(this.pending+e.length-this.h.maxWorkChunkSize>this.h.maxBufferedWork)return!1}for(const r of e)this.a.push(r);const t=Date.now()-this.g;return!this.b.value&&(!this.h.waitThrottleDelayBetweenWorkUnits||t>=this.h.throttleDelay)?this.m():!this.b.value&&this.h.waitThrottleDelayBetweenWorkUnits&&this.r(Math.max(this.h.throttleDelay-t,0)),!0}m(){this.g=Date.now(),this.j(this.a.splice(0,this.h.maxWorkChunkSize)),this.a.length>0&&this.r()}r(e=this.h.throttleDelay){this.b.value=new hs(()=>{this.b.clear(),this.m()},e),this.b.value.schedule()}dispose(){super.dispose(),this.f=!0}},I5,Bh;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Bh=(e,t,r)=>{I4(()=>{if(i)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:Bh=(e,t,r)=>{const i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},I5=(e,t)=>Bh(globalThis,e,t)})();var p2=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(r){this.l=r}finally{this.g=!0}},this.f=Bh(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},g2=class extends p2{constructor(e){super(globalThis,e)}};async function m2(e,t,r){let i;for(let s=0;s<r;s++)try{return await e()}catch(n){i=n,await lr(t)}throw i}var P5;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(P5||(P5={}));var rn=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new Xt)}},sn;(function(e){async function t(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function r(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}e.withAsyncBody=r})(sn||(sn={}));var D5;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(D5||(D5={}));var Jc=class Jr{static fromArray(t){return new Jr(r=>{r.emitMany(t)})}static fromPromise(t){return new Jr(async r=>{r.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Jr(async r=>{await Promise.all(t.map(async i=>r.emitOne(await i)))})}static merge(t){return new Jr(async r=>{await Promise.all(t.map(async i=>{for await(const s of i)r.emitOne(s)}))})}static{this.EMPTY=Jr.fromArray([])}constructor(t,r){this.a=0,this.b=[],this.d=null,this.f=r,this.g=new P,queueMicrotask(async()=>{const i={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(i)),this.k()}catch(s){this.l(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await je.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,r){return new Jr(async i=>{for await(const s of t)i.emitOne(r(s))})}map(t){return Jr.map(this,t)}static filter(t,r){return new Jr(async i=>{for await(const s of t)r(s)&&i.emitOne(s)})}filter(t){return Jr.filter(this,t)}static coalesce(t){return Jr.filter(t,r=>!!r)}coalesce(){return Jr.coalesce(this)}static async toPromise(t){const r=[];for await(const i of t)r.push(i);return r}toPromise(){return Jr.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},Rm=class{constructor(e){this.a=new rn,this.b=new Jc(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this.d=s=>i.reject(s),this.f=s=>i.emitOne(s),this.a.p},e);let t,r;this.f=i=>{r||(r=[]),r.push(i)},this.d=i=>{t||(t=i)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}};function A5(e,t){return new v2(e,t)}var v2=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?pt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let r;switch(e){case"data":r=this.c.data;break;case"end":r=this.c.end;break;case"error":r=this.c.error;break}if(r){const i=r.indexOf(t);i>=0&&r.splice(i,1)}}j(){if(this.b.data.length>0){const e=this.e(this.b.data);this.g(e),this.b.data.length=0;const t=[...this.d];this.d.length=0,t.forEach(r=>r())}}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function w2(e,t){return new Promise((r,i)=>{const s=[];T5(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?i(n):r(void 0)},onEnd:()=>{r(t?t(s):void 0)}})})}function T5(e,t,r){e.on("error",i=>{r?.isCancellationRequested||t.onError(i)}),e.on("end",()=>{r?.isCancellationRequested||t.onEnd()}),e.on("data",i=>{r?.isCancellationRequested||t.onData(i)})}function b2(e,t,r){const i=A5(r);return T5(e,{onData:s=>i.write(t.data(s)),onError:s=>i.error(t.error?t.error(s):s),onEnd:()=>i.end()}),i}var _h=typeof Buffer<"u",y2=new Lr(()=>new Uint8Array(256)),Lm,Nm,Y=class ii{static alloc(t){return _h?new ii(Buffer.allocUnsafe(t)):new ii(new Uint8Array(t))}static wrap(t){return _h&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new ii(t)}static fromString(t,r){return!(r?.dontUseNodeBuffer||!1)&&_h?new ii(Buffer.from(t)):(Lm||(Lm=new TextEncoder),new ii(Lm.encode(t)))}static fromByteArray(t){const r=ii.alloc(t.length);for(let i=0,s=t.length;i<s;i++)r.buffer[i]=t[i];return r}static concat(t,r){if(typeof r>"u"){r=0;for(let n=0,o=t.length;n<o;n++)r+=t[n].byteLength}const i=ii.alloc(r);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];i.set(a,s),s+=a.byteLength}return i}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=ii.alloc(this.byteLength);return t.set(this),t}toString(){return _h?this.buffer.toString():(Nm||(Nm=new TextDecoder),Nm.decode(this.buffer))}slice(t,r){return new ii(this.buffer.subarray(t,r))}set(t,r){if(t instanceof ii)this.buffer.set(t.buffer,r);else if(t instanceof Uint8Array)this.buffer.set(t,r);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),r);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return zh(this.buffer,t)}writeUInt32BE(t,r){Wh(this.buffer,t,r)}readUInt32LE(t){return S2(this.buffer,t)}writeUInt32LE(t,r){$2(this.buffer,t,r)}readUInt8(t){return C2(this.buffer,t)}writeUInt8(t,r){I2(this.buffer,t,r)}indexOf(t,r=0){return x2(this.buffer,t instanceof ii?t.buffer:t,r)}};function x2(e,t,r=0){const i=t.byteLength,s=e.byteLength;if(i===0)return 0;if(i===1)return e.indexOf(t[0]);if(i>s-r)return-1;const n=y2.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=r+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function E2(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function k2(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255}function zh(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Wh(e,t,r){e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t}function S2(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function $2(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255,t=t>>>8,e[r+2]=t&255,t=t>>>8,e[r+3]=t&255}function C2(e,t){return e[t]}function I2(e,t,r){e[r]=t}function P2(e){return w2(e,t=>Y.concat(t))}function D2(e){return b2(e,{data:t=>typeof t=="string"?Y.fromString(t):Y.wrap(t)},t=>Y.concat(t))}function Vh(e){let t=0,r=0,i=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(r){case 3:s[i++]=t|a,r=0;break;case 2:s[i++]=t|a>>>2,t=a<<6,r=3;break;case 1:s[i++]=t|a>>>4,t=a<<4,r=2;break;default:t=a<<2,r=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=i;for(;r>0;)n(0);return Y.wrap(s).slice(0,o)}var A2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function qh({buffer:e},t=!0,r=!1){const i=r?T2:A2;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[(c<<2|l>>>6)&63],s+=i[l&63]}if(n===1){const a=e[o+0];s+=i[a>>>2],s+=i[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[c<<2&63],t&&(s+="=")}return s}function Fm(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function r(s,n){t.push(s,n?.startTime??Date.now())}function i(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:r,getMarks:i}}function R2(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?Fm():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const r of performance.getEntriesByType("mark"))t.push({name:r.name,startTime:Math.round(e+r.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return Fm(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),Fm()}function L2(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=R2()),e.MonacoPerformanceMarks}var R5=L2(globalThis),xt=R5.mark,N2=R5.getMarks;import*as Qc from"fs";var Gh={};JI(Gh,{Promises:()=>qe,RimRafMode:()=>_n,SymlinkSupport:()=>mr,configureFlushOnWrite:()=>Um,readdirSync:()=>_2,rimrafSync:()=>H2,whenDeleted:()=>W2,writeFileSync:()=>J2});import*as Me from"fs";import{tmpdir as F2}from"os";import{promisify as Yc}from"util";var O2=new Mc(1e4);function Jh(e){return N5(e,"NFC",O2)}var M2=new Mc(1e4);function L5(e){return N5(e,"NFD",M2)}var U2=/[^\u0000-\u0080]/;function N5(e,t,r){if(!e)return e;const i=r.get(e);if(i)return i;let s;return U2.test(e)?s=e.normalize(t):s=e,r.set(e,s),s}var _n;(function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"})(_n||(_n={}));async function F5(e,t=_n.UNLINK,r){if(i5(e))throw new Error("rimraf - will refuse to recursively delete root");return t===_n.UNLINK?Om(e):j2(e,r)}async function j2(e,t=BD(F2())){try{try{await Me.promises.rename(e,t)}catch(r){return r.code==="ENOENT"?void 0:Om(e)}Om(t).catch(r=>{})}catch(r){if(r.code!=="ENOENT")throw r}}async function Om(e){return Me.promises.rm(e,{recursive:!0,force:!0,maxRetries:3})}function H2(e){if(i5(e))throw new Error("rimraf - will refuse to recursively delete root");Me.rmSync(e,{recursive:!0,force:!0,maxRetries:3})}async function Qh(e,t){return O5(await(t?B2(e):Me.promises.readdir(e)))}async function B2(e){try{return await Me.promises.readdir(e,{withFileTypes:!0})}catch(i){console.warn("[node.js fs] readdir with filetypes failed with error: ",i)}const t=[],r=await Qh(e);for(const i of r){let s=!1,n=!1,o=!1;try{const a=await Me.promises.lstat(Ve(e,i));s=a.isFile(),n=a.isDirectory(),o=a.isSymbolicLink()}catch(a){console.warn("[node.js fs] unexpected error from lstat after readdir: ",a)}t.push({name:i,isFile:()=>s,isDirectory:()=>n,isSymbolicLink:()=>o})}return t}function _2(e){return O5(Me.readdirSync(e))}function O5(e){return e.map(t=>typeof t=="string"?Nt?Jh(t):t:(t.name=Nt?Jh(t.name):t.name,t))}async function z2(e){const t=await Qh(e),r=[];for(const i of t)await mr.existsDirectory(Ve(e,i))&&r.push(i);return r}function W2(e,t=1e3){return new Promise(r=>{let i=!1;const s=setInterval(()=>{i||(i=!0,Me.access(e,n=>{i=!1,n&&(clearInterval(s),r(void 0))}))},t)})}var mr;(function(e){async function t(s){let n;try{if(n=await Me.promises.lstat(s),!n.isSymbolicLink())return{stat:n}}catch{}try{return{stat:await Me.promises.stat(s),symbolicLink:n?.isSymbolicLink()?{dangling:!1}:void 0}}catch(o){if(o.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};if(ze&&o.code==="EACCES")try{return{stat:await Me.promises.stat(await Me.promises.readlink(s)),symbolicLink:{dangling:!1}}}catch(a){if(a.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};throw a}throw o}}e.stat=t;async function r(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isFile()&&o?.dangling!==!0}catch{}return!1}e.existsFile=r;async function i(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isDirectory()&&o?.dangling!==!0}catch{}return!1}e.existsDirectory=i})(mr||(mr={}));var V2=new S5;function q2(e,t,r){return V2.queueFor(x.file(e),()=>{const i=M5(r);return new Promise((s,n)=>G2(e,t,i,o=>o?n(o):s()))},Am)}var Mm=!0;function Um(e){Mm=e}function G2(e,t,r,i){if(!Mm)return Me.writeFile(e,t,{mode:r.mode,flag:r.flag},i);Me.open(e,r.flag,r.mode,(s,n)=>{if(s)return i(s);Me.writeFile(n,t,o=>{if(o)return Me.close(n,()=>i(o));Me.fdatasync(n,a=>(a&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",a),Um(!1)),Me.close(n,c=>i(c))))})})}function J2(e,t,r){const i=M5(r);if(!Mm)return Me.writeFileSync(e,t,{mode:i.mode,flag:i.flag});const s=Me.openSync(e,i.flag,i.mode);try{Me.writeFileSync(s,t);try{Me.fdatasyncSync(s)}catch(n){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",n),Um(!1)}}finally{Me.closeSync(s)}}function M5(e){return e?{mode:typeof e.mode=="number"?e.mode:438,flag:typeof e.flag=="string"?e.flag:"w"}:{mode:438,flag:"w"}}async function Q2(e,t,r=6e4){if(e!==t)try{ze&&typeof r=="number"?await U5(e,t,Date.now(),r):await Me.promises.rename(e,t)}catch(i){if(e.toLowerCase()!==t.toLowerCase()&&i.code==="EXDEV"||e.endsWith("."))await j5(e,t,{preserveSymlinks:!1}),await F5(e,_n.MOVE);else throw i}}async function U5(e,t,r,i,s=0){try{return await Me.promises.rename(e,t)}catch(n){if(n.code!=="EACCES"&&n.code!=="EPERM"&&n.code!=="EBUSY")throw n;if(Date.now()-r>=i)throw console.error(`[node.js fs] rename failed after ${s} retries with error: ${n}`),n;if(s===0){let o=!1;try{const{stat:a}=await mr.stat(t);a.isFile()||(o=!0)}catch{}if(o)throw n}return await lr(Math.min(100,s*10)),U5(e,t,r,i,s+1)}}async function j5(e,t,r){return B5(e,t,{root:{source:e,target:t},options:r,handledSourcePaths:new Set})}var H5=511;async function B5(e,t,r){if(r.handledSourcePaths.has(e))return;r.handledSourcePaths.add(e);const{stat:i,symbolicLink:s}=await mr.stat(e);if(s){if(r.options.preserveSymlinks)try{return await Z2(e,t,r)}catch{}if(s.dangling)return}return i.isDirectory()?Y2(e,t,i.mode&H5,r):X2(e,t,i.mode&H5)}async function Y2(e,t,r,i){await Me.promises.mkdir(t,{recursive:!0,mode:r});const s=await Qh(e);for(const n of s)await B5(Ve(e,n),Ve(t,n),i)}async function X2(e,t,r){await Me.promises.copyFile(e,t),await Me.promises.chmod(t,r)}async function Z2(e,t,r){let i=await Me.promises.readlink(e);Bn(i,r.root.source,!bt)&&(i=Ve(r.root.target,i.substr(r.root.source.length+1))),await Me.promises.symlink(i,t)}var qe=new class{get read(){return(e,t,r,i,s)=>new Promise((n,o)=>{Me.read(e,t,r,i,s,(a,c,l)=>a?o(a):n({bytesRead:c,buffer:l}))})}get write(){return(e,t,r,i,s)=>new Promise((n,o)=>{Me.write(e,t,r,i,s,(a,c,l)=>a?o(a):n({bytesWritten:c,buffer:l}))})}get fdatasync(){return Yc(Me.fdatasync)}get open(){return Yc(Me.open)}get close(){return Yc(Me.close)}get realpath(){return Yc(Me.realpath)}get ftruncate(){return Yc(Me.ftruncate)}async exists(e){try{return await Me.promises.access(e),!0}catch{return!1}}get readdir(){return Qh}get readDirsInDir(){return z2}get writeFile(){return q2}get rm(){return F5}get rename(){return Q2}get copy(){return j5}};async function jm(e,t){if(bt)return e;const r=gr(e);if(e===r)return e;const i=(ut(e)||e).toLowerCase();try{if(t?.isCancellationRequested)return null;const n=(await qe.readdir(r)).filter(o=>o.toLowerCase()===i);if(n.length===1){const o=await jm(r,t);if(o)return Ve(o,n[0])}else if(n.length>1){const o=n.indexOf(i);if(o>=0){const a=await jm(r,t);if(a)return Ve(a,n[o])}}}catch{}return null}async function K2(e){try{return await qe.realpath(e)}catch{const r=_5(e);return await Qc.promises.access(r,Qc.constants.R_OK),r}}function eA(e){try{return Qc.realpathSync(e)}catch{const r=_5(e);return Qc.accessSync(r,Qc.constants.R_OK),r}}function _5(e){return Ks(ls(e),gt)}function z5(e){return(t,r,i)=>{let s=null,n=null;if(typeof i.value=="function"?(s="value",n=i.value):typeof i.get=="function"&&(s="get",n=i.get),!n||typeof r=="symbol")throw new Error("not supported");i[s]=e(n,r)}}function W5(e,t,r){let i=null,s=null;if(typeof r.value=="function"?(i="value",s=r.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof r.get=="function"&&(i="get",s=r.get),!s)throw new Error("not supported");const n=`$memoize$${t}`;r[i]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[n]}}function Yh(e,t,r){return z5((i,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=r?r():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{i.apply(this,a),this[o]=r?r():void 0},e)}})}function tA(e,t,r){return z5((i,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=r?r():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},u-Date.now()))}})}function rA(e){return JSON.stringify(e,iA)}function V5(e){let t=JSON.parse(e);return t=Kt(t),t}function iA(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Kt(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return x.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof Y||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let r=0;r<e.length;++r)e[r]=Kt(e[r],t+1);else for(const r in e)Object.hasOwnProperty.call(e,r)&&(e[r]=Kt(e[r],t+1))}return e}var q5;(function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"})(q5||(q5={}));function G5(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var J5;(function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"})(J5||(J5={}));function Q5(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var zn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"})(zn||(zn={}));function ea(e){let t=0;for(let r=0;;r+=7){const i=e.read(1);if(t|=(i.buffer[0]&127)<<r,!(i.buffer[0]&128))return t}}var sA=nn(0);function ta(e,t){if(t===0){e.write(sA);return}let r=0;for(let s=t;s!==0;s=s>>>7)r++;const i=Y.alloc(r);for(let s=0;t!==0;s++)i.buffer[s]=t&127,t=t>>>7,t>0&&(i.buffer[s]|=128);e.write(i)}var nA=class{constructor(e){this.b=e,this.a=0}read(e){const t=this.b.slice(this.a,this.a+e);return this.a+=t.byteLength,t}},oA=class{constructor(){this.a=[]}get buffer(){return Y.concat(this.a)}write(e){this.a.push(e)}},ur;(function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object",e[e.Int=6]="Int"})(ur||(ur={}));function nn(e){const t=Y.alloc(1);return t.writeUInt8(e,0),t}var Wn={Undefined:nn(ur.Undefined),String:nn(ur.String),Buffer:nn(ur.Buffer),VSBuffer:nn(ur.VSBuffer),Array:nn(ur.Array),Object:nn(ur.Object),Uint:nn(ur.Int)},aA=typeof Buffer<"u";function Hm(e,t){if(typeof t>"u")e.write(Wn.Undefined);else if(typeof t=="string"){const r=Y.fromString(t);e.write(Wn.String),ta(e,r.byteLength),e.write(r)}else if(aA&&Buffer.isBuffer(t)){const r=Y.wrap(t);e.write(Wn.Buffer),ta(e,r.byteLength),e.write(r)}else if(t instanceof Y)e.write(Wn.VSBuffer),ta(e,t.byteLength),e.write(t);else if(Array.isArray(t)){e.write(Wn.Array),ta(e,t.length);for(const r of t)Hm(e,r)}else if(typeof t=="number"&&(t|0)===t)e.write(Wn.Uint),ta(e,t);else{const r=Y.fromString(JSON.stringify(t));e.write(Wn.Object),ta(e,r.byteLength),e.write(r)}}function Bm(e){switch(e.read(1).readUInt8(0)){case ur.Undefined:return;case ur.String:return e.read(ea(e)).toString();case ur.Buffer:return e.read(ea(e)).buffer;case ur.VSBuffer:return e.read(ea(e));case ur.Array:{const r=ea(e),i=[];for(let s=0;s<r;s++)i.push(Bm(e));return i}case ur.Object:return JSON.parse(e.read(ea(e)).toString());case ur.Int:return ea(e)}}var Y5;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(Y5||(Y5={}));var X5=class{constructor(e,t=null){this.l=e,this.a=!1,this.b=zn.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new P,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(r=>this.s(r)),this.j=t}getChannel(e){const t=this;return{call(r,i,s){return t.a?Promise.reject(new Xt):t.m(e,r,i,s)},listen(r,i){return t.a?je.None:t.o(e,r,i)}}}m(e,t,r,i=Xe.None){const s=this.g++,o={id:s,type:100,channelName:e,name:t,arg:r};if(i.isCancellationRequested)return Promise.reject(new Xt);let a,c;return new Promise((u,h)=>{if(i.isCancellationRequested)return h(new Xt);const d=()=>{const v=y=>{switch(y.type){case 201:this.f.delete(s),u(y.data);break;case 202:{this.f.delete(s);const E=new Error(y.data.message);E.stack=Array.isArray(y.data.stack)?y.data.stack.join(`
`):y.data.stack,E.name=y.data.name,h(E);break}case 203:this.f.delete(s),h(y.data);break}};this.f.set(s,v),this.p(o)};let f=null;this.b===zn.Idle?d():(f=us(v=>this.u()),f.then(()=>{f=null,d()}));const g=()=>{f?(f.cancel(),f=null):this.p({id:s,type:101}),h(new Xt)};a=i.onCancellationRequested(g),c={dispose:xh(()=>{g(),a.dispose()})},this.d.add(c)}).finally(()=>{a.dispose(),this.d.delete(c)})}o(e,t,r){const i=this.g++,n={id:i,type:102,channelName:e,name:t,arg:r};let o=null;const a=new P({onWillAddFirstListener:()=>{const l=()=>{this.d.add(a),this.p(n)};this.b===zn.Idle?l():(o=us(u=>this.u()),o.then(()=>{o=null,l()}))},onDidRemoveLastListener:()=>{o?(o.cancel(),o=null):(this.d.delete(a),this.p({id:i,type:103}))}}),c=l=>a.fire(l.data);return this.f.set(i,c),a.event}p(e){switch(e.type){case 100:case 102:{const t=this.q([e.type,e.id,e.channelName,e.name],e.arg);this.j?.logOutgoing(t,e.id,0,`${G5(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.q([e.type,e.id]);this.j?.logOutgoing(t,e.id,0,G5(e.type));return}}}q(e,t=void 0){const r=new oA;return Hm(r,e),Hm(r,t),this.r(r.buffer)}r(e){try{return this.l.send(e),e.byteLength}catch{return 0}}s(e){const t=new nA(e),r=Bm(t),i=Bm(t),s=r[0];switch(s){case 200:return this.j?.logIncoming(e.byteLength,0,0,Q5(s)),this.t({type:r[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(e.byteLength,r[1],0,Q5(s),i),this.t({type:r[0],id:r[1],data:i})}}t(e){if(e.type===200){this.b=zn.Idle,this.k.fire();return}this.f.get(e.id)?.(e)}get onDidInitializePromise(){return je.toPromise(this.onDidInitialize)}u(){return this.b===zn.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),ai(this.d.values()),this.d.clear()}};__decorate([W5],X5.prototype,"onDidInitializePromise",null);function cA(e){let t=!1;return{call(r,i,s){return t?e.call(r,i,s):lr(0).then(()=>t=!0).then(()=>e.call(r,i,s))},listen(r,i){if(t)return e.listen(r,i);const s=new FP;return lr(0).then(()=>t=!0).then(()=>s.input=e.listen(r,i)),s.event}}}var _m;(function(e){function t(n,o,a){const c=n,l=a&&a.disableMarshalling,u=new Map;for(const h in c)i(h)&&u.set(h,je.buffer(c[h],!0,void 0,o));return new class{listen(h,d,f){const g=u.get(d);if(g)return g;const v=c[d];if(typeof v=="function"){if(s(d))return v.call(c,f);if(i(d))return u.set(d,je.buffer(c[d],!0,void 0,o)),u.get(d)}throw new oi(`Event not found: ${d}`)}call(h,d,f){const g=c[d];if(typeof g=="function"){if(!l&&Array.isArray(f))for(let y=0;y<f.length;y++)f[y]=Kt(f[y]);let v=g.apply(c,f);return v instanceof Promise||(v=Promise.resolve(v)),v}throw new oi(`Method not found: ${d}`)}}}e.fromService=t;function r(n,o){const a=o&&o.disableMarshalling;return new Proxy({},{get(c,l){if(typeof l=="string")return o?.properties?.has(l)?o.properties.get(l):s(l)?function(u){return n.listen(l,u)}:i(l)?n.listen(l):async function(...u){let h;o&&!yt(o.context)?h=[o.context,...u]:h=u;const d=await n.call(l,h);return a?d:Kt(d)};throw new oi(`Property not found: ${String(l)}`)}})}e.toService=r;function i(n){return n[0]==="o"&&n[1]==="n"&&_4(n.charCodeAt(2))}function s(n){return/^onDynamic/.test(n)&&_4(n.charCodeAt(9))}})(_m||(_m={}));var Z5;(function(e){e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite"})(Z5||(Z5={}));var Xh;(function(e){e.enableDiagnostics=!1,e.records=[];const t=new WeakMap;let r=0;function i(n,o){if(!t.has(n)){const a=String(++r);t.set(n,a)}return t.get(n)}function s(n,o,a,c){if(!e.enableDiagnostics)return;const l=i(n,o);if(c instanceof Y||c instanceof Uint8Array||c instanceof ArrayBuffer||ArrayBuffer.isView(c)){const u=Y.alloc(c.byteLength);u.set(c),e.records.push({timestamp:Date.now(),id:l,label:o,type:a,buff:u})}else e.records.push({timestamp:Date.now(),id:l,label:o,type:a,data:c})}e.traceSocketEvent=s})(Xh||(Xh={}));var K5;(function(e){e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(K5||(K5={}));var zm=null;function on(){return zm||(zm=Y.alloc(0)),zm}var e6=class{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(e){this.a.push(e),this.b+=e.byteLength}read(e){return this.c(e,!0)}peek(e){return this.c(e,!1)}c(e,t){if(e===0)return on();if(e>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===e){const n=this.a[0];return t&&(this.a.shift(),this.b-=e),n}if(this.a[0].byteLength>e){const n=this.a[0].slice(0,e);return t&&(this.a[0]=this.a[0].slice(e),this.b-=e),n}const r=Y.alloc(e);let i=0,s=0;for(;e>0;){const n=this.a[s];if(n.byteLength>e){const o=n.slice(0,e);r.set(o,i),i+=e,t&&(this.a[s]=n.slice(e),this.b-=e),e-=e}else r.set(n,i),i+=n.byteLength,t?(this.a.shift(),this.b-=n.byteLength):s++,e-=n.byteLength}return r}},t6;(function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.Disconnect=5]="Disconnect",e[e.ReplayRequest=6]="ReplayRequest",e[e.Pause=7]="Pause",e[e.Resume=8]="Resume",e[e.KeepAlive=9]="KeepAlive"})(t6||(t6={}));function r6(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var i6;(function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.TimeoutTime=2e4]="TimeoutTime",e[e.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",e[e.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",e[e.KeepAliveSendTime=5e3]="KeepAliveSendTime"})(i6||(i6={}));var Hi=class{constructor(e,t,r,i){this.type=e,this.id=t,this.ack=r,this.data=i,this.writtenTime=0}get size(){return this.data.byteLength}},s6=class extends K{constructor(e){super(),this.f=this.B(new P),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=e,this.b=!1,this.c=new e6,this.B(this.a.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(e);this.c.byteLength>=this.g.readLen;){const t=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=t.readUInt32BE(9),this.g.messageType=t.readUInt8(0),this.g.id=t.readUInt32BE(1),this.g.ack=t.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:r6(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const r=this.g.messageType,i=this.g.id,s=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",t),this.f.fire(new Hi(r,i,s,t)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}},n6=class{constructor(e){this.k=null,this.a=!1,this.b=!1,this.c=e,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(e){if(this.a)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=Y.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:r6(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",e.data),this.j(t,e.data)}g(e,t){const r=this.f===0;return this.d.push(e,t),this.f+=e.byteLength+t.byteLength,r}h(){const e=Y.concat(this.d,this.f);return this.d.length=0,this.f=0,e}j(e,t){this.g(e,t)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const e=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this.c.write(e)}},Vn=class{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new P({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(e){this.b?this.d.length>0?this.d.push(e):this.a.fire(e):this.d.push(e)}flushBuffer(){this.d=[]}},lA=class{constructor(e){this.data=e,this.next=null}},uA=class{constructor(){this.a=null,this.b=null}length(){let e=0,t=this.a;for(;t;)t=t.next,e++;return e}peek(){return this.a?this.a.data:null}toArray(){const e=[];let t=0,r=this.a;for(;r;)e[t++]=r.data,r=r.next;return e}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(e){const t=new lA(e);if(!this.a){this.a=t,this.b=t;return}this.b.next=t,this.b=t}},hA=class Ki{static{this.a=10}static{this.b=null}static getInstance(){return Ki.b||(Ki.b=new Ki),Ki.b}constructor(){this.c=[];const t=Date.now();for(let r=0;r<Ki.a;r++)this.c[r]=t-1e3*r;setInterval(()=>{for(let r=Ki.a;r>=1;r--)this.c[r]=this.c[r-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),r=(1+Ki.a)*1e3;let i=0;for(let s=0;s<Ki.a;s++)t-this.c[s]<=r&&i++;return 1-i/Ki.a}hasHighLoad(){return this.d()>=.5}},Wm=class{get unacknowledgedCount(){return this.d-this.f}constructor(e){this.v=new Vn,this.onControlMessage=this.v.event,this.w=new Vn,this.onMessage=this.w.event,this.x=new Vn,this.onDidDispose=this.x.event,this.y=new Vn,this.onSocketClose=this.y.event,this.z=new Vn,this.onSocketTimeout=this.z.event,this.t=e.loadEstimator??hA.getInstance(),this.u=e.sendKeepAlive??!0,this.a=!1,this.c=new uA,this.d=0,this.f=0,this.g=null,this.h=0,this.j=0,this.k=0,this.l=null,this.n=0,this.o=Date.now(),this.s=new he,this.p=e.socket,this.q=this.s.add(new n6(this.p)),this.r=this.s.add(new s6(this.p)),this.s.add(this.r.onMessage(t=>this.A(t))),this.s.add(this.p.onClose(t=>this.y.fire(t))),e.initialChunk&&this.r.acceptChunk(e.initialChunk),this.u?this.m=setInterval(()=>{this.E()},5e3):this.m=null}dispose(){this.g&&(clearTimeout(this.g),this.g=null),this.l&&(clearTimeout(this.l),this.l=null),this.m&&(clearInterval(this.m),this.m=null),this.s.dispose()}drain(){return this.q.drain()}sendDisconnect(){if(!this.b){this.b=!0;const e=new Hi(5,0,0,on());this.q.write(e),this.q.flush()}}sendPause(){const e=new Hi(7,0,0,on());this.q.write(e)}sendResume(){const e=new Hi(8,0,0,on());this.q.write(e)}pauseSocketWriting(){this.q.pause()}getSocket(){return this.p}getMillisSinceLastIncomingData(){return Date.now()-this.r.lastReadTime}beginAcceptReconnection(e,t){this.a=!0,this.s.dispose(),this.s=new he,this.v.flushBuffer(),this.y.flushBuffer(),this.z.flushBuffer(),this.p.dispose(),this.n=0,this.o=Date.now(),this.p=e,this.q=this.s.add(new n6(this.p)),this.r=this.s.add(new s6(this.p)),this.s.add(this.r.onMessage(r=>this.A(r))),this.s.add(this.p.onClose(r=>this.y.fire(r))),this.r.acceptChunk(t)}endAcceptReconnection(){this.a=!1,this.j=this.h;const e=new Hi(3,0,this.j,on());this.q.write(e);const t=this.c.toArray();for(let r=0,i=t.length;r<i;r++)this.q.write(t[r]);this.C()}acceptDisconnect(){this.x.fire()}A(e){if(e.ack>this.f){this.f=e.ack;do{const t=this.c.peek();if(t&&t.id<=e.ack)this.c.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this.h)if(e.id!==this.h+1){const t=Date.now();t-this.n>1e4&&(this.n=t,this.q.write(new Hi(6,0,0,on())))}else this.h=e.id,this.k=Date.now(),this.B(),this.w.fire(e.data);break}case 2:{this.v.fire(e.data);break}case 3:break;case 5:{this.x.fire();break}case 6:{const t=this.c.toArray();for(let r=0,i=t.length;r<i;r++)this.q.write(t[r]);this.C();break}case 7:{this.q.pause();break}case 8:{this.q.resume();break}case 9:break}}readEntireBuffer(){return this.r.readEntireBuffer()}flush(){this.q.flush()}send(e){const t=++this.d;this.j=this.h;const r=new Hi(1,t,this.j,e);this.c.push(r),this.a||(this.q.write(r),this.C())}sendControl(e){const t=new Hi(2,0,0,e);this.q.write(t)}B(){if(this.h<=this.j||this.l)return;const e=Date.now()-this.k;if(e>=2e3){this.D();return}this.l=setTimeout(()=>{this.l=null,this.B()},2e3-e+5)}C(){if(this.d<=this.f||this.g||this.a)return;const e=this.c.peek(),t=Date.now()-e.writtenTime,r=Date.now()-this.r.lastReadTime,i=Date.now()-this.o;if(t>=2e4&&r>=2e4&&i>=2e4&&!this.t.hasHighLoad()){this.o=Date.now(),this.z.fire({unacknowledgedMsgCount:this.c.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:r});return}const s=Math.max(2e4-t,2e4-r,2e4-i,500);this.g=setTimeout(()=>{this.g=null,this.C()},s)}D(){if(this.h<=this.j)return;this.j=this.h;const e=new Hi(3,0,this.j,on());this.q.write(e)}E(){this.j=this.h;const e=new Hi(9,0,this.j,on());this.q.write(e)}};import"crypto";import"net";import{tmpdir as dA}from"os";import{createDeflateRaw as fA,createInflateRaw as pA}from"zlib";var Ft=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let e;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?e=crypto.getRandomValues.bind(crypto):e=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const t=new Uint8Array(16),r=[];for(let i=0;i<256;i++)r.push(i.toString(16).padStart(2,"0"));return function(){e(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let s=0,n="";return n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n}}(),gA=3e4,Xc=class{traceSocketEvent(e,t){Xh.traceSocketEvent(this.socket,this.debugLabel,e,t)}constructor(e,t=""){this.f=!0,this.debugLabel=t,this.socket=e,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=i=>{if(this.traceSocketEvent("error",{code:i?.code,message:i?.message}),i){if(i.code==="EPIPE")return;pt(i)}},this.socket.on("error",this.a);let r;this.b=i=>{this.traceSocketEvent("close",{hadError:i}),this.f=!1,r&&clearTimeout(r)},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1,r=setTimeout(()=>e.destroy(),gA)},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(e){const t=r=>{this.traceSocketEvent("read",r),e(Y.wrap(r))};return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){const t=r=>{e({type:0,hadError:r,error:void 0})};return this.socket.on("close",t),{dispose:()=>this.socket.off("close",t)}}onEnd(e){const t=()=>{e()};return this.socket.on("end",t),{dispose:()=>this.socket.off("end",t)}}write(e){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",e),this.socket.write(e.buffer,t=>{if(t){if(t.code==="EPIPE")return;pt(t)}})}catch(t){if(t.code==="EPIPE")return;pt(t)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((e,t)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),e();return}const r=()=>{this.socket.off("close",r),this.socket.off("end",r),this.socket.off("error",r),this.socket.off("timeout",r),this.socket.off("drain",r),this.traceSocketEvent("nodeDrainEnd"),e()};this.socket.on("close",r),this.socket.on("end",r),this.socket.on("error",r),this.socket.on("timeout",r),this.socket.on("drain",r)})}},o6;(function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize",e[e.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(o6||(o6={}));var a6;(function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"})(a6||(a6={}));var mA=class extends K{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(e,t){this.socket.traceSocketEvent(e,t)}constructor(e,t,r,i){super(),this.f=this.B(new P),this.g=this.B(new P),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=e,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:t,inflateBytesLength:r?.byteLength||0,recordInflateBytes:i}),this.a=this.B(new vA(this,t,r,i,this.f,(s,n)=>this.m(s,n))),this.B(this.a.onError(s=>{console.error(s),pt(s),this.g.fire({type:0,hadError:!0,error:s})})),this.b=new e6,this.B(this.socket.onData(s=>this.n(s))),this.B(this.socket.onClose(async s=>{this.a.isProcessingReadQueue()&&await je.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(s)}))}dispose(){this.a.isProcessingWriteQueue()?this.B(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(e){return this.f.event(e)}onClose(e){return this.g.event(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=0;for(;t<e.byteLength;)this.a.writeMessage(e.slice(t,Math.min(t+262144,e.byteLength)),{compressed:!0,opcode:2}),t+=262144}m(e,{compressed:t,opcode:r}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",e);let i=2;e.byteLength<126?i+=0:e.byteLength<2**16?i+=2:i+=8;const s=Y.alloc(i),n=t?64:0,o=r&15;if(s.writeUInt8(128|n|o,0),e.byteLength<126)s.writeUInt8(e.byteLength,1);else if(e.byteLength<2**16){s.writeUInt8(126,1);let a=1;s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}else{s.writeUInt8(127,1);let a=1;s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(e.byteLength>>>24&255,++a),s.writeUInt8(e.byteLength>>>16&255,++a),s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}this.socket.write(Y.concat([s,e]))}end(){this.h=!0,this.socket.end()}n(e){if(e.byteLength!==0){for(this.b.acceptChunk(e);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const t=this.b.peek(this.j.readLen),r=t.readUInt8(0),i=(r&128)>>>7,s=(r&64)>>>6,n=r&15,o=t.readUInt8(1),a=(o&128)>>>7,c=o&127;this.j.state=2,this.j.readLen=2+(a?4:0)+(c===126?2:0)+(c===127?8:0),this.j.fin=i,this.j.firstFrameOfMessage&&(this.j.compressed=!!s),this.j.firstFrameOfMessage=!!i,this.j.mask=0,this.j.opcode=n,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const t=this.b.read(this.j.readLen),r=t.readUInt8(1),i=(r&128)>>>7;let s=r&127,n=1;s===126?s=t.readUInt8(++n)*2**8+t.readUInt8(++n):s===127&&(s=t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n));let o=0;i&&(o=t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n)),this.j.state=3,this.j.readLen=s,this.j.mask=o,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const t=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",t),yA(t,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",t),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(t,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(t,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await je.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}},vA=class extends K{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:Y.alloc(0)}constructor(e,t,r,i,s,n){super(),this.n=e,this.r=s,this.s=n,this.a=this.B(new P),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.B(new P),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.B(new P),this.onDidFinishProcessingWriteQueue=this.m.event,this.t=!1,this.y=!1,t?(this.b=this.B(new wA(this.n,i,r,{windowBits:15})),this.f=this.B(new bA(this.n,{windowBits:15})),this.B(this.b.onError(o=>this.a.fire(o))),this.B(this.f.onError(o=>this.a.fire(o)))):(this.b=null,this.f=null)}writeMessage(e,t){this.g.push({data:e,options:t}),this.u()}async u(){if(!this.t){for(this.t=!0;this.g.length>0;){const{data:e,options:t}=this.g.shift();if(this.f&&t.compressed){const r=await this.w(this.f,e);this.s(r,t)}else this.s(e,{...t,compressed:!1})}this.t=!1,this.m.fire()}}isProcessingWriteQueue(){return this.t}w(e,t){return new Promise((r,i)=>{e.write(t),e.flush(s=>r(s))})}acceptFrame(e,t,r){this.h.push({data:e,isCompressed:t,isLastFrameOfMessage:r}),this.z()}async z(){if(!this.y){for(this.y=!0;this.h.length>0;){const e=this.h.shift();if(this.b&&e.isCompressed){const t=await this.C(this.b,e.data,e.isLastFrameOfMessage);this.r.fire(t)}else this.r.fire(e.data)}this.y=!1,this.j.fire()}}isProcessingReadQueue(){return this.y}C(e,t,r){return new Promise((i,s)=>{e.write(t),r&&e.write(Y.fromByteArray([0,0,255,255])),e.flush(n=>i(n))})}},wA=class extends K{get recordedInflateBytes(){return this.j?Y.concat(this.f):Y.alloc(0)}constructor(e,t,r,i){super(),this.h=e,this.j=t,this.a=this.B(new P),this.onError=this.a.event,this.f=[],this.g=[],this.b=pA(i),this.b.on("error",s=>{this.h.traceSocketEvent("zlibInflateError",{message:s?.message,code:s?.code}),this.a.fire(s)}),this.b.on("data",s=>{this.h.traceSocketEvent("zlibInflateData",s),this.g.push(Y.wrap(s))}),r&&(this.h.traceSocketEvent("zlibInflateInitialWrite",r.buffer),this.b.write(r.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(e){this.j&&this.f.push(e.clone()),this.h.traceSocketEvent("zlibInflateWrite",e),this.b.write(e.buffer)}flush(e){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const t=Y.concat(this.g);this.g.length=0,e(t)})}},bA=class extends K{constructor(e,t){super(),this.g=e,this.a=this.B(new P),this.onError=this.a.event,this.f=[],this.b=fA({windowBits:15}),this.b.on("error",r=>{this.g.traceSocketEvent("zlibDeflateError",{message:r?.message,code:r?.code}),this.a.fire(r)}),this.b.on("data",r=>{this.g.traceSocketEvent("zlibDeflateData",r),this.f.push(Y.wrap(r))})}write(e){this.g.traceSocketEvent("zlibDeflateWrite",e.buffer),this.b.write(e.buffer)}flush(e){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let t=Y.concat(this.f);this.f.length=0,t=t.slice(0,t.byteLength-4),e(t)})}};function yA(e,t){if(t===0)return;const r=e.byteLength>>>2;for(let c=0;c<r;c++){const l=e.readUInt32BE(c*4);e.writeUInt32BE(l^t,c*4)}const i=r*4,s=e.byteLength-i,n=t>>>24&255,o=t>>>16&255,a=t>>>8&255;s>=1&&e.writeUInt8(e.readUInt8(i)^n,i),s>=2&&e.writeUInt8(e.readUInt8(i+1)^o,i+1),s>=3&&e.writeUInt8(e.readUInt8(i+2)^a,i+2)}var c6=process.env.XDG_RUNTIME_DIR,xA={2:107,1:103};function EA(){const e=Ft();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${e}-sock`;const t=process.platform!=="darwin"&&c6?c6:dA(),r=Ve(t,`vscode-ipc-${e}.sock`);return kA(r),r}function kA(e){const t=xA[qP];typeof t=="number"&&e.length>=t&&console.warn(`WARNING: IPC handle "${e}" is longer than ${t} chars, try a shorter --user-data-dir`)}function it(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,i])=>{t[r]=i&&typeof i=="object"?it(i):i}),t}function l6(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const r=t.shift();Object.freeze(r);for(const i in r)if(u6.call(r,i)){const s=r[i];typeof s=="object"&&!Object.isFrozen(s)&&!DD(s)&&t.push(s)}}return e}var u6=Object.prototype.hasOwnProperty;function ra(e,t){return Vm(e,t,new Set)}function Vm(e,t,r){if(yt(e))return e;const i=t(e);if(typeof i<"u")return i;if(Array.isArray(e)){const s=[];for(const n of e)s.push(Vm(n,t,r));return s}if(mt(e)){if(r.has(e))throw new Error("Cannot clone recursive data-structure");r.add(e);const s={};for(const n in e)u6.call(e,n)&&(s[n]=Vm(e[n],t,r));return r.delete(e),s}return e}function ds(e,t,r=!0){return mt(e)?(mt(t)&&Object.keys(t).forEach(i=>{i in e?r&&(mt(e[i])&&mt(t[i])?ds(e[i],t[i],r):e[i]=t[i]):e[i]=t[i]}),e):t}function hi(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let r,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!hi(e[r],t[r]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const n=[];for(i in t)n.push(i);if(n.sort(),!hi(s,n))return!1;for(r=0;r<s.length;r++)if(!hi(e[s[r]],t[s[r]]))return!1}return!0}function SA(e){const t=new Set;return JSON.stringify(e,(r,i)=>{if(mt(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function h6(e,t){const r=Object.create(null);for(const[i,s]of Object.entries(e))t(i,s)&&(r[i]=s);return r}var d6={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},f6="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function $A(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const r of f6)e.indexOf(r)>=0||(t+="\\"+r);return t+="\\s]+)",new RegExp(t,"g")}var CA=$A();function p6(e){let t=CA;if(e&&e instanceof RegExp)if(e.global)t=e;else{let r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),t=new RegExp(e.source,r)}return t.lastIndex=0,t}var g6=new jc;g6.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function m6(e,t,r,i,s){if(t=p6(t),s||(s=Hr.first(g6)),r.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:i+=l,r=r.substring(l,e+s.maxLen/2),m6(e,t,r,i,s)}const n=Date.now(),o=e-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=IA(t,r,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function IA(e,t,r,i){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=r&&e.lastIndex>=r)return s;if(i>0&&n>i)return null}return null}var v6;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(v6||(v6={}));var PA=8,DA=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Ge=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return Kh(e,t)}compute(e,t,r){return r}},Zh=class{constructor(e,t){this.newValue=e,this.didChange=t}};function Kh(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new Zh(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Fi(e,t);return new Zh(t,!i)}let r=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=Kh(e[i],t[i]);s.didChange&&(e[i]=s.newValue,r=!0)}return new Zh(e,r)}var ia=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Kh(e,t)}validate(e){return this.defaultValue}},sa=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return Kh(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,r){return r}};function X(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var xe=class extends sa{constructor(e,t,r,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=r),super(e,t,r,i)}validate(e){return X(e,this.defaultValue)}};function AA(e,t,r,i){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(r,s),s=Math.min(i,s),s|0)}var Ue=class w3 extends sa{static clampedInt(t,r,i,s){return AA(t,r,i,s)}constructor(t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=n),super(t,r,i,o),this.minimum=s,this.maximum=n}validate(t){return w3.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Bi=class b3 extends sa{static clamp(t,r,i){return t<r?r:t>i?i:t}static float(t,r){if(typeof t=="number")return t;if(typeof t>"u")return r;const i=parseFloat(t);return isNaN(i)?r:i}constructor(t,r,i,s,n){typeof n<"u"&&(n.type="number",n.default=i),super(t,r,i,n),this.validationFn=s}validate(t){return this.validationFn(b3.float(t,this.defaultValue))}},vr=class y3 extends sa{static string(t,r){return typeof t!="string"?r:t}constructor(t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(t,r,i,s)}validate(t){return y3.string(t,this.defaultValue)}};function st(e,t,r,i){return typeof e!="string"?t:i&&e in i?i[e]:r.indexOf(e)===-1?t:e}var Ze=class extends sa{constructor(e,t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=r),super(e,t,r,s),this.c=i}validate(e){return st(e,this.defaultValue,this.c)}},Zc=class extends Ge{constructor(e,t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,r,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function TA(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var RA=class extends Ge{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p(309,null),p(310,null),p(311,null)],default:"auto",tags:["accessibility"],description:p(312,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,r){return r===0?e.accessibilitySupport:r}},LA=class extends Ge{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p(313,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p(314,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:X(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:X(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},w6;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(w6||(w6={}));function NA(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var di;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(di||(di={}));function b6(e){switch(e){case"line":return di.Line;case"block":return di.Block;case"underline":return di.Underline;case"line-thin":return di.LineThin;case"block-outline":return di.BlockOutline;case"underline-thin":return di.UnderlineThin}}var FA=class extends ia{constructor(){super(148)}compute(e,t,r){const i=["monaco-editor"];return t.get(41)&&i.push(t.get(41)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(116)&&i.push("showUnused"),t.get(145)&&i.push("showDeprecated"),i.join(" ")}},OA=class extends xe{constructor(){super(38,"emptySelectionClipboard",!0,{description:p(315,null)})}compute(e,t,r){return r&&e.emptySelectionClipboard}},MA=class extends Ge{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace"};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p(316,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p(317,null),p(318,null),p(319,null)],description:p(320,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p(321,null),p(322,null),p(323,null)],description:p(324,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p(325,null),included:Nt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p(326,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:p(327,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[p(328,null),p(329,null)],description:p(330,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:X(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":st(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":st(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:X(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:X(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:X(t.loop,this.defaultValue.loop),history:st(t.history,this.defaultValue.history,["never","workspace"])}}},UA=class $c extends Ge{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",$c.OFF,{anyOf:[{type:"boolean",description:p(331,null)},{type:"string",description:p(332,null)}],description:p(333,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?$c.OFF:t==="true"?$c.ON:t:t?$c.ON:$c.OFF}},jA=class Cc extends Ge{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",Cc.OFF,{anyOf:[{type:"boolean",description:p(334,null)},{type:"string",description:p(335,null)}],description:p(336,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Cc.OFF:t==="true"?Cc.TRANSLATE:t:t?Cc.TRANSLATE:Cc.OFF}compute(t,r,i){return t.fontInfo.fontVariationSettings}},HA=class extends ia{constructor(){super(52)}compute(e,t,r){return e.fontInfo}},BA=class extends ia{constructor(){super(147)}compute(e,t,r){return e.inputMode==="overtype"?t.get(84):t.get(28)}},_A=class extends sa{constructor(){super(54,"fontSize",ps.fontSize,{type:"number",minimum:6,maximum:100,default:ps.fontSize,description:p(337,null)})}validate(e){const t=Bi.float(e,this.defaultValue);return t===0?ps.fontSize:Bi.clamp(t,6,100)}compute(e,t,r){return e.fontInfo.fontSize}},zA=class Ic extends Ge{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",ps.fontWeight,{anyOf:[{type:"number",minimum:Ic.d,maximum:Ic.e,errorMessage:p(338,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Ic.c}],default:ps.fontWeight,description:p(339,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Ue.clampedInt(t,ps.fontWeight,Ic.d,Ic.e))}},WA=class extends Ge{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p(340,null),p(341,null),p(342,null)]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p(343,null)},"editor.gotoLocation.multipleDefinitions":{description:p(344,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:p(345,null),...t},"editor.gotoLocation.multipleDeclarations":{description:p(346,null),...t},"editor.gotoLocation.multipleImplementations":{description:p(347,null),...t},"editor.gotoLocation.multipleReferences":{description:p(348,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:r,description:p(349,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:r,description:p(350,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:r,description:p(351,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:r,description:p(352,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:r,description:p(353,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:st(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??st(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??st(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??st(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??st(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??st(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??st(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:vr.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:vr.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:vr.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:vr.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:vr.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:vr.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},VA=class extends Ge{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p(354,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p(355,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p(356,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:p(357,null)},"editor.hover.above":{type:"boolean",default:e.above,description:p(358,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),delay:Ue.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:X(t.sticky,this.defaultValue.sticky),hidingDelay:Ue.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:X(t.above,this.defaultValue.above)}}},y6;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(y6||(y6={}));var qA=class zg extends ia{constructor(){super(151)}compute(t,r,i){return zg.computeLayout(r,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const r=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,r-1));const n=(i+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:r,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,r){const i=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=r.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let d=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,g=t.minimap.size,v=t.minimap.side,y=t.verticalScrollbarWidth,E=t.viewLineCount,k=t.remainingWidth,I=t.isViewportWrapping,D=h?2:3;let T=Math.floor(n*s);const _=T/n;let q=!1,W=!1,U=D*d,ne=d/n,ce=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:ae,extraLinesBeforeFirstLine:ye,extraLinesBeyondLastLine:de,desiredRatio:et,minimapLineCount:Qe}=zg.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(E/Qe>1)q=!0,W=!0,d=1,U=1,ne=d/n;else{let Dt=!1,Qt=d+1;if(g==="fit"){const at=Math.ceil((ye+E+de)*U);I&&a&&k<=r.stableFitRemainingWidth?(Dt=!0,Qt=r.stableFitMaxMinimapScale):Dt=at>T}if(g==="fill"||Dt){q=!0;const at=d;U=Math.min(c*n,Math.max(1,Math.floor(1/et))),I&&a&&k<=r.stableFitRemainingWidth&&(Qt=r.stableFitMaxMinimapScale),d=Math.min(Qt,Math.max(1,Math.floor(U/D))),d>at&&(ce=Math.min(2,d/at)),ne=d/n/ce,T=Math.ceil(Math.max(ae,ye+E+de)*U),I?(r.stableMinimapLayoutInput=t,r.stableFitRemainingWidth=k,r.stableFitMaxMinimapScale=d):(r.stableMinimapLayoutInput=null,r.stableFitRemainingWidth=0)}}}const ve=Math.floor(f*ne),We=Math.min(ve,Math.max(0,Math.floor((k-y-2)*ne/(l+ne)))+PA);let G=Math.floor(n*We);const B=G/n;G=Math.floor(G*ce);const Z=h?1:2,z=v==="left"?0:i-We-y;return{renderMinimap:Z,minimapLeft:z,minimapWidth:We,minimapHeightIsEditorHeight:q,minimapIsSampling:W,minimapScale:d,minimapLineHeight:U,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:T,minimapCanvasOuterWidth:B,minimapCanvasOuterHeight:_}}static computeLayout(t,r){const i=r.outerWidth|0,s=r.outerHeight|0,n=r.lineHeight|0,o=r.lineNumbersDigitCount|0,a=r.typicalHalfwidthCharacterWidth,c=r.maxDigitWidth,l=r.pixelRatio,u=r.viewLineCount,h=t.get(142),d=h==="inherit"?t.get(141):h,f=d==="inherit"?t.get(137):d,g=t.get(140),v=r.isDominatedByLongLines,y=t.get(59),E=t.get(69).renderType!==0,k=t.get(70),I=t.get(110),D=t.get(88),T=t.get(74),_=t.get(108),q=_.verticalScrollbarSize,W=_.verticalHasArrows,U=_.arrowSize,ne=_.horizontalScrollbarSize,ce=t.get(45),ve=t.get(115)!=="never";let We=t.get(67);ce&&ve&&(We+=16);let G=0;if(E){const Vs=Math.max(o,k);G=Math.round(Vs*c)}let B=0;y&&(B=n*r.glyphMarginDecorationLaneCount);let Z=0,z=Z+B,ae=z+G,ye=ae+We;const de=i-B-G-We;let et=!1,Qe=!1,Rt=-1;d==="inherit"&&v?(et=!0,Qe=!0):f==="on"||f==="bounded"?Qe=!0:f==="wordWrapColumn"&&(Rt=g);const Dt=zg.c({outerWidth:i,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:I,paddingTop:D.top,paddingBottom:D.bottom,minimap:T,verticalScrollbarWidth:q,viewLineCount:u,remainingWidth:de,isViewportWrapping:Qe},r.memory||new DA);Dt.renderMinimap!==0&&Dt.minimapLeft===0&&(Z+=Dt.minimapWidth,z+=Dt.minimapWidth,ae+=Dt.minimapWidth,ye+=Dt.minimapWidth);const Qt=de-Dt.minimapWidth,at=Math.max(1,Math.floor((Qt-q-2)/a)),or=W?U:0;return Qe&&(Rt=Math.max(1,at),f==="bounded"&&(Rt=Math.min(Rt,g))),{width:i,height:s,glyphMarginLeft:Z,glyphMarginWidth:B,glyphMarginDecorationLaneCount:r.glyphMarginDecorationLaneCount,lineNumbersLeft:z,lineNumbersWidth:G,decorationsLeft:ae,decorationsWidth:We,contentLeft:ye,contentWidth:Qt,minimap:Dt,viewportColumn:at,isWordWrapMinified:et,isViewportWrapping:Qe,wrappingColumn:Rt,verticalScrollbarWidth:q,horizontalScrollbarHeight:ne,overviewRuler:{top:or,width:q,height:s-2*or,right:0}}}},GA=class extends Ge{constructor(){super(144,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p(359,null),p(360,null)],type:"string",enum:["simple","advanced"],default:"simple",description:p(361,null)}})}validate(e){return st(e,"simple",["simple","advanced"])}compute(e,t,r){return t.get(2)===2?"advanced":r}},fs;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(fs||(fs={}));var JA=class extends Ge{constructor(){const e={enabled:fs.OnCode};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[fs.Off,fs.OnCode,fs.On],default:e.enabled,enumDescriptions:[p(362,null),p(363,null),p(364,null)],description:p(365,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:st(e.enabled,this.defaultValue.enabled,[fs.Off,fs.OnCode,fs.On])}}},QA=class extends Ge{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(120,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p(366,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:p(367,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p(368,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:p(369,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),maxLineCount:Ue.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:st(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:X(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},YA=class extends Ge{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(146,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p(370,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p(371,null),p(372,null,Nt?"Ctrl+Option":"Ctrl+Alt"),p(373,null,Nt?"Ctrl+Option":"Ctrl+Alt"),p(374,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p(375,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p(376,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p(377,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:p(378,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:st(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ue.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:vr.string(t.fontFamily,this.defaultValue.fontFamily),padding:X(t.padding,this.defaultValue.padding),maximumLength:Ue.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},XA=class extends Ge{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ue.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,r){return r<0?Ue.clampedInt(-r*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):r}},ZA=class extends Bi{constructor(){super(68,"lineHeight",ps.lineHeight,e=>Bi.clamp(e,0,150),{markdownDescription:p(379,null)})}compute(e,t,r){return e.fontInfo.lineHeight}},KA=class extends Ge{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p(380,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p(381,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p(382,null),p(383,null),p(384,null)],default:e.size,description:p(385,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p(386,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p(387,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p(388,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p(389,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p(390,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:p(391,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:p(392,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:p(393,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:p(394,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),autohide:X(t.autohide,this.defaultValue.autohide),size:st(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:st(t.side,this.defaultValue.side,["right","left"]),showSlider:st(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:X(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ue.clampedInt(t.scale,1,1,3),maxColumn:Ue.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:X(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:X(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Bi.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Bi.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function eT(e){return e==="ctrlCmd"?Nt?"metaKey":"ctrlKey":"altKey"}var tT=class extends Ge{constructor(){super(88,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p(395,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p(396,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ue.clampedInt(t.top,0,0,1e3),bottom:Ue.clampedInt(t.bottom,0,0,1e3)}}},rT=class extends Ge{constructor(){const e={enabled:!0,cycle:!0};super(90,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p(397,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p(398,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),cycle:X(t.cycle,this.defaultValue.cycle)}}},iT=class extends ia{constructor(){super(149)}compute(e,t,r){return e.pixelRatio}},sT=class extends Ge{constructor(){super(92,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},nT=class extends Ge{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p(399,null),p(400,null),p(401,null)]}];super(94,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p(402,null)},comments:{anyOf:t,default:e.comments,description:p(403,null)},other:{anyOf:t,default:e.other,description:p(404,null)}},default:e,markdownDescription:p(405,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:r,strings:i}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=st(t,this.defaultValue.other,s),typeof r=="boolean"?o=r?"on":"off":o=st(r,this.defaultValue.comments,s),typeof i=="boolean"?a=i?"on":"off":a=st(i,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},x6;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(x6||(x6={}));var oT=class extends Ge{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p(406,null),p(407,null),p(408,null),p(409,null)],default:"on",description:p(410,null)})}validate(e){let t=this.defaultValue.renderType,r=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,r=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:r}}},aT=class extends Ge{constructor(){const e=[],t={type:"number",description:p(411,null)};super(107,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p(412,null),format:"color-hex"}}}]},default:e,description:p(413,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="number")t.push({column:Ue.clampedInt(r,0,0,1e4),color:null});else if(r&&typeof r=="object"){const i=r;t.push({column:Ue.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((r,i)=>r.column-i.column),t}return this.defaultValue}},cT=class extends Ge{constructor(){super(97,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function E6(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var lT=class extends Ge{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(108,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(414,null),p(415,null),p(416,null)],default:"auto",description:p(417,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(418,null),p(419,null),p(420,null)],default:"auto",description:p(421,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p(422,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p(423,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p(424,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:p(425,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,r=Ue.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Ue.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ue.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:E6(t.vertical,this.defaultValue.vertical),horizontal:E6(t.horizontal,this.defaultValue.horizontal),useShadows:X(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:X(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:X(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:X(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:X(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:r,horizontalSliderSize:Ue.clampedInt(t.horizontalSliderSize,r,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Ue.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:X(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:X(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},fi="inUntrustedWorkspace",qn={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},uT=class extends Ge{constructor(){const e={nonBasicASCII:fi,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:fi,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(130,"unicodeHighlight",e,{[qn.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,fi],default:e.nonBasicASCII,description:p(426,null)},[qn.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p(427,null)},[qn.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p(428,null)},[qn.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,fi],default:e.includeComments,description:p(429,null)},[qn.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,fi],default:e.includeStrings,description:p(430,null)},[qn.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p(431,null),additionalProperties:{type:"boolean"}},[qn.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p(432,null)}})}applyUpdate(e,t){let r=!1;t.allowedCharacters&&e&&(hi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},r=!0)),t.allowedLocales&&e&&(hi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},r=!0));const i=super.applyUpdate(e,t);return r?new Zh(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:na(t.nonBasicASCII,fi,[!0,!1,fi]),invisibleCharacters:X(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:X(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:na(t.includeComments,fi,[!0,!1,fi]),includeStrings:na(t.includeStrings,fi,[!0,!1,fi]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const r={};for(const[i,s]of Object.entries(e))s===!0&&(r[i]=!0);return r}},hT=class extends Ge{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1,edits:{experimental:{enabled:!0,useMixedLinesDiff:"never",useInterleavedLinesDiff:"never",onlyShowWhenCloseToCursor:!0}}};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p(433,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p(434,null),p(435,null),p(436,null)],description:p(437,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:p(438,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p(439,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:p(440,null)},"editor.inlineSuggest.edits.experimental.enabled":{type:"boolean",default:e.edits.experimental.enabled,description:p(441,null)},"editor.inlineSuggest.edits.experimental.useMixedLinesDiff":{type:"string",default:e.edits.experimental.useMixedLinesDiff,description:p(442,null),enum:["never","whenPossible"]},"editor.inlineSuggest.edits.experimental.useInterleavedLinesDiff":{type:"string",default:e.edits.experimental.useInterleavedLinesDiff,description:p(443,null),enum:["never","always","afterJump"]},"editor.inlineSuggest.edits.experimental.onlyShowWhenCloseToCursor":{type:"boolean",default:e.edits.experimental.onlyShowWhenCloseToCursor,description:p(444,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),mode:st(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:st(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:X(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:X(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:vr.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:X(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{experimental:{enabled:X(t.edits?.experimental?.enabled,this.defaultValue.edits.experimental.enabled),useMixedLinesDiff:st(t.edits?.experimental?.useMixedLinesDiff,this.defaultValue.edits.experimental.useMixedLinesDiff,["never","whenPossible","afterJumpWhenPossible"]),useInterleavedLinesDiff:st(t.edits?.experimental?.useInterleavedLinesDiff,this.defaultValue.edits.experimental.useInterleavedLinesDiff,["never","always","afterJump"]),onlyShowWhenCloseToCursor:X(t.edits?.experimental?.onlyShowWhenCloseToCursor,this.defaultValue.edits.experimental.onlyShowWhenCloseToCursor)}}}}},dT=class extends Ge{constructor(){const e={enabled:d6.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:d6.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(445,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p(446,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:X(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},fT=class extends Ge{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(447,null),p(448,null),p(449,null)],default:e.bracketPairs,description:p(450,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(451,null),p(452,null),p(453,null)],default:e.bracketPairsHorizontal,description:p(454,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p(455,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p(456,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p(457,null),p(458,null),p(459,null)],default:e.highlightActiveIndentation,description:p(460,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:na(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:na(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:X(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:X(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:na(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function na(e,t,r){const i=r.indexOf(e);return i===-1?t:r[i]}var pT=class extends Ge{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(123,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p(461,null),p(462,null)],default:e.insertMode,description:p(463,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p(464,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p(465,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p(466,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p(467,null),p(468,null),p(469,null),p(470,null)],default:e.selectionMode,markdownDescription:p(471,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p(472,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p(473,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p(474,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p(475,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p(476,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p(477,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p(478,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p(479,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p(480,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p(481,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p(482,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p(483,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p(484,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p(485,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p(486,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p(487,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p(488,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p(489,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p(490,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p(491,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p(492,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p(493,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p(494,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p(495,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p(496,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p(497,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p(498,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p(499,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p(500,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p(501,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p(502,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p(503,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p(504,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p(505,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p(506,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p(507,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p(508,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:st(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:X(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:X(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:X(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:X(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:st(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:X(t.showIcons,this.defaultValue.showIcons),showStatusBar:X(t.showStatusBar,this.defaultValue.showStatusBar),preview:X(t.preview,this.defaultValue.preview),previewMode:st(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:X(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:X(t.showMethods,this.defaultValue.showMethods),showFunctions:X(t.showFunctions,this.defaultValue.showFunctions),showConstructors:X(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:X(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:X(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:X(t.showFields,this.defaultValue.showFields),showVariables:X(t.showVariables,this.defaultValue.showVariables),showClasses:X(t.showClasses,this.defaultValue.showClasses),showStructs:X(t.showStructs,this.defaultValue.showStructs),showInterfaces:X(t.showInterfaces,this.defaultValue.showInterfaces),showModules:X(t.showModules,this.defaultValue.showModules),showProperties:X(t.showProperties,this.defaultValue.showProperties),showEvents:X(t.showEvents,this.defaultValue.showEvents),showOperators:X(t.showOperators,this.defaultValue.showOperators),showUnits:X(t.showUnits,this.defaultValue.showUnits),showValues:X(t.showValues,this.defaultValue.showValues),showConstants:X(t.showConstants,this.defaultValue.showConstants),showEnums:X(t.showEnums,this.defaultValue.showEnums),showEnumMembers:X(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:X(t.showKeywords,this.defaultValue.showKeywords),showWords:X(t.showWords,this.defaultValue.showWords),showColors:X(t.showColors,this.defaultValue.showColors),showFiles:X(t.showFiles,this.defaultValue.showFiles),showReferences:X(t.showReferences,this.defaultValue.showReferences),showFolders:X(t.showFolders,this.defaultValue.showFolders),showTypeParameters:X(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:X(t.showSnippets,this.defaultValue.showSnippets),showUsers:X(t.showUsers,this.defaultValue.showUsers),showIssues:X(t.showIssues,this.defaultValue.showIssues)}}},gT=class extends Ge{constructor(){super(118,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p(509,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:p(510,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:X(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:X(e.selectSubwords,this.defaultValue.selectSubwords)}}},mT=class extends Ge{constructor(){const e=[];super(135,"wordSegmenterLocales",e,{anyOf:[{description:p(511,null),type:"string"},{description:p(512,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="string")try{Intl.Segmenter.supportedLocalesOf(r).length>0&&t.push(r)}catch{}return t}return this.defaultValue}},k6;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(k6||(k6={}));var vT=class extends Ge{constructor(){super(143,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p(513,null),p(514,null),p(515,null),p(516,null)],description:p(517,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,r){return t.get(2)===2?0:r}},wT=class extends ia{constructor(){super(152)}compute(e,t,r){const i=t.get(151);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},bT=class extends Ge{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(518,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:p(519,null),enum:["afterDrop","never"],enumDescriptions:[p(520,null),p(521,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),showDropSelector:st(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},yT=class extends Ge{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(89,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(522,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:p(523,null),enum:["afterPaste","never"],enumDescriptions:[p(524,null),p(525,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:X(t.enabled,this.defaultValue.enabled),showPasteSelector:st(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},xT="Consolas, 'Courier New', monospace",ET="Menlo, Monaco, 'Courier New', monospace",kT="'Droid Sans Mono', 'monospace', monospace",ps={fontFamily:Nt?ET:bt?kT:xT,fontWeight:"normal",fontSize:Nt?12:14,lineHeight:0,letterSpacing:0},ST=[];function A(e){return ST[e.id]=e,e}var S6;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.letterSpacing=65]="letterSpacing",e[e.lightbulb=66]="lightbulb",e[e.lineDecorationsWidth=67]="lineDecorationsWidth",e[e.lineHeight=68]="lineHeight",e[e.lineNumbers=69]="lineNumbers",e[e.lineNumbersMinChars=70]="lineNumbersMinChars",e[e.linkedEditing=71]="linkedEditing",e[e.links=72]="links",e[e.matchBrackets=73]="matchBrackets",e[e.minimap=74]="minimap",e[e.mouseStyle=75]="mouseStyle",e[e.mouseWheelScrollSensitivity=76]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=77]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=78]="multiCursorMergeOverlapping",e[e.multiCursorModifier=79]="multiCursorModifier",e[e.multiCursorPaste=80]="multiCursorPaste",e[e.multiCursorLimit=81]="multiCursorLimit",e[e.occurrencesHighlight=82]="occurrencesHighlight",e[e.occurrencesHighlightDelay=83]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=84]="overtypeCursorStyle",e[e.overtypeOnPaste=85]="overtypeOnPaste",e[e.overviewRulerBorder=86]="overviewRulerBorder",e[e.overviewRulerLanes=87]="overviewRulerLanes",e[e.padding=88]="padding",e[e.pasteAs=89]="pasteAs",e[e.parameterHints=90]="parameterHints",e[e.peekWidgetDefaultFocus=91]="peekWidgetDefaultFocus",e[e.placeholder=92]="placeholder",e[e.definitionLinkOpensInPeek=93]="definitionLinkOpensInPeek",e[e.quickSuggestions=94]="quickSuggestions",e[e.quickSuggestionsDelay=95]="quickSuggestionsDelay",e[e.readOnly=96]="readOnly",e[e.readOnlyMessage=97]="readOnlyMessage",e[e.renameOnType=98]="renameOnType",e[e.renderControlCharacters=99]="renderControlCharacters",e[e.renderFinalNewline=100]="renderFinalNewline",e[e.renderLineHighlight=101]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=102]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=103]="renderValidationDecorations",e[e.renderWhitespace=104]="renderWhitespace",e[e.revealHorizontalRightPadding=105]="revealHorizontalRightPadding",e[e.roundedSelection=106]="roundedSelection",e[e.rulers=107]="rulers",e[e.scrollbar=108]="scrollbar",e[e.scrollBeyondLastColumn=109]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=110]="scrollBeyondLastLine",e[e.scrollPredominantAxis=111]="scrollPredominantAxis",e[e.selectionClipboard=112]="selectionClipboard",e[e.selectionHighlight=113]="selectionHighlight",e[e.selectOnLineNumbers=114]="selectOnLineNumbers",e[e.showFoldingControls=115]="showFoldingControls",e[e.showUnused=116]="showUnused",e[e.snippetSuggestions=117]="snippetSuggestions",e[e.smartSelect=118]="smartSelect",e[e.smoothScrolling=119]="smoothScrolling",e[e.stickyScroll=120]="stickyScroll",e[e.stickyTabStops=121]="stickyTabStops",e[e.stopRenderingLineAfter=122]="stopRenderingLineAfter",e[e.suggest=123]="suggest",e[e.suggestFontSize=124]="suggestFontSize",e[e.suggestLineHeight=125]="suggestLineHeight",e[e.suggestOnTriggerCharacters=126]="suggestOnTriggerCharacters",e[e.suggestSelection=127]="suggestSelection",e[e.tabCompletion=128]="tabCompletion",e[e.tabIndex=129]="tabIndex",e[e.unicodeHighlighting=130]="unicodeHighlighting",e[e.unusualLineTerminators=131]="unusualLineTerminators",e[e.useShadowDOM=132]="useShadowDOM",e[e.useTabStops=133]="useTabStops",e[e.wordBreak=134]="wordBreak",e[e.wordSegmenterLocales=135]="wordSegmenterLocales",e[e.wordSeparators=136]="wordSeparators",e[e.wordWrap=137]="wordWrap",e[e.wordWrapBreakAfterCharacters=138]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=139]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=140]="wordWrapColumn",e[e.wordWrapOverride1=141]="wordWrapOverride1",e[e.wordWrapOverride2=142]="wordWrapOverride2",e[e.wrappingIndent=143]="wrappingIndent",e[e.wrappingStrategy=144]="wrappingStrategy",e[e.showDeprecated=145]="showDeprecated",e[e.inlayHints=146]="inlayHints",e[e.effectiveCursorStyle=147]="effectiveCursorStyle",e[e.editorClassName=148]="editorClassName",e[e.pixelRatio=149]="pixelRatio",e[e.tabFocusMode=150]="tabFocusMode",e[e.layoutInfo=151]="layoutInfo",e[e.wrappingInfo=152]="wrappingInfo",e[e.defaultColorDecorators=153]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=154]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=155]="inlineCompletionsAccessibilityVerbose"})(S6||(S6={}));var xV={acceptSuggestionOnCommitCharacter:A(new xe(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p(526,null)})),acceptSuggestionOnEnter:A(new Ze(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p(527,null),""],markdownDescription:p(528,null)})),accessibilitySupport:A(new RA),accessibilityPageSize:A(new Ue(3,"accessibilityPageSize",10,1,1073741824,{description:p(529,null),tags:["accessibility"]})),ariaLabel:A(new vr(4,"ariaLabel",p(530,null))),ariaRequired:A(new xe(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:A(new xe(8,"screenReaderAnnounceInlineSuggestion",!0,{description:p(531,null),tags:["accessibility"]})),autoClosingBrackets:A(new Ze(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(532,null),p(533,null),""],description:p(534,null)})),autoClosingComments:A(new Ze(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(535,null),p(536,null),""],description:p(537,null)})),autoClosingDelete:A(new Ze(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p(538,null),""],description:p(539,null)})),autoClosingOvertype:A(new Ze(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p(540,null),""],description:p(541,null)})),autoClosingQuotes:A(new Ze(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(542,null),p(543,null),""],description:p(544,null)})),autoIndent:A(new Zc(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],TA,{enumDescriptions:[p(545,null),p(546,null),p(547,null),p(548,null),p(549,null)],description:p(550,null)})),automaticLayout:A(new xe(13,"automaticLayout",!1)),autoSurround:A(new Ze(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p(551,null),p(552,null),p(553,null),""],description:p(554,null)})),bracketPairColorization:A(new dT),bracketPairGuides:A(new fT),stickyTabStops:A(new xe(121,"stickyTabStops",!1,{description:p(555,null)})),codeLens:A(new xe(17,"codeLens",!0,{description:p(556,null)})),codeLensFontFamily:A(new vr(18,"codeLensFontFamily","",{description:p(557,null)})),codeLensFontSize:A(new Ue(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p(558,null)})),colorDecorators:A(new xe(20,"colorDecorators",!0,{description:p(559,null)})),colorDecoratorActivatedOn:A(new Ze(154,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[p(560,null),p(561,null),p(562,null)],description:p(563,null)})),colorDecoratorsLimit:A(new Ue(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p(564,null)})),columnSelection:A(new xe(22,"columnSelection",!1,{description:p(565,null)})),comments:A(new LA),contextmenu:A(new xe(24,"contextmenu",!0)),copyWithSyntaxHighlighting:A(new xe(25,"copyWithSyntaxHighlighting",!0,{description:p(566,null)})),cursorBlinking:A(new Zc(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],NA,{description:p(567,null)})),cursorSmoothCaretAnimation:A(new Ze(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p(568,null),p(569,null),p(570,null)],description:p(571,null)})),cursorStyle:A(new Zc(28,"cursorStyle",di.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],b6,{description:p(572,null)})),overtypeCursorStyle:A(new Zc(84,"overtypeCursorStyle",di.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],b6,{description:p(573,null)})),cursorSurroundingLines:A(new Ue(29,"cursorSurroundingLines",0,0,1073741824,{description:p(574,null)})),cursorSurroundingLinesStyle:A(new Ze(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p(575,null),p(576,null)],markdownDescription:p(577,null)})),cursorWidth:A(new Ue(31,"cursorWidth",0,0,1073741824,{markdownDescription:p(578,null)})),disableLayerHinting:A(new xe(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:A(new xe(33,"disableMonospaceOptimizations",!1)),domReadOnly:A(new xe(34,"domReadOnly",!1)),dragAndDrop:A(new xe(35,"dragAndDrop",!0,{description:p(579,null)})),emptySelectionClipboard:A(new OA),dropIntoEditor:A(new bT),experimentalEditContextEnabled:A(new xe(37,"experimentalEditContextEnabled",!1,{description:p(580,null),included:wm||R4||$4})),stickyScroll:A(new QA),experimentalGpuAcceleration:A(new Ze(39,"experimentalGpuAcceleration","off",["off","on"],void 0)),experimentalWhitespaceRendering:A(new Ze(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p(581,null),p(582,null),p(583,null)],description:p(584,null)})),extraEditorClassName:A(new vr(41,"extraEditorClassName","")),fastScrollSensitivity:A(new Bi(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:p(585,null)})),find:A(new MA),fixedOverflowWidgets:A(new xe(44,"fixedOverflowWidgets",!1)),folding:A(new xe(45,"folding",!0,{description:p(586,null)})),foldingStrategy:A(new Ze(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p(587,null),p(588,null)],description:p(589,null)})),foldingHighlight:A(new xe(47,"foldingHighlight",!0,{description:p(590,null)})),foldingImportsByDefault:A(new xe(48,"foldingImportsByDefault",!1,{description:p(591,null)})),foldingMaximumRegions:A(new Ue(49,"foldingMaximumRegions",5e3,10,65e3,{description:p(592,null)})),unfoldOnClickAfterEndOfLine:A(new xe(50,"unfoldOnClickAfterEndOfLine",!1,{description:p(593,null)})),fontFamily:A(new vr(51,"fontFamily",ps.fontFamily,{description:p(594,null)})),fontInfo:A(new HA),fontLigatures2:A(new UA),fontSize:A(new _A),fontWeight:A(new zA),fontVariations:A(new jA),formatOnPaste:A(new xe(57,"formatOnPaste",!1,{description:p(595,null)})),formatOnType:A(new xe(58,"formatOnType",!1,{description:p(596,null)})),glyphMargin:A(new xe(59,"glyphMargin",!0,{description:p(597,null)})),gotoLocation:A(new WA),hideCursorInOverviewRuler:A(new xe(61,"hideCursorInOverviewRuler",!1,{description:p(598,null)})),hover:A(new VA),inDiffEditor:A(new xe(63,"inDiffEditor",!1)),letterSpacing:A(new Bi(65,"letterSpacing",ps.letterSpacing,e=>Bi.clamp(e,-5,20),{description:p(599,null)})),lightbulb:A(new JA),lineDecorationsWidth:A(new XA),lineHeight:A(new ZA),lineNumbers:A(new oT),lineNumbersMinChars:A(new Ue(70,"lineNumbersMinChars",5,1,300)),linkedEditing:A(new xe(71,"linkedEditing",!1,{description:p(600,null)})),links:A(new xe(72,"links",!0,{description:p(601,null)})),matchBrackets:A(new Ze(73,"matchBrackets","always",["always","near","never"],{description:p(602,null)})),minimap:A(new KA),mouseStyle:A(new Ze(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:A(new Bi(76,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:p(603,null)})),mouseWheelZoom:A(new xe(77,"mouseWheelZoom",!1,{markdownDescription:p(Nt?604:605,null)})),multiCursorMergeOverlapping:A(new xe(78,"multiCursorMergeOverlapping",!0,{description:p(606,null)})),multiCursorModifier:A(new Zc(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],eT,{markdownEnumDescriptions:[p(607,null),p(608,null)],markdownDescription:p(609,null)})),multiCursorPaste:A(new Ze(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p(610,null),p(611,null)],markdownDescription:p(612,null)})),multiCursorLimit:A(new Ue(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p(613,null)})),occurrencesHighlight:A(new Ze(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[p(614,null),p(615,null),p(616,null)],markdownDescription:p(617,null)})),occurrencesHighlightDelay:A(new Ue(83,"occurrencesHighlightDelay",250,0,2e3,{description:p(618,null),tags:["preview"]})),overtypeOnPaste:A(new xe(85,"overtypeOnPaste",!0,{description:p(619,null)})),overviewRulerBorder:A(new xe(86,"overviewRulerBorder",!0,{description:p(620,null)})),overviewRulerLanes:A(new Ue(87,"overviewRulerLanes",3,0,3)),padding:A(new tT),pasteAs:A(new yT),parameterHints:A(new rT),peekWidgetDefaultFocus:A(new Ze(91,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p(621,null),p(622,null)],description:p(623,null)})),placeholder:A(new sT),definitionLinkOpensInPeek:A(new xe(93,"definitionLinkOpensInPeek",!1,{description:p(624,null)})),quickSuggestions:A(new nT),quickSuggestionsDelay:A(new Ue(95,"quickSuggestionsDelay",10,0,1073741824,{description:p(625,null)})),readOnly:A(new xe(96,"readOnly",!1)),readOnlyMessage:A(new cT),renameOnType:A(new xe(98,"renameOnType",!1,{description:p(626,null),markdownDeprecationMessage:p(627,null)})),renderControlCharacters:A(new xe(99,"renderControlCharacters",!0,{description:p(628,null),restricted:!0})),renderFinalNewline:A(new Ze(100,"renderFinalNewline",bt?"dimmed":"on",["off","on","dimmed"],{description:p(629,null)})),renderLineHighlight:A(new Ze(101,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p(630,null)],description:p(631,null)})),renderLineHighlightOnlyWhenFocus:A(new xe(102,"renderLineHighlightOnlyWhenFocus",!1,{description:p(632,null)})),renderValidationDecorations:A(new Ze(103,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:A(new Ze(104,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p(633,null),p(634,null),p(635,null),""],description:p(636,null)})),revealHorizontalRightPadding:A(new Ue(105,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:A(new xe(106,"roundedSelection",!0,{description:p(637,null)})),rulers:A(new aT),scrollbar:A(new lT),scrollBeyondLastColumn:A(new Ue(109,"scrollBeyondLastColumn",4,0,1073741824,{description:p(638,null)})),scrollBeyondLastLine:A(new xe(110,"scrollBeyondLastLine",!0,{description:p(639,null)})),scrollPredominantAxis:A(new xe(111,"scrollPredominantAxis",!0,{description:p(640,null)})),selectionClipboard:A(new xe(112,"selectionClipboard",!0,{description:p(641,null),included:bt})),selectionHighlight:A(new xe(113,"selectionHighlight",!0,{description:p(642,null)})),selectOnLineNumbers:A(new xe(114,"selectOnLineNumbers",!0)),showFoldingControls:A(new Ze(115,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p(643,null),p(644,null),p(645,null)],description:p(646,null)})),showUnused:A(new xe(116,"showUnused",!0,{description:p(647,null)})),showDeprecated:A(new xe(145,"showDeprecated",!0,{description:p(648,null)})),inlayHints:A(new YA),snippetSuggestions:A(new Ze(117,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p(649,null),p(650,null),p(651,null),p(652,null)],description:p(653,null)})),smartSelect:A(new gT),smoothScrolling:A(new xe(119,"smoothScrolling",!1,{description:p(654,null)})),stopRenderingLineAfter:A(new Ue(122,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:A(new pT),inlineSuggest:A(new hT),inlineCompletionsAccessibilityVerbose:A(new xe(155,"inlineCompletionsAccessibilityVerbose",!1,{description:p(655,null)})),suggestFontSize:A(new Ue(124,"suggestFontSize",0,0,1e3,{markdownDescription:p(656,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:A(new Ue(125,"suggestLineHeight",0,0,1e3,{markdownDescription:p(657,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:A(new xe(126,"suggestOnTriggerCharacters",!0,{description:p(658,null)})),suggestSelection:A(new Ze(127,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p(659,null),p(660,null),p(661,null)],description:p(662,null)})),tabCompletion:A(new Ze(128,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p(663,null),p(664,null),p(665,null)],description:p(666,null)})),tabIndex:A(new Ue(129,"tabIndex",0,-1,1073741824)),unicodeHighlight:A(new uT),unusualLineTerminators:A(new Ze(131,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p(667,null),p(668,null),p(669,null)],description:p(670,null)})),useShadowDOM:A(new xe(132,"useShadowDOM",!0)),useTabStops:A(new xe(133,"useTabStops",!0,{description:p(671,null)})),wordBreak:A(new Ze(134,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p(672,null),p(673,null)],description:p(674,null)})),wordSegmenterLocales:A(new mT),wordSeparators:A(new vr(136,"wordSeparators",f6,{description:p(675,null)})),wordWrap:A(new Ze(137,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p(676,null),p(677,null),p(678,null),p(679,null)],description:p(680,null)})),wordWrapBreakAfterCharacters:A(new vr(138,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:A(new vr(139,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:A(new Ue(140,"wordWrapColumn",80,1,1073741824,{markdownDescription:p(681,null)})),wordWrapOverride1:A(new Ze(141,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:A(new Ze(142,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:A(new BA),editorClassName:A(new FA),defaultColorDecorators:A(new Ze(153,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[p(682,null),p(683,null),p(684,null)],description:p(685,null)})),pixelRatio:A(new iT),tabFocusMode:A(new xe(150,"tabFocusMode",!1,{markdownDescription:p(686,null)})),layoutInfo:A(new qA),wrappingInfo:A(new wT),wrappingIndent:A(new vT),wrappingStrategy:A(new GA)},Nr,qm=globalThis.vscode;if(typeof qm<"u"&&typeof qm.context<"u"){const e=qm.context.configuration();if(e)Nr=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Nr=globalThis._VSCODE_PRODUCT_JSON,Un.VSCODE_DEV&&Object.assign(Nr,{nameShort:`${Nr.nameShort} Dev`,nameLong:`${Nr.nameLong} Dev`,dataFolderName:`${Nr.dataFolderName}-dev`,serverDataFolderName:Nr.serverDataFolderName?`${Nr.serverDataFolderName}-dev`:void 0}),!Nr.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Nr,{version:e.version})}}else Nr={nameShort:"Code",nameLong:"Visual Studio Code",applicationName:"code",win32x64AppId:"{{EA457B21-F73E-494C-ACAB-524FDE069978}",win32arm64AppId:"{{A5270FC5-65AD-483E-AC30-2C276B63D0AC}",win32x64UserAppId:"{{771FD6B0-FA20-440A-A002-3B3BAC16DC50}",win32arm64UserAppId:"{{D9E514E7-1A56-452D-9337-2990C0DC4310}",win32NameVersion:"Microsoft Visual Studio Code",win32DirName:"Microsoft VS Code",win32SetupExeBasename:"VSCodeSetup",win32AppUserModelId:"Microsoft.VisualStudioCode",win32ShellNameShort:"Code",win32MutexName:"vscode",win32RegValueName:"VSCode",darwinCredits:"resources/darwin/Credits.rtf",darwinBundleIdentifier:"com.microsoft.VSCode",darwinExecutable:"VSCode",linuxIconName:"vscode",licenseFileName:"LICENSE.rtf",licenseName:"Multiple, see https://code.visualstudio.com/license",serverGreeting:[],serverLicense:["*","* Visual Studio Code Server","*","* By using the software, you agree to","* the Visual Studio Code Server License Terms (https://aka.ms/vscode-server-license) and","* the Microsoft Privacy Statement (https://privacy.microsoft.com/en-US/privacystatement).","*"],serverLicensePrompt:"Do you accept the terms in the License Agreement (Y/n)?",serverApplicationName:"code-server",urlProtocol:"vscode",dataFolderName:".vscode",serverDataFolderName:".vscode-server",downloadUrl:"https://code.visualstudio.com",updateUrl:"https://update.code.visualstudio.com",webUrl:"https://vscode.dev",webEndpointUrl:"https://main.vscode-cdn.net",webEndpointUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}",nlsCoreBaseUrl:"https://www.vscode-unpkg.net/nls/",webviewContentExternalBaseUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",quality:"stable",extensionsGallery:{nlsBaseUrl:"https://www.vscode-unpkg.net/_lp/",serviceUrl:"https://marketplace.visualstudio.com/_apis/public/gallery",itemUrl:"https://marketplace.visualstudio.com/items",publisherUrl:"https://marketplace.visualstudio.com/publishers",resourceUrlTemplate:"https://{publisher}.vscode-unpkg.net/{publisher}/{name}/{version}/{path}",extensionUrlTemplate:"https://www.vscode-unpkg.net/_gallery/{publisher}/{name}/latest",controlUrl:"https://main.vscode-cdn.net/extensions/marketplace.json"},profileTemplatesUrl:"https://main.vscode-cdn.net/core/profile-templates.json",extensionPublisherOrgs:["microsoft"],extensionRecommendations:{"ms-dotnettools.csdevkit":{onFileOpen:[{pathGlob:"{**/*.cs,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln}",important:!0},{languages:["csharp"],important:!0},{pathGlob:"{**/project.json,**/appsettings.json}"}]},"ms-python.python":{onFileOpen:[{pathGlob:"{**/*.py}",important:!0},{languages:["python"],important:!0},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.jupyter":{onFileOpen:[{pathGlob:"{**/*.py}",contentPattern:"^#\\s*%%$",important:!0,whenInstalled:["ms-python.python"]},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.datawrangler":{onFileOpen:[{pathGlob:"{**/*.ipynb}",contentPattern:"import\\s*pandas|from\\s*pandas",whenInstalled:["ms-toolsai.jupyter"]}]},"golang.Go":{onFileOpen:[{pathGlob:"**/*.go",important:!0},{languages:["go"],important:!0}]},"vscjava.vscode-java-pack":{onFileOpen:[{pathGlob:"{**/*.java}",important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},{languages:["java"],important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}]},"ms-vscode.PowerShell":{onFileOpen:[{pathGlob:"{**/*.ps1,**/*.psd1,**/*.psm1}",important:!0},{languages:["powershell"],important:!0},{pathGlob:"{**/*.ps.config,**/*.ps1.config}"}]},"ms-toolsai.prompty":{onFileOpen:[{pathGlob:"{**/*.prompty}",important:!1}]},"ms-vscode.cpptools-extension-pack":{onFileOpen:[{pathGlob:"{**/*.c,**/*.cpp,**/*.cc,**/.cxx,**/*.hh,**/*.hpp,**/*.hxx,**/*.h}",important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]},{languages:["c","cpp"],important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]}]},"ms-azuretools.vscode-docker":{onFileOpen:[{pathGlob:"{**/dockerfile,**/Dockerfile,**/docker-compose.yml,**/docker-compose.*.yml}",important:!0},{languages:["dockerfile"],important:!0},{pathGlob:"{**/*.cs,**/project.json,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln,**/appsettings.json,**/*.py,**/*.ipynb,**/*.js,**/*.ts,**/package.json}"}]},"vue.volar":{onFileOpen:[{pathGlob:"{**/*.vue}",important:!0},{languages:["vue"],important:!0}]},"ms-vscode.makefile-tools":{onFileOpen:[{pathGlob:"{**/makefile,**/Makefile}",important:!0},{languages:["makefile"],important:!0}]},"ms-vscode.cmake-tools":{onFileOpen:[{pathGlob:"{**/CMakeLists.txt}",important:!0}]},"ms-azure-devops.azure-pipelines":{onFileOpen:[{pathGlob:"{**/azure-pipelines.yaml}",important:!0}]},"msazurermtools.azurerm-vscode-tools":{onFileOpen:[{pathGlob:"{**/azuredeploy.json}",important:!0}]},"ms-vscode-remote.remote-containers":{onFileOpen:[{pathGlob:"{**/devcontainer.json}",important:!0}]},"ms-azuretools.vscode-bicep":{onFileOpen:[{pathGlob:"{**/*.bicep}",important:!0,whenNotInstalled:["ms-azuretools.rad-vscode-bicep"]}]},"svelte.svelte-vscode":{onFileOpen:[{pathGlob:"{**/*.svelte}",important:!0}]},"ms-vscode.vscode-github-issue-notebooks":{onFileOpen:[{pathGlob:"{**/*.github-issues}",important:!0}]},"ms-playwright.playwright":{onFileOpen:[{pathGlob:"{**/*playwright*.config.ts,**/*playwright*.config.js,**/*playwright*.config.mjs}",important:!0}]},"vscjava.vscode-gradle":{onFileOpen:[{pathGlob:"{**/gradlew,**/gradlew.bat,**/build.gradle,**/build.gradle.kts,**/settings.gradle,**/settings.gradle.kts}",important:!0}]},"REditorSupport.r":{onFileOpen:[{pathGlob:"{**/*.r}",important:!0},{languages:["r"],important:!0}]},"firefox-devtools.vscode-firefox-debug":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.es6,**/.babelrc}"}]},"ms-edgedevtools.vscode-edge-devtools":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.css,**/*.html}"}]},"Ionide.Ionide-fsharp":{onFileOpen:[{pathGlob:"{**/*.fsx,**/*.fsi,**/*.fs,**/*.ml,**/*.mli}"}]},"dbaeumer.vscode-eslint":{onFileOpen:[{pathGlob:"{**/*.js,**/*.jsx,**/*.es6,**/.eslintrc.*,**/.eslintrc,**/.babelrc,**/jsconfig.json}"}]},"bmewburn.vscode-intelephense-client":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"xdebug.php-debug":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"rust-lang.rust-analyzer":{onFileOpen:[{pathGlob:"{**/*.rs,**/*.rslib}"}]},"DavidAnson.vscode-markdownlint":{onFileOpen:[{pathGlob:"{**/*.md}"}]},"EditorConfig.EditorConfig":{onFileOpen:[{pathGlob:"{**/.editorconfig}"}]},"HookyQR.beautify":{onFileOpen:[{pathGlob:"{**/.jsbeautifyrc}"}]},"donjayamanne.githistory":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"eamodio.gitlens":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"Shopify.ruby-lsp":{onFileOpen:[{pathGlob:"{**/*.rb,**/*.erb,**/*.reek,**/.fasterer.yml,**/ruby-lint.yml,**/.rubocop.yml}"}]},"DotJoshJohnson.xml":{onFileOpen:[{pathGlob:"{**/*.xml}"}]},"stylelint.vscode-stylelint":{onFileOpen:[{pathGlob:"{**/.stylelintrc,**/stylelint.config.js}"}]},"ms-mssql.mssql":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"mtxr.sqltools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"usqlextpublisher.usql-vscode-ext":{onFileOpen:[{pathGlob:"{**/*.usql}"}]},"ms-vscode.sublime-keybindings":{onFileOpen:[{pathGlob:"{**/.sublime-project,**/.sublime-workspace}"}]},"k--kato.intellij-idea-keybindings":{onFileOpen:[{pathGlob:"{**/.idea}"}]},"christian-kohler.npm-intellisense":{onFileOpen:[{pathGlob:"{**/package.json}"}]},"cake-build.cake-vscode":{onFileOpen:[{pathGlob:"{**/build.cake}"}]},"Angular.ng-template":{onFileOpen:[{pathGlob:"{**/.angular-cli.json,**/angular.json,**/*.ng.html,**/*.ng,**/*.ngml}"}]},"vscjava.vscode-maven":{onFileOpen:[{pathGlob:"**/pom.xml"}]},"ms-azuretools.vscode-azureterraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"HashiCorp.terraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"vsciot-vscode.vscode-arduino":{onFileOpen:[{pathGlob:"**/*.ino"}]},"ms-kubernetes-tools.vscode-kubernetes-tools":{onFileOpen:[{pathGlob:"{**/Chart.yaml}"}]},"Oracle.oracledevtools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"betterthantomorrow.calva":{onFileOpen:[{pathGlob:"{**/*.clj,**/*.cljs}"}]},"vmware.vscode-boot-dev-pack":{onFileOpen:[{pathGlob:"{**/application.properties}"}]},"GitHub.copilot":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.py,**/*.go,**/*.rb,**/*.html,**/*.css,**/*.php,**/*.cpp,**/*.vue,**/*.c,**/*.sql,**/*.java,**/*.cs,**/*.rs,**/*.dart,**/*.ps,**/*.ps1,**/*.tex}"}],onSettingsEditorOpen:{descriptionOverride:"GitHub Copilot is an AI pair programmer tool that helps you write code faster and smarter."}},"GitHub.vscode-github-actions":{onFileOpen:[{pathGlob:"{**/.github/workflows/*.yml}",important:!0}]},"circleci.circleci":{onFileOpen:[{pathGlob:"{**/.circleci/config.yml}"}]},"mechatroner.rainbow-csv":{onFileOpen:[{pathGlob:"**/*.csv",important:!0}]},"tomoki1207.pdf":{onFileOpen:[{pathGlob:"**/*.pdf",important:!0}]},"Redis.redis-for-vscode":{onFileOpen:[{pathGlob:"{**/redis.*,**/redis-server.*,**/redis_*,**/redisinsight.*}"}]}},keymapExtensionTips:["vscodevim.vim","ms-vscode.sublime-keybindings","ms-vscode.atom-keybindings","ms-vscode.brackets-keybindings","ms-vscode.vs-keybindings","ms-vscode.notepadplusplus-keybindings","k--kato.intellij-idea-keybindings","lfs.vscode-emacs-friendly","alphabotsec.vscode-eclipse-keybindings","alefragnani.delphi-keybindings"],languageExtensionTips:["ms-python.python","ms-vscode.cpptools-extension-pack","ms-dotnettools.csdevkit","ms-toolsai.jupyter","vscjava.vscode-java-pack","ecmel.vscode-html-css","vue.volar","bmewburn.vscode-intelephense-client","dsznajder.es7-react-js-snippets","golang.go","ms-vscode.powershell","dart-code.dart-code","rust-lang.rust-analyzer","Shopify.ruby-lsp","GitHub.copilot"],configBasedExtensionTips:{git:{configPath:".git/config",configName:"Git",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",contentPattern:"^\\s*url\\s*=\\s*https:\\/\\/github\\.com.*$"},"eamodio.gitlens":{name:"GitLens"}}},devContainer:{configPath:".devcontainer/devcontainer.json",configName:"Dev Container",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0}}},maven:{configPath:"pom.xml",configName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},"vmware.vscode-boot-dev-pack":{name:"Spring Boot Extension Pack",isExtensionPack:!0}}},gradle:{configPath:"build.gradle",configName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"github-pull-request":{configPath:".vscode/.github-pull-request.rec",configName:"GitHub",configScheme:"vscode-vfs",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",important:!0}}},"pyproject-formatter":{configPath:"pyproject.toml",configName:"Python Formatter",recommendations:{"ms-python.black-formatter":{name:"Black Formatter",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?black"?\\s*[\\].])|("black\\s*["[(<=>!~;@])'},"ms-python.autopep8":{name:"Autopep8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?autopep8"?\\s*[\\].])|("autopep8\\s*["[(<=>!~;@])'}}},"pep8-formatter":{configPath:".pep8",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8"}}},"python-setup-cgf-formatter":{configPath:"setup.cfg",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"tox-ini-formatter":{configPath:"tox.ini",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"pyproject-linter":{configPath:"pyproject.toml",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?pylint"?\\s*[\\].])|("pylint\\s*["[(<=>!~;@])'},"charliermarsh.ruff":{name:"Ruff",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?ruff"?\\s*[\\].])|("ruff\\s*["[(<=>!~;@])'},"ms-python.mypy-type-checker":{name:"Mypy Type Checker",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?mypy"?\\s*[\\].])|("mypy\\s*["[(<=>!~;@])'},"ms-python.flake8":{name:"Flake8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?flake8"?\\s*[\\].])|("flake8\\s*["[(<=>!~;@])'}}},".pylintrc-linter":{configPath:".pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"pylintrc-linter":{configPath:"pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"mypy-ini-linter":{configPath:".mypy.ini",configName:"Python Linter",recommendations:{"ms-python.mypy-type-checker":{name:"Mypy Type Checker"}}},"tox-ini-linter":{configPath:"tox.ini",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}},".flake8-linter":{configPath:".flake8",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8"}}},"python-setup-cgf-linter":{configPath:"setup.cfg",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}}},exeBasedExtensionTips:{az:{friendlyName:"Azure CLI",windowsPath:"%ProgramFiles(x86)%\\Microsoft SDKs\\Azure\\CLI2\\wbin\\az.cmd",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},azd:{friendlyName:"Azure Dev CLI",windowsPath:"%USERPROFILE%\\AppData\\Local\\Programs\\Azure Dev CLI\\azd.exe",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},"azd-user":{friendlyName:"Azure Dev CLI",windowsPath:"%ProgramFiles%\\Azure Dev CLI\\azd.exe",recommendations:{"ms-vscode.vscode-node-azure-pack":{name:"Azure Tools"},"ms-azuretools.vscode-azure-github-copilot":{name:"GitHub Copilot for Azure"}}},heroku:{friendlyName:"Heroku CLI",windowsPath:"%ProgramFiles%\\Heroku\\bin\\heroku.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"pkosta2005.heroku-command":{name:"heroku-cli"}}},mongo:{friendlyName:"Mongo",windowsPath:"%ProgramFiles%\\MongoDB\\Server\\3.6\\bin\\mongod.exe",recommendations:{"ms-azuretools.vscode-cosmosdb":{name:"Azure Databases"}}},serverless:{friendlyName:"Serverless framework",windowsPath:"%APPDATA%\\npm\\serverless.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},func:{friendlyName:"Azure Function SDK",windowsPath:"%APPDATA%\\npm\\func.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},mysql:{friendlyName:"MySQL",windowsPath:"%ProgramFiles%\\MySQL\\MySQL Server 8.0\\bin\\mysqld.exe",recommendations:{"mtxr.sqltools":{name:"SQLTools"}}},postgres:{friendlyName:"PostgreSQL",windowsPath:"%ProgramFiles%\\PostgreSQL\\11\\bin\\psql.exe",recommendations:{"ms-ossdata.vscode-postgresql":{name:"PostgreSQL"},"mtxr.sqltools":{name:"SQLTools"}}},sqlcmd:{friendlyName:"SQL CLI",recommendations:{"ms-mssql.mssql":{name:"SQL Server (mssql)"}}},now:{friendlyName:"Now CLI",windowsPath:"%APPDATA%\\npm\\now.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"ms-azuretools.vscode-docker":{name:"Docker"}}},docker:{friendlyName:"Docker",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\docker.exe",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker",important:!0},"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},kubectl:{friendlyName:"Kubernetes",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\kubectl.exe",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},ng:{friendlyName:"Angular CLI",windowsPath:"%APPDATA%\\npmexit\\ng.cmd",recommendations:{"johnpapa.Angular2":{name:"Angular Snippets"}}},"create-react-app":{friendlyName:"Create React App",windowsPath:"%APPDATA%\\npm\\create-react-app.cmd",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},"react-native":{friendlyName:"React Native",windowsPath:"%APPDATA%\\npm\\react-native-cli",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},p4:{friendlyName:"Perforce",recommendations:{"slevesque.perforce":{name:"Perforce for VS Code"}}},hg:{friendlyName:"Mercurial",recommendations:{"mrcrowl.hg":{name:"Hg"}}},git:{friendlyName:"Git",windowsPath:"%ProgramFiles%\\Git\\git-bash.exe",recommendations:{"eamodio.gitlens":{name:"GitLens"}}},svn:{friendlyName:"Subversion",windowsPath:"%ProgramFiles%\\TortoiseSVN\\bin\\TortoiseProc.exe",recommendations:{"johnstoncode.svn-scm":{name:"SVN"}}},subl:{friendlyName:"Sublime",windowsPath:"%ProgramFiles%\\Sublime Text3\\sublime_text.exe",recommendations:{"ms-vscode.sublime-keybindings":{name:"Sublime Text Keymap and Settings Importer"}}},atom:{friendlyName:"Atom",windowsPath:"%USERPROFILE%\\AppData\\Local\\atom\\bin\\atom.cmd",recommendations:{"ms-vscode.atom-keybindings":{name:"Atom Keymap"}}},brackets:{friendlyName:"Brackets",windowsPath:"%ProgramFiles(x86)%\\Brackets\\Brackets.exe",recommendations:{"ms-vscode.brackets-keybindings":{name:"Brackets Keymap"}}},notepadplusplus:{friendlyName:"Notepad++",windowsPath:"%ProgramFiles%\\Notepad++\\Notepad++.exe",recommendations:{"ms-vscode.notepadplusplus-keybindings":{name:"Notepad++ keymap"}}},vi:{friendlyName:"VIM",windowsPath:"%ProgramFiles(x86)%\\Vim\\vim80\\gvim.exe",recommendations:{"vscodevim.vim":{name:"Vim"}}},mvn:{friendlyName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},gradle:{friendlyName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"Microsoft Edge":{friendlyName:"Microsoft Edge",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Dev":{friendlyName:"Microsoft Edge Dev",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Dev\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Beta":{friendlyName:"Microsoft Edge Beta",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Beta\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Canary":{friendlyName:"Microsoft Edge Canary",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge SxS\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Mozilla Firefox (x86)":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles(x86)%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition (x86)":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles(x86)%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},cordova:{friendlyName:"Cordova",windowsPath:"%APPDATA%\\npm\\cordova",recommendations:{"msjsdiag.cordova-tools":{name:"Cordova Tools"}}},gcloud:{friendlyName:"Google GCloud CLI",windowsPath:"%ProgramFiles(x86)%\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd",recommendations:{"GoogleCloudTools.cloudcode":{name:"Cloud Code"}}},skaffold:{friendlyName:"Skaffold Code to Cluster",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},minikube:{friendlyName:"MiniKube Local Kubernetes Cluster",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},podman:{friendlyName:"Podman",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},wsl:{friendlyName:"Windows Subsystem for Linux (WSL)",windowsPath:"%WINDIR%\\system32\\lxss\\LxssManager.dll",important:!0,recommendations:{"ms-vscode-remote.remote-wsl":{name:"WSL",important:!0}}}},webExtensionTips:["tyriar.luna-paint","codespaces-contrib.codeswing","ms-vscode.vscode-github-issue-notebooks","esbenp.prettier-vscode","hediet.vscode-drawio"],virtualWorkspaceExtensionTips:{"vscode-vfs":{friendlyName:"Remote Repositories",extensionId:"ms-vscode.remote-repositories",startEntry:{helpLink:"https://aka.ms/vscode-remote/remote-repositories",startConnectLabel:"Remote Repository",startCommand:"remoteHub.continueOn.openRepository",priority:5}}},remoteExtensionTips:{wsl:{friendlyName:"WSL",extensionId:"ms-vscode-remote.remote-wsl",supportedPlatforms:["Windows","Web"],startEntry:{helpLink:"https://aka.ms/vscode-remote/wsl",startConnectLabel:"WSL",startCommand:"remote-wsl.connect",priority:3}},"ssh-remote":{friendlyName:"Remote - SSH",extensionId:"ms-vscode-remote.remote-ssh",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/ssh",startConnectLabel:"SSH ",startCommand:"opensshremotes.openEmptyWindowInCurrentWindow",priority:1}},"dev-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/containers",startConnectLabel:"Dev Container",startCommand:"remote-containers.reopenInContainer",priority:2}},"attached-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers"},codespaces:{friendlyName:"GitHub Codespaces",extensionId:"github.codespaces",startEntry:{helpLink:"https://aka.ms/vscode-remote-codespaces",startConnectLabel:"GitHub Codespace ",startCommand:"github.codespaces.connect",priority:4}},tunnel:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server",startEntry:{helpLink:"https://aka.ms/remote-tunnels-doc",startConnectLabel:"Tunnel",startCommand:"remote-tunnels.connectCurrentWindowToTunnel",priority:0}}},commandPaletteSuggestedCommandIds:["workbench.action.files.openFile","workbench.action.files.openFileFolder","workbench.action.files.openFolder","workbench.action.remote.showMenu","editor.action.formatDocument","editor.action.commentLine","workbench.action.tasks.runTask","workbench.action.openSettings2","workbench.action.selectTheme","workbench.action.openWalkthrough","workbench.action.openIssueReporter"],extensionKeywords:{md:["Markdown"],js:["JavaScript"],jsx:["JavaScript"],es6:["JavaScript"],html:["Html"],ts:["TypeScript"],tsx:["TypeScript"],css:["CSS"],scss:["SASS"],txt:["Text"],php:["PHP"],php3:["PHP"],php4:["PHP"],ph3:["PHP"],ph4:["PHP"],xml:["XML"],py:["Python"],pyc:["Python"],pyd:["Python"],pyo:["Python"],pyw:["Python"],pyz:["Python"],java:["Java"],class:["Java"],jar:["Java"],c:["c","objective c","objective-c"],m:["objective c","objective-c"],mm:["objective c","objective-c"],cpp:["cpp","c plus plus","c","c++"],cc:["cpp","c plus plus","c","c++"],cxx:["cpp","c plus plus","c++"],hh:["cpp","c plus plus","c++"],hpp:["cpp","c++"],h:["cpp","c plus plus","c++","c","objective c","objective-c"],sql:["sql"],sh:["bash"],bash:["bash"],zsh:["bash","zshell"],cs:["c#","csharp"],csproj:["c#","csharp"],sln:["c#","csharp"],go:["go"],sty:["latex"],tex:["latex"],ps:["powershell"],ps1:["powershell"],rs:["rust"],rslib:["rust"],hs:["haskell"],lhs:["haskell"],scm:["scheme"],ss:["scheme"],clj:["clojure"],cljs:["clojure"],cljc:["clojure"],edn:["clojure"],erl:["erlang"],hrl:["erlang"],scala:["scala"],sc:["scala"],pl:["perl"],pm:["perl"],t:["perl"],pod:["perl"],groovy:["groovy"],swift:["swift"],rb:["ruby"],rbw:["ruby"],jl:["julia"],f:["fortran"],for:["fortran"],f90:["fortran"],f95:["fortran"],coffee:["CoffeeScript"],litcoffee:["CoffeeScript"],yaml:["yaml"],yml:["yaml"],dart:["dart"],json:["json"]},extensionAllowedBadgeProviders:["api.bintray.com","api.travis-ci.com","api.travis-ci.org","app.fossa.io","badge.buildkite.com","badge.fury.io","badge.waffle.io","badgen.net","badges.frapsoft.com","badges.gitter.im","badges.greenkeeper.io","cdn.travis-ci.com","cdn.travis-ci.org","ci.appveyor.com","circleci.com","cla.opensource.microsoft.com","codacy.com","codeclimate.com","codecov.io","coveralls.io","david-dm.org","deepscan.io","dev.azure.com","docs.rs","flat.badgen.net","gemnasium.com","githost.io","gitlab.com","godoc.org","goreportcard.com","img.shields.io","isitmaintained.com","marketplace.visualstudio.com","nodesecurity.io","opencollective.com","snyk.io","travis-ci.com","travis-ci.org","visualstudio.com","vsmarketplacebadge.apphb.com","www.bithound.io","www.versioneye.com"],extensionAllowedBadgeProvidersRegex:["^https:\\/\\/github\\.com\\/[^/]+\\/[^/]+\\/(actions\\/)?workflows\\/.*badge\\.svg"],crashReporter:{productName:"VSCode",companyName:"Microsoft"},appCenter:{"win32-x64":"appcenter://code?aid=a4e3233c-699c-46ec-b4f4-9c2a77254662","win32-arm64":"appcenter://code?aid=3712d786-7cc8-4f11-8b08-cc12eab6d4f7","linux-x64":"appcenter://code?aid=fba07a4d-84bd-4fc8-a125-9640fc8ce171",darwin:"appcenter://code?aid=860d6632-f65b-490b-85a8-3e72944f7774","darwin-arm64":"appcenter://code?aid=be71415d-3893-4ae5-b453-e537b9668a10","darwin-universal":"appcenter://code?aid=de75e3cc-e22f-4f42-a03f-1409c21d8af8"},enableTelemetry:!0,aiConfig:{ariaKey:"5bbf946d11a54f6783919c455abaddaf-fd62977b-c92d-4714-a45d-649d06980372-7168"},msftInternalDomains:["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"],documentationUrl:"https://go.microsoft.com/fwlink/?LinkID=533484#vscode",serverDocumentationUrl:"https://aka.ms/vscode-server-doc",releaseNotesUrl:"https://go.microsoft.com/fwlink/?LinkID=533483#vscode",keyboardShortcutsUrlMac:"https://go.microsoft.com/fwlink/?linkid=832143",keyboardShortcutsUrlLinux:"https://go.microsoft.com/fwlink/?linkid=832144",keyboardShortcutsUrlWin:"https://go.microsoft.com/fwlink/?linkid=832145",introductoryVideosUrl:"https://go.microsoft.com/fwlink/?linkid=832146",tipsAndTricksUrl:"https://go.microsoft.com/fwlink/?linkid=852118",newsletterSignupUrl:"https://www.research.net/r/vsc-newsletter",youTubeUrl:"https://aka.ms/vscode-youtube",requestFeatureUrl:"https://go.microsoft.com/fwlink/?LinkID=533482",reportIssueUrl:"https://github.com/Microsoft/vscode/issues/new",reportMarketplaceIssueUrl:"https://github.com/microsoft/vsmarketplace/issues/new",licenseUrl:"https://go.microsoft.com/fwlink/?LinkID=533485",serverLicenseUrl:"https://aka.ms/vscode-server-license",privacyStatementUrl:"https://go.microsoft.com/fwlink/?LinkId=521839",showTelemetryOptOut:!0,npsSurveyUrl:"https://aka.ms/vscode-nps",checksumFailMoreInfoUrl:"https://go.microsoft.com/fwlink/?LinkId=828886",electronRepository:"Microsoft/vscode-electron-prebuilt",nodejsRepository:"Microsoft/vscode-node",settingsSearchUrl:"https://bingsettingssearch.trafficmanager.net/api/Search",surveys:[{surveyId:"cpp.1",surveyUrl:"https://www.research.net/r/VBVV6C6",languageId:"cpp",editCount:10,userProbability:.15},{surveyId:"java.2",surveyUrl:"https://www.research.net/r/vscodejava",languageId:"java",editCount:10,userProbability:.3},{surveyId:"javascript.1",surveyUrl:"https://www.research.net/r/vscode-js",languageId:"javascript",editCount:10,userProbability:.05},{surveyId:"typescript.1",surveyUrl:"https://www.research.net/r/vscode-ts",languageId:"typescript",editCount:10,userProbability:.05},{surveyId:"csharp.1",surveyUrl:"https://www.research.net/r/8KGJ9V8",languageId:"csharp",editCount:10,userProbability:.1}],extensionsEnabledWithApiProposalVersion:["GitHub.copilot-chat","ms-vscode.vscode-commander","ms-vscode.vscode-copilot-vision"],extensionEnabledApiProposals:{"ms-vscode.vscode-selfhost-test-provider":["testObserver","testRelatedCode","attributableCoverage"],"VisualStudioExptTeam.vscodeintellicode-completions":["inlineCompletionsAdditions"],"ms-vsliveshare.vsliveshare":["contribMenuBarHome","contribShareMenu","contribStatusBarItems","diffCommand","documentFiltersExclusive","fileSearchProvider","findTextInFiles","notebookCellExecutionState","notebookLiveShare","terminalDimensions","terminalDataWriteEvent","textSearchProvider"],"ms-vscode.js-debug":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-toolsai.vscode-ai-remote":["resolvers"],"ms-python.python":["codeActionAI","contribEditorContentMenu","quickPickSortByLabel","portsAttributes","testObserver","quickPickItemTooltip","terminalDataWriteEvent","terminalExecuteCommandEvent","contribIssueReporter","notebookReplDocument","notebookVariableProvider"],"ms-dotnettools.dotnet-interactive-vscode":["notebookMessaging"],"GitHub.codespaces":["contribEditSessions","contribMenuBarHome","contribRemoteHelp","contribViewsRemote","resolvers","tunnels","terminalDataWriteEvent","treeViewReveal","notebookKernelSource"],"ms-vscode.azure-repos":["extensionRuntime","fileSearchProvider","textSearchProvider"],"ms-vscode.remote-repositories":["canonicalUriProvider","contribEditSessions","contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","contribShareMenu","documentFiltersExclusive","editSessionIdentityProvider","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","shareProvider","scmActionButton","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-vscode-remote.remote-wsl":["resolvers","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode-remote.remote-ssh":["resolvers","tunnels","terminalDataWriteEvent","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode.remote-server":["resolvers","tunnels","contribViewsWelcome"],"ms-vscode.remote-explorer":["contribRemoteHelp","contribViewsRemote","extensionsAny"],"ms-vscode-remote.remote-containers":["contribEditSessions","resolvers","portsAttributes","tunnels","workspaceTrust","terminalDimensions","contribRemoteHelp","contribViewsRemote"],"ms-vscode.js-debug-nightly":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-vscode.lsif-browser":["documentFiltersExclusive"],"ms-vscode.vscode-speech":["speech"],"GitHub.vscode-pull-request-github":["activeComment","codiconDecoration","codeActionRanges","commentingRangeHint","commentReactor","commentReveal","commentThreadApplicability","contribAccessibilityHelpContent","contribCommentEditorActionsMenu","contribCommentPeekContext","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","contribEditorContentMenu","contribMultiDiffEditorMenus","contribShareMenu","diffCommand","fileComments","quickDiffProvider","shareProvider","tabInputTextMerge","tokenInformation","treeViewMarkdownMessage"],"GitHub.copilot":["inlineCompletionsAdditions"],"GitHub.copilot-nightly":["inlineCompletionsAdditions"],"GitHub.copilot-chat":["interactive","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","chatParticipantAdditions","defaultChatParticipant","embeddings","chatEditing","chatVariableResolver","chatProvider","mappedEditsProvider","aiRelatedInformation","codeActionAI","findTextInFiles","textSearchProvider","textSearchProvider2","activeComment","commentReveal","contribSourceControlInputBoxMenu","contribCommentEditorActionsMenu","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","newSymbolNamesProvider","findFiles2","extensionsAny","authLearnMore","testObserver","aiTextSearchProvider","documentFiltersExclusive","chatParticipantPrivate","contribDebugCreateConfiguration","inlineEdit"],"GitHub.remotehub":["contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","documentFiltersExclusive","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-python.gather":["notebookCellExecutionState"],"ms-python.vscode-pylance":["notebookCellExecutionState"],"ms-python.debugpy":["contribIssueReporter","contribViewsWelcome","debugVisualization","portsAttributes"],"ms-toolsai.jupyter-renderers":["contribNotebookStaticPreloads"],"ms-toolsai.jupyter":["notebookDeprecated","notebookMessaging","notebookMime","notebookCellExecutionState","portsAttributes","quickPickSortByLabel","notebookKernelSource","interactiveWindow","notebookControllerAffinityHidden","contribNotebookStaticPreloads","quickPickItemTooltip","notebookExecution","notebookCellExecution","notebookVariableProvider","notebookReplDocument"],"dbaeumer.vscode-eslint":["notebookCellExecutionState"],"ms-vscode.azure-sphere-tools-ui":["tunnels"],"ms-azuretools.vscode-azureappservice":["terminalDataWriteEvent"],"ms-vscode.anycode":["extensionsAny"],"ms-vscode.cpptools":["terminalDataWriteEvent"],"redhat.java":["documentPaste"],"vscjava.vscode-java-pack":[],"ms-dotnettools.csdevkit":["inlineCompletionsAdditions"],"ms-dotnettools.vscodeintellicode-csharp":["inlineCompletionsAdditions"],"microsoft-IsvExpTools.powerplatform-vscode":["fileSearchProvider","textSearchProvider"],"microsoft-IsvExpTools.powerplatform-vscode-preview":["fileSearchProvider","textSearchProvider"],"TeamsDevApp.ms-teams-vscode-extension":["chatParticipantAdditions","languageModelSystem"],"ms-toolsai.datawrangler":[],"ms-vscode.vscode-commander":[],"ms-vscode.vscode-websearchforcopilot":[],"ms-vscode.vscode-copilot-data-analysis":["chatVariableResolver","chatProvider"],"ms-vscode.vscode-copilot-vision":["chatReferenceBinaryData","codeActionAI"]},tasConfig:{endpoint:"https://default.exp-tas.com/vscode/ab",telemetryEventName:"query-expfeature",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext"},extensionKind:{"Shan.code-settings-sync":["ui"],"shalldie.background":["ui"],"techer.open-in-browser":["ui"],"CoenraadS.bracket-pair-colorizer-2":["ui"],"CoenraadS.bracket-pair-colorizer":["ui","workspace"],"hiro-sun.vscode-emacs":["ui","workspace"],"hnw.vscode-auto-open-markdown-preview":["ui","workspace"],"wayou.vscode-todo-highlight":["ui","workspace"],"aaron-bond.better-comments":["ui","workspace"],"vscodevim.vim":["ui"],"ollyhayes.colmak-vim":["ui"]},extensionPointExtensionKind:{typescriptServerPlugins:["workspace"]},extensionSyncedKeys:{"ritwickdey.liveserver":["liveServer.setup.version"]},extensionVirtualWorkspacesSupport:{"esbenp.prettier-vscode":{default:!1},"msjsdiag.debugger-for-chrome":{default:!1},"redhat.java":{default:!1},"HookyQR.beautify":{default:!1},"ritwickdey.LiveServer":{default:!1},"VisualStudioExptTeam.vscodeintellicode":{default:!1},"octref.vetur":{default:!1},"formulahendry.code-runner":{default:!1},"xdebug.php-debug":{default:!1},"ms-mssql.mssql":{default:!1},"christian-kohler.path-intellisense":{default:!1},"eg2.tslint":{default:!1},"eg2.vscode-npm-script":{default:!1},"donjayamanne.githistory":{default:!1},"Zignd.html-css-class-completion":{default:!1},"christian-kohler.npm-intellisense":{default:!1},"EditorConfig.EditorConfig":{default:!1},"austin.code-gnu-global":{default:!1},"johnpapa.Angular2":{default:!1},"ms-vscode.vscode-typescript-tslint-plugin":{default:!1},"DotJoshJohnson.xml":{default:!1},"techer.open-in-browser":{default:!1},"tht13.python":{default:!1},"bmewburn.vscode-intelephense-client":{default:!1},"Angular.ng-template":{default:!1},"xdebug.php-pack":{default:!1},"dbaeumer.jshint":{default:!1},"yzhang.markdown-all-in-one":{default:!1},"Dart-Code.flutter":{default:!1},"streetsidesoftware.code-spell-checker":{default:!1},"rebornix.Ruby":{default:!1},"ms-vscode.sublime-keybindings":{default:!1},"mitaki28.vscode-clang":{default:!1},"steoates.autoimport":{default:!1},"donjayamanne.python-extension-pack":{default:!1},"shd101wyy.markdown-preview-enhanced":{default:!1},"mikestead.dotenv":{default:!1},"pranaygp.vscode-css-peek":{default:!1},"ikappas.phpcs":{default:!1},"platformio.platformio-ide":{default:!1},"jchannon.csharpextensions":{default:!1},"gruntfuggly.todo-tree":{default:!1}},linkProtectionTrustedDomains:["https://*.visualstudio.com","https://*.microsoft.com","https://aka.ms","https://*.gallerycdn.vsassets.io","https://*.github.com","https://login.microsoftonline.com","https://*.vscode.dev","https://*.github.dev","https://gh.io","https://portal.azure.com","https://raw.githubusercontent.com","https://private-user-images.githubusercontent.com","https://avatars.githubusercontent.com"],trustedExtensionAuthAccess:{github:["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare"],"github-enterprise":["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare"],microsoft:["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azureresourcegroups","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"],"microsoft-sovereign-cloud":["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azureresourcegroups","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"]},trustedExtensionProtocolHandlers:["vscode.git","vscode.github-authentication","vscode.microsoft-authentication"],inheritAuthAccountPreference:{"github.copilot":["github.copilot-chat"]},auth:{loginUrl:"https://login.microsoftonline.com/common/oauth2/authorize",tokenUrl:"https://login.microsoftonline.com/common/oauth2/token",redirectUrl:"https://vscode-redirect.azurewebsites.net/",clientId:"aebc6443-996d-45c2-90f0-388ff96faa56"},"configurationSync.store":{url:"https://vscode-sync.trafficmanager.net/",stableUrl:"https://vscode-sync.trafficmanager.net/",insidersUrl:"https://vscode-sync-insiders.trafficmanager.net/",canSwitch:!1,authenticationProviders:{github:{scopes:["user:email"]},microsoft:{scopes:["openid","profile","email","offline_access"]}}},"editSessions.store":{url:"https://vscode-sync.trafficmanager.net/",authenticationProviders:{microsoft:{scopes:["openid","profile","email","offline_access"]},github:{scopes:["user:email"]}}},tunnelServerQualities:{stable:{serverApplicationName:"code-server"},exploration:{serverApplicationName:"code-server-exploration"},insider:{serverApplicationName:"code-server-insiders"}},tunnelApplicationName:"code-tunnel",tunnelApplicationConfig:{editorWebUrl:"https://vscode.dev",extension:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server"},authenticationProviders:{github:{scopes:["user:email","read:org"]},microsoft:{scopes:["46da2f7e-b5ef-422a-88d4-2a7f9de6a0b2/.default","profile","openid"]}}},win32TunnelServiceMutex:"vscode-tunnelservice",win32TunnelMutex:"vscode-tunnel",commonlyUsedSettings:["files.autoSave","editor.fontSize","editor.fontFamily","GitHub.copilot.manageExtension","editor.tabSize","editor.renderWhitespace","editor.cursorStyle","editor.multiCursorModifier","editor.insertSpaces","editor.wordWrap","files.exclude","files.associations","workbench.editor.enablePreview"],aiGeneratedWorkspaceTrust:{title:"This workspace was generated by GitHub Copilot",checkboxText:"Trust the contents of all files in this workspace",trustOption:"Yes, I trust the contents",dontTrustOption:"No, I don't trust the contents",startupTrustRequestLearnMore:"If you don't trust the contents of the files generated by GitHub Copilot, we recommend continuing in restricted mode. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more. "},defaultChatAgent:{extensionId:"GitHub.copilot",chatExtensionId:"GitHub.copilot-chat",documentationUrl:"https://aka.ms/copilot-overview",termsStatementUrl:"https://aka.ms/github-copilot-terms-statement",privacyStatementUrl:"https://aka.ms/github-copilot-privacy-statement",skusDocumentationUrl:"https://aka.ms/github-copilot-plans",publicCodeMatchesUrl:"https://aka.ms/github-copilot-match-public-code",manageSettingsUrl:"https://aka.ms/github-copilot-settings",managePlanUrl:"https://aka.ms/github-copilot-manage-plan",upgradePlanUrl:"https://aka.ms/github-copilot-upgrade-plan",providerId:"github",providerName:"GitHub",providerScopes:[["user:email"],["read:user"],["read:user","user:email","repo","workflow"]],entitlementUrl:"https://api.github.com/copilot_internal/user",entitlementSignupLimitedUrl:"https://api.github.com/copilot_internal/subscribe_limited_user"},chatParticipantRegistry:"https://main.vscode-cdn.net/extensions/chat.json",builtInExtensions:[{name:"ms-vscode.js-debug-companion",version:"1.1.3",sha256:"7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93",repo:"https://github.com/microsoft/vscode-js-debug-companion",metadata:{id:"99cb0b7f-7354-4278-b8da-6cc79972169d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.js-debug",version:"1.96.0",sha256:"278cd8b129c133d834a8105d0e0699f2f940c5c159fa5c821c7b9a4f7ffd3581",repo:"https://github.com/microsoft/vscode-js-debug",metadata:{id:"25629058-ddac-4e17-abba-74678e126c5d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.vscode-js-profile-table",version:"1.0.10",sha256:"7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08",repo:"https://github.com/microsoft/vscode-js-profile-visualizer",metadata:{id:"7e52b41b-71ad-457b-ab7e-0620f1fc4feb",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}}],version:"1.96.4",commit:"cd4ee3b1c348a13bafd8f9ad8060705f6d4b9cba",date:"2025-01-16T00:16:19.038Z"},Object.keys(Nr).length===0&&Object.assign(Nr,{version:"1.95.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var $T=Nr,$6=class x3{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++x3.count}},C6=[];function N(e){const t=new $6(e);return C6[t.nid]=t,t}function ed(e){return C6[e].sid}var zr=class{constructor(e){this.value=e}},I6;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(I6||(I6={}));var P6;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(P6||(P6={}));var D6;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(D6||(D6={}));var A6;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(A6||(A6={}));var T6;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(T6||(T6={}));var R6;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(R6||(R6={}));var L6;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(L6||(L6={}));var Gm;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Gm||(Gm={}));var EV=class E3{static{this.a=0}static mixin(t){return t._id=E3.a++,t}},N6;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(N6||(N6={}));var F6;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(F6||(F6={}));var O6;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(O6||(O6={}));var Q={MainThreadAuthentication:N("MainThreadAuthentication"),MainThreadBulkEdits:N("MainThreadBulkEdits"),MainThreadLanguageModels:N("MainThreadLanguageModels"),MainThreadEmbeddings:N("MainThreadEmbeddings"),MainThreadChatAgents2:N("MainThreadChatAgents2"),MainThreadCodeMapper:N("MainThreadCodeMapper"),MainThreadChatVariables:N("MainThreadChatVariables"),MainThreadLanguageModelTools:N("MainThreadChatSkills"),MainThreadClipboard:N("MainThreadClipboard"),MainThreadCommands:N("MainThreadCommands"),MainThreadComments:N("MainThreadComments"),MainThreadConfiguration:N("MainThreadConfiguration"),MainThreadConsole:N("MainThreadConsole"),MainThreadDebugService:N("MainThreadDebugService"),MainThreadDecorations:N("MainThreadDecorations"),MainThreadDiagnostics:N("MainThreadDiagnostics"),MainThreadDialogs:N("MainThreadDiaglogs"),MainThreadDocuments:N("MainThreadDocuments"),MainThreadDocumentContentProviders:N("MainThreadDocumentContentProviders"),MainThreadTextEditors:N("MainThreadTextEditors"),MainThreadEditorInsets:N("MainThreadEditorInsets"),MainThreadEditorTabs:N("MainThreadEditorTabs"),MainThreadErrors:N("MainThreadErrors"),MainThreadTreeViews:N("MainThreadTreeViews"),MainThreadDownloadService:N("MainThreadDownloadService"),MainThreadLanguageFeatures:N("MainThreadLanguageFeatures"),MainThreadLanguages:N("MainThreadLanguages"),MainThreadLogger:N("MainThreadLogger"),MainThreadMessageService:N("MainThreadMessageService"),MainThreadOutputService:N("MainThreadOutputService"),MainThreadProgress:N("MainThreadProgress"),MainThreadQuickDiff:N("MainThreadQuickDiff"),MainThreadQuickOpen:N("MainThreadQuickOpen"),MainThreadStatusBar:N("MainThreadStatusBar"),MainThreadSecretState:N("MainThreadSecretState"),MainThreadStorage:N("MainThreadStorage"),MainThreadSpeech:N("MainThreadSpeechProvider"),MainThreadTelemetry:N("MainThreadTelemetry"),MainThreadTerminalService:N("MainThreadTerminalService"),MainThreadTerminalShellIntegration:N("MainThreadTerminalShellIntegration"),MainThreadWebviews:N("MainThreadWebviews"),MainThreadWebviewPanels:N("MainThreadWebviewPanels"),MainThreadWebviewViews:N("MainThreadWebviewViews"),MainThreadCustomEditors:N("MainThreadCustomEditors"),MainThreadUrls:N("MainThreadUrls"),MainThreadUriOpeners:N("MainThreadUriOpeners"),MainThreadProfileContentHandlers:N("MainThreadProfileContentHandlers"),MainThreadWorkspace:N("MainThreadWorkspace"),MainThreadFileSystem:N("MainThreadFileSystem"),MainThreadFileSystemEventService:N("MainThreadFileSystemEventService"),MainThreadExtensionService:N("MainThreadExtensionService"),MainThreadSCM:N("MainThreadSCM"),MainThreadSearch:N("MainThreadSearch"),MainThreadShare:N("MainThreadShare"),MainThreadTask:N("MainThreadTask"),MainThreadWindow:N("MainThreadWindow"),MainThreadLabelService:N("MainThreadLabelService"),MainThreadNotebook:N("MainThreadNotebook"),MainThreadNotebookDocuments:N("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:N("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:N("MainThreadNotebookKernels"),MainThreadNotebookRenderers:N("MainThreadNotebookRenderers"),MainThreadInteractive:N("MainThreadInteractive"),MainThreadTheming:N("MainThreadTheming"),MainThreadTunnelService:N("MainThreadTunnelService"),MainThreadManagedSockets:N("MainThreadManagedSockets"),MainThreadTimeline:N("MainThreadTimeline"),MainThreadTesting:N("MainThreadTesting"),MainThreadLocalization:N("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:N("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:N("MainThreadAiEmbeddingVector")},re={ExtHostCodeMapper:N("ExtHostCodeMapper"),ExtHostCommands:N("ExtHostCommands"),ExtHostConfiguration:N("ExtHostConfiguration"),ExtHostDiagnostics:N("ExtHostDiagnostics"),ExtHostDebugService:N("ExtHostDebugService"),ExtHostDecorations:N("ExtHostDecorations"),ExtHostDocumentsAndEditors:N("ExtHostDocumentsAndEditors"),ExtHostDocuments:N("ExtHostDocuments"),ExtHostDocumentContentProviders:N("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:N("ExtHostDocumentSaveParticipant"),ExtHostEditors:N("ExtHostEditors"),ExtHostTreeViews:N("ExtHostTreeViews"),ExtHostFileSystem:N("ExtHostFileSystem"),ExtHostFileSystemInfo:N("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:N("ExtHostFileSystemEventService"),ExtHostLanguages:N("ExtHostLanguages"),ExtHostLanguageFeatures:N("ExtHostLanguageFeatures"),ExtHostQuickOpen:N("ExtHostQuickOpen"),ExtHostQuickDiff:N("ExtHostQuickDiff"),ExtHostStatusBar:N("ExtHostStatusBar"),ExtHostShare:N("ExtHostShare"),ExtHostExtensionService:N("ExtHostExtensionService"),ExtHostLogLevelServiceShape:N("ExtHostLogLevelServiceShape"),ExtHostTerminalService:N("ExtHostTerminalService"),ExtHostTerminalShellIntegration:N("ExtHostTerminalShellIntegration"),ExtHostSCM:N("ExtHostSCM"),ExtHostSearch:N("ExtHostSearch"),ExtHostTask:N("ExtHostTask"),ExtHostWorkspace:N("ExtHostWorkspace"),ExtHostWindow:N("ExtHostWindow"),ExtHostWebviews:N("ExtHostWebviews"),ExtHostWebviewPanels:N("ExtHostWebviewPanels"),ExtHostCustomEditors:N("ExtHostCustomEditors"),ExtHostWebviewViews:N("ExtHostWebviewViews"),ExtHostEditorInsets:N("ExtHostEditorInsets"),ExtHostEditorTabs:N("ExtHostEditorTabs"),ExtHostProgress:N("ExtHostProgress"),ExtHostComments:N("ExtHostComments"),ExtHostSecretState:N("ExtHostSecretState"),ExtHostStorage:N("ExtHostStorage"),ExtHostUrls:N("ExtHostUrls"),ExtHostUriOpeners:N("ExtHostUriOpeners"),ExtHostProfileContentHandlers:N("ExtHostProfileContentHandlers"),ExtHostOutputService:N("ExtHostOutputService"),ExtHostLabelService:N("ExtHostLabelService"),ExtHostNotebook:N("ExtHostNotebook"),ExtHostNotebookDocuments:N("ExtHostNotebookDocuments"),ExtHostNotebookEditors:N("ExtHostNotebookEditors"),ExtHostNotebookKernels:N("ExtHostNotebookKernels"),ExtHostNotebookRenderers:N("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:N("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:N("ExtHostInteractive"),ExtHostChatAgents2:N("ExtHostChatAgents"),ExtHostChatVariables:N("ExtHostChatVariables"),ExtHostLanguageModelTools:N("ExtHostChatSkills"),ExtHostChatProvider:N("ExtHostChatProvider"),ExtHostSpeech:N("ExtHostSpeech"),ExtHostEmbeddings:N("ExtHostEmbeddings"),ExtHostAiRelatedInformation:N("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:N("ExtHostAiEmbeddingVector"),ExtHostTheming:N("ExtHostTheming"),ExtHostTunnelService:N("ExtHostTunnelService"),ExtHostManagedSockets:N("ExtHostManagedSockets"),ExtHostAuthentication:N("ExtHostAuthentication"),ExtHostTimeline:N("ExtHostTimeline"),ExtHostTesting:N("ExtHostTesting"),ExtHostTelemetry:N("ExtHostTelemetry"),ExtHostLocalization:N("ExtHostLocalization")};function M6(e){return e.toJSON()}var CT=class{constructor(e){this.a=e}transformIncoming(e){const t=this.a.transformIncoming(e);return t===e?e:M6(x.from(t))}transformOutgoing(e){const t=this.a.transformOutgoing(e);return t===e?e:M6(x.from(t))}transformOutgoingURI(e){const t=this.a.transformOutgoing(e);return t===e?e:x.from(t)}transformOutgoingScheme(e){return this.a.transformOutgoingScheme(e)}},kV=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function U6(e,t,r,i){if(!e||i>200)return null;if(typeof e=="object"){if(e.$mid===1)return r?x.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof Y)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=U6(e[s],t,r,i+1);n!==null&&(e[s]=n)}}return null}function Kc(e,t){const r=U6(e,t,!1,0);return r===null?e:r}var j6=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):pt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},IT=class extends j6{constructor(){super(),this.h=!0,this.i=new Xt}},H6;function Jm(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Qm="$$ref$$",PT={[Qm]:-1};function B6(e,t=null,r=!1){const i=[];return{jsonString:(r?Jm:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return PT;if(typeof o=="object"){if(o instanceof Y){const a=i.push(o)-1;return{[Qm]:a}}if(t)return t(n,o)}return o}),referencedBuffers:i}}function _6(e,t,r){return JSON.parse(e,(i,s)=>{if(s){const n=s[Qm];if(typeof n=="number")return t[n];if(r&&s.$mid===1)return r.transformIncoming(s)}return s})}function z6(e,t){return JSON.stringify(e,t)}function DT(e){return e?(t,r)=>r&&r.$mid===1?e.transformOutgoing(r):r:null}var W6;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(W6||(W6={}));var V6;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(V6||(V6={}));var AT=()=>{},TT=Symbol.for("rpcProtocol"),RT=Symbol.for("rpcProxy"),LT=class Dy extends K{static{H6=TT}static{this.a=3*1e3}constructor(t,r=null,i=null){super(),this[H6]=!0,this.b=this.B(new P),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=r,this.g=i,this.h=DT(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=$6.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new hs(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const r=this.w[t];delete this.w[t],r.resolveErr(Fc())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+Dy.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+Dy.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?Kc(t,this.g):t}getProxy(t){const{nid:r,sid:i}=t;return this.s[r]||(this.s[r]=this.J(r,i)),this.s[r]}J(t,r){const i={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===RT?r:s[n])};return new Proxy(Object.create(null),i)}set(t,r){return this.m[t.nid]=r,r}assertRegistered(t){for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const r=t.byteLength,i=It.read(t,0),s=i.readUInt8(),n=i.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=Zr.deserializeRequestJSONArgs(i);this.g&&(c=Kc(c,this.g)),this.M(r,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=Zr.deserializeRequestMixedArgs(i);this.g&&(c=Kc(c,this.g)),this.M(r,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(r,n,0,"ack"),this.G(n);break}case 6:{this.N(r,n);break}case 7:{this.O(r,n,void 0);break}case 9:{let o=Zr.deserializeReplyOKJSON(i);this.g&&(o=Kc(o,this.g)),this.O(r,n,o);break}case 10:{const o=Zr.deserializeReplyOKJSONWithBuffers(i,this.g);this.O(r,n,o);break}case 8:{const o=Zr.deserializeReplyOKVSBuffer(i);this.O(r,n,o);break}case 11:{let o=Zr.deserializeReplyErrError(i);this.g&&(o=Kc(o,this.g)),this.P(r,n,o);break}case 12:{this.P(r,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,r,i,s,n,o){this.f?.logIncoming(t,r,1,`receiveRequest ${ed(i)}.${s}(`,n);const a=String(r);let c,l;if(o){const h=new rt;n.push(h.token),c=this.Q(i,s,n),l=()=>h.cancel()}else c=this.Q(i,s,n),l=AT;this.u[a]=l;const u=Zr.serializeAcknowledged(r);this.f?.logOutgoing(u.byteLength,r,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const d=Zr.serializeReplyOK(r,h,this.h);this.f?.logOutgoing(d.byteLength,r,1,"reply:",h),this.c.send(d)},h=>{delete this.u[a];const d=Zr.serializeReplyErr(r,h);this.f?.logOutgoing(d.byteLength,r,1,"replyErr:",h),this.c.send(d)})}N(t,r){this.f?.logIncoming(t,r,1,"receiveCancel");const i=String(r);this.u[i]?.()}O(t,r,i){this.f?.logIncoming(t,r,0,"receiveReply:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(i)}P(t,r,i){this.f?.logIncoming(t,r,0,"receiveReplyErr:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),n.resolveErr(o)}Q(t,r,i){try{return Promise.resolve(this.S(t,r,i))}catch(s){return Promise.reject(s)}}S(t,r,i){const s=this.m[t];if(!s)throw new Error("Unknown actor "+ed(t));const n=s[r];if(typeof n!="function")throw new Error("Unknown method "+r+" on actor "+ed(t));return n.apply(s,i)}U(t,r,i){if(this.j)return new IT;let s=null;if(i.length>0&&Xe.isCancellationToken(i[i.length-1])&&(s=i.pop()),s&&s.isCancellationRequested)return Promise.reject(Fc());const n=Zr.serializeRequestArguments(i,this.h),o=++this.t,a=String(o),c=new j6,l=new he;s&&l.add(s.onCancellationRequested(()=>{const h=Zr.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new NT(c,l),this.F(o);const u=Zr.serializeRequest(o,t,r,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${ed(t)}.${r}(`,i),this.c.send(u),c}},NT=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},It=class Ay{static alloc(t,r,i){const s=new Ay(Y.alloc(i+1+4),0);return s.writeUInt8(t),s.writeUInt32(r),s}static read(t,r){return new Ay(t,r)}get buffer(){return this.a}constructor(t,r){this.a=t,this.b=r}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t);return this.b+=t,r}static sizeMixedArray(t){let r=0;r+=1;for(let i=0,s=t.length;i<s;i++){const n=t[i];switch(r+=1,n.type){case 1:r+=this.sizeLongString(n.value);break;case 2:r+=this.sizeVSBuffer(n.value);break;case 3:r+=this.sizeUInt32,r+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)r+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return r}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let r=0,i=t.length;r<i;r++){const s=t[r];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const r=new Array(t);for(let i=0;i<t;i++)switch(this.readUInt8()){case 1:r[i]=this.readLongString();break;case 2:r[i]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());r[i]=new zr(_6(o,a,null));break}case 4:r[i]=void 0;break}return r}},q6;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(q6||(q6={}));var Zr=class{static a(e){for(let t=0,r=e.length;t<r;t++)if(e[t]instanceof Y||e[t]instanceof zr||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n instanceof Y)r[i]={type:2,value:n};else if(typeof n>"u")r[i]={type:4};else if(n instanceof zr){const{jsonString:o,referencedBuffers:a}=B6(n.value,t);r[i]={type:3,value:Y.fromString(o),buffers:a}}else r[i]={type:1,value:Y.fromString(z6(n,t))}}return{type:1,args:r}}return{type:0,args:z6(e,t)}}static serializeRequest(e,t,r,i,s){switch(i.type){case 0:return this.b(e,t,r,i.args,s);case 1:return this.c(e,t,r,i.args,s)}}static b(e,t,r,i,s){const n=Y.fromString(r),o=Y.fromString(i);let a=0;a+=It.sizeUInt8(),a+=It.sizeShortString(n),a+=It.sizeLongString(o);const c=It.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readLongString();return{rpcId:t,method:r,args:JSON.parse(i)}}static c(e,t,r,i,s){const n=Y.fromString(r);let o=0;o+=It.sizeUInt8(),o+=It.sizeShortString(n),o+=It.sizeMixedArray(i);const a=It.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(i),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readMixedArray(),s=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=i[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:r,args:s}}static serializeAcknowledged(e){return It.alloc(5,e,0).buffer}static serializeCancel(e){return It.alloc(6,e,0).buffer}static serializeReplyOK(e,t,r){if(typeof t>"u")return this.d(e);if(t instanceof Y)return this.e(e,t);if(t instanceof zr){const{jsonString:i,referencedBuffers:s}=B6(t.value,r,!0);return this.g(e,i,s)}else return this.f(e,Jm(t,r))}static d(e){return It.alloc(7,e,0).buffer}static e(e,t){let r=0;r+=It.sizeVSBuffer(t);const i=It.alloc(8,e,r);return i.writeVSBuffer(t),i.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const r=Y.fromString(t);let i=0;i+=It.sizeLongString(r);const s=It.alloc(9,e,i);return s.writeLongString(r),s.buffer}static g(e,t,r){const i=Y.fromString(t);let s=0;s+=It.sizeUInt32,s+=It.sizeLongString(i);for(const o of r)s+=It.sizeVSBuffer(o);const n=It.alloc(10,e,s);n.writeUInt32(r.length),n.writeLongString(i);for(const o of r)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const r=e.readUInt32(),i=e.readLongString(),s=[];for(let n=0;n<r;++n)s.push(e.readVSBuffer());return new zr(_6(i,s,t))}static serializeReplyErr(e,t){const r=t?Jm(Nc(t),null):void 0;if(typeof r!="string")return this.h(e);const i=Y.fromString(r);let s=0;s+=It.sizeLongString(i);const n=It.alloc(11,e,s);return n.writeLongString(i),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return It.alloc(12,e,0).buffer}},G6;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(G6||(G6={}));var J6;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(J6||(J6={}));function Ym(e,t){return t&&(e.stack||e.stacktrace)?p(110,null,Y6(e),Q6(e.stack)||Q6(e.stacktrace)):Y6(e)}function Q6(e){return Array.isArray(e)?e.join(`
`):e}function Y6(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?p(111,null,e.message):e.message||p(112,null)}function pi(e=null,t=!1){if(!e)return p(113,null);if(Array.isArray(e)){const r=St(e),i=pi(r[0],t);return r.length>1?p(114,null,i,r.length):i}if(Pe(e))return e;if(e.detail){const r=e.detail;if(r.error)return Ym(r.error,t);if(r.exception)return Ym(r.exception,t)}return e.stack?Ym(e,t):e.message?e.message:p(115,null)}function gs(e){return Xm(e,0)}function Xm(e,t){switch(typeof e){case"object":return e===null?ms(349,t):Array.isArray(e)?OT(e,t):MT(e,t);case"string":return X6(e,t);case"boolean":return FT(e,t);case"number":return ms(e,t);case"undefined":return ms(937,t);default:return ms(617,t)}}function ms(e,t){return(t<<5)-t+e|0}function FT(e,t){return ms(e?433:863,t)}function X6(e,t){t=ms(149417,t);for(let r=0,i=e.length;r<i;r++)t=ms(e.charCodeAt(r),t);return t}function OT(e,t){return t=ms(104579,t),e.reduce((r,i)=>Xm(i,r),t)}function MT(e,t){return t=ms(181387,t),Object.keys(e).sort().reduce((r,i)=>(r=X6(i,r),Xm(e[i],r)),t)}var Z6;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(Z6||(Z6={}));function Zm(e,t,r=32){const i=r-t,s=~((1<<i)-1);return(e<<t|(s&e)>>>i)>>>0}function el(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""):(e>>>0).toString(16).padStart(t/4,"0")}var SV=class k3{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const r=t.length;if(r===0)return;const i=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(Fh(o))if(a+1<r){const l=t.charCodeAt(a+1);Oh(l)?(a++,c=km(o,l)):c=65533}else{n=o;break}else Oh(o)&&(c=65533);if(s=this.w(i,s,c),a++,a<r)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,r,i){return i<128?t[r++]=i:i<2048?(t[r++]=192|(i&1984)>>>6,t[r++]=128|(i&63)>>>0):i<65536?(t[r++]=224|(i&61440)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0):(t[r++]=240|(i&1835008)>>>18,t[r++]=128|(i&258048)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0),r>=64&&(this.y(),r-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),r}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),el(this.h)+el(this.l)+el(this.m)+el(this.n)+el(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=k3.g,r=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,r.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,Zm(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let i=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Zm(i,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=Zm(s,30),s=i,i=u;this.h=this.h+i&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},K6;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(K6||(K6={}));function Km(...e){switch(e.length){case 1:return p(1724,null,e[0]);case 2:return p(1725,null,e[0],e[1]);case 3:return p(1726,null,e[0],e[1],e[2]);default:return}}var UT=p(1727,null),jT=p(1728,null),tl=class Ty{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw lm(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const r=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:r})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const r=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:r})}else this.h(126)?this.k(9):this.l(Km("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Km("&&"));break;case 124:this.h(124)?this.k(16):this.l(Km("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const r=this.d,i=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:i};this.g.push({offset:r,lexeme:i,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const r=this.c.substring(this.d,this.e),i=Ty.b.get(r);i?this.k(i):this.f.push({type:17,lexeme:r,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(UT);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,r=!1,i=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(jT);return}const n=this.c.charCodeAt(t);if(r)r=!1;else if(n===47&&!i){t++;break}else n===91?i=!0:n===92?r=!0:n===93&&(i=!1);t++}for(;t<this.c.length&&Ty.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},gi;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(r){return r[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(gi||(gi={}));var td=J("instantiationService");function HT(e,t,r){t[gi.DI_TARGET]===t?t[gi.DI_DEPENDENCIES].push({id:e,index:r}):(t[gi.DI_DEPENDENCIES]=[{id:e,index:r}],t[gi.DI_TARGET]=t)}function J(e){if(gi.serviceIds.has(e))return gi.serviceIds.get(e);const t=function(r,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");HT(t,r,s)};return t.toString=()=>e,gi.serviceIds.set(e,t),t}function $V(e){return e}var Gt=new Map;Gt.set("false",!1),Gt.set("true",!0),Gt.set("isMac",Nt),Gt.set("isLinux",bt),Gt.set("isWindows",ze),Gt.set("isWeb",mm),Gt.set("isMacNative",Nt&&!mm),Gt.set("isEdge",R4),Gt.set("isFirefox",JP),Gt.set("isChrome",wm),Gt.set("isSafari",QP);var BT=Object.prototype.hasOwnProperty,ex;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(ex||(ex={}));var _T={regexParsingWithErrorRecovery:!0},zT=p(1704,null),WT=p(1705,null),VT=p(1706,null),tx=p(1707,null),qT=p(1708,null),GT=p(1709,null),JT=p(1710,null),QT=p(1711,null),rx=class hh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=_T){this.k=t,this.d=new tl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:zT,offset:0,lexeme:"",additionalInfo:WT});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const i=this.D(),s=i.type===17?GT:void 0;throw this.h.push({message:qT,offset:i.offset,lexeme:tl.getLexeme(i),additionalInfo:s}),hh.c}return r}catch(r){if(r!==hh.c)throw r;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const r=this.o();t.push(r)}return t.length===1?t[0]:Wt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const r=this.s();t.push(r)}return t.length===1?t[0]:Wt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),wr.INSTANCE;case 12:return this.z(),Fr.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,tx),r?.negate()}case 17:return this.z(),sl.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),Wt.true();case 12:return this.z(),Wt.false();case 0:{this.z();const r=this.l();return this.A(1,tx),r}case 17:{const r=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return o1.create(r,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let d=0;d<s.lexeme.length;d++)s.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let d=0;d<o.lexeme.length;d++)o.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--}if(a<0)break;n.push(tl.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return Wt.regex(r,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!Lh(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return o1.create(r,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,VT);const s=this.u();return Wt.notIn(r,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return Wt.equals(r,s);switch(s){case"true":return Wt.has(r);case"false":return Wt.not(r);default:return Wt.equals(r,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return Wt.notEquals(r,s);switch(s){case"true":return Wt.not(r);case"false":return Wt.has(r);default:return Wt.notEquals(r,s)}}case 5:return this.z(),s1.create(r,this.u());case 6:return this.z(),n1.create(r,this.u());case 7:return this.z(),r1.create(r,this.u());case 8:return this.z(),i1.create(r,this.u());case 13:return this.z(),Wt.in(r,this.u());default:return Wt.has(r)}}case 20:throw this.h.push({message:JT,offset:t.offset,lexeme:"",additionalInfo:QT}),hh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,r){if(this.C(t))return this.z();throw this.B(r,this.D())}B(t,r,i){const s=p(1712,null,t,tl.getLexeme(r)),n=r.offset,o=tl.getLexeme(r);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:i}),hh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},Wt=class{static false(){return wr.INSTANCE}static true(){return Fr.INSTANCE}static has(e){return il.create(e)}static equals(e,t){return e1.create(e,t)}static notEquals(e,t){return t1.create(e,t)}static regex(e,t){return o1.create(e,t)}static in(e,t){return ix.create(e,t)}static notIn(e,t){return sx.create(e,t)}static not(e){return sl.create(e)}static and(...e){return ox.create(e,null,!0)}static or(...e){return a1.create(e,null,!0)}static greater(e,t){return r1.create(e,t)}static greaterEquals(e,t){return i1.create(e,t)}static smaller(e,t){return s1.create(e,t)}static smallerEquals(e,t){return n1.create(e,t)}static{this.c=new rx({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function YT(e){const t=new rx({regexParsingWithErrorRecovery:!1});return e.map(r=>(t.parse(r),t.lexingErrors.length>0?t.lexingErrors.map(i=>({errorMessage:i.additionalInfo?p(1713,null,i.additionalInfo):p(1714,null),offset:i.offset,length:i.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function rl(e,t){return e.cmp(t)}var wr=class S3{static{this.INSTANCE=new S3}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Fr.INSTANCE}},Fr=class $3{static{this.INSTANCE=new $3}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return wr.INSTANCE}},il=class C3{static create(t,r=null){const i=Gt.get(t);return typeof i=="boolean"?i?Fr.INSTANCE:wr.INSTANCE:new C3(t,r)}constructor(t,r){this.key=t,this.c=r,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:cx(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Gt.get(this.key);return typeof t=="boolean"?t?Fr.INSTANCE:wr.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=sl.create(this.key,this)),this.c}},e1=class I3{static create(t,r,i=null){if(typeof r=="boolean")return r?il.create(t,i):sl.create(t,i);const s=Gt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?Fr.INSTANCE:wr.INSTANCE:new I3(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Gt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?Fr.INSTANCE:wr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=t1.create(this.c,this.d,this)),this.f}},ix=class P3{static create(t,r){return new P3(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.f),i=t.getValue(this.d);return Array.isArray(r)?r.includes(i):typeof i=="string"&&typeof r=="object"&&r!==null?BT.call(r,i):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=sx.create(this.d,this.f)),this.c}},sx=class D3{static create(t,r){return new D3(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=11,this.c=ix.create(t,r)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},t1=class A3{static create(t,r,i=null){if(typeof r=="boolean")return r?sl.create(t,i):il.create(t,i);const s=Gt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?wr.INSTANCE:Fr.INSTANCE:new A3(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Gt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?wr.INSTANCE:Fr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=e1.create(this.c,this.d,this)),this.f}},sl=class T3{static create(t,r=null){const i=Gt.get(t);return typeof i=="boolean"?i?wr.INSTANCE:Fr.INSTANCE:new T3(t,r)}constructor(t,r){this.c=t,this.d=r,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:cx(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Gt.get(this.c);return typeof t=="boolean"?t?wr.INSTANCE:Fr.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=il.create(this.c,this)),this.d}};function rd(e,t){if(typeof e=="string"){const r=parseFloat(e);isNaN(r)||(e=r)}return typeof e=="string"||typeof e=="number"?t(e):wr.INSTANCE}var r1=class R3{static create(t,r,i=null){return rd(r,s=>new R3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=n1.create(this.c,this.d,this)),this.f}},i1=class L3{static create(t,r,i=null){return rd(r,s=>new L3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=s1.create(this.c,this.d,this)),this.f}},s1=class N3{static create(t,r,i=null){return rd(r,s=>new N3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=i1.create(this.c,this.d,this)),this.f}},n1=class F3{static create(t,r,i=null){return rd(r,s=>new F3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:Gn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=r1.create(this.c,this.d,this)),this.f}},o1=class O3{static create(t,r){return new O3(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return r<i?-1:r>i?1:0}equals(t){if(t.type===this.type){const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return this.d===t.d&&r===i}return!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=XT.create(this)),this.c}},XT=class Ry{static create(t){return new Ry(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new Ry(this.c.map(t))}negate(){return this.c}};function nx(e){let t=null;for(let r=0,i=e.length;r<i;r++){const s=e[r].substituteConstants();if(e[r]!==s&&t===null){t=[];for(let n=0;n<r;n++)t[n]=e[n]}t!==null&&(t[r]=s)}return t===null?e:t}var ox=class Pc{static create(t,r,i){return Pc.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=rl(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=nx(this.expr);return t===this.expr?this:Pc.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].evaluate(t))return!1;return!0}static d(t,r,i){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return wr.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Fr.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(rl);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=a1.create(o.expr.map(u=>Pc.create([u,a],null,i)),null,c);l&&(s.push(l),s.sort(rl))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return wr.INSTANCE;if(s.length===1)return s[0]}return new Pc(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new Pc(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());this.c=a1.create(t,this,!0)}return this.c}},a1=class Fo{static create(t,r,i){return Fo.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=rl(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=nx(this.expr);return t===this.expr?this:Fo.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(this.expr[r].evaluate(t))return!0;return!1}static d(t,r,i){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Fr.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return wr.INSTANCE;s.sort(rl)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Fr.INSTANCE;if(s.length===1)return s[0]}return new Fo(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new Fo(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());for(;t.length>1;){const r=t.shift(),i=t.shift(),s=[];for(const n of lx(r))for(const o of lx(i))s.push(ox.create([n,o],null,!1));t.unshift(Fo.create(s,null,!1))}this.c=Fo.create(t,this,!0)}return this.c}},H=class Wg extends il{static{this.d=[]}static all(){return Wg.d.values()}constructor(t,r,i){super(t,null),this.f=r,typeof i=="object"?Wg.d.push({...i,key:t}):i!==!0&&Wg.d.push({key:t,description:i,type:r!=null?typeof r:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return e1.create(this.key,t)}notEqualsTo(t){return t1.create(this.key,t)}},ax=J("contextKeyService");function cx(e,t){return e<t?-1:e>t?1:0}function Gn(e,t,r,i){return e<r?-1:e>r?1:t<i?-1:t>i?1:0}function lx(e){return e.type===9?e.expr:[e]}var $e=J("logService"),oa=J("loggerService");function ZT(e){return _r(e)}var fe;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(fe||(fe={}));var KT=fe.Info;function eR(e,t,r){switch(t){case fe.Trace:e.trace(r);break;case fe.Debug:e.debug(r);break;case fe.Info:e.info(r);break;case fe.Warning:e.warn(r);break;case fe.Error:e.error(r);break;case fe.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function aa(e,t=!1){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof Error&&(s=pi(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}r+=(i>0?" ":"")+s}return r}var ux=class extends K{constructor(){super(...arguments),this.b=KT,this.c=this.B(new P),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==fe.Off&&this.b<=e}g(e){return this.q.isDisposed?!1:this.f(e)}},c1=class extends ux{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(fe.Trace)&&this.m(fe.Trace,aa([e,...t],!0))}debug(e,...t){this.g(fe.Debug)&&this.m(fe.Debug,aa([e,...t]))}info(e,...t){this.g(fe.Info)&&this.m(fe.Info,aa([e,...t]))}warn(e,...t){this.g(fe.Warning)&&this.m(fe.Warning,aa([e,...t]))}error(e,...t){if(this.g(fe.Error))if(e instanceof Error){const r=Array.prototype.slice.call(arguments);r[0]=e.stack,this.m(fe.Error,aa(r))}else this.m(fe.Error,aa([e,...t]))}flush(){}},tR=class extends ux{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const r of this.h)r.trace(e,...t)}debug(e,...t){for(const r of this.h)r.debug(e,...t)}info(e,...t){for(const r of this.h)r.info(e,...t)}warn(e,...t){for(const r of this.h)r.warn(e,...t)}error(e,...t){for(const r of this.h)r.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},rR=class extends K{constructor(e,t,r){if(super(),this.h=e,this.j=t,this.b=new zt,this.c=this.B(new P),this.onDidChangeLoggers=this.c.event,this.f=this.B(new P),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new P),this.onDidChangeVisibility=this.g.event,r)for(const i of r)this.b.set(i.resource,{logger:void 0,info:i})}m(e){return Pe(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.m(e)?.logger}createLogger(e,t){const r=this.n(e),i=Pe(e)?e:t?.id??gs(r.toString()).toString(16);let s=this.b.get(r)?.logger;const n=t?.logLevel==="always"?fe.Trace:t?.logLevel;s||(s=this.s(r,n??this.getLogLevel(r)??this.h,{...t,id:i}));const o={logger:s,info:{resource:r,id:i,logLevel:n,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(r,o),s}n(e){return Pe(e)?Ct(this.j,`${e}.log`):e}setLogLevel(e,t){if(x.isUri(e)){const r=e,i=t,s=this.b.get(r);s&&i!==s.info.logLevel&&(s.info.logLevel=i===this.h?void 0:i,s.logger?.setLevel(i),this.b.set(s.info.resource,s),this.f.fire([r,i]))}else{this.h=e;for(const[r,i]of this.b.entries())this.b.get(r)?.info.logLevel===void 0&&i.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(e,t){const r=this.m(e);r&&t!==!r.info.hidden&&(r.info.hidden=!t,this.b.set(r.info.resource,r),this.g.fire([r.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.h}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.c.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.c.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function iR(e){switch(e){case fe.Trace:return"trace";case fe.Debug:return"debug";case fe.Info:return"info";case fe.Warning:return"warn";case fe.Error:return"error";case fe.Off:return"off"}}function sR(e){switch(e){case"trace":return fe.Trace;case"debug":return fe.Debug;case"info":return fe.Info;case"warn":return fe.Warning;case"error":return fe.Error;case"critical":return fe.Error;case"off":return fe.Off}}var CV=new H("logLevel",iR(fe.Info)),vs=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}},hx=[],dx;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(dx||(dx={}));function Le(e,t,r){t instanceof vs||(t=new vs(t,[],!!r)),hx.push([e,t])}function nR(){return hx}var l1=class{constructor(...e){this.a=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this.a.get(e);return this.a.set(e,t),r}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Ot=J("IExtHostInitDataService"),oR=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},fx=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const r of this.a.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let r=this.a.get(t);return r||(r=new oR(t,e),this.a.set(t,r)),r}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,r]of this.a)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const r=new Set([e]),i=this.c(t,r);if(i)return i}}c(e,t){for(const[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const s=this.c(i,t);if(s)return s;t.delete(r)}}},aR=!1,px=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},cR=class Ly{constructor(t=new l1,r=!1,i,s=aR){this.i=t,this.j=r,this.k=i,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(td,this),this._globalGraph=s?i?._globalGraph??new fx(n=>n):void 0}dispose(){if(!this.f){this.f=!0,ai(this.h),this.h.clear();for(const t of this.g)kP(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,r){this.m();const i=this,s=new class extends Ly{dispose(){i.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),r?.add(s),s}invokeFunction(t,...r){this.m();const i=u1.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw lm("service accessor is only valid during the invocation of its target method");const a=this.s(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...r)}finally{s=!0,i.stop()}}createInstance(t,...r){this.m();let i,s;return t instanceof vs?(i=u1.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(r),i)):(i=u1.traceCreation(this.l,t),s=this.o(t,r,i)),i.stop(),s}o(t,r=[],i){const s=gi.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,i);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:r.length;if(r.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${r.length} static arguments`);const a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return Reflect.construct(t,r.concat(n))}q(t,r){if(this.i.get(t)instanceof vs)this.i.set(t,r);else if(this.k)this.k.q(t,r);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const r=this.i.get(t);return!r&&this.k?this.k.r(t):r}s(t,r){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const i=this.r(t);return i instanceof vs?this.u(t,i,r.branch(t,!0)):(r.branch(t,!1),i)}u(t,r,i){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,r,i)}finally{this.t.delete(t)}}v(t,r,i){const s=new fx(c=>c.id.toString());let n=0;const o=[{id:t,desc:r,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new px(s);for(const l of gi.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof vs){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new px(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof vs){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,r,i=[],s,n){if(this.i.get(t)instanceof vs)return this.x(t,r,i,s,n,this.g);if(this.k)return this.k.w(t,r,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}x(t,r,i=[],s,n,o){if(s){const a=new Ly(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new g2(()=>{const u=a.o(r,i,n);for(const[h,d]of c){const f=u[h];if(typeof f=="function")for(const g of d)g.disposable=f.apply(u,g.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=c.get(h);return g||(g=new jc,c.set(h,g)),(y,E,k)=>{if(l.isInitialized)return l.value[h](y,E,k);{const I={listener:[y,E,k],disposable:void 0},D=g.push(I);return te(()=>{D(),I.disposable?.dispose()})}}}if(h in u)return u[h];const d=l.value;let f=d[h];return typeof f!="function"||(f=f.bind(d),u[h]=f),f},set(u,h,d){return l.value[h]=d,!0},getPrototypeOf(u){return r.prototype}})}else{const a=this.o(r,i,n);return o.add(a),a}}y(t,r){if(r&&console.warn(t),this.j)throw new Error(t)}},gx;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(gx||(gx={}));var u1=class es{static{this.all=new Set}static{this.c=new class extends es{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,r){return t?new es(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):es.c}static traceCreation(t,r){return t?new es(1,r.name):es.c}static{this.f=0}constructor(t,r){this.type=t,this.name=r,this.g=Date.now(),this.h=[]}branch(t,r){const i=new es(3,t.toString());return this.h.push([t,r,i]),i}stop(){const t=Date.now()-this.g;es.f+=t;let r=!1;function i(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){r=!0,a.push(`${c}CREATES -> ${l}`);const d=i(n+1,h);d&&a.push(d)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${es.f.toFixed(2)}ms)`];(t>2||r)&&es.all.add(s.join(`
`))}},Ae=J("IExtHostRpcService"),lR=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},nl=J("IURITransformerService"),uR=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},hR=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),r=this.b.charCodeAt(this.c);return t-r}value(){return this.b[this.c]}},dR=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Em(e,this.b,0,e.length,this.c,this.d):Vc(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},mx=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const r=this.b.charCodeAt(t);if(!(r===47||this.f&&r===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Em(e,this.b,0,e.length,this.d,this.e):Vc(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},vx;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(vx||(vx={}));var wx=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new mx(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return H4(e,this.c.scheme);if(this.d[this.e]===2)return H4(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return jn(e,this.c.query);if(this.d[this.e]===5)return jn(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},id=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},bx;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(bx||(bx={}));var an=class dh{static forUris(t=()=>!1,r=()=>!1){return new dh(new wx(t,r))}static forPaths(t=!1){return new dh(new mx(void 0,!t))}static forStrings(){return new dh(new hR)}static forConfigKeys(){return new dh(new dR)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,r){if(r){const i=r.slice(0);n4(i);for(const s of i)this.set(s,t)}else{const i=t.slice(0);n4(i);for(const s of i)this.set(s[0],s[1])}}set(t,r){const i=this.b.reset(t);let s;this.c||(this.c=new id,this.c.segment=i.value());const n=[];for(s=this.c;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new id,s.left.segment=i.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new id,s.right.segment=i.value()),n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new id,s.mid.segment=i.value()),n.push([0,s]),s=s.mid;else break}const o=s.value;s.value=r,s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const r=this.b.reset(t);let i=this.c;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(t){const r=this.d(t);return!(r?.value===void 0&&r?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,r){const i=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else break}if(n){if(r?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const r=this.b.reset(t);let i=this.c,s;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(t){return this.g(t,!1)}g(t,r){const i=this.b.reset(t);let s=this.c;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this.h(s.mid):r?s.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[r,i]of this)t(i,r)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const r=[];return this.j(t,r),r[Symbol.iterator]()}j(t,r){t&&(t.left&&this.j(t.left,r),t.value&&r.push([t.key,t.value]),t.mid&&this.j(t.mid,r),t.right&&this.j(t.right,r))}_isBalanced(){const t=r=>{if(!r)return!0;const i=r.balanceFactor();return i<-1||i>1?!1:t(r.left)&&t(r.right)};return t(this.c)}};function fR(e,t,r){return Math.min(Math.max(e,t),r)}var pR=class{constructor(){this.a=0}getNext(){return this.a++}},gR=class{constructor(){this.a=1,this.b=0}update(e){return this.b=this.b+(e-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}},ol;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(ol||(ol={})),function(e){const t="error",r="warning",i="warn",s="info",n="ignore";function o(c){return c?ci(t,c)?e.Error:ci(r,c)||ci(i,c)?e.Warning:ci(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return r;case e.Info:return s;default:return n}}e.toString=a}(ol||(ol={}));var Pt=ol,mR=Pt,IV=J("notificationService"),yx;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(yx||(yx={}));var xx;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(xx||(xx={}));var Ex;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(Ex||(Ex={}));var sd=J("contextService");function vR(e){const t=e;return typeof t?.id=="string"&&x.isUri(t.uri)}function wR(e){const t=e;return typeof t?.id=="string"&&x.isUri(t.configPath)}var kx;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(kx||(kx={}));var bR=class{constructor(e,t,r,i,s){this.h=e,this.j=r,this.k=i,this.l=s,this.c=an.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=an.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},h1=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Ct(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function d1(e){return new h1({uri:e,index:0,name:Tm(e)},{uri:e.toString()})}var Sx="code-workspace",yR=`.${Sx}`,PV=[{name:p(2536,null),extensions:[Sx]}];function xR(e){return(typeof e=="string"?Rh(e):r2(e))===yR}var ER=class{constructor(){this.a=new Set(Object.keys(V)),this.b=new Map,this.extUri=new Gc(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},ca=J("IExtHostFileSystemInfo"),f1=Object.freeze({create:e=>Go(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>f1.split(e).filter(t=>!t.startsWith("#"))}),DV=new Uint32Array(10),$x;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})($x||($x={}));var Cx;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(Cx||(Cx={}));var Ix;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(Ix||(Ix={}));var AV=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),TV=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),RV=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),LV=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function Px(...e){return function(t,r){for(let i=0,s=e.length;i<s;i++){const n=e[i](t,r);if(n)return n}return null}}var NV=Dx.bind(void 0,!1),p1=Dx.bind(void 0,!0);function Dx(e,t,r){if(!r||r.length<t.length)return null;let i;return e?i=Nh(r,t):i=r.indexOf(t)===0,i?t.length>0?[{start:0,end:t.length}]:[]:null}function kR(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return r===-1?null:[{start:r,end:r+e.length}]}function SR(e,t){return g1(e.toLowerCase(),t.toLowerCase(),0,0)}function g1(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]===t[i]){let s=null;return(s=g1(e,t,r+1,i+1))?Tx({start:i,end:i+1},s):null}return g1(e,t,r,i+1)}function m1(e){return 97<=e&&e<=122}function al(e){return 65<=e&&e<=90}function v1(e){return 48<=e&&e<=57}function $R(e){return e===32||e===9||e===10||e===13}var CR=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>CR.add(e.charCodeAt(0)));function Ax(e){return m1(e)||al(e)||v1(e)}function Tx(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function Rx(e,t){for(let r=t;r<e.length;r++){const i=e.charCodeAt(r);if(al(i)||v1(i)||r>0&&!Ax(e.charCodeAt(r-1)))return r}return e.length}function w1(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]!==t[i].toLowerCase())return null;{let s=null,n=i+1;for(s=w1(e,t,r+1,i+1);!s&&(n=Rx(t,n))<t.length;)s=w1(e,t,r+1,n),n++;return s===null?null:Tx({start:i,end:i+1},s)}}function IR(e){let t=0,r=0,i=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),al(n)&&t++,m1(n)&&r++,Ax(n)&&i++,v1(n)&&s++;const o=t/e.length,a=r/e.length,c=i/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function PR(e){const{upperPercent:t,lowerPercent:r}=e;return r===0&&t>.6}function DR(e){const{upperPercent:t,lowerPercent:r,alphaPercent:i,numericPercent:s}=e;return r>.2&&t<.8&&i>.6&&s<.2}function AR(e){let t=0,r=0,i=0,s=0;for(let n=0;n<e.length;n++)i=e.charCodeAt(n),al(i)&&t++,m1(i)&&r++,$R(i)&&s++;return(t===0||r===0)&&s===0?e.length<=30:t<=5}function Lx(e,t){if(!t||(t=t.trim(),t.length===0)||!AR(e))return null;t.length>60&&(t=t.substring(0,60));const r=IR(t);if(!DR(r)){if(!PR(r))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&(i=w1(e,t,0,s))===null;)s=Rx(t,s+1);return i}var FV=Px(p1,Lx,kR),OV=Px(p1,Lx,SR),MV=new Mc(1e4),nd=128;function b1(){const e=[],t=[];for(let r=0;r<=nd;r++)t[r]=0;for(let r=0;r<=nd;r++)e.push(t.slice(0));return e}function Nx(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}var UV=Nx(2*nd),jV=Nx(2*nd),HV=b1(),BV=b1(),_V=b1(),Fx;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(Fx||(Fx={}));var Ox;(function(e){e.Default=[-100,0];function t(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}e.isDefault=t})(Ox||(Ox={}));var zV=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},y1=Object.create(null);function m(e,t){if(Pe(t)){const r=y1[t];if(r===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=r}return y1[e]=t,{id:e}}function TR(){return y1}var RR={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468),goToEditingSession:m("go-to-editing-session",60469),editSession:m("edit-session",60470),codeReview:m("code-review",60471),copilotWarning:m("copilot-warning",60472),python:m("python",60473),copilotLarge:m("copilot-large",60474),copilotWarningLarge:m("copilot-warning-large",60475)},LR={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeItemExpanded:m("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuSubmenu:m("menu-submenu","chevron-right"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377)},le={...RR,...LR},la;(function(e){function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(la||(la={}));var Jt;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function r(d){const f=t.exec(d.id);if(!f)return r(le.error);const[,g,v]=f,y=["codicon","codicon-"+g];return v&&y.push("codicon-modifier-"+v.substring(1)),y}e.asClassNameArray=r;function i(d){return r(d).join(" ")}e.asClassName=i;function s(d){return"."+r(d).join(".")}e.asCSSSelector=s;function n(d){return d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||la.isThemeColor(d.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(d){const f=o.exec(d);if(!f)return;const[,g]=f;return{id:g}}e.fromString=a;function c(d){return{id:d}}e.fromId=c;function l(d,f){let g=d.id;const v=g.lastIndexOf("~");return v!==-1&&(g=g.substring(0,v)),f&&(g=`${g}~${f}`),{id:g}}e.modify=l;function u(d){const f=d.id.lastIndexOf("~");if(f!==-1)return d.id.substring(f+1)}e.getModifier=u;function h(d,f){return d.id===f.id&&d.color?.id===f.color?.id}e.isEqual=h})(Jt||(Jt={}));var x1=new RegExp(`\\$\\(${Jt.iconNameExpression}(?:${Jt.iconModifierExpression})?\\)`,"g"),NR=new RegExp(`(\\\\)?${x1.source}`,"g");function FR(e){return e.replace(NR,(t,r)=>r?t:`\\${t}`)}var WV=new RegExp(`\\\\${x1.source}`,"g"),VV=new RegExp(`(\\s)?(\\\\)?${x1.source}(\\s)?`,"g"),qV=new RegExp(`\\$\\(${Jt.iconNameCharacter}+\\)`,"g"),Mx;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(Mx||(Mx={}));var Ux=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Se("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=OR(this.supportThemeIcons?FR(e):e).replace(/([ \t]+)/g,(r,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${MR(t,e)}
`,this}appendLink(e,t,r){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(e,t){const r=new RegExp(Zs(t),"g");return e.replace(r,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}};function Jn(e){return e instanceof Ux?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function OR(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function MR(e,t){const r=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,i=r>=3?r+1:3;return[`${"`".repeat(i)}${t}`,e,`${"`".repeat(i)}`].join(`
`)}function UR(e){const t=[],r=e.split("|").map(s=>s.trim());e=r[0];const i=r[1];if(i){const s=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function E1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Qn=E1();function jx(e){Qn=e}var Hx=/[&<>"']/,jR=new RegExp(Hx.source,"g"),Bx=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,HR=new RegExp(Bx.source,"g"),BR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_x=e=>BR[e];function Wr(e,t){if(t){if(Hx.test(e))return e.replace(jR,_x)}else if(Bx.test(e))return e.replace(HR,_x);return e}var _R=/(^|[^\[])\^/g;function lt(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const i={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(_R,"$1"),r=r.replace(s,o),i},getRegex:()=>new RegExp(r,t)};return i}function zx(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var cl={exec:()=>null};function Wx(e,t){const r=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),i=r.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function ll(e,t,r){const i=e.length;if(i===0)return"";let s=0;for(;s<i;){const n=e.charAt(i-s-1);if(n===t&&!r)s++;else if(n!==t&&r)s++;else break}return e.slice(0,i-s)}function zR(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function Vx(e,t,r,i){const s=t.href,n=t.title?Wr(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:r,href:s,title:n,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:r,href:s,title:n,text:Wr(o)}}function WR(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const i=r[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var od=class{options;rules;lexer;constructor(e){this.options=e||Qn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ll(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=WR(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=ll(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ll(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=ll(t[0],`
`).split(`
`),i="",s="";const n=[];for(;r.length>0;){let o=!1;const a=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))a.push(r[c]),o=!0;else if(!o)a.push(r[c]);else break;r=r.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,r.length===0)break;const d=n[n.length-1];if(d?.type==="code")break;if(d?.type==="blockquote"){const f=d,g=f.raw+`
`+r.join(`
`),v=this.blockquote(g);n[n.length-1]=v,i=i.substring(0,i.length-f.raw.length)+v.raw,s=s.substring(0,s.length-f.text.length)+v.text;break}else if(d?.type==="list"){const f=d,g=f.raw+`
`+r.join(`
`),v=this.list(g);n[n.length-1]=v,i=i.substring(0,i.length-d.raw.length)+v.raw,s=s.substring(0,s.length-f.raw.length)+v.raw,r=g.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const n=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),h=e.split(`
`,1)[0],d=!u.trim(),f=0;if(this.options.pedantic?(f=2,l=u.trimStart()):d?f=t[1].length+1:(f=t[2].search(/[^ ]/),f=f>4?1:f,l=u.slice(f),f+=t[1].length),d&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const y=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),I=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const D=e.split(`
`,1)[0];if(h=D,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(h)||I.test(h)||y.test(h)||E.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(d||u.search(/[^ ]/)>=4||k.test(u)||I.test(u)||E.test(u))break;l+=`
`+h}!d&&!h.trim()&&(d=!0),c+=D+`
`,e=e.substring(D.length+1),u=h.slice(f)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let g=null,v;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(v=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const r=Wx(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<r.length;o++)n.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(Wx(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Wr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const n=ll(r.slice(0,-1),"\\");if((r.length-n.length)%2===0)return}else{const n=zR(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);n&&(i=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Vx(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){const n=r[0].charAt(0);return{type:"text",raw:n,text:n}}return Vx(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const n=[...i[0]].length-1;let o,a,c=n,l=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...i[0]][0].length,d=e.slice(0,n+i.index+h+a);if(Math.min(n,a)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Wr(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Wr(t[1]),i="mailto:"+r):(r=Wr(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Wr(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=Wr(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Wr(t[0]),{type:"text",raw:t[0],text:r}}}},VR=/^(?: *(?:\n|$))+/,qR=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,GR=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ul=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,JR=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,qx=/(?:[*+-]|\d{1,9}[.)])/,Gx=lt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,qx).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),k1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,QR=/^[^\n]+/,S1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,YR=lt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",S1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),XR=lt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,qx).getRegex(),ad="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ZR=lt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",$1).replace("tag",ad).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Jx=lt(k1).replace("hr",ul).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ad).getRegex(),KR=lt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Jx).getRegex(),C1={blockquote:KR,code:qR,def:YR,fences:GR,heading:JR,hr:ul,html:ZR,lheading:Gx,list:XR,newline:VR,paragraph:Jx,table:cl,text:QR},Qx=lt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ul).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ad).getRegex(),eL={...C1,table:Qx,paragraph:lt(k1).replace("hr",ul).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Qx).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ad).getRegex()},tL={...C1,html:lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:cl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:lt(k1).replace("hr",ul).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Gx).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Yx=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rL=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Xx=/^( {2,}|\\)\n(?!\s*$)/,iL=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,hl="\\p{P}\\p{S}",sL=lt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,hl).getRegex(),nL=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,oL=lt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,hl).getRegex(),aL=lt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,hl).getRegex(),cL=lt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,hl).getRegex(),lL=lt(/\\([punct])/,"gu").replace(/punct/g,hl).getRegex(),uL=lt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),hL=lt($1).replace("(?:-->|$)","-->").getRegex(),dL=lt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",hL).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),cd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fL=lt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",cd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Zx=lt(/^!?\[(label)\]\[(ref)\]/).replace("label",cd).replace("ref",S1).getRegex(),Kx=lt(/^!?\[(ref)\](?:\[\])?/).replace("ref",S1).getRegex(),pL=lt("reflink|nolink(?!\\()","g").replace("reflink",Zx).replace("nolink",Kx).getRegex(),I1={_backpedal:cl,anyPunctuation:lL,autolink:uL,blockSkip:nL,br:Xx,code:rL,del:cl,emStrongLDelim:oL,emStrongRDelimAst:aL,emStrongRDelimUnd:cL,escape:Yx,link:fL,nolink:Kx,punctuation:sL,reflink:Zx,reflinkSearch:pL,tag:dL,text:iL,url:cl},gL={...I1,link:lt(/^!?\[(label)\]\((.*?)\)/).replace("label",cd).getRegex(),reflink:lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cd).getRegex()},P1={...I1,escape:lt(Yx).replace("])","~|])").getRegex(),url:lt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},mL={...P1,br:lt(Xx).replace("{2,}","*").getRegex(),text:lt(P1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ld={normal:C1,gfm:eL,pedantic:tL},dl={normal:I1,gfm:P1,breaks:mL,pedantic:gL},Yn=class Ny{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Qn,this.options.tokenizer=this.options.tokenizer||new od,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:ld.normal,inline:dl.normal};this.options.pedantic?(r.block=ld.pedantic,r.inline=dl.pedantic):this.options.gfm&&(r.block=ld.gfm,this.options.breaks?r.inline=dl.breaks:r.inline=dl.gfm),this.tokenizer.rules=r}static get rules(){return{block:ld,inline:dl}}static lex(t,r){return new Ny(r).lex(t)}static lexInline(t,r){return new Ny(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=r[r.length-1],i&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s),i=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,o,l)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let d;this.options.extensions.startInline.forEach(f=>{d=f.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(i=this.tokenizer.inlineText(n)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),c=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},ud=class{options;parser;constructor(e){this.options=e||Qn}space(e){return""}code({text:e,lang:t,escaped:r}){const i=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+Wr(i)+'">'+(r?s:Wr(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Wr(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let o=0;o<e.items.length;o++){const a=e.items[o];i+=this.listitem(a)}const s=t?"ol":"ul",n=t&&r!==1?' start="'+r+'"':"";return"<"+s+n+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];r="";for(let o=0;o<n.length;o++)r+=this.tablecell(n[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=zx(e);if(s===null)return i;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image({href:e,title:t,text:r}){const i=zx(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},D1=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Xn=class Fy{options;renderer;textRenderer;constructor(t){this.options=t||Qn,this.options.renderer=this.options.renderer||new ud,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new D1}static parse(t,r){return new Fy(r).parse(t)}static parseInline(t,r){return new Fy(r).parseInline(t)}parse(t,r=!0){let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=c||"";continue}}const o=n;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):i+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=a||"";continue}}const o=n;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},hd=class{options;constructor(e){this.options=e||Qn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},vL=class{defaults=E1();options=this.setOptions;parse=this.parseMarkdown(Yn.lex,Xn.parse);parseInline=this.parseMarkdown(Yn.lexInline,Xn.parseInline);Parser=Xn;Renderer=ud;TextRenderer=D1;Lexer=Yn;Tokenizer=od;Hooks=hd;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{const s=i;for(const n of s.header)r=r.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)r=r.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{const s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);r=r.concat(this.walkTokens(o,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new ud(this.defaults);for(const n in r.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=r.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new od(this.defaults);for(const n in r.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=r.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new hd;for(const n in r.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=r.hooks[o],c=s[o];hd.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,n=r.walkTokens;i.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Yn.lex(e,t??this.defaults)}parser(e,t){return Xn.parse(e,t??this.defaults)}parseMarkdown(e,t){return(i,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let c=e(i,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Wr(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Zn=new vL;function nt(e,t){return Zn.parse(e,t)}nt.options=nt.setOptions=function(e){return Zn.setOptions(e),nt.defaults=Zn.defaults,jx(nt.defaults),nt},nt.getDefaults=E1,nt.defaults=Qn,nt.use=function(...e){return Zn.use(...e),nt.defaults=Zn.defaults,jx(nt.defaults),nt},nt.walkTokens=function(e,t){return Zn.walkTokens(e,t)},nt.parseInline=Zn.parseInline,nt.Parser=Xn,nt.parser=Xn.parse,nt.Renderer=ud,nt.TextRenderer=D1,nt.Lexer=Yn,nt.lexer=Yn.lex,nt.Tokenizer=od,nt.Hooks=hd,nt.parse=nt;var GV=nt.options,JV=nt.setOptions,QV=nt.use,YV=nt.walkTokens,XV=nt.parseInline,ZV=Xn.parse,KV=Yn.lex,ws=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),wL=/^(.+)\/(.+?)(;.+)?$/;function eE(e,t){const r=wL.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:t?void 0:e}var hr=Symbol("unset"),bL=class{constructor(){this.root=new A1,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||Hr.empty()}get entries(){return this.root.children?.entries()||Hr.empty()}insert(e,t,r){this.c(e,i=>i._value=t,r)}mutate(e,t){this.c(e,r=>r._value=t(r._value===hr?void 0:r._value))}mutatePath(e,t){this.c(e,()=>{},r=>t(r))}delete(e){const t=this.b(e);if(!t)return;let r=t.length-1;const i=t[r].node._value;if(i!==hr){for(this.a--,t[r].node._value=hr;r>0;r--){const{node:s,part:n}=t[r];if(s.children?.size||s._value!==hr)break;t[r-1].node.children.delete(n)}return i}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const r=t[t.length-1].node;for(let i=t.length-1;i>0;i--){const s=t[i-1];if(s.node.children.delete(t[i].part),s.node.children.size>0||s.node._value!==hr)break}for(const i of tE(r))i._value!==hr&&(this.a--,yield i._value);r===this.root&&(this.root._value=hr,this.root.children=void 0)}find(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return;t=i}return t._value===hr?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;if(i._value!==hr)return!0;t=i}return!1}hasKeyOrChildren(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return!0}hasKey(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return t._value!==hr}b(e){const t=[{part:"",node:this.root}];let r=0;for(const i of e){const s=t[r].node.children?.get(i);if(!s)return;t.push({part:i,node:s}),r++}return t}c(e,t,r){let i=this.root;for(const o of e){if(i.children)if(i.children.has(o))i=i.children.get(o);else{const a=new A1;i.children.set(o,a),i=a}else{const a=new A1;i.children=new Map([[o,a]]),i=a}r?.(i)}const s=i._value===hr?0:1;t(i);const n=i._value===hr?0:1;this.a+=n-s}*values(){for(const{_value:e}of tE(this.root))e!==hr&&(yield e)}};function*tE(e){const t=[e];for(;t.length>0;){const r=t.pop();if(yield r,r.children)for(const i of r.children.values())t.push(i)}}var A1=class{constructor(){this._value=hr}get value(){return this._value===hr?void 0:this._value}set value(e){this._value=e===void 0?hr:e}},Vr=class Oo{constructor(t,r){this.lineNumber=t,this.column=r}with(t=this.lineNumber,r=this.column){return t===this.lineNumber&&r===this.column?this:new Oo(t,r)}delta(t=0,r=0){return this.with(this.lineNumber+t,this.column+r)}equals(t){return Oo.equals(this,t)}static equals(t,r){return!t&&!r?!0:!!t&&!!r&&t.lineNumber===r.lineNumber&&t.column===r.column}isBefore(t){return Oo.isBefore(this,t)}static isBefore(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<r.column}isBeforeOrEqual(t){return Oo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<=r.column}static compare(t,r){const i=t.lineNumber|0,s=r.lineNumber|0;if(i===s){const n=t.column|0,o=r.column|0;return n-o}return i-s}clone(){return new Oo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Oo(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Ke=class Ht{constructor(t,r,i,s){t>i||t===i&&r>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=t,this.endColumn=r):(this.startLineNumber=t,this.startColumn=r,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Ht.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Ht.containsPosition(this,t)}static containsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<t.startColumn||r.lineNumber===t.endLineNumber&&r.column>t.endColumn)}static strictContainsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<=t.startColumn||r.lineNumber===t.endLineNumber&&r.column>=t.endColumn)}containsRange(t){return Ht.containsRange(this,t)}static containsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>t.endColumn)}strictContainsRange(t){return Ht.strictContainsRange(this,t)}static strictContainsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<=t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>=t.endColumn)}plusRange(t){return Ht.plusRange(this,t)}static plusRange(t,r){let i,s,n,o;return r.startLineNumber<t.startLineNumber?(i=r.startLineNumber,s=r.startColumn):r.startLineNumber===t.startLineNumber?(i=r.startLineNumber,s=Math.min(r.startColumn,t.startColumn)):(i=t.startLineNumber,s=t.startColumn),r.endLineNumber>t.endLineNumber?(n=r.endLineNumber,o=r.endColumn):r.endLineNumber===t.endLineNumber?(n=r.endLineNumber,o=Math.max(r.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Ht(i,s,n,o)}intersectRanges(t){return Ht.intersectRanges(this,t)}static intersectRanges(t,r){let i=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=r.startLineNumber,c=r.startColumn,l=r.endLineNumber,u=r.endColumn;return i<a?(i=a,s=c):i===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),i>n||i===n&&s>o?null:new Ht(i,s,n,o)}equalsRange(t){return Ht.equalsRange(this,t)}static equalsRange(t,r){return!t&&!r?!0:!!t&&!!r&&t.startLineNumber===r.startLineNumber&&t.startColumn===r.startColumn&&t.endLineNumber===r.endLineNumber&&t.endColumn===r.endColumn}getEndPosition(){return Ht.getEndPosition(this)}static getEndPosition(t){return new Vr(t.endLineNumber,t.endColumn)}getStartPosition(){return Ht.getStartPosition(this)}static getStartPosition(t){return new Vr(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,r){return new Ht(this.startLineNumber,this.startColumn,t,r)}setStartPosition(t,r){return new Ht(t,r,this.endLineNumber,this.endColumn)}collapseToStart(){return Ht.collapseToStart(this)}static collapseToStart(t){return new Ht(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Ht.collapseToEnd(this)}static collapseToEnd(t){return new Ht(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Ht(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,r=t){return new Ht(t.lineNumber,t.column,r.lineNumber,r.column)}static lift(t){return t?new Ht(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn)}static areIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<=r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,r){if(t&&r){const n=t.startLineNumber|0,o=r.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=r.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=r.endLineNumber|0;if(l===u){const h=t.endColumn|0,d=r.endColumn|0;return h-d}return l-u}return a-c}return n-o}return(t?1:0)-(r?1:0)}static compareRangesUsingEnds(t,r){return t.endLineNumber===r.endLineNumber?t.endColumn===r.endColumn?t.startLineNumber===r.startLineNumber?t.startColumn-r.startColumn:t.startLineNumber-r.startLineNumber:t.endColumn-r.endColumn:t.endLineNumber-r.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},rE=class{constructor(){this.a=new Map,this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),te(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const r=new yL(this,e,t);return this.b.set(e,r),te(()=>{const i=this.b.get(e);!i||i!==r||(this.b.delete(e),i.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const r=this.b.get(e);return!r||r.isResolved?null:(await r.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const r=this.b.get(e);return!!(!r||r.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},yL=class extends K{get isResolved(){return this.c}constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},iE;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(iE||(iE={}));var sE;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(sE||(sE={}));var nE;(function(e){const t=new Map;t.set(0,le.symbolMethod),t.set(1,le.symbolFunction),t.set(2,le.symbolConstructor),t.set(3,le.symbolField),t.set(4,le.symbolVariable),t.set(5,le.symbolClass),t.set(6,le.symbolStruct),t.set(7,le.symbolInterface),t.set(8,le.symbolModule),t.set(9,le.symbolProperty),t.set(10,le.symbolEvent),t.set(11,le.symbolOperator),t.set(12,le.symbolUnit),t.set(13,le.symbolValue),t.set(15,le.symbolEnum),t.set(14,le.symbolConstant),t.set(15,le.symbolEnum),t.set(16,le.symbolEnumMember),t.set(17,le.symbolKeyword),t.set(27,le.symbolSnippet),t.set(18,le.symbolText),t.set(19,le.symbolColor),t.set(20,le.symbolFile),t.set(21,le.symbolReference),t.set(22,le.symbolCustomColor),t.set(23,le.symbolFolder),t.set(24,le.symbolTypeParameter),t.set(25,le.account),t.set(26,le.issues);function r(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=le.symbolProperty),o}e.toIcon=r;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(n,o){let a=i.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(nE||(nE={}));var oE;(function(e){e[e.Deprecated=1]="Deprecated"})(oE||(oE={}));var aE;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(aE||(aE={}));var cE;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(cE||(cE={}));var lE;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(lE||(lE={}));var dd;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(dd||(dd={}));var uE;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(uE||(uE={}));var hE;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(hE||(hE={}));var dE;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(dE||(dE={}));var fE;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(fE||(fE={}));function xL(e){return e&&x.isUri(e.uri)&&Ke.isIRange(e.range)&&(Ke.isIRange(e.originSelectionRange)||Ke.isIRange(e.targetSelectionRange))}var pE;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(pE||(pE={}));var eq={17:p(804,null),16:p(805,null),4:p(806,null),13:p(807,null),8:p(808,null),9:p(809,null),21:p(810,null),23:p(811,null),7:p(812,null),0:p(813,null),11:p(814,null),10:p(815,null),19:p(816,null),5:p(817,null),1:p(818,null),2:p(819,null),20:p(820,null),15:p(821,null),18:p(822,null),24:p(823,null),3:p(824,null),6:p(825,null),14:p(826,null),22:p(827,null),25:p(828,null),12:p(829,null)},gE;(function(e){e[e.Deprecated=1]="Deprecated"})(gE||(gE={}));var mE;(function(e){const t=new Map;t.set(0,le.symbolFile),t.set(1,le.symbolModule),t.set(2,le.symbolNamespace),t.set(3,le.symbolPackage),t.set(4,le.symbolClass),t.set(5,le.symbolMethod),t.set(6,le.symbolProperty),t.set(7,le.symbolField),t.set(8,le.symbolConstructor),t.set(9,le.symbolEnum),t.set(10,le.symbolInterface),t.set(11,le.symbolFunction),t.set(12,le.symbolVariable),t.set(13,le.symbolConstant),t.set(14,le.symbolString),t.set(15,le.symbolNumber),t.set(16,le.symbolBoolean),t.set(17,le.symbolArray),t.set(18,le.symbolObject),t.set(19,le.symbolKey),t.set(20,le.symbolNull),t.set(21,le.symbolEnumMember),t.set(22,le.symbolStruct),t.set(23,le.symbolEvent),t.set(24,le.symbolOperator),t.set(25,le.symbolTypeParameter);function r(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=le.symbolProperty),o}e.toIcon=r;const i=new Map;i.set(0,20),i.set(1,8),i.set(2,8),i.set(3,8),i.set(4,5),i.set(5,0),i.set(6,9),i.set(7,3),i.set(8,2),i.set(9,15),i.set(10,7),i.set(11,1),i.set(12,4),i.set(13,14),i.set(14,18),i.set(15,13),i.set(16,13),i.set(17,13),i.set(18,13),i.set(19,17),i.set(20,13),i.set(21,16),i.set(22,6),i.set(23,10),i.set(24,11),i.set(25,24);function s(n){let o=i.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(mE||(mE={}));var ua=class An{static{this.Comment=new An("comment")}static{this.Imports=new An("imports")}static{this.Region=new An("region")}static fromValue(t){switch(t){case"comment":return An.Comment;case"imports":return An.Imports;case"region":return An.Region}return new An(t)}constructor(t){this.value=t}},vE;(function(e){e[e.AIGenerated=1]="AIGenerated"})(vE||(vE={}));var fd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(fd||(fd={}));var T1;(function(e){function t(r){return!r||typeof r!="object"?!1:typeof r.id=="string"&&typeof r.title=="string"}e.is=t})(T1||(T1={}));var ha;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(ha||(ha={}));var fl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(fl||(fl={}));var pl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(pl||(pl={}));var wE;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(wE||(wE={}));var bE;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(bE||(bE={}));var yE;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(yE||(yE={}));var tq=new rE,rq=new rE,xE;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(xE||(xE={}));var pd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(pd||(pd={}));var EE;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(EE||(EE={}));var br;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(br||(br={})),function(e){function t(o,a){return a-o}e.compare=t;const r=Object.create(null);r[e.Error]=p(1998,null),r[e.Warning]=p(1999,null),r[e.Info]=p(2e3,null);function i(o){return r[o]||""}e.toString=i;function s(o){switch(o){case Pt.Error:return e.Error;case Pt.Warning:return e.Warning;case Pt.Info:return e.Info;case Pt.Ignore:return e.Hint}}e.fromSeverity=s;function n(o){switch(o){case e.Error:return Pt.Error;case e.Warning:return Pt.Warning;case e.Info:return Pt.Info;case e.Hint:return Pt.Ignore}}e.toSeverity=n}(br||(br={}));var kE;(function(e){const t="";function r(s){return i(s,!0)}e.makeKey=r;function i(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(br.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=i})(kE||(kE={}));var iq=J("markerService");function yr(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function EL(e,t="Unreachable"){throw new Error(t)}function SE(e){if(!e()){debugger;e(),pt(new qo("Assertion Failed"))}}var kL=class{constructor(){this.a=new Map}add(e,t){yr(Pe(e)),yr(mt(t)),yr(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},er=new kL,SL=J("fileService");function da(e){return e.create===!0}var Or;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(Or||(Or={}));var cn;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(cn||(cn={}));var $E;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})($E||($E={}));var CE;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(CE||(CE={}));var oe;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(oe||(oe={}));var gd=class M3 extends Error{static create(t,r){const i=new M3(t.toString(),r);return IE(i,r),i}constructor(t,r){super(t),this.code=r}};function bs(e,t){return gd.create(e,t)}function $L(e){return e||bs(p(1910,null),oe.Unknown)}function IE(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function md(e){if(!e)return oe.Unknown;if(e instanceof gd)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return oe.Unknown;switch(t[1]){case oe.FileExists:return oe.FileExists;case oe.FileIsADirectory:return oe.FileIsADirectory;case oe.FileNotADirectory:return oe.FileNotADirectory;case oe.FileNotFound:return oe.FileNotFound;case oe.FileTooLarge:return oe.FileTooLarge;case oe.FileWriteLocked:return oe.FileWriteLocked;case oe.NoPermissions:return oe.NoPermissions;case oe.Unavailable:return oe.Unavailable}return oe.Unknown}function CL(e){if(e instanceof R1)return e.fileOperationResult;switch(md(e)){case oe.FileNotFound:return 1;case oe.FileIsADirectory:return 0;case oe.FileNotADirectory:return 9;case oe.FileWriteLocked:return 5;case oe.NoPermissions:return 6;case oe.FileExists:return 4;case oe.FileTooLarge:return 7;default:return 10}}var PE;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(PE||(PE={}));var DE;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(DE||(DE={}));var sq=class Vg{static{this.a=null}constructor(t,r){this.c=r,this.b=void 0,this.d=new Lr(()=>{const i=an.forUris(()=>this.c);return i.fill(this.rawAdded.map(s=>[s,!0])),i}),this.f=new Lr(()=>{const i=an.forUris(()=>this.c);return i.fill(this.rawUpdated.map(s=>[s,!0])),i}),this.g=new Lr(()=>{const i=an.forUris(()=>this.c);return i.fill(this.rawDeleted.map(s=>[s,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of t){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.b!==Vg.a&&(typeof i.cId=="number"?this.b===void 0?this.b=i.cId:this.b!==i.cId&&(this.b=Vg.a):this.b!==void 0&&(this.b=Vg.a))}}contains(t,...r){return this.h(t,{includeChildren:!1},...r)}affects(t,...r){return this.h(t,{includeChildren:!0},...r)}h(t,r,...i){if(!t)return!1;const s=i.length>0;return!!((!s||i.includes(1))&&(this.d.value.get(t)||r.includeChildren&&this.d.value.findSuperstr(t))||(!s||i.includes(0))&&(this.f.value.get(t)||r.includeChildren&&this.f.value.findSuperstr(t))||(!s||i.includes(2))&&(this.g.value.findSubstr(t)||r.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}};function IL(e,t,r){return!e||!t||e===t||t.length>e.length?!1:(t.charAt(t.length-1)!==gt&&(t+=gt),r?Nh(e,t):e.indexOf(t)===0)}var R1=class extends Error{constructor(e,t,r){super(e),this.fileOperationResult=t,this.options=r}},AE;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(AE||(AE={}));var TE;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(TE||(TE={}));var PL="";function RE(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var LE=class Pr{static{this.KB=1024}static{this.MB=Pr.KB*Pr.KB}static{this.GB=Pr.MB*Pr.KB}static{this.TB=Pr.GB*Pr.KB}static formatSize(t){return _r(t)||(t=0),t<Pr.KB?p(1911,null,t.toFixed(0)):t<Pr.MB?p(1912,null,(t/Pr.KB).toFixed(2)):t<Pr.GB?p(1913,null,(t/Pr.MB).toFixed(2)):t<Pr.TB?p(1914,null,(t/Pr.GB).toFixed(2)):p(1915,null,(t/Pr.TB).toFixed(2))}},DL=class extends K{constructor(e,t="",r="",i=!0,s){super(),this.j=this.B(new P),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=r,this.z=i,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},nq=class Oy{constructor(){this.id=Oy.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let r=[];for(const i of t)i.length&&(r.length?r=[...r,new Oy,...i]:r=i);return r}static{this.ID="vs.actions.separator"}async run(){}},oq=class U3 extends DL{static{this.ID="vs.actions.empty"}constructor(){super(U3.ID,p(44,null),void 0,!1)}},AL={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},TL={id:"default",displayName:p(4129,null),providerDisplayName:p(4130,null)},NE;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(NE||(NE={}));var FE;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(FE||(FE={}));function vd(e){if(ln(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function OE(e){if(ln(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function L1(e){if(ln(e)||vd(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function wd(e){if(ln(e))return!1;const t=e;return x.isUri(t?.base?.resource)&&x.isUri(t?.input1?.resource)&&x.isUri(t?.input2?.resource)&&x.isUri(t?.result?.resource)}var ME;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(ME||(ME={}));var UE;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(UE||(UE={}));var RL=class{constructor(){this.a=new Map}registerSource(e,t){let r=this.a.get(e);return r||(r={source:e,label:t},this.a.set(e,r)),r.source}getSourceLabel(e){return this.a.get(e)?.label??e}},aq=new RL,jE;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(jE||(jE={}));var LL=class extends K{};function ln(e){return e instanceof LL}function NL(e){const t=e;return x.isUri(t?.preferredResource)}function FL(e){const t=e;return ln(t?.primary)&&ln(t?.secondary)}function OL(e){const t=e;return ln(t?.modified)&&ln(t?.original)}var HE;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(HE||(HE={}));var BE;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(BE||(BE={}));var un;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(un||(un={}));var ML=class{getOriginalUri(e,t){if(!e)return;if(wd(e))return zE.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===un.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===un.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===un.PRIMARY?i:s}}if(vd(e)||OE(e)||L1(e)||wd(e))return;const r=NL(e)?e.preferredResource:e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}a(e){return FL(e)||L1(e)?{primary:e.primary,secondary:e.secondary}:OL(e)||vd(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(wd(e))return zE.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===un.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===un.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===un.PRIMARY?i:s}}if(vd(e)||OE(e)||L1(e)||wd(e))return;const r=e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(r=>e.scheme===r))return e}else if(t===e.scheme)return e}},_E;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(_E||(_E={}));var zE=new ML,WE;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(WE||(WE={}));var UL=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(td);for(const[r,i]of this.c)this.e(r,i,t);this.c.clear()}e(e,t,r){const i=r.createInstance(t);this.d.set(e,i)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return Zo(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),te(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};er.add(AL.EditorFactory,new UL);var VE;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(VE||(VE={}));var gl=class{constructor(e,t,r){this.owner=e,this.debugNameSource=t,this.referenceFn=r}getDebugName(e){return jL(e,this)}},qE=new Map,N1=new WeakMap;function jL(e,t){const r=N1.get(e);if(r)return r;const i=HL(e,t);if(i){let s=qE.get(i)??0;s++,qE.set(i,s);const n=s===1?i:`${i}#${s}`;return N1.set(e,n),n}}function HL(e,t){const r=N1.get(e);if(r)return r;const i=t.owner?_L(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return i+s}else return i+n;const o=t.referenceFn;if(o!==void 0&&(s=F1(o),s!==void 0))return i+s;if(t.owner!==void 0){const a=BL(t.owner,e);if(a!==void 0)return i+a}}function BL(e,t){for(const r in e)if(e[r]===t)return r}var GE=new Map,JE=new WeakMap;function _L(e){const t=JE.get(e);if(t)return t;const r=zL(e);let i=GE.get(r)??0;i++,GE.set(r,i);const s=i===1?r:`${r}#${i}`;return JE.set(e,s),s}function zL(e){const t=e.constructor;return t?t.name:"Object"}function F1(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(i?i[1]:void 0)?.trim()}var O1=(e,t)=>e===t;function M1(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!M1(e[r],t[r]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const r=e,i=t,s=Object.keys(r),n=Object.keys(i),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!M1(r[a],i[a]))return!1;return!0}return!1}var QE;function WL(e){QE=e}function _i(){return QE}var VL=class{constructor(){this.a=0,this.d=new WeakMap}b(e){return qL([fa(QL("|  ",this.a)),e])}c(e){return e.hadValue?e.didChange?[fa(" "),mi(vl(e.oldValue,70),{color:"red",strikeThrough:!0}),fa(" "),mi(vl(e.newValue,60),{color:"green"})]:[fa(" (unchanged)")]:[fa(" "),mi(vl(e.newValue,60),{color:"green"}),fa(" (initial)")]}handleObservableChanged(e,t){console.log(...this.b([ml("observable value changed"),mi(e.debugName,{color:"BlueViolet"}),...this.c(t)]))}formatChanges(e){if(e.size!==0)return mi(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleDerivedRecomputed(e,t){const r=this.d.get(e);console.log(...this.b([ml("derived recomputed"),mi(e.debugName,{color:"BlueViolet"}),...this.c(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.b([ml("observable from event triggered"),mi(e.debugName,{color:"BlueViolet"}),...this.c(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleAutorunTriggered(e){const t=this.d.get(e);console.log(...this.b([ml("autorun"),mi(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.b([ml("transaction"),mi(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function qL(e){const t=new Array,r=[];let i="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(i+=`%c${o.text}`,t.push(o.style),o.data&&r.push(...o.data)):"data"in o&&r.push(...o.data)}s(e);const n=[i,...t];return n.push(...r),n}function fa(e){return mi(e,{color:"black"})}function ml(e){return mi(YL(`${e}: `,10),{color:"black",bold:!0})}function mi(e,t={color:"black"}){function r(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:r(i)}}function vl(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?GL(e,t):JL(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function GL(e,t){let r="[ ",i=!0;for(const s of e){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${vl(s,t-r.length)}`}return r+=" ]",r}function JL(e,t){let r="{ ",i=!0;for(const[s,n]of Object.entries(e)){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${s}: ${vl(n,t-r.length)}`}return r+=" }",r}function QL(e,t){let r="";for(let i=1;i<=t;i++)r+=e;return r}function YL(e,t){for(;e.length<t;)e+=" ";return e}var YE;function XL(e){YE=e}var XE;function ZL(e){XE=e}var U1;function KL(e){U1=e}var eN=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const r=t===void 0?void 0:e,i=t===void 0?e:t;return U1({owner:r,debugName:()=>{const s=F1(i);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(o)return`${this.debugName}.${o[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},s=>i(this.read(s),s))}flatten(){return U1({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(YE(this,t)),this}keepObserved(e){return e.add(XE(this)),this}get a(){return this.get()}},j1=class extends eN{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}};function tN(e,t){const r=new ZE(e,t);try{e(r)}finally{r.finish()}}function rN(e,t,r){e?t(e):tN(t,r)}var ZE=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],_i()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():F1(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:r,observable:i}=e[t];r.endUpdate(i)}this.a=null,_i()?.handleEndTransaction()}};function iN(e,t){let r;return typeof e=="string"?r=new gl(void 0,e,void 0):r=new gl(e,void 0,void 0),new sN(r,t,O1)}var sN=class extends j1{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,r){super(),this.e=e,this.g=r,this.d=t}get(){return this.d}set(e,t,r){if(r===void 0&&this.g(this.d,e))return;let i;t||(t=i=new ZE(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.h(e),_i()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:r,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,r)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function KE(e){return new t7(new gl(void 0,void 0,e),e,void 0,void 0)}var e7;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(e7||(e7={}));var t7=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i){this._debugNameData=e,this._runFn=t,this.i=r,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.l=!1,this.h=this.i?.(),_i()?.handleAutorunCreated(this),this.k(),Qo(this)}dispose(){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),Yo(this)}k(){if(this.a===3)return;const e=this.g;this.g=this.f,this.f=e,this.a=3;const t=this.c;try{if(!t){_i()?.handleAutorunTriggered(this);const r=this.h;try{this.h=this.i?.(),this.l=!0,this._runFn(this,r)}catch(i){bh(i)}finally{this.l=!1}}}finally{t||_i()?.handleAutorunFinished(this);for(const r of this.g)r.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const e of this.f)if(e.reportChanges(),this.a===2)break}this.k()}while(this.a!==3)}finally{this.b--}SE(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.f.has(e)&&!this.g.has(e)&&(this.a=1)}handleChange(e,t){if(this.f.has(e)&&!this.g.has(e))try{(this.j?this.j({changedObservable:e,change:t,didChange:i=>i===e},this.h):!0)&&(this.a=2)}catch(r){bh(r)}}readObservable(e){if(!this.l)throw new qo("The reader object cannot be used outside its compute function!");if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}};(function(e){e.Observer=t7})(KE||(KE={}));function nN(e,t){return new oN(new gl(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??O1)}KL(nN);var r7;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(r7||(r7={}));var oN=class extends j1{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.q=r,this.s=i,this.t=s,this.u=n,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.n=!1,this.p=!1,this.x=!1,this.m=this.q?.(),_i()?.handleDerivedCreated(this)}f(){this.g=0,this.h=void 0;for(const e of this.k)e.removeObserver(this);this.k.clear(),this.t?.()}get(){if(this.p)throw new qo("Cyclic deriveds are not supported yet!");if(this.b.size===0){let e;try{this.x=!0,e=this._computeFn(this,this.q?.())}finally{this.x=!1}return this.f(),e}else{do{if(this.g===1){for(const e of this.k)if(e.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.w()}while(this.g!==3);return this.h}}w(){if(this.g===3)return;const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,r=this.h;this.g=3;let i=!1;this.p=!1;try{const s=this.m;this.m=this.q?.();try{this.x=!0,this.h=this._computeFn(this,s)}finally{this.x=!1;for(const n of this.l)n.removeObserver(this);this.l.clear()}i=t&&!this.u(r,this.h),_i()?.handleDerivedRecomputed(this,{oldValue:r,newValue:this.h,change:void 0,didChange:i,hadValue:t})}catch(s){bh(s)}if(this.p=!1,i)for(const s of this.b)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.n)throw new qo("Cyclic deriveds are not supported yet!");this.j++,this.n=!0;try{const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const r of this.b)r.handlePossibleChange(this);if(t)for(const r of this.b)r.beginUpdate(this)}finally{this.n=!1}}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const r of t)r.endUpdate(this)}SE(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){let r=!1;try{r=this.s?this.s({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){bh(s)}const i=this.g===3;if(r&&(this.g===1||i)&&(this.g=2,i))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){if(!this.x)throw new qo("The reader object cannot be used outside its compute function!");e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.b.has(e)&&this.j>0;super.removeObserver(e),t&&e.endUpdate(this)}};function i7(...e){let t,r,i;return e.length===3?[t,r,i]=e:[r,i]=e,new pa(new gl(t,void 0,i),r,i,()=>pa.globalTransaction,O1)}var pa=class extends j1{constructor(e,t,r,i,s){super(),this.k=e,this.l=t,this._getValue=r,this.n=i,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,rN(this.n(),u=>{_i()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const h of this.b)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||_i()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}};(function(e){e.Observer=pa;function t(r,i){let s=!1;pa.globalTransaction===void 0&&(pa.globalTransaction=r,s=!0);try{i()}finally{s&&(pa.globalTransaction=void 0)}}e.batchEventsGlobally=t})(i7||(i7={}));function aN(e){const t=new s7(!1,void 0);return e.addObserver(t),te(()=>{e.removeObserver(t)})}ZL(aN);function cN(e,t){const r=new s7(!0,t);return e.addObserver(r),t?t(e.get()):e.reportChanges(),te(()=>{e.removeObserver(r)})}XL(cN);var s7=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a--,this.a===0&&this.b&&(this.c?this.c(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}},lN=!1;lN&&WL(new VL);function H1(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var uN=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],n7;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(n7||(n7={}));var o7;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(o7||(o7={}));var Je=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const r=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return ci(r,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},Kn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Je.toKey(e))}delete(e){return this.c.delete(Je.toKey(e))}has(e){return this.c.has(Je.toKey(e))}},ys=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Je.toKey(e))}get(e){return this.c.get(Je.toKey(e))}has(e){return this.c.has(Je.toKey(e))}set(e,t){this.c.set(Je.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},cq=J("IBuiltinExtensionsScannerService"),bd=J("productService"),hN="vscode://schemas/vscode-product",xs=J("configurationService"),a7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(a7||(a7={}));function B1(e,t){const r=Object.create(null);for(const i in e)c7(r,i,e[i],t);return r}function c7(e,t,r,i){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=r}catch{i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function dN(e,t){const r=t.split(".");l7(e,r)}function l7(e,t){const r=t.shift();if(t.length===0){delete e[r];return}if(Object.keys(e).indexOf(r)!==-1){const i=e[r];typeof i=="object"&&!Array.isArray(i)&&(l7(i,t),Object.keys(i).length===0&&delete e[r])}}function yd(e,t,r){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=i(e,s);return typeof n>"u"?r:n}function fN(e){return e.replace(/[\[\]]/g,"")}function pN(e){let t=!1;const r=new Map,i=new Map;if(gN(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const d=r.get(h);if(!d){const f={schemas:[u]};return r.set(h,f),i.set(u,f),!0}return d.schemas.push(u),i.set(u,d),t=!0,!1}),r.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,d)=>{if(d!==u){const f=i.get(d);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return d})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function ga(e){return typeof e=="object"&&e!==null}function gN(e,t){if(!e||typeof e!="object")return;const r=(...c)=>{for(const l of c)ga(l)&&o.push(l)},i=(...c)=>{for(const l of c)if(ga(l))for(const u in l){const h=l[u];ga(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)ga(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)ga(l)&&o.push(l);else ga(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var xd={JSONContribution:"base.contributions.json"};function mN(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var vN=class{constructor(){this.b=new P,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[mN(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?pN(t):void 0}hasSchemaContent(e){return!!this.a[e]}},wN=new vN;er.add(xd.JSONContribution,wN);var u7;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(u7||(u7={}));var ma={Configuration:"base.contributions.configuration"},h7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(h7||(h7={}));var Ed={properties:{},patternProperties:{}},kd={properties:{},patternProperties:{}},Sd={properties:{},patternProperties:{}},$d={properties:{},patternProperties:{}},Cd={properties:{},patternProperties:{}},wl={properties:{},patternProperties:{}},eo="vscode://schemas/settings/resourceLanguage",Id=er.as(xd.JSONContribution),bN=class{constructor(){this.a=[],this.i=new Set,this.j=new P,this.onDidSchemaChange=this.j.event,this.k=new P,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:p(1693,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},Id.registerSchema(eo,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const r=new Set;this.r(e,t,r),Id.registerSchema(eo,this.h),this.j.fire(),this.k.fire({properties:r})}deregisterConfigurations(e){const t=new Set;this.s(e,t),Id.registerSchema(eo,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const r=new Set;this.s(t,r),this.r(e,!1,r),Id.registerSchema(eo,this.h),this.j.fire(),this.k.fire({properties:r})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const r=[];for(const{overrides:i,source:s}of e)for(const n in i){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=i[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),zi.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),r.push(...bl(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(r)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const r of e){const i=this.a.indexOf(r);i!==-1&&this.a.splice(i,1)}for(const{overrides:r,source:i}of e)for(const s in r){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>i?a.source?.id===i.id:a.value===r[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),zi.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!e5(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,i)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,r){const i={type:"object",default:t.value,description:p(1694,null,fN(e)),$ref:eo,defaultDefaultValue:t.value,source:r,defaultValueSource:r};this.e[e]=i,this.c.properties[e]=i}o(e,t,r,i){const s=i?.value||{},n=i?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(mt(a)&&(qc(s[o])||mt(s[o]))){if(s[o]={...s[o]??{},...a},r)for(const l in a)n.set(`${o}.${l}`,r)}else s[o]=a,r?n.set(o,r):n.delete(o)}return{value:s,source:n}}p(e,t,r,i){const s=this.e[e],n=i?.value??s?.defaultDefaultValue;let o=r;if(mt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(qc(n)||mt(n)))){if(o=i?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)r&&o.set(`${e}.${c}`,r);t={...mt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const r=new Set;e.removedDefaults&&(this.m(e.removedDefaults,r),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,r),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,r),e.addedConfigurations&&this.r(e.addedConfigurations,!1,r),this.j.fire(),this.k.fire({properties:r,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,r){e.forEach(i=>{this.u(i,t,i.extensionInfo,i.restrictedProperties,void 0,r),this.d.push(i),this.v(i)})}s(e,t){const r=i=>{if(i.properties)for(const s in i.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,i.properties[s])}i.allOf?.forEach(s=>r(s))};for(const i of e){r(i);const s=this.d.indexOf(i);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,r,i,s=3,n){s=yt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&xN(c,l)){delete o[c];continue}if(l.source=r,l.defaultDefaultValue=o[c].default,this.A(c,l),zi.test(c)?l.scope=void 0:(l.scope=yt(l.scope)?s:l.scope,l.restricted=yt(l.restricted)?!!i?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,r,i,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,r]of this.b)r.configurationDefaultOverrideValue&&e.set(t,r.configurationDefaultOverrideValue);return e}v(e){const t=r=>{const i=r.properties;if(i)for(const n in i)this.w(n,i[n]);r.allOf?.forEach(t)};t(e)}w(e,t){switch(Ed.properties[e]=t,t.scope){case 1:kd.properties[e]=t;break;case 2:Sd.properties[e]=t;break;case 6:$d.properties[e]=t;break;case 3:Cd.properties[e]=t;break;case 4:wl.properties[e]=t;break;case 5:wl.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete Ed.properties[e],t.scope){case 1:delete kd.properties[e];break;case 2:delete Sd.properties[e];break;case 6:delete $d.properties[e];break;case 3:delete Cd.properties[e];break;case 4:case 5:delete wl.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,r={type:"object",description:p(1695,null),errorMessage:p(1696,null),$ref:eo};this.A(t,r),Ed.properties[t]=r,kd.properties[t]=r,Sd.properties[t]=r,$d.properties[t]=r,Cd.properties[t]=r,wl.properties[t]=r}}z(){const e={type:"object",description:p(1697,null),errorMessage:p(1698,null),$ref:eo};Ed.patternProperties[to]=e,kd.patternProperties[to]=e,Sd.patternProperties[to]=e,$d.patternProperties[to]=e,Cd.patternProperties[to]=e,wl.patternProperties[to]=e,this.j.fire()}A(e,t){const r=this.b.get(e)?.configurationDefaultOverrideValue;let i,s;r&&(!t.disallowConfigurationDefault||!r.source)&&(i=r.value,s=r.source),qc(i)&&(i=t.defaultDefaultValue,s=void 0),qc(i)&&(i=yN(t.type)),t.default=i,t.defaultValueSource=s}},d7="\\[([^\\]]+)\\]",f7=new RegExp(d7,"g"),to=`^(${d7})+$`,zi=new RegExp(to);function bl(e){const t=[];if(zi.test(e)){let r=f7.exec(e);for(;r?.length;){const i=r[1].trim();i&&t.push(i),r=f7.exec(e)}}return Go(t)}function yN(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Pd=new bN;er.add(ma.Configuration,Pd);function xN(e,t){return e.trim()?zi.test(e)?p(1700,null,e):Pd.getConfigurationProperties()[e]!==void 0?p(1701,null,e):t.policy?.name&&Pd.getPolicyConfigurations().get(t.policy?.name)!==void 0?p(1702,null,e,t.policy?.name,Pd.getPolicyConfigurations().get(t.policy?.name)):null:p(1699,null)}var EN=J("requestService"),kN=class{constructor(e){this.b=e}toJSON(){if(!this.a){const e=Object.create(null);for(const t in this.b)t.toLowerCase()==="authorization"||t.toLowerCase()==="proxy-authorization"?e[t]="*****":e[t]=this.b[t];this.a=e}return this.a}},SN=class extends K{constructor(e){super(),this.b=e,this.a=0}async c(e,t){const r=`[network] #${++this.a}: ${e.url}`;this.b.trace(`${r} - begin`,e.type,new kN(e.headers??{}));try{const i=await t();return this.b.trace(`${r} - end`,e.type,i.res.statusCode,i.res.headers),i}catch(i){throw this.b.error(`${r} - error`,e.type,r4(i)),i}}};function $N(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function CN(e){return e.res.statusCode===204}async function IN(e){if(!$N(e))throw new Error("Server returned "+e.res.statusCode);if(CN(e))return null;const r=(await P2(e.stream)).toString();try{return JSON.parse(r)}catch(i){throw i.message+=`:
`+r,i}}var _1;function PN(e){const t=er.as(ma.Configuration),r=_1;_1={id:"http",order:15,title:p(2088,null),type:"object",scope:e,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:p(2089,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:p(2090,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:p(2091,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:p(2092,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:p(2093,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[p(2094,null),p(2095,null),p(2096,null),p(2097,null)],default:"override",description:p(2098,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:p(2099,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:p(2100,null),restricted:!0},"http.electronFetch":{type:"boolean",default:!1,description:p(2101,null),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:p(2102,null,"`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}},t.updateConfigurations({add:[_1],remove:r?[r]:[]})}PN(1);var yl;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(yl||(yl={}));var vi;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(vi||(vi={}));var lq=class j3 extends K{static{this.a=100}constructor(t,r=Object.create(null)){super(),this.r=t,this.s=r,this.b=this.B(new Bc),this.onDidChangeStorage=this.b.event,this.c=vi.None,this.f=new Map,this.g=this.B(new Hh(j3.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((r,i)=>this.w(i,r)),t.deleted?.forEach(r=>this.w(r,void 0))}finally{this.b.resume()}}w(t,r){if(this.c===vi.Closed)return;let i=!1;yt(r)?i=this.f.delete(t):this.f.get(t)!==r&&(this.f.set(t,r),i=!0),i&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===vi.None&&(this.c=vi.Initialized,this.s.hint!==yl.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,r){const i=this.f.get(t);return yt(i)?r:i}getBoolean(t,r){const i=this.get(t);return yt(i)?r:i==="true"}getNumber(t,r){const i=this.get(t);return yt(i)?r:parseInt(i,10)}getObject(t,r){const i=this.get(t);return yt(i)?r:V5(i)}async set(t,r,i=!1){if(this.c===vi.Closed)return;if(yt(r))return this.delete(t,i);const s=mt(r)||Array.isArray(r)?rA(r):String(r);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:i}),this.D()}async delete(t,r=!1){if(!(this.c===vi.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:r}),this.D()}async optimize(){if(this.c!==vi.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=vi.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===vi.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===yl.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===yl.STORAGE_IN_MEMORY}},z1=J("environmentService"),DN=z1,p7=J("IUriIdentityService"),g7;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(g7||(g7={}));function AN(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&x.isUri(t.location)&&x.isUri(t.globalStorageHome)&&x.isUri(t.settingsResource)&&x.isUri(t.keybindingsResource)&&x.isUri(t.tasksResource)&&x.isUri(t.snippetsHome)&&x.isUri(t.extensionsResource))}var TN=J("IUserDataProfilesService");function Dd(e,t,r,i,s,n){return{id:e,name:t,location:r,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Ct(r,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Ct(r,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Ct(r,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Ct(r,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Ct(r,"snippets"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Ct(r,"extensions.json"),cacheHome:Ct(i,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var m7=class extends K{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,r,i,s){super(),this.s=t,this.t=r,this.u=i,this.y=s,this.g=this.B(new P),this.onDidChangeProfiles=this.g.event,this.h=this.B(new P),this.onWillCreateProfile=this.h.event,this.j=this.B(new P),this.onWillRemoveProfile=this.j.event,this.m=this.B(new P),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=Ct(this.s.userRoamingDataHome,"profiles"),this.f=Ct(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),r=[t];try{for(const s of this.N()){if(!s.name||!Pe(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}r.push(Dd(ji(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const i=new Map;if(r.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=x.parse(n),c=r.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=r.find(c=>c.id===o);a&&i.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:r,emptyWindows:i}}return this.z}D(){const t=Dd("__default__profile__",p(2489,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const r="Temp",i=new RegExp(`${Zs(r)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=i.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${r} ${s+1}`;return this.createProfile(gs(Ft()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,r,i){return this.createProfile(gs(Ft()).toString(16),t,r,i)}async createProfile(t,r,i,s){return await this.F(t,r,i,s)}async F(t,r,i,s){if(!Pe(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(r);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!i?.transient&&u.name===r))throw new Error(`Profile with ${r} name already exists`);const a=s?this.G(s):void 0;x.isUri(a)&&(i={...i,workspaces:[a]});const c=Dd(t,r,Ct(this.profilesHome,t),this.f,i,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await sn.settled(l),a&&!x.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(r)}})(),this.n.set(r,n)),n}async updateProfile(t,r){const i=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?r.workspaces&&(o=n,o.workspaces=r.workspaces):o=Dd(n.id,r.name??n.name,n.location,this.f,{icon:r.icon===null?void 0:r.icon??n.icon,transient:r.transient??n.isTransient,useDefaultFlags:r.useDefaultFlags??n.useDefaultFlags,workspaces:r.workspaces??n.workspaces},this.defaultProfile);else if(r.workspaces){const a=n.workspaces?.filter(c=>!r.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&i.push(o)}if(!i.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],i);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(s=>s.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);const i=[];this.j.fire({profile:r,join(s){i.push(s)}});try{await Promise.allSettled(i)}catch(s){this.y.error(s)}this.I([],[r],[]);try{await this.t.del(r.cacheHome,{recursive:!0})}catch(s){CL(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,r){const i=this.profiles.find(n=>n.id===r.id);if(!i)throw new Error(`Profile '${r.name}' does not exist`);const s=this.G(t);if(x.isUri(s)){const n=i.workspaces?[...i.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(i,{workspaces:n}))}else this.L(s,i,!1),this.M(this.profiles)}unsetWorkspace(t,r=!1){const i=this.G(t);if(x.isUri(i)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,i))})}else this.L(i,void 0,r),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(r=>r.isDirectory&&this.profiles.every(i=>!this.u.extUri.isEqual(i.location,r.resource))).map(r=>this.t.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(r=>!this.H(r));await Promise.allSettled(t.map(r=>this.removeProfile(r)))}getProfileForWorkspace(t){const r=this.G(t);return x.isUri(r)?this.profiles.find(i=>i.workspaces?.some(s=>this.u.extUri.isEqual(s,r))):this.C.emptyWindows.get(r)??this.r.emptyWindows.get(r)}G(t){return vR(t)?t.uri:wR(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location))||[...this.r.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location)))}I(t,r,i){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(r.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=i.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,r,i)}J(t,r,i){this.g.fire({added:t,removed:r,updated:i,all:this.profiles})}L(t,r,i){i=r?.isTransient?!0:i,i?r?this.r.emptyWindows.set(t,r):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),r?this.C.emptyWindows.set(t,r):this.C.emptyWindows.delete(t))}M(t){const r=[],i={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||r.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)i[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:i,emptyWindows:s}),this.O(r),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};m7=__decorate([__param(0,z1),__param(1,SL),__param(2,p7),__param(3,$e)],m7);var RN="__$__isNewStorageMarker",Ad="__$__targetStorageMarker",v7=J("storageService"),va;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(va||(va={}));var w7;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(w7||(w7={}));var b7;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(b7||(b7={}));function LN(e){const t=e.get(Ad);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var hq=class H3 extends K{static{this.a=60*1e3}constructor(t={flushInterval:H3.a}){super(),this.m=t,this.b=this.B(new Bc),this.c=this.B(new Bc),this.onDidChangeTarget=this.c.event,this.f=this.B(new P),this.onWillSaveState=this.f.event,this.h=this.B(new hs(()=>this.n(),this.m.flushInterval)),this.j=this.B(new os),this.C=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(t,r,i){return je.filter(this.b.event,s=>s.scope===t&&(r===void 0||s.key===r),i)}n(){this.j.value=I5(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){ai([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{xt("code/willInitStorage");try{await this.O()}finally{xt("code/didInitStorage")}this.h.schedule()})()),this.g}u(t,r){const{key:i,external:s}=r;if(i===Ad){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.c.fire({scope:t})}else this.b.fire({scope:t,key:i,target:this.J(t)[i],external:s})}w(t){this.f.fire({reason:t})}get(t,r,i){return this.P(r)?.get(t,i)}getBoolean(t,r,i){return this.P(r)?.getBoolean(t,i)}getNumber(t,r,i){return this.P(r)?.getNumber(t,i)}getObject(t,r,i){return this.P(r)?.getObject(t,i)}storeAll(t,r){this.y(()=>{for(const i of t)this.store(i.key,i.value,i.scope,i.target,r)})}store(t,r,i,s,n=!1){if(yt(r)){this.remove(t,i,n);return}this.y(()=>{this.z(t,i,s),this.P(i)?.set(t,r,n)})}remove(t,r,i=!1){this.y(()=>{this.z(t,r,void 0),this.P(r)?.delete(t,i)})}y(t){this.b.pause(),this.c.pause();try{t()}finally{this.b.resume(),this.c.resume()}}keys(t,r){const i=[],s=this.J(t);for(const n of Object.keys(s))s[n]===r&&i.push(n);return i}z(t,r,i,s=!1){const n=this.J(r);typeof i=="number"?n[t]!==i&&(n[t]=i,this.P(r)?.set(Ad,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(r)?.set(Ad,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const r=this.P(t);return r?LN(r):Object.create(null)}isNew(t){return this.getBoolean(RN,t)===!0}async flush(t=va.NONE){this.f.fire({reason:t});const r=this.P(-1),i=this.P(0),s=this.P(1);switch(t){case va.NONE:await sn.settled([r?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case va.SHUTDOWN:await sn.settled([r?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,r=this.P(0)?.items??new Map,i=this.P(1)?.items??new Map;return NN(t,r,i,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,r){return this.w(va.NONE),AN(t)?this.R(t,r):this.S(t,r)}M(t,r){return!(t.id===r.id||y7(r)&&y7(t))}N(t,r,i){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),r.get(n)!==o&&this.u(i,{key:n,external:!0});for(const[n]of r.items)s.has(n)||this.u(i,{key:n,external:!0})})}};function y7(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function NN(e,t,r,i,s,n){const o=v=>{try{return JSON.parse(v)}catch{return v}},a=new Map,c=new Map;e.forEach((v,y)=>{a.set(y,v),c.set(y,o(v))});const l=new Map,u=new Map;t.forEach((v,y)=>{l.set(y,v),u.set(y,o(v))});const h=new Map,d=new Map;r.forEach((v,y)=>{h.set(y,v),d.set(y,o(v))}),console.group(i!==s?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const f=[];if(a.forEach((v,y)=>{f.push({key:y,value:v})}),console.table(f),console.groupEnd(),console.log(c),i!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const v=[];l.forEach((y,E)=>{v.push({key:E,value:y})}),console.table(v),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const g=[];h.forEach((v,y)=>{g.push({key:y,value:v})}),console.table(g),console.groupEnd(),console.log(d)}var xl;(function(e){e.responseVote=new H("chatSessionResponseVote","",{type:"string",description:p(5079,null)}),e.responseDetectedAgentCommand=new H("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:p(5080,null)}),e.responseSupportsIssueReporting=new H("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:p(5081,null)}),e.responseIsFiltered=new H("chatSessionResponseFiltered",!1,{type:"boolean",description:p(5082,null)}),e.responseHasError=new H("chatSessionResponseError",!1,{type:"boolean",description:p(5083,null)}),e.requestInProgress=new H("chatSessionRequestInProgress",!1,{type:"boolean",description:p(5084,null)}),e.isResponse=new H("chatResponse",!1,{type:"boolean",description:p(5085,null)}),e.isRequest=new H("chatRequest",!1,{type:"boolean",description:p(5086,null)}),e.itemId=new H("chatItemId","",{type:"string",description:p(5087,null)}),e.lastItemId=new H("chatLastItemId",[],{type:"string",description:p(5088,null)}),e.editApplied=new H("chatEditApplied",!1,{type:"boolean",description:p(5089,null)}),e.inputHasText=new H("chatInputHasText",!1,{type:"boolean",description:p(5090,null)}),e.inputHasFocus=new H("chatInputHasFocus",!1,{type:"boolean",description:p(5091,null)}),e.inChatInput=new H("inChatInput",!1,{type:"boolean",description:p(5092,null)}),e.inChatSession=new H("inChat",!1,{type:"boolean",description:p(5093,null)}),e.enabled=new H("chatIsEnabled",!1,{type:"boolean",description:p(5094,null)}),e.panelParticipantRegistered=new H("chatPanelParticipantRegistered",!1,{type:"boolean",description:p(5095,null)}),e.editingParticipantRegistered=new H("chatEditingParticipantRegistered",!1,{type:"boolean",description:p(5096,null)}),e.chatEditingCanUndo=new H("chatEditingCanUndo",!1,{type:"boolean",description:p(5097,null)}),e.chatEditingCanRedo=new H("chatEditingCanRedo",!1,{type:"boolean",description:p(5098,null)}),e.extensionInvalid=new H("chatExtensionInvalid",!1,{type:"boolean",description:p(5099,null)}),e.inputCursorAtTop=new H("chatCursorAtTop",!1),e.inputHasAgent=new H("chatInputHasAgent",!1),e.location=new H("chatLocation",void 0),e.inQuickChat=new H("quickChatHasFocus",!1,{type:"boolean",description:p(5100,null)}),e.hasFileAttachments=new H("chatHasFileAttachments",!1,{type:"boolean",description:p(5101,null)}),e.languageModelsAreUserSelectable=new H("chatModelsAreUserSelectable",!1,{type:"boolean",description:p(5102,null)}),e.Setup={canSignUp:new H("chatSetupCanSignUp",!1,!0),signedOut:new H("chatSetupSignedOut",!1,!0),limited:new H("chatSetupLimited",!1,!0),triggered:new H("chatSetupTriggered",!1,!0),installed:new H("chatSetupInstalled",!1,!0)},e.chatQuotaExceeded=new H("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new H("completionsQuotaExceeded",!1,!0)})(xl||(xl={}));var El,tr;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor",e.EditingSession="editing-session"})(tr||(tr={})),function(e){function t(r){switch(r){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor;case"editing-session":return e.EditingSession}return e.Panel}e.fromRaw=t}(tr||(tr={}));var dq=J("chatAgentService"),x7=class extends K{static{this.AGENT_LEADER="@"}constructor(t){super(),this.r=t,this.b=new Map,this.f=new P,this.onDidChangeAgents=this.f.event,this.g=new Set,this.n=new Map,this.u=new Map,this.h=xl.enabled.bindTo(this.r),this.j=xl.panelParticipantRegistered.bindTo(this.r),this.m=xl.editingParticipantRegistered.bindTo(this.r),this.B(t.onDidChangeContext(r=>{r.affectsSome(this.g)&&this.t()}))}registerAgent(t,r){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=r.slashCommands;r={...r,get slashCommands(){return n.filter(a=>!a.when||s.r.contextMatchesRules(Wt.deserialize(a.when)))}};const o={data:r};return this.b.set(t,o),this.s(),this.t(),this.f.fire(void 0),te(()=>{this.b.delete(t),this.s(),this.t(),this.f.fire(void 0)})}s(){this.g.clear();for(const t of this.b.values())if(t.data.when){const r=Wt.deserialize(t.data.when);for(const i of r?.keys()||[])this.g.add(i)}}t(){let t=!1,r=!1;for(const i of this.getAgents())i.isDefault&&i.locations.includes(tr.EditingSession)?t=!0:i.isDefault&&(r=!0);this.m.set(t),this.j.set(r)}registerAgentImplementation(t,r){const i=this.b.get(t);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return i.data.isDefault&&this.h.set(!0),i.impl=r,this.f.fire(new Td(i.data,r)),te(()=>{i.impl=void 0,this.f.fire(void 0),i.data.isDefault&&this.h.set(!1)})}registerDynamicAgent(t,r){t.isDynamic=!0;const i={data:t,impl:r};return this.b.set(t.id,i),this.f.fire(new Td(t,r)),te(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,r){return this.u.set(t,r),{dispose:()=>{this.u.delete(t)}}}async getAgentCompletionItems(t,r,i){return await this.u.get(t)?.(r,i)??[]}updateAgent(t,r){const i=this.b.get(t);if(!i?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);i.data.metadata={...i.data.metadata,...r},this.f.fire(new Td(i.data,i.impl))}getDefaultAgent(t){return iP(this.getActivatedAgents(),r=>!!r.isDefault&&r.locations.includes(t))}getContributedDefaultAgent(t){return this.getAgents().find(r=>!!r.isDefault&&r.locations.includes(t))}getSecondaryAgent(){return Hr.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t,r=!1){if(!(!this.w(t)&&!r))return this.b.get(t)?.data}w(t){const r=this.b.get(t);return!r?.data.when||this.r.contextMatchesRules(Wt.deserialize(r.data.when))}getAgentByFullyQualifiedId(t){const r=Hr.find(this.b.values(),i=>FN(i.data)===t)?.data;if(!(r&&!this.w(r.id)))return r}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.w(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.w(t.data.id)).map(t=>new Td(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(r=>r.name===t)}agentHasDupeName(t){const r=this.getAgent(t);return r?this.getAgentsByName(r.name).filter(i=>i.extensionId.value!==r.extensionId.value).length>0:!1}async invokeAgent(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(r,i,s,n)}async getFollowups(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(r,i,s,n):[]}async getChatTitle(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(r,i)}registerChatParticipantDetectionProvider(t,r){return this.n.set(t,r),te(()=>{this.n.delete(t)})}hasChatParticipantDetectionProviders(){return this.n.size>0}async detectAgentOrCommand(t,r,i,s){const n=Hr.first(this.n.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{if(h.locations.includes(i.location)){u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const d of h.slashCommands)u.push({participant:h.id,command:d.name,disambiguation:d.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,r,{...i,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};x7=__decorate([__param(0,ax)],x7);var Td=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,r,i){return this.d.invoke(e,t,r,i)}async provideFollowups(e,t,r,i){return this.d.provideFollowups?this.d.provideFollowups(e,t,r,i):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},pq=J("chatAgentNameService"),E7=class{static{El=this}static{this.b="chat.participantNameRegistry"}constructor(t,r,i,s){if(this.h=r,this.i=i,this.j=s,this.f=iN(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(El.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(El.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>lr(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},Xe.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const r=await IN(t);if(!r||r.version!==1)throw new Error("Unexpected chat participant registry response.");const i=r.restrictedChatParticipants;this.f.set(i,void 0),this.j.store(El.b,JSON.stringify(i),-1,1)}getAgentNameRestriction(t){const r=this.m(t.name,t).get(),i=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return r&&i}m(t,r){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>ci(n,n.includes(".")?r.extensionId.value:r.extensionPublisherId)):!0)}dispose(){this.g=!0}};E7=El=__decorate([__param(0,bd),__param(1,EN),__param(2,$e),__param(3,v7)],E7);function FN(e){return`${e.extensionId.value}.${e.id}`}function k7(){return Object.create(null)}var ro="**",W1="/",Rd="[/\\\\]",Ld="[^/\\\\]",ON=/\//g;function S7(e,t){switch(e){case 0:return"";case 1:return`${Ld}*?`;default:return`(?:${Rd}|${Ld}+${Rd}${t?`|${Rd}${Ld}+`:""})*?`}}function kl(e,t){if(!e)return[];const r=[];let i=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!i&&!s){r.push(n),n="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&r.push(n),r}function $7(e){if(!e)return"";let t="";const r=kl(e,W1);if(r.every(i=>i===ro))t=".*";else{let i=!1;r.forEach((s,n)=>{if(s===ro){if(i)return;t+=S7(2,n===r.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===W1?h="":h=Zs(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const d=`(?:${kl(a,",").map(f=>$7(f)).join("|")})`;t+=d,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=Ld;continue;case"*":t+=S7(1);continue;default:t+=Zs(u)}}n<r.length-1&&(r[n+1]!==ro||n+2<r.length)&&(t+=Rd)}i=s===ro})}return t}var MN=/^\*\*\/\*\.[\w\.-]+$/,UN=/^\*\*\/([\w\.-]+)\/?$/,jN=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,HN=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,BN=/^\*\*((\/[\w\.-]+)+)\/?$/,_N=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,C7=new Mc(1e4),I7=function(){return!1},Wi=function(){return null};function V1(e,t){if(!e)return Wi;let r;typeof e!="string"?r=e.pattern:r=e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let s=C7.get(i);if(s)return P7(s,e);let n;return MN.test(r)?s=zN(r.substr(4),r):(n=UN.exec(q1(r,t)))?s=WN(n[1],r):(t.trimForExclusions?HN:jN).test(r)?s=VN(r,t):(n=BN.exec(q1(r,t)))?s=D7(n[1].substr(1),r,!0):(n=_N.exec(q1(r,t)))?s=D7(n[1],r,!1):s=qN(r),C7.set(i,s),P7(s,e)}function P7(e,t){if(typeof t=="string")return e;const r=function(i,s){return Bn(i,t.base,!bt)?e(uD(i.substr(t.base.length),gt),s):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function q1(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function zN(e,t){return function(r,i){return typeof r=="string"&&r.endsWith(e)?t:null}}function WN(e,t){const r=`/${e}`,i=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(r)||o.endsWith(i)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function VN(e,t){const r=R7(e.slice(1,-1).split(",").map(a=>V1(a,t)).filter(a=>a!==Wi),e),i=r.length;if(!i)return Wi;if(i===1)return r[0];const s=function(a,c){for(let l=0,u=r.length;l<u;l++)if(r[l](a,c))return e;return null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function D7(e,t,r){const i=gt===Re.sep,s=i?e:e.replace(ON,gt),n=gt+s,o=Re.sep+e;let a;return r?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!i&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!i&&c===e)?t:null},a.allPaths=[(r?"*/":"./")+e],a}function qN(e){try{const t=new RegExp(`^${$7(e)}$`);return function(r){return t.lastIndex=0,typeof r=="string"&&t.test(r)?e:null}}catch{return Wi}}function wa(e,t,r){return!e||typeof t!="string"?!1:wi(e)(t,void 0,r)}function wi(e,t={}){if(!e)return I7;if(typeof e=="string"||GN(e)){const r=V1(e,t);if(r===Wi)return I7;const i=function(s,n){return!!r(s,n)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return JN(e,t)}function GN(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function A7(e){return e.allBasenames||[]}function T7(e){return e.allPaths||[]}function JN(e,t){const r=R7(Object.getOwnPropertyNames(e).map(a=>QN(a,e[a],t)).filter(a=>a!==Wi)),i=r.length;if(!i)return Wi;if(!r.some(a=>!!a.requiresSiblings)){if(i===1)return r[0];const a=function(u,h){let d;for(let f=0,g=r.length;f<g;f++){const v=r[f](u,h);if(typeof v=="string")return v;tn(v)&&(d||(d=[]),d.push(v))}return d?(async()=>{for(const f of d){const g=await f;if(typeof g=="string")return g}return null})():null},c=r.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=r.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let d=0,f=r.length;d<f;d++){const g=r[d];g.requiresSiblings&&l&&(c||(c=ut(a)),u||(u=c.substr(0,c.length-Rh(a).length)));const v=g(a,c,u,l);if(typeof v=="string")return v;tn(v)&&(h||(h=[]),h.push(v))}return h?(async()=>{for(const d of h){const f=await d;if(typeof f=="string")return f}return null})():null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function QN(e,t,r){if(t===!1)return Wi;const i=V1(e,r);if(i===Wi)return Wi;if(typeof t=="boolean")return i;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return tn(h)?h.then(d=>d?e:null):h?e:null};return n.requiresSiblings=!0,n}}return i}function R7(e,t){const r=e.filter(a=>!!a.basenames);if(r.length<2)return e;const i=r.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=i.length;a<c;a++)s.push(t)}else s=r.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?s[l]:null};n.basenames=i,n.patterns=s,n.allBasenames=i;const o=e.filter(a=>!a.basenames);return o.push(n),o}function L7(e,t){return Fi(e,t,(r,i)=>typeof r=="string"&&typeof i=="string"?r===i:typeof r!="string"&&typeof i!="string"?r.base===i.base&&r.pattern===i.pattern:!1)}var YN=J("notebookDocumentService"),G1=["W","X","Y","Z","a","b","c","d","e","f"],XN=new RegExp(`^[${G1.join("")}]+`),N7=7;function F7(e){if(e.scheme!==V.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const r=parseInt(e.fragment.substring(0,t).replace(XN,""),N7),i=Vh(e.fragment.substring(t+1)).toString();if(!isNaN(r))return{handle:r,notebook:e.with({scheme:i,fragment:null})}}function ZN(e,t){const r=t.toString(N7),s=`${r.length<G1.length?G1[r.length-1]:"z"}${r}s${qh(Y.fromString(e.scheme),!0,!0)}`;return e.with({scheme:V.vscodeNotebookCell,fragment:s})}function KN(e){if(e.scheme!==V.vscodeNotebookMetadata)return;const t=Vh(e.fragment).toString();return e.with({scheme:t,fragment:null})}function eF(e){const t=`${qh(Y.fromString(e.scheme),!0,!0)}`;return e.with({scheme:V.vscodeNotebookMetadata,fragment:t})}var tF=class{constructor(){this.a=new zt}getNotebook(e){if(e.scheme===V.vscodeNotebookCell){const t=F7(e);if(t){const r=this.a.get(t.notebook);if(r)return r}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Le(YN,tF,1);var ba;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(ba||(ba={}));var mq=["application/json","application/javascript","text/html","image/svg+xml",ws.latex,ws.markdown,"image/png","image/jpeg",ws.text],vq=[ws.latex,ws.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",ws.text],O7;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(O7||(O7={}));var Sl;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Sl||(Sl={}));var M7;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(M7||(M7={}));var U7;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(U7||(U7={}));var j7;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(j7||(j7={}));var bi;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(bi||(bi={}));var H7;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(H7||(H7={}));var B7;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(B7||(B7={}));var _7;(function(e){e.scheme=V.vscodeNotebookMetadata;function t(i){return eF(i)}e.generate=t;function r(i){return KN(i)}e.parse=r})(_7||(_7={}));var z7;(function(e){e.scheme=V.vscodeNotebookCell;function t(a,c){return ZN(a,c)}e.generate=t;function r(a){return F7(a)}e.parse=r;function i(a,c){return a.with({scheme:V.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==V.file?a.scheme:""}`})}e.generateCellOutputUri=i;function s(a){if(a.scheme!==V.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||V.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(z7||(z7={}));var wq=new H("notebookEditorCursorAtBoundary","none"),bq=new H("notebookEditorCursorAtLineBoundary","none"),W7;(function(e){e.default="default",e.option="option"})(W7||(W7={}));var V7;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(V7||(V7={}));var q7;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(q7||(q7={}));var yq=class qg{static{this.d="notebook/"}static create(t,r){return`${qg.d}${t}/${r??t}`}static parse(t){if(t.startsWith(qg.d)){const r=t.substring(qg.d.length).split("/");if(r.length===2)return{notebookType:r[0],viewType:r[1]}}}};function G7(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var rF=new TextDecoder;function iF(e){const t=[];let r=!1;for(const o of e)(t.length===0||r)&&(t.push(o),r=!0);let i=nF(t);const s=Y.concat(t.map(o=>Y.wrap(o))),n=uF(s);return i=i||n.byteLength!==s.byteLength,{data:n,didCompression:i}}var Nd="\x1B[A",J1=Nd.split("").map(e=>e.charCodeAt(0)),sF=10;function nF(e){let t=!1;return e.forEach((r,i)=>{if(i===0||r.length<Nd.length)return;const s=e[i-1],n=r.subarray(0,Nd.length);if(n[0]===J1[0]&&n[1]===J1[1]&&n[2]===J1[2]){const o=s.lastIndexOf(sF);if(o===-1)return;t=!0,e[i-1]=s.subarray(0,o),e[i]=r.subarray(Nd.length)}}),t}function oF(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function aF(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let r=e.match(/\r+(.*)$/m)[1];r=r+t.slice(r.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,r)}return e}var cF=8,lF=13;function uF(e){return!e.buffer.includes(cF)&&!e.buffer.includes(lF)?e:Y.fromString(aF(oF(rF.decode(e.buffer))))}var J7;(function(e){e.Delimiter="\0"})(J7||(J7={}));var Q7;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(Q7||(Q7={}));var Ne=class si{static fromExtHostTestItem(t,r,i=t.parent){if(t._isRoot)return new si([r]);const s=[t.id];for(let n=i;n&&n.id!==r;n=n.parent)s.push(n.id);return s.push(r),new si(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const r=t.indexOf("\0");return r===-1?t:t.slice(0,r)}static fromString(t){return new si(t.split("\0"))}static join(t,r){return new si([...t.path,r])}static joinToString(t,r){return t.toString()+"\0"+r}static parentId(t){const r=t.lastIndexOf("\0");return r===-1?void 0:t.slice(0,r)}static localId(t){const r=t.lastIndexOf("\0");return r===-1?t:t.slice(r+1)}static isChild(t,r){return r[t.length]==="\0"&&r.startsWith(t)}static compare(t,r){return t===r?0:si.isChild(t,r)?2:si.isChild(r,t)?3:1}static getLengthOfCommonPrefix(t,r){if(t===0)return 0;let i=0;for(;i<t-1;){for(let s=1;s<t;s++){const n=r(s-1),o=r(s);if(n.path[i]!==o.path[i])return i}i++}return i}constructor(t,r=t.length){if(this.path=t,this.d=r,t.length===0||r<1)throw new Error("cannot create test with empty path")}get rootId(){return new si(this.path,1)}get parentId(){return this.d>1?new si(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new si(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new si(this.path,t)}compare(t){if(typeof t=="string")return si.compare(this.toString(),t);for(let r=0;r<t.d&&r<this.d;r++)if(t.path[r]!==this.path[r])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},Y7;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(Y7||(Y7={}));var X7;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(X7||(X7={}));var Z7;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(Z7||(Z7={}));var K7;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(K7||(K7={}));var xq={2:p(11362,null),4:p(11363,null),8:p(11364,null)},hF=e=>"runId"in e,ya;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({range:Ke.lift(r.range),uri:t.asCanonicalUri(x.revive(r.uri))})})(ya||(ya={}));var ek;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(ek||(ek={}));var Fd;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,r)=>({label:r.label,uri:r.uri?t.asCanonicalUri(x.revive(r.uri)):void 0,position:r.position?Vr.lift(r.position):void 0})})(Fd||(Fd={}));var Od;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&ya.serialize(t.location),stackTrace:t.stackTrace?.map(Fd.serialize)}),e.deserialize=(t,r)=>({message:r.message,type:0,expected:r.expected,actual:r.actual,contextValue:r.contextValue,location:r.location&&ya.deserialize(t,r.location),stackTrace:r.stackTrace&&r.stackTrace.map(i=>Fd.deserialize(t,i))})})(Od||(Od={}));var Md;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&ya.serialize(t.location)}),e.deserialize=(t,r)=>({message:r.message,type:1,offset:r.offset,length:r.length,location:r.location&&ya.deserialize(t,r.location)})})(Md||(Md={}));var Ud;(function(e){e.serialize=t=>t.type===0?Od.serialize(t):Md.serialize(t),e.deserialize=(t,r)=>r.type===0?Od.deserialize(t,r):Md.deserialize(t,r),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Ud||(Ud={}));var $l;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Ud.serialize)}),e.deserialize=(t,r)=>({state:r.state,duration:r.duration,messages:r.messages.map(i=>Ud.deserialize(t,i))})})($l||($l={}));var tk="\0",jd=(e,t)=>e+tk+t,rk=e=>{const t=e.indexOf(tk);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Hd;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,r)=>({extId:r.extId,label:r.label,tags:r.tags,busy:r.busy,children:void 0,uri:r.uri?t.asCanonicalUri(x.revive(r.uri)):void 0,range:r.range?Ke.lift(r.range):null,description:r.description,error:r.error,sortText:r.sortText})})(Hd||(Hd={}));var ik;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(ik||(ik={}));var hn;(function(e){e.serialize=t=>({expand:t.expand,item:Hd.serialize(t.item)}),e.deserialize=(t,r)=>({controllerId:Ne.root(r.item.extId),expand:r.expand,item:Hd.deserialize(t,r.item)})})(hn||(hn={}));var Cl;(function(e){e.serialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.uri!==void 0&&(r.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(r.range=t.item.range?.toJSON()),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}},e.deserialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.range!==void 0&&(r.range=t.item.range?Ke.lift(t.item.range):null),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}}})(Cl||(Cl={}));var Q1=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},sk;(function(e){e.serializeWithoutMessages=t=>({...hn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map($l.serializeWithoutMessages)}),e.serialize=t=>({...hn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map($l.serialize)}),e.deserialize=(t,r)=>({...hn.deserialize(t,r),ownComputedState:r.ownComputedState,computedState:r.computedState,tasks:r.tasks.map(i=>$l.deserialize(t,i)),retired:!0})})(sk||(sk={}));var Y1;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,r)=>{t.covered+=r.covered,t.total+=r.total}})(Y1||(Y1={}));var nk;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({id:r.id,statement:r.statement,branch:r.branch,declaration:r.declaration,testIds:r.testIds,uri:t.asCanonicalUri(x.revive(r.uri))}),e.empty=(t,r)=>({id:t,uri:r,statement:Y1.empty()})})(nk||(nk={}));function X1(e){return{...e,location:e.location?.toJSON()}}function Z1(e){return e.location=e.location?Vr.isIPosition(e.location)?Vr.lift(e.location):Ke.lift(e.location):void 0,e}var ok;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(ok||(ok={}));var ak;(function(e){e.serialize=t=>t.type===0?_d.serialize(t):zd.serialize(t),e.deserialize=t=>t.type===0?_d.deserialize(t):zd.deserialize(t)})(ak||(ak={}));var Bd;(function(e){e.serialize=X1,e.deserialize=Z1})(Bd||(Bd={}));var _d;(function(e){e.serialize=X1,e.deserialize=Z1})(_d||(_d={}));var zd;(function(e){e.serialize=t=>({...X1(t),branches:t.branches?.map(Bd.serialize)}),e.deserialize=t=>({...Z1(t),branches:t.branches?.map(Bd.deserialize)})})(zd||(zd={}));var ck;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(ck||(ck={}));var Wd;(function(e){e.deserialize=(t,r)=>r.op===0?{op:r.op,item:hn.deserialize(t,r.item)}:r.op===1?{op:r.op,item:Cl.deserialize(r.item)}:r.op===2?{op:r.op,uri:t.asCanonicalUri(x.revive(r.uri)),docv:r.docv}:r,e.serialize=t=>t.op===0?{op:t.op,item:hn.serialize(t.item)}:t.op===1?{op:t.op,item:Cl.serialize(t.item)}:t})(Wd||(Wd={}));var dF=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const r of e)switch(r.op){case 0:this.p(hn.deserialize(this.l,r.item),t);break;case 1:this.q(Cl.deserialize(r.item),t);break;case 3:this.v(r.itemId,t);break;case 5:this.w(r.itemId);break;case 4:this.updatePendingRoots(r.amount);break;case 6:this.f.set(r.tag.id,r.tag);break;case 7:this.f.delete(r.id);break}t.complete?.()}p(e,t){const r=Ne.parentId(e.item.extId)?.toString();let i;if(!r)i=this.y(e),this.h.add(i),this.g.set(e.item.extId,i);else if(this.g.has(r)){const s=this.g.get(r);s.children.add(e.item.extId),i=this.y(e,s),this.g.set(e.item.extId,i)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(i),e.expand===2&&this.j++,i}q(e,t){const r=this.g.get(e.extId);if(r)return e.expand!==void 0&&(r.expand===2&&this.j--,e.expand===2&&this.j++),Q1(r,e),t.update?.(r),r}v(e,t){const r=this.g.get(e);if(!r)return;const i=Ne.parentId(r.item.extId)?.toString();i?this.g.get(i).children.delete(r.item.extId):this.h.delete(r);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==r),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},fF=J("editorGroupsService"),lk;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(lk||(lk={}));var uk;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(uk||(uk={}));var hk;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(hk||(hk={}));var dk;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(dk||(dk={}));var fk;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(fk||(fk={}));var pk;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(pk||(pk={}));var gk;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(gk||(gk={}));var Eq=J("editorService"),pF=-1,gF=-2,mk;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(mk||(mk={}));var Il=(e,t)=>e===t,mF={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Il,label:Il,description:Il,error:Il,sortText:Il,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.includes(r)))},vF=Object.entries(mF),wF=(e,t)=>{let r;for(const[i,s]of vF)s(e[i],t[i])||(r?r[i]=t[i]:r={[i]:t[i]});return r},bF=class extends K{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new hs(()=>this.flushDiff(),200)),this.g=this.B(new P),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Q1(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Q1(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const r=this.tree.get(e);if(r){if((r.expandLevels===void 0||t>r.expandLevels)&&(r.expandLevels=t),r.expand===1){const i=this.M(r);return i.isOpen()?this.L(r,t-1):i.wait().then(()=>this.L(r,t-1))}else if(r.expand===3)return r.resolveBarrier?.isOpen()===!1?r.resolveBarrier.wait().then(()=>this.L(r,t-1)):this.L(r,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Ne.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const r of t.ops)this.w(e,r);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:EL(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const r=Ne.fromExtHostTestItem(e,this.root.id,t?.actual),i=this.s.getApiFor(e);i.parent&&i.parent!==t?.actual&&this.s.getChildren(i.parent).delete(e.id);let s=this.tree.get(r.toString());if(!s){s={fullId:r,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(r.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=wF(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,r.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Ne.joinToString(r,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(r.toString(),c))}),this.y(s.actual.uri)}C(e,t,r){const i=new Set(t.map(s=>s.id));for(const s of e)i.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:r,item:{tags:e.map(s=>jd(this.s.controllerId,s.id))}}}),i.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:jd(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:jd(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,r){this.G(e,r);const i=this.s.getApiFor(e);i.parent=r?.actual,i.listener=s=>this.w(t,s),this.J(t)}I(e,t,r){this.H(e,t,r);for(const[i,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const r=[];for(const[i,s]of this.s.getChildren(e.actual)){const n=this.expand(Ne.joinToString(e.fullId,s.id),t);tn(n)&&r.push(n)}if(r.length)return Promise.all(r).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new Xr;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new Xr,r=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let i;try{i=this.h(e.actual===this.root?void 0:e.actual)}catch(s){r(s)}return tn(i)?i.catch(r).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const r=[t];for(;r.length;){const i=r.pop();if(i){this.s.getApiFor(i.actual).listener=void 0;for(const s of i.actual.tags)this.F(s.id);this.tree.delete(i.fullId.toString());for(const[s,n]of this.s.getChildren(i.actual))r.push(this.tree.get(Ne.joinToString(i.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},yF=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},Vd=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},xF=class extends Error{constructor(e,t,r){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${r}".`)}},EF=(e,t,r)=>{let i=new Map;return{get size(){return i.size},forEach(s,n){for(const o of i.values())s.call(n,o,this)},[Symbol.iterator](){return i.entries()},replace(s){const n=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof r))throw new Vd(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new xF(c.id,l,e.controllerId);if(n.has(c.id))throw new yF(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),i=n},add(s){if(!(s instanceof r))throw new Vd(s.id);i.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){i.delete(s)&&e.listener?.({op:3,id:s})},get(s){return i.get(s)},toJSON(){return Array.from(i.values())}}},vk=new WeakMap,kF=(e,t)=>{const r={controllerId:t};return vk.set(e,r),r},qd=e=>{const t=vk.get(e);if(!t)throw new Vd(e?.id||"<unknown>");return t},SF=J("remoteAuthorityResolverService"),wk;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(wk||(wk={}));var bk=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},$F=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},xr;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(xr||(xr={}));var K1=class Mo extends oi{static isNotAvailable(t){return t instanceof Mo&&t._code===xr.NotAvailable}static isTemporarilyNotAvailable(t){return t instanceof Mo&&t._code===xr.TemporarilyNotAvailable}static isNoResolverFound(t){return t instanceof Mo&&t._code===xr.NoResolverFound}static isInvalidAuthority(t){return t instanceof Mo&&t._code===xr.InvalidAuthority}static isHandled(t){return t instanceof Mo&&t.isHandled}constructor(t,r=xr.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,this.isHandled=r===xr.NotAvailable&&i===!0,Object.setPrototypeOf(this,Mo.prototype)}};function yk(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var ev,io,Es,tv,so,dn,no,rv,iv,Gd,Pl,sv,Vi,qi,nv,Er,ov;function se(e){return Object.assign(e,{apply:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const i=r.length===1?[]:r[1];return Reflect.construct(e,i,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const[i,...s]=r;return Reflect.construct(e,s,i.constructor)}}})}var av;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(av||(av={}));var xk;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(xk||(xk={}));var Te=ev=class{static from(...t){let r=t;return new ev(function(){if(r){for(const i of r)i&&typeof i.dispose=="function"&&i.dispose();r=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Te=ev=__decorate([se],Te);var Ie=io=class{static Min(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isBefore(r)&&(r=s)}return r}static Max(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isAfter(r)&&(r=s)}return r}static isPosition(t){if(!t)return!1;if(t instanceof io)return!0;const{line:r,character:i}=t;return typeof r=="number"&&typeof i=="number"}static of(t){if(t instanceof io)return t;if(this.isPosition(t))return new io(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,r){if(t<0)throw Se("line must be non-negative");if(r<0)throw Se("character must be non-negative");this.c=t,this.e=r}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,r=0){if(t===null||r===null)throw Se();let i;return typeof t>"u"?i=0:typeof t=="number"?i=t:(i=typeof t.lineDelta=="number"?t.lineDelta:0,r=typeof t.characterDelta=="number"?t.characterDelta:0),i===0&&r===0?this:new io(this.line+i,this.character+r)}with(t,r=this.character){if(t===null||r===null)throw Se();let i;return typeof t>"u"?i=this.line:typeof t=="number"?i=t:(i=typeof t.line=="number"?t.line:this.line,r=typeof t.character=="number"?t.character:this.character),i===this.line&&r===this.character?this:new io(i,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ie=io=__decorate([se],Ie);var Ee=Es=class{static isRange(t){return t instanceof Es?!0:t?Ie.isPosition(t.start)&&Ie.isPosition(t.end):!1}static of(t){if(t instanceof Es)return t;if(this.isRange(t))return new Es(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Ie(t,r),o=new Ie(i,s)):Ie.isPosition(t)&&Ie.isPosition(r)&&(n=Ie.of(t),o=Ie.of(r)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Es.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ie.isPosition(t)?!(Ie.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const r=Ie.Max(t.start,this.c),i=Ie.Min(t.end,this.e);if(!r.isAfter(i))return new Es(r,i)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const r=Ie.Min(t.start,this.c),i=Ie.Max(t.end,this.end);return new Es(r,i)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,r=this.end){if(t===null||r===null)throw Se();let i;return t?Ie.isPosition(t)?i=t:(i=t.start||this.start,r=t.end||this.end):i=this.start,i.isEqual(this.c)&&r.isEqual(this.end)?this:new Es(i,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return Ek(this)}};Ee=Es=__decorate([se],Ee);var ks=tv=class extends Ee{static isSelection(t){return t instanceof tv?!0:t?Ee.isRange(t)&&Ie.isPosition(t.anchor)&&Ie.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Ie(t,r),o=new Ie(i,s)):Ie.isPosition(t)&&Ie.isPosition(r)&&(n=Ie.of(t),o=Ie.of(r)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return CF(this)}};ks=tv=__decorate([se],ks);function Ek(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function CF(e){let t=Ek(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var kk=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Se("connectionToken")},IF=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,r){if(typeof e!="string"||e.length===0)throw Se("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Se("port");typeof r<"u"&&kk(r),this.host=e,this.port=Math.round(t),this.connectionToken=r}},Jd=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&kk(t)}},xa=class Gg extends Error{static NotAvailable(t,r){return new Gg(t,xr.NotAvailable,r)}static TemporarilyNotAvailable(t){return new Gg(t,xr.TemporarilyNotAvailable)}constructor(t,r=xr.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,Object.setPrototypeOf(this,Gg.prototype)}},yi;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(yi||(yi={}));var Ea;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ea||(Ea={}));var fn=so=class{static isTextEdit(t){return t instanceof so?!0:t?Ee.isRange(t)&&typeof t.newText=="string":!1}static replace(t,r){return new so(t,r)}static insert(t,r){return so.replace(new Ee(t,t),r)}static delete(t){return so.replace(t,"")}static setEndOfLine(t){const r=new so(new Ee(new Ie(0,0),new Ie(0,0)),"");return r.newEol=t,r}get range(){return this.c}set range(t){if(t&&!Ee.isRange(t))throw Se("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw Se("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw Se("newEol");this.f=t}constructor(t,r){this.c=t,this.e=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};fn=so=__decorate([se],fn);var Qd=dn=class{static isNotebookCellEdit(t){return t instanceof dn?!0:t?$s.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,r){return new dn(t,r)}static insertCells(t,r){return new dn(new $s(t,t),r)}static deleteCells(t){return new dn(t,[])}static updateCellMetadata(t,r){const i=new dn(new $s(t,t),[]);return i.newCellMetadata=r,i}static updateNotebookMetadata(t){const r=new dn(new $s(0,0),[]);return r.newNotebookMetadata=t,r}constructor(t,r){this.range=t,this.newCells=r}};Qd=dn=__decorate([se],Qd);var cv=class Jg{static isSnippetTextEdit(t){return t instanceof Jg?!0:t?Ee.isRange(t.range)&&ao.isSnippetString(t.snippet):!1}static replace(t,r){return new Jg(t,r)}static insert(t,r){return Jg.replace(new Ee(t,t),r)}constructor(t,r){this.range=t,this.snippet=r}},Sk;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(Sk||(Sk={}));var oo=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,r,i,s){this.c.push({_type:1,from:t,to:r,options:i,metadata:s})}createFile(t,r,i){this.c.push({_type:1,from:void 0,to:t,options:r,metadata:i})}deleteFile(t,r,i){this.c.push({_type:1,from:t,to:void 0,options:r,metadata:i})}e(t,r,i){this.c.push({_type:3,metadata:i,uri:t,edit:{editType:5,metadata:r}})}f(t,r,i,s){const n=r.start,o=r.end;(n!==o||i.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:i,metadata:s})}g(t,r,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:r,metadata:i}})}replace(t,r,i,s){this.c.push({_type:2,uri:t,edit:new fn(r,i),metadata:s})}insert(t,r,i,s){this.replace(t,new Ee(r,r),i,s)}delete(t,r,i){this.replace(t,r,"",i)}has(t){return this.c.some(r=>r._type===2&&r.uri.toString()===t.toString())}set(t,r){if(r)for(const i of r){if(!i)continue;let s,n;Array.isArray(i)?(s=i[0],n=i[1]):s=i,Qd.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):cv.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let i=0;i<this.c.length;i++){const s=this.c[i];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[i]=void 0);break}}hP(this.c)}}get(t){const r=[];for(const i of this.c)i._type===2&&i.uri.toString()===t.toString()&&r.push(i.edit);return r}entries(){const t=new zt;for(const r of this.c)if(r._type===2){let i=t.get(r.uri);i||(i=[r.uri,[]],t.set(r.uri,i)),i[1].push(r.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};oo=__decorate([se],oo);var ao=no=class{static isSnippetString(t){return t instanceof no?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=no.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,r=this.e++){if(typeof t=="function"){const i=new no;i.e=this.e,t(i),this.e=i.e,t=i.value}else t=no.c(t);return this.value+="${",this.value+=r,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,r=this.e++){const i=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(t,r){if(typeof r=="function"){const i=new no;i.e=this.e,r(i),this.e=i.e,r=i.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,r&&(this.value+=":",this.value+=r),this.value+="}",this}};ao=no=__decorate([se],ao);var co;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(co||(co={}));var rr;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(rr||(rr={}));var qr=rv=class{static isLocation(t){return t instanceof rv?!0:t?Ee.isRange(t.range)&&x.isUri(t.uri):!1}constructor(t,r){if(this.uri=t,r)if(Ee.isRange(r))this.range=Ee.of(r);else if(Ie.isPosition(r))this.range=new Ee(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};qr=rv=__decorate([se],qr);var Dl=class{static is(t){return t?typeof t.message=="string"&&t.location&&Ee.isRange(t.location.range)&&x.isUri(t.location.uri):!1}constructor(t,r){this.location=t,this.message=r}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.location.range.isEqual(r.location.range)&&t.location.uri.toString()===r.location.uri.toString()}};Dl=__decorate([se],Dl);var Yd=class{constructor(t,r,i=rr.Error){if(!Ee.isRange(t))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=t,this.message=r,this.severity=i}toJSON(){return{severity:rr[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.severity===r.severity&&t.code===r.code&&t.severity===r.severity&&t.source===r.source&&t.range.isEqual(r.range)&&Fi(t.tags,r.tags)&&Fi(t.relatedInformation,r.relatedInformation,Dl.isEqual)}};Yd=__decorate([se],Yd);var Xd=class{constructor(t,r){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=r}};Xd=__decorate([se],Xd);var Zd=class extends Xd{constructor(t,r,i,s){super(t,r),this.canIncreaseVerbosity=i,this.canDecreaseVerbosity=s}};Zd=__decorate([se],Zd);var lv;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(lv||(lv={}));var Al;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Al||(Al={}));var Kd=class{constructor(t,r=Al.Text){this.range=t,this.kind=r}toJSON(){return{range:this.range,kind:Al[this.kind]}}};Kd=__decorate([se],Kd);var ef=class{constructor(t,r){this.uri=t,this.highlights=r}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};ef=__decorate([se],ef);var tt;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(tt||(tt={}));var Tl;(function(e){e[e.Deprecated=1]="Deprecated"})(Tl||(Tl={}));var Rl=iv=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,r,i,s,n){this.name=t,this.kind=r,this.containerName=n,typeof i=="string"&&(this.containerName=i),s instanceof qr?this.location=s:i instanceof Ee&&(this.location=new qr(s,i)),iv.validate(this)}toJSON(){return{name:this.name,kind:tt[this.kind],location:this.location,containerName:this.containerName}}};Rl=iv=__decorate([se],Rl);var Ll=Gd=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Gd.validate)}constructor(t,r,i,s,n){this.name=t,this.detail=r,this.kind=i,this.range=s,this.selectionRange=n,this.children=[],Gd.validate(this)}};Ll=Gd=__decorate([se],Ll);var Nl;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Nl||(Nl={}));var tf=class{constructor(t,r){this.title=t,this.kind=r}};tf=__decorate([se],tf);var dt=class{static{Pl=this}static{this.c="."}constructor(t){this.value=t}append(t){return new Pl(this.value?this.value+Pl.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Pl.c)}};dt=Pl=__decorate([se],dt),dt.Empty=new dt(""),dt.QuickFix=dt.Empty.append("quickfix"),dt.Refactor=dt.Empty.append("refactor"),dt.RefactorExtract=dt.Refactor.append("extract"),dt.RefactorInline=dt.Refactor.append("inline"),dt.RefactorMove=dt.Refactor.append("move"),dt.RefactorRewrite=dt.Refactor.append("rewrite"),dt.Source=dt.Empty.append("source"),dt.SourceOrganizeImports=dt.Source.append("organizeImports"),dt.SourceFixAll=dt.Source.append("fixAll"),dt.Notebook=dt.Empty.append("notebook");var Fl=class{constructor(t,r){if(this.range=t,this.parent=r,r&&!r.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Fl=__decorate([se],Fl);var uv=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},$k=class{constructor(e,t){this.fromRanges=t,this.from=e}},Ck=class{constructor(e,t){this.fromRanges=t,this.to=e}},ka;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(ka||(ka={}));var rf=class{constructor(t,r){this.range=t,this.command=r}get isResolved(){return!!this.command}};rf=__decorate([se],rf);var Mr=sv=class{#e;static isMarkdownString(t){return t instanceof sv?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,r=!1){this.#e=new Ux(t,{supportThemeIcons:r})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,r){return this.#e.appendCodeblock(r??"",t),this}};Mr=sv=__decorate([se],Mr);var hv=class{constructor(t,r){this.label=t,this.documentation=r}};hv=__decorate([se],hv);var dv=class{constructor(t,r){this.label=t,this.documentation=r,this.parameters=[]}};dv=__decorate([se],dv);var fv=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};fv=__decorate([se],fv);var pv;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(pv||(pv={}));var gv;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(gv||(gv={}));var sf=class{constructor(t){this.value=t}};sf=__decorate([se],sf);var nf=class{constructor(t,r,i){this.position=t,this.label=r,this.kind=i}};nf=__decorate([se],nf);var Sa;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Sa||(Sa={}));var pe;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(pe||(pe={}));var Ol;(function(e){e[e.Deprecated=1]="Deprecated"})(Ol||(Ol={}));var of=class{constructor(t,r){this.label=t,this.kind=r}toJSON(){return{label:this.label,kind:this.kind&&pe[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};of=__decorate([se],of);var $a=class{constructor(t=[],r=!1){this.items=t,this.isIncomplete=r}};$a=__decorate([se],$a);var mv=class{constructor(t,r,i){this.insertText=t,this.range=r,this.command=i}};mv=__decorate([se],mv);var vv=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};vv=__decorate([se],vv);var lo;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(lo||(lo={}));var Ml;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Ml||(Ml={}));var pn;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(pn||(pn={}));function PF(e,t){return`${Je.toKey(e)}.${t}`}var xi;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(xi||(xi={}));var Ca;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ca||(Ca={}));var af;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(af||(af={}));var Ia;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Ia||(Ia={}));var Pa;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(Pa||(Pa={}));var Ul;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Ul||(Ul={}));var uo;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(uo||(uo={})),function(e){function t(r){switch(r){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}e.fromValue=t}(Ia||(Ia={}));var Da;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Da||(Da={})),function(e){function t(r){switch(r){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Da||(Da={}));var cf=class{constructor(t,r){if(r&&!x.isUri(r))throw Se("target");if(!Ee.isRange(t)||t.isEmpty)throw Se("range");this.range=t,this.target=r}};cf=__decorate([se],cf);var Aa=class{constructor(t,r,i,s){this.red=t,this.green=r,this.blue=i,this.alpha=s}};Aa=__decorate([se],Aa);var lf=class{constructor(t,r){if(r&&!(r instanceof Aa))throw Se("color");if(!Ee.isRange(t)||t.isEmpty)throw Se("range");this.range=t,this.color=r}};lf=__decorate([se],lf);var uf=class{constructor(t){if(!t||typeof t!="string")throw Se("label");this.label=t}};uf=__decorate([se],uf);var Ik;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(Ik||(Ik={}));var wv;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(wv||(wv={}));var bv;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(bv||(bv={}));var hf;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(hf||(hf={}));var DF=class{constructor(e,t,r){if(this.startIndex=e,this.length=t,this.tooltip=r,typeof e!="number"||e<0)throw Se("startIndex");if(typeof t!="number"||t<1)throw Se("length");if(r!==void 0&&typeof r!="string")throw Se("tooltip")}},AF=class{constructor(e){this.uri=e}},TF=class{constructor(e){this.terminalCommand=e}},yv;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(yv||(yv={}));var RF=class{constructor(e){if(this.options=e,typeof e!="object")throw Se("options")}},xv;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Flag=2]="Flag",e[e.Method=3]="Method",e[e.Argument=4]="Argument"})(xv||(xv={}));var LF=class{constructor(e,t,r,i,s,n,o,a){this.label=e,this.icon=t,this.detail=r,this.isFile=i,this.isDirectory=s,this.isKeyword=n,this.replacementIndex=o??0,this.replacementLength=a??0}},NF=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},Ev;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Ev||(Ev={}));var kv;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(kv||(kv={}));var jl=class{static{Vi=this}static{this.Clean=new Vi("clean","Clean")}static{this.Build=new Vi("build","Build")}static{this.Rebuild=new Vi("rebuild","Rebuild")}static{this.Test=new Vi("test","Test")}static from(t){switch(t){case"clean":return Vi.Clean;case"build":return Vi.Build;case"rebuild":return Vi.Rebuild;case"test":return Vi.Test;default:return}}constructor(t,r){if(this.label=r,typeof t!="string"||typeof r!="string")throw Se("name");this.c=t}get id(){return this.c}};jl=Vi=__decorate([se],jl);function Pk(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].replace(/,/g,",,")+",";return t}var Ta=class{constructor(t,r,i){if(typeof t!="string")throw Se("process");this.e=[],this.c=t,r!==void 0&&(Array.isArray(r)?(this.e=r,this.f=i):this.f=r)}get process(){return this.c}set process(t){if(typeof t!="string")throw Se("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const r of this.e)t.push(r);return Pk(t)}};Ta=__decorate([se],Ta);var ho=class{constructor(t,r,i){if(this.f=[],Array.isArray(r)){if(!t)throw Se("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Se("command");this.e=t,this.f=r,this.g=i}else{if(typeof t!="string")throw Se("commandLine");this.c=t,this.g=r}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Se("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Se("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const r of this.f)t.push(typeof r=="string"?r:r.value);return Pk(t)}};ho=__decorate([se],ho);var Sv;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Sv||(Sv={}));var gn;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(gn||(gn={}));var $v=class{constructor(e){this.c=e}computeId(){return"customExecution"+Ft()}set callback(e){this.c=e}get callback(){return this.c}},df=class{static{qi=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,r,i,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof r=="string"?(this.o=this.name=r,this.w=this.source=i,this.execution=s,a=n,this.k=!0):r===gn.Global||r===gn.Workspace?(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o):(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Ta?this.l={type:qi.e,id:this.q.computeId()}:this.q instanceof ho?this.l={type:qi.f,id:this.q.computeId()}:this.q instanceof $v?this.l={type:qi.c,id:this.q.computeId()}:this.l={type:qi.g,id:Ft()}}get definition(){return this.l}set definition(t){if(t==null)throw Se("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Se("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const r=this.l.type;(qi.g===r||qi.e===r||qi.f===r||qi.c===r)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw Se("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};df=qi=__decorate([se],df);var fo;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(fo||(fo={}));var Cv;(function(e){function t(r){const i=r;return _r(i.value)?i.tooltip&&!Pe(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}e.isViewBadge=t})(Cv||(Cv={}));var ff=nv=class{static isTreeItem(t,r){const i=t;if(i.checkboxState!==void 0){const s=_r(i.checkboxState)?i.checkboxState:mt(i.checkboxState)&&_r(i.checkboxState.state)?i.checkboxState.state:void 0,n=!_r(i.checkboxState)&&mt(i.checkboxState)?i.checkboxState.tooltip:void 0;if(s===void 0||s!==Gi.Checked&&s!==Gi.Unchecked||n!==void 0&&!Pe(n))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(t instanceof nv)return!0;if(i.label!==void 0&&!Pe(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Pe(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Pe(i.iconPath)&&!x.isUri(i.iconPath)&&(!i.iconPath||!Pe(i.iconPath.id))){const s=i.iconPath;if(!s||!Pe(s.light)&&!x.isUri(s.light)&&!Pe(s.dark)&&!x.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Pe(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!x.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Pe(i.tooltip)&&!(i.tooltip instanceof Mr)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<po.None&&i.collapsibleState>po.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Pe(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!i.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(t,r=po.None){this.collapsibleState=r,x.isUri(t)?this.resourceUri=t:this.label=t}};ff=nv=__decorate([se],ff);var po;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(po||(po={}));var Gi;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Gi||(Gi={}));var pf=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};pf=__decorate([se],pf);var gf=class extends pf{},FF=class extends gf{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},OF=class{constructor(e,t,r,i){this.name=e,this.uri=t,this._itemId=r,this.c=i}data(){return this.c()}},Hl=class{#e=new Map;constructor(t){for(const[r,i]of t??[]){const s=this.#e.get(this.#t(r));s?s.push(i):this.#e.set(this.#t(r),[i])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,r){this.#e.set(this.#t(t),[r])}forEach(t,r){for(const[i,s]of this.#e)for(const n of s)t.call(r,n,i,this)}*[Symbol.iterator](){for(const[t,r]of this.#e)for(const i of r)yield[t,i]}#t(t){return t.toLowerCase()}};Hl=__decorate([se],Hl);var Iv=class{constructor(t,r,i){this.insertText=t,this.title=r,this.kind=i}};Iv=__decorate([se],Iv);var Pv;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(Pv||(Pv={}));var Ra=class Qg{static{this.c="."}constructor(t){this.value=t}append(...t){return new Qg((this.value?[this.value,...t]:t).join(Qg.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Qg.c)}};Ra.Empty=new Ra(""),Ra.Text=new Ra("text");var MF=class{constructor(e,t,r){this.title=t,this.insertText=e,this.kind=r}},nr=class{constructor(t,r){this.id=t,this.color=r}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};nr=__decorate([se],nr),nr.File=new nr("file"),nr.Folder=new nr("folder");var Bl=class{constructor(t){this.id=t}};Bl=__decorate([se],Bl);var La;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(La||(La={}));var Na=class{get base(){return this.c}set base(t){this.c=t,this.e=x.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,r){if(typeof t!="string"&&(!t||!x.isUri(t)&&!x.isUri(t.uri)))throw Se("base");if(typeof r!="string")throw Se("pattern");typeof t=="string"?this.baseUri=x.file(t):x.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=r}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Na=__decorate([se],Na);var Dk=new WeakMap;function UF(e,t){Dk.set(e,t)}var Fa=class{constructor(t,r,i,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof r=="string"&&(this.condition=r),typeof i=="string"&&(this.hitCondition=i),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=Dk.get(this)??Ft()),this.c}};Fa=__decorate([se],Fa);var go=class extends Fa{constructor(t,r,i,s,n,o){if(super(r,i,s,n,o),t===null)throw Se("location");this.location=t}};go=__decorate([se],go);var mo=class extends Fa{constructor(t,r,i,s,n,o){super(r,i,s,n,o),this.functionName=t}};mo=__decorate([se],mo);var mf=class extends Fa{constructor(t,r,i,s,n,o,a,c){if(super(s,n,o,a,c),!r)throw Se("dataId");this.label=t,this.dataId=r,this.canPersist=i}};mf=__decorate([se],mf);var Oa=class{constructor(t,r,i){this.command=t,this.args=r||[],this.options=i}};Oa=__decorate([se],Oa);var Ma=class{constructor(t,r){this.port=t,this.host=r}};Ma=__decorate([se],Ma);var _l=class{constructor(t){this.path=t}};_l=__decorate([se],_l);var zl=class{constructor(t){this.implementation=t}};zl=__decorate([se],zl);var Ak=class{constructor(e,t,r){this.session=e,this.threadId=t,this.frameId=r}},Tk=class{constructor(e,t){this.session=e,this.threadId=t}},vf=class{constructor(t,r){this.range=t,this.expression=r}};vf=__decorate([se],vf);var Wl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Wl||(Wl={}));var wf=class{constructor(t,r){this.range=t,this.text=r}};wf=__decorate([se],wf);var bf=class{constructor(t,r,i=!0){this.range=t,this.variableName=r,this.caseSensitiveLookup=i}};bf=__decorate([se],bf);var yf=class{constructor(t,r){this.range=t,this.expression=r}};yf=__decorate([se],yf);var Dv=class{constructor(t,r){this.frameId=t,this.stoppedLocation=r}};Dv=__decorate([se],Dv);var Av;(function(e){e[e.AIGenerated=1]="AIGenerated"})(Av||(Av={}));var Vl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Vl||(Vl={}));var jF=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Ua;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Ua||(Ua={}));var Mt=Er=class extends Error{static FileExists(t){return new Er(t,oe.FileExists,Er.FileExists)}static FileNotFound(t){return new Er(t,oe.FileNotFound,Er.FileNotFound)}static FileNotADirectory(t){return new Er(t,oe.FileNotADirectory,Er.FileNotADirectory)}static FileIsADirectory(t){return new Er(t,oe.FileIsADirectory,Er.FileIsADirectory)}static NoPermissions(t){return new Er(t,oe.NoPermissions,Er.NoPermissions)}static Unavailable(t){return new Er(t,oe.Unavailable,Er.Unavailable)}constructor(t,r=oe.Unknown,i){super(x.isUri(t)?t.toString(!0):t),this.code=i?.name??"Unknown",IE(this,r),Object.setPrototypeOf(this,Er.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};Mt=Er=__decorate([se],Mt);var Tv=class{constructor(t,r,i){this.start=t,this.end=r,this.kind=i}};Tv=__decorate([se],Tv);var Ss;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Ss||(Ss={}));var ql;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(ql||(ql={}));var Rv;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(Rv||(Rv={}));var Lv;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(Lv||(Lv={}));var Gl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Gl||(Gl={}));var Jl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Jl||(Jl={}));var Ql;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(Ql||(Ql={}));var Nv=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function HF(e){return typeof e>"u"||PD(e)}var BF=class B3{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let r=0,i=t.tokenTypes.length;r<i;r++)this.k.set(t.tokenTypes[r],r);for(let r=0,i=t.tokenModifiers.length;r<i;r++)this.l.set(t.tokenModifiers[r],r)}}push(t,r,i,s,n){if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,r,i,s,n);if(Ee.isRange(t)&&typeof r=="string"&&HF(i))return this.o(t,r,i);throw Se()}o(t,r,i){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(r))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(r);let c=0;if(i)for(const l of i){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,r,i,s,n){if(this.f&&(t<this.c||t===this.c&&r<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let d=this.g[5*h],f=this.g[5*h+1];d===0?(d=l,f+=u):d+=l,this.g[5*h]=d,this.g[5*h+1]=f,l=d,u=f}}let o=t,a=r;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=i,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=r}static r(t){const r=[],i=t.length/5|0;for(let a=0;a<i;a++)r[a]=a;r.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],d=t[5*c+1];return h-d}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<i;a++){const c=5*r[a],l=t[c+0],u=t[c+1],h=t[c+2],d=t[c+3],f=t[c+4],g=l-n,v=g===0?u-o:u,y=5*a;s[y+0]=g,s[y+1]=v,s[y+2]=h,s[y+3]=d,s[y+4]=f,n=l,o=u}return s}build(t){return this.f?new ja(new Uint32Array(this.g),t):new ja(B3.r(this.g),t)}},ja=class{constructor(e,t){this.resultId=t,this.data=e}},Rk=class{constructor(e,t,r){this.start=e,this.deleteCount=t,this.data=r}},xf=class{constructor(e,t){this.resultId=t,this.edits=e}},Ef;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Ef||(Ef={}));var _F=class{constructor(e){this.name=e}},Fv;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(Fv||(Fv={}));var Yl=class{static{this.Back={iconPath:new nr("arrow-left")}}constructor(){}};Yl=__decorate([se],Yl);var Xl;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(Xl||(Xl={}));var Ha;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Ha||(Ha={}));var vo;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(vo||(vo={}));var Ov=class{static validate(e){if(typeof e.badge=="string"){let t=W4(e.badge,0);if(t<e.badge.length&&(t+=W4(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!nr.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,r){this.badge=e,this.tooltip=t,this.color=r}},kf=class{constructor(t){this.kind=t}};kf=__decorate([se],kf);var mn;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(mn||(mn={}));var $s=class My{static isNotebookRange(t){return t instanceof My?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,r){if(t<0)throw Se("start must be positive");if(r<0)throw Se("end must be positive");t<=r?(this.c=t,this.e=r):(this.c=r,this.e=t)}with(t){let r=this.c,i=this.e;return t.start!==void 0&&(r=t.start),t.end!==void 0&&(i=t.end),r===this.c&&i===this.e?this:new My(r,i)}},Sf=class Uy{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(r=>Uy.isNotebookCellData(r))}static isNotebookCellData(t){return!0}constructor(t,r,i,s,n,o,a){this.kind=t,this.value=r,this.languageId=i,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,Uy.validate(this)}},Lk=class{constructor(e){this.cells=e}},Nk=class _s{static isNotebookCellOutputItem(t){return t instanceof _s?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const r={name:t.name,message:t.message,stack:t.stack};return _s.json(r,"application/vnd.code.notebook.error")}static stdout(t){return _s.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return _s.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,r="application/octet-stream"){return new _s(t,r)}static#e=new TextEncoder;static text(t,r=ws.text){const i=_s.#e.encode(String(t));return new _s(i,r)}static json(t,r="text/x-json"){const i=JSON.stringify(t,void 0,"	");return _s.text(i,r)}constructor(t,r){this.data=t,this.mime=r;const i=eE(r,!0);if(!i)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},$f=class jy{static isNotebookCellOutput(t){return t instanceof jy?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,r=!1){const i=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=eE(o.mime);if(!i.has(a)||G7(a)){i.add(a);continue}s.add(n),r&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,r,i){this.items=jy.ensureUniqueMimeTypes(t,!0),typeof r=="string"?(this.id=r,this.metadata=i):(this.id=Ft(),this.metadata=r??i)}},zF=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},wo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(wo||(wo={}));var Ba;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Ba||(Ba={}));var Cf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Cf||(Cf={}));var If;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(If||(If={}));var WF=class{constructor(e,t){this.text=e,this.alignment=t}},Mv;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(Mv||(Mv={}));var Pf;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Pf||(Pf={}));var Fk=class{constructor(e,t=[]){this.uri=e,this.provides=Oi(t)}},VF=class{constructor(e){this.label=e}},Zl;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(Zl||(Zl={}));var Uv=class{constructor(t,r){this.label=t,this.timestamp=r}};Uv=__decorate([se],Uv);var _a;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(_a||(_a={}));var Df;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(Df||(Df={}));var vn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(vn||(vn={}));var qF=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},GF=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},jv;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(jv||(jv={}));var za;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(za||(za={}));var Ok=class{constructor(e,t,r){this.controllerId=e,this.profileId=t,this.kind=r}},Af=class{constructor(t=void 0,r=void 0,i=void 0,s=!1,n=!0){this.include=t,this.exclude=r,this.profile=i,this.continuous=s,this.preserveFocus=n}};Af=__decorate([se],Af);var Tf=ov=class{static diff(t,r,i){const s=new ov(t);return s.expectedOutput=r,s.actualOutput=i,s}constructor(t){this.message=t}};Tf=ov=__decorate([se],Tf);var Kl=class{constructor(t){this.id=t}};Kl=__decorate([se],Kl);var JF=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},Rf=class{constructor(e,t){this.covered=e,this.total=t,Lf(this)}};function Lf(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Nf=class _3{static fromDetails(t,r){const i=new Rf(0,0),s=new Rf(0,0),n=new Rf(0,0);for(const a of r)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new _3(t,i,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=r,o}constructor(t,r,i,s,n=[]){this.uri=t,this.statementCoverage=r,this.branchCoverage=i,this.declarationCoverage=s,this.includesTests=n}},Mk=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r=[]){this.executed=e,this.location=t,this.branches=r}},Uk=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.executed=e,this.location=t,this.label=r}},jk=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.name=e,this.executed=t,this.location=r}},Hv;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(Hv||(Hv={}));var Bv;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(Bv||(Bv={}));var _v;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(_v||(_v={}));var zv=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},Wv=class{constructor(e){this.uri=e}},Ff=class{constructor(e,t){this.original=e,this.modified=t}},Hk=class{constructor(e,t,r,i){this.base=e,this.input1=t,this.input2=r,this.result=i}},Vv=class{constructor(e,t){this.uri=e,this.viewType=t}},Bk=class{constructor(e){this.viewType=e}},qv=class{constructor(e,t){this.uri=e,this.notebookType=t}},Gv=class{constructor(e,t,r){this.original=e,this.modified=t,this.notebookType=r}},_k=class{constructor(){}},zk=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},Wk=class{constructor(){}},Vk=class{constructor(e){this.textDiffs=e}},Jv;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Jv||(Jv={}));var Qv;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(Qv||(Qv={}));var Yv;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(Yv||(Yv={}));var QF=class{constructor(e,t,r){this.id=e,this.label=t,this.values=r}},bo;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(bo||(bo={}));var Xv;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Xv||(Xv={}));var eu;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(eu||(eu={}));var Of=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Mr(e):e}},tu=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Mr(e):e,this.vulnerabilities=t}},ru=class{constructor(e,t){this.participant=e,this.command=t}},Mf=class{constructor(e,t,r,i){this.title=e,this.message=t,this.data=r,this.buttons=i}},Uf=class{constructor(e,t){this.value=e,this.baseUri=t}},iu=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},su=class{constructor(e){this.value=e}},jf=class{constructor(e,t){this.value=e,this.task=t}},nu=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Mr(e):e}},Hf=class{constructor(e){this.value=e}},Cs=class{constructor(e,t,r){this.value=e,this.iconPath=t,this.options=r}},Bf=class{constructor(e){this.value=e}},_f=class{constructor(e,t,r){this.value=e,this.license=t,this.snippet=r}},zf=class{constructor(e,t){this.uri=e,this.range=t}},ou=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},qk=class{constructor(e,t,r,i,s){this.prompt=e,this.command=t,this.references=r,this.participant=i,this.toolReferences=s}},Gk=class{constructor(e,t,r,i){this.response=e,this.result=t,this.participant=r,this.command=i}},Gr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor",e[e.EditingSession=5]="EditingSession"})(Gr||(Gr={}));var Zv;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(Zv||(Zv={}));var Jk=class{constructor(e,t,r){this.document=e,this.selection=t,this.wholeRange=r}},Qk=class{constructor(e){this.cell=e}},Yk=class{constructor(e,t){this.mimeType=e,this.data=t}},Kr;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Kr||(Kr={}));var Kv=class{constructor(e,t,r){this.callId=e,this.content=t,this.isError=r??!1}},Xk=class Hy{static User(t,r){return new Hy(Kr.User,t,r)}static Assistant(t,r){return new Hy(Kr.Assistant,t,r)}set content(t){typeof t=="string"?this.c=[new kr(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(r=>typeof r=="string"?new kr(r):r))}get content2(){return this.content.map(t=>t instanceof kr?t.value:t)}constructor(t,r,i){this.c=[],this.role=t,this.content=r,this.name=i}},au=class{constructor(e,t,r){this.callId=e,this.name=t,this.input=r}},kr=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},Wa=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},Is=class Uo extends Error{static NotFound(t){return new Uo(t,Uo.NotFound.name)}static NoPermissions(t){return new Uo(t,Uo.NoPermissions.name)}static Blocked(t){return new Uo(t,Uo.Blocked.name)}constructor(t,r,i){super(t,{cause:i}),this.name="LanguageModelError",this.code=r??""}},e0=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},t0;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(t0||(t0={}));var r0;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(r0||(r0={}));var i0;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(i0||(i0={}));var s0;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(s0||(s0={}));var n0;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(n0||(n0={}));var YF=class{constructor(e,t){this.text=e,this.range=t}},cu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(cu||(cu={}));var Ei;(function(e){function t(i){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=i,c=new Ie(s-1,n-1),l=new Ie(o-1,a-1);return new ks(c,l)}e.to=t;function r(i){const{anchor:s,active:n}=i;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=r})(Ei||(Ei={}));var O;(function(e){function t(i){if(!i)return;const{start:s,end:n}=i;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function r(i){if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=i;return new Ee(s-1,n-1,o-1,a-1)}e.to=r})(O||(O={}));var wn;(function(e){function t(i){return{uri:i.uri,range:O.from(i.range)}}e.from=t;function r(i){return new qr(x.revive(i.uri),O.to(i.range))}e.to=r})(wn||(wn={}));var o0;(function(e){function t(r){switch(r){case 1:return vn.Comment;case 0:return vn.Other;case 3:return vn.RegEx;case 2:return vn.String}}e.to=t})(o0||(o0={}));var Be;(function(e){function t(i){return new Ie(i.lineNumber-1,i.column-1)}e.to=t;function r(i){return{lineNumber:i.line+1,column:i.character+1}}e.from=r})(Be||(Be={}));var Va;(function(e){function t(s,n,o){return St(Oi(s).map(a=>r(a,n,o)))}e.from=t;function r(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:i(s.scheme,n),pattern:Ur.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function i(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(Va||(Va={}));var Wf;(function(e){function t(i){switch(i){case co.Unnecessary:return 1;case co.Deprecated:return 2}}e.from=t;function r(i){switch(i){case 1:return co.Unnecessary;case 2:return co.Deprecated;default:return}}e.to=r})(Wf||(Wf={}));var qa;(function(e){function t(i){let s;return i.code&&(Pe(i.code)||_r(i.code)?s=String(i.code):s={value:String(i.code.value),target:i.code.target}),{...O.from(i.range),message:i.message,source:i.source,code:s,severity:qf.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(Vf.from),tags:Array.isArray(i.tags)?St(i.tags.map(Wf.from)):void 0}}e.from=t;function r(i){const s=new Yd(O.to(i),i.message,qf.to(i.severity));return s.source=i.source,s.code=Pe(i.code)?i.code:i.code?.value,s.relatedInformation=i.relatedInformation&&i.relatedInformation.map(Vf.to),s.tags=i.tags&&St(i.tags.map(Wf.to)),s}e.to=r})(qa||(qa={}));var Vf;(function(e){function t(i){return{...O.from(i.location.range),message:i.message,resource:i.location.uri}}e.from=t;function r(i){return new Dl(new qr(i.resource,O.to(i)),i.message)}e.to=r})(Vf||(Vf={}));var qf;(function(e){function t(i){switch(i){case rr.Error:return br.Error;case rr.Warning:return br.Warning;case rr.Information:return br.Info;case rr.Hint:return br.Hint}return br.Error}e.from=t;function r(i){switch(i){case br.Info:return rr.Information;case br.Warning:return rr.Warning;case br.Error:return rr.Error;case br.Hint:return rr.Hint;default:return rr.Error}}e.to=r})(qf||(qf={}));var Ut;(function(e){function t(i){return typeof i=="number"&&i>=Ml.One?i-1:i===Ml.Beside?gF:pF}e.from=t;function r(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=r})(Ut||(Ut={}));function XF(e){return typeof e.range<"u"}function Zk(e){return e.length===0?!0:!!XF(e[0])}var Ce;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function r(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(r(a)){const{language:h,value:d}=a;c={value:"```"+h+`
`+d+"\n```\n"}}else Mr.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let d=x.parse(h,!0);d=d.with({query:s(d.query,l)}),l[h]=d}catch{}return""};return nt.walkTokens(nt.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(UR(h.href))}),c}e.from=i;function s(a,c){if(!a)return a;let l;try{l=V5(a)}catch{}if(!l)return a;let u=!1;return l=ra(l,h=>{if(x.isUri(h)){const d=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[d]=h,u=!0,d}else return}),u?JSON.stringify(l):a}function n(a){const c=new Mr(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?x.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(Ce||(Ce={}));function ZF(e){return Zk(e)?e.map(t=>({range:O.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?Ce.fromMany(t.hoverMessage):t.hoverMessage?Ce.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:O.from(t)}))}function Gf(e){return typeof e>"u"?e:typeof e=="string"?x.file(e):e}var Ga;(function(e){function t(r){return typeof r>"u"?r:{contentText:r.contentText,contentIconPath:r.contentIconPath?Gf(r.contentIconPath):void 0,border:r.border,borderColor:r.borderColor,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,color:r.color,backgroundColor:r.backgroundColor,margin:r.margin,width:r.width,height:r.height}}e.from=t})(Ga||(Ga={}));var Jf;(function(e){function t(r){return typeof r>"u"?r:{backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?Gf(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?Ga.from(r.before):void 0,after:r.after?Ga.from(r.after):void 0}}e.from=t})(Jf||(Jf={}));var a0;(function(e){function t(r){if(typeof r>"u")return r;switch(r){case uo.OpenOpen:return 0;case uo.ClosedClosed:return 1;case uo.OpenClosed:return 2;case uo.ClosedOpen:return 3}}e.from=t})(a0||(a0={}));var c0;(function(e){function t(r){return{isWholeLine:r.isWholeLine,rangeBehavior:r.rangeBehavior?a0.from(r.rangeBehavior):void 0,overviewRulerLane:r.overviewRulerLane,light:r.light?Jf.from(r.light):void 0,dark:r.dark?Jf.from(r.dark):void 0,backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?Gf(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?Ga.from(r.before):void 0,after:r.after?Ga.from(r.after):void 0}}e.from=t})(c0||(c0={}));var jt;(function(e){function t(i){return{text:i.newText,eol:i.newEol&&Xa.from(i.newEol),range:O.from(i.range)}}e.from=t;function r(i){const s=new fn(O.to(i.range),i.text);return s.newEol=typeof i.eol>"u"?void 0:Xa.to(i.eol),s}e.to=r})(jt||(jt={}));var dr;(function(e){function t(i,s){const n={edits:[]};if(i instanceof oo){const o=new l4;for(const a of i._allEntries())a._type===1&&x.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of i._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:qh(Y.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:jt.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:O.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(pu.from)}})}return n}e.from=t;function r(i){const s=new oo,n=new zt;for(const o of i.edits)if(o.textEdit){const a=o,c=x.revive(a.resource),l=O.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let d;h?d=cv.replace(l,new ao(u)):d=fn.replace(l,u);const f=n.get(c);f?f.push(d):n.set(c,[d])}else s.renameFile(x.revive(o.oldResource),x.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=r})(dr||(dr={}));var ei;(function(e){const t=Object.create(null);t[tt.File]=0,t[tt.Module]=1,t[tt.Namespace]=2,t[tt.Package]=3,t[tt.Class]=4,t[tt.Method]=5,t[tt.Property]=6,t[tt.Field]=7,t[tt.Constructor]=8,t[tt.Enum]=9,t[tt.Interface]=10,t[tt.Function]=11,t[tt.Variable]=12,t[tt.Constant]=13,t[tt.String]=14,t[tt.Number]=15,t[tt.Boolean]=16,t[tt.Array]=17,t[tt.Object]=18,t[tt.Key]=19,t[tt.Null]=20,t[tt.EnumMember]=21,t[tt.Struct]=22,t[tt.Event]=23,t[tt.Operator]=24,t[tt.TypeParameter]=25;function r(s){return typeof t[s]=="number"?t[s]:6}e.from=r;function i(s){for(const n in t)if(t[n]===s)return Number(n);return tt.Property}e.to=i})(ei||(ei={}));var Ps;(function(e){function t(i){switch(i){case Tl.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return Tl.Deprecated}}e.to=r})(Ps||(Ps={}));var yo;(function(e){function t(i){return{name:i.name,kind:ei.from(i.kind),tags:i.tags&&i.tags.map(Ps.from),containerName:i.containerName,location:Sr.from(i.location)}}e.from=t;function r(i){const s=new Rl(i.name,ei.to(i.kind),i.containerName,Sr.to(i.location));return s.tags=i.tags&&i.tags.map(Ps.to),s}e.to=r})(yo||(yo={}));var l0;(function(e){function t(i){const s={name:i.name||"!!MISSING: name!!",detail:i.detail,range:O.from(i.range),selectionRange:O.from(i.selectionRange),kind:ei.from(i.kind),tags:i.tags?.map(Ps.from)??[]};return i.children&&(s.children=i.children.map(t)),s}e.from=t;function r(i){const s=new Ll(i.name,i.detail,ei.to(i.kind),O.to(i.range),O.to(i.selectionRange));return Oc(i.tags)&&(s.tags=i.tags.map(Ps.to)),i.children&&(s.children=i.children.map(r)),s}e.to=r})(l0||(l0={}));var xo;(function(e){function t(i){const s=new uv(ei.to(i.kind),i.name,i.detail||"",x.revive(i.uri),O.to(i.range),O.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:i.name,detail:i.detail,kind:ei.from(i.kind),uri:i.uri,range:O.from(i.range),selectionRange:O.from(i.selectionRange),tags:i.tags?.map(Ps.from)}}e.from=r})(xo||(xo={}));var u0;(function(e){function t(r){return new $k(xo.to(r.from),r.fromRanges.map(i=>O.to(i)))}e.to=t})(u0||(u0={}));var h0;(function(e){function t(r){return new Ck(xo.to(r.to),r.fromRanges.map(i=>O.to(i)))}e.to=t})(h0||(h0={}));var Sr;(function(e){function t(i){return{range:i.range&&O.from(i.range),uri:i.uri}}e.from=t;function r(i){return new qr(x.revive(i.uri),O.to(i.range))}e.to=r})(Sr||(Sr={}));var lu;(function(e){function t(i){const s=i,n=i;return{originSelectionRange:s.originSelectionRange?O.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:O.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?O.from(s.targetSelectionRange):void 0}}e.from=t;function r(i){return{targetUri:x.revive(i.uri),targetRange:O.to(i.range),targetSelectionRange:i.targetSelectionRange?O.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?O.to(i.originSelectionRange):void 0}}e.to=r})(lu||(lu={}));var uu;(function(e){function t(i){return{range:O.from(i.range),contents:Ce.fromMany(i.contents),canIncreaseVerbosity:i.canIncreaseVerbosity,canDecreaseVerbosity:i.canDecreaseVerbosity}}e.from=t;function r(i){const s=i.contents.map(Ce.to),n=O.to(i.range),o=i.canIncreaseVerbosity,a=i.canDecreaseVerbosity;return new Zd(s,n,o,a)}e.to=r})(uu||(uu={}));var d0;(function(e){function t(i){return{range:O.from(i.range),expression:i.expression}}e.from=t;function r(i){return new vf(O.to(i.range),i.expression)}e.to=r})(d0||(d0={}));var Qf;(function(e){function t(i){if(i instanceof wf)return{type:"text",range:O.from(i.range),text:i.text};if(i instanceof bf)return{type:"variable",range:O.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof yf)return{type:"expression",range:O.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function r(i){switch(i.type){case"text":return{range:O.to(i.range),text:i.text};case"variable":return{range:O.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:O.to(i.range),expression:i.expression}}}e.to=r})(Qf||(Qf={}));var Yf;(function(e){function t(i){return{frameId:i.frameId,stoppedLocation:O.from(i.stoppedLocation)}}e.from=t;function r(i){return new Dv(i.frameId,O.to(i.stoppedLocation))}e.to=r})(Yf||(Yf={}));var Ja;(function(e){function t(i){return{range:O.from(i.range),kind:i.kind}}e.from=t;function r(i){return new Kd(O.to(i.range),i.kind)}e.to=r})(Ja||(Ja={}));var f0;(function(e){function t(i){return{uri:i.uri,highlights:i.highlights.map(Ja.from)}}e.from=t;function r(i){return new ef(x.revive(i.uri),i.highlights.map(Ja.to))}e.to=r})(f0||(f0={}));var p0;(function(e){function t(r){switch(r){case 1:return Sa.TriggerCharacter;case 2:return Sa.TriggerForIncompleteCompletions;case 0:default:return Sa.Invoke}}e.to=t})(p0||(p0={}));var g0;(function(e){function t(r){return{triggerKind:p0.to(r.triggerKind),triggerCharacter:r.triggerCharacter}}e.to=t})(g0||(g0={}));var Xf;(function(e){function t(i){switch(i){case Ol.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return Ol.Deprecated}}e.to=r})(Xf||(Xf={}));var Zf;(function(e){const t=new Map([[pe.Method,0],[pe.Function,1],[pe.Constructor,2],[pe.Field,3],[pe.Variable,4],[pe.Class,5],[pe.Interface,7],[pe.Struct,6],[pe.Module,8],[pe.Property,9],[pe.Unit,12],[pe.Value,13],[pe.Constant,14],[pe.Enum,15],[pe.EnumMember,16],[pe.Keyword,17],[pe.Snippet,27],[pe.Text,18],[pe.Color,19],[pe.File,20],[pe.Reference,21],[pe.Folder,23],[pe.Event,10],[pe.Operator,11],[pe.TypeParameter,24],[pe.Issue,26],[pe.User,25]]);function r(n){return t.get(n)??9}e.from=r;const i=new Map([[0,pe.Method],[1,pe.Function],[2,pe.Constructor],[3,pe.Field],[4,pe.Variable],[5,pe.Class],[7,pe.Interface],[6,pe.Struct],[8,pe.Module],[9,pe.Property],[12,pe.Unit],[13,pe.Value],[14,pe.Constant],[15,pe.Enum],[16,pe.EnumMember],[17,pe.Keyword],[27,pe.Snippet],[18,pe.Text],[19,pe.Color],[20,pe.File],[21,pe.Reference],[23,pe.Folder],[10,pe.Event],[11,pe.Operator],[24,pe.TypeParameter],[25,pe.User],[26,pe.Issue]]);function s(n){return i.get(n)??pe.Property}e.to=s})(Zf||(Zf={}));var m0;(function(e){function t(r,i){const s=new of(r.label);return s.insertText=r.insertText,s.kind=Zf.to(r.kind),s.tags=r.tags?.map(Xf.to),s.detail=r.detail,s.documentation=Jn(r.documentation)?Ce.to(r.documentation):r.documentation,s.sortText=r.sortText,s.filterText=r.filterText,s.preselect=r.preselect,s.commitCharacters=r.commitCharacters,Ke.isIRange(r.range)?s.range=O.to(r.range):typeof r.range=="object"&&(s.range={inserting:O.to(r.range.insert),replacing:O.to(r.range.replace)}),s.keepWhitespace=typeof r.insertTextRules>"u"?!1:!!(r.insertTextRules&1),typeof r.insertTextRules<"u"&&r.insertTextRules&4?s.insertText=new ao(r.insertText):(s.insertText=r.insertText,s.textEdit=s.range instanceof Ee?new fn(s.range,s.insertText):void 0),r.additionalTextEdits&&r.additionalTextEdits.length>0&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>jt.to(n))),s.command=i&&r.command?i.fromInternal(r.command):void 0,s}e.to=t})(m0||(m0={}));var Kf;(function(e){function t(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:Ce.fromStrict(i.documentation)}}e.from=t;function r(i){return{label:i.label,documentation:Jn(i.documentation)?Ce.to(i.documentation):i.documentation}}e.to=r})(Kf||(Kf={}));var ep;(function(e){function t(i){return{label:i.label,documentation:Ce.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(Kf.from):[],activeParameter:i.activeParameter}}e.from=t;function r(i){return{label:i.label,documentation:Jn(i.documentation)?Ce.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(Kf.to):[],activeParameter:i.activeParameter}}e.to=r})(ep||(ep={}));var hu;(function(e){function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(ep.from):[]}}e.from=t;function r(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(ep.to):[]}}e.to=r})(hu||(hu={}));var v0;(function(e){function t(r,i){const s=new nf(Be.to(i.position),typeof i.label=="string"?i.label:i.label.map(w0.to.bind(void 0,r)),i.kind&&tp.to(i.kind));return s.textEdits=i.textEdits&&i.textEdits.map(jt.to),s.tooltip=Jn(i.tooltip)?Ce.to(i.tooltip):i.tooltip,s.paddingLeft=i.paddingLeft,s.paddingRight=i.paddingRight,s}e.to=t})(v0||(v0={}));var w0;(function(e){function t(r,i){const s=new sf(i.label);return s.tooltip=Jn(i.tooltip)?Ce.to(i.tooltip):i.tooltip,T1.is(i.command)&&(s.command=r.fromInternal(i.command)),i.location&&(s.location=Sr.to(i.location)),s}e.to=t})(w0||(w0={}));var tp;(function(e){function t(i){return i}e.from=t;function r(i){return i}e.to=r})(tp||(tp={}));var Eo;(function(e){function t(i){return{range:O.from(i.range),url:i.target,tooltip:i.tooltip}}e.from=t;function r(i){let s;if(i.url)try{s=typeof i.url=="string"?x.parse(i.url,!0):x.revive(i.url)}catch{}const n=new cf(O.to(i.range),s);return n.tooltip=i.tooltip,n}e.to=r})(Eo||(Eo={}));var rp;(function(e){function t(i){const s=new uf(i.label);return i.textEdit&&(s.textEdit=jt.to(i.textEdit)),i.additionalTextEdits&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>jt.to(n))),s}e.to=t;function r(i){return{label:i.label,textEdit:i.textEdit?jt.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(s=>jt.from(s)):void 0}}e.from=r})(rp||(rp={}));var Qa;(function(e){function t(i){return new Aa(i[0],i[1],i[2],i[3])}e.to=t;function r(i){return[i.red,i.green,i.blue,i.alpha]}e.from=r})(Qa||(Qa={}));var b0;(function(e){function t(i){return{range:O.from(i.range)}}e.from=t;function r(i){return new Fl(O.to(i.range))}e.to=r})(b0||(b0={}));var ip;(function(e){function t(r){switch(r){case 2:return Ca.AfterDelay;case 1:return Ca.Manual;case 3:case 4:return Ca.FocusOut}}e.to=t})(ip||(ip={}));var Ya;(function(e){function t(i){switch(i){case xi.Off:return 0;case xi.Relative:return 2;case xi.Interval:return 3;case xi.On:default:return 1}}e.from=t;function r(i){switch(i){case 0:return xi.Off;case 2:return xi.Relative;case 3:return xi.Interval;case 1:default:return xi.On}}e.to=r})(Ya||(Ya={}));var Xa;(function(e){function t(i){if(i===yi.CRLF)return 1;if(i===yi.LF)return 0}e.from=t;function r(i){if(i===1)return yi.CRLF;if(i===0)return yi.LF}e.to=r})(Xa||(Xa={}));var y0;(function(e){function t(r){if(typeof r=="object")return r.viewId;switch(r){case fo.SourceControl:return 3;case fo.Window:return 10;case fo.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(y0||(y0={}));var sp;(function(e){function t(i){const s={start:i.start+1,end:i.end+1};return i.kind&&(s.kind=np.from(i.kind)),s}e.from=t;function r(i){const s={start:i.start-1,end:i.end-1};return i.kind&&(s.kind=np.to(i.kind)),s}e.to=r})(sp||(sp={}));var np;(function(e){function t(i){if(i)switch(i){case Ss.Comment:return ua.Comment;case Ss.Imports:return ua.Imports;case Ss.Region:return ua.Region}}e.from=t;function r(i){if(i)switch(i.value){case ua.Comment.value:return Ss.Comment;case ua.Imports.value:return Ss.Imports;case ua.Region.value:return Ss.Region}}e.to=r})(np||(np={}));var du;(function(e){function t(r){if(r)return{pinned:typeof r.preview=="boolean"?!r.preview:void 0,inactive:r.background,preserveFocus:r.preserveFocus,selection:typeof r.selection=="object"?O.from(r.selection):void 0,override:typeof r.override=="boolean"?TL.id:void 0}}e.from=t})(du||(du={}));var Ur;(function(e){function t(n){return n instanceof Na?n.toJSON():typeof n=="string"?n:r(n)||i(n)?new Na(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function r(n){const o=n;return o?x.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Na(x.revive(n.baseUri),n.pattern)}e.to=s})(Ur||(Ur={}));var x0;(function(e){function t(r){if(r){if(Array.isArray(r))return r.map(t);if(typeof r=="string")return r;{const i=r;return{language:i.language,scheme:i.scheme,pattern:Ur.from(i.pattern)??void 0,exclusive:i.exclusive,notebookType:i.notebookType}}}else return}e.from=t})(x0||(x0={}));var op;(function(e){function t(i){return!!i&&typeof i=="object"&&"documents"in i&&Array.isArray(i.documents)&&i.documents.every(s=>Array.isArray(s)&&s.every(Za.is))}e.is=t;function r(i){return{documents:i.documents.map(s=>s.map(Za.from)),conversation:i.conversation?.map(s=>s.type==="request"?{type:"request",message:s.message}:{type:"response",message:s.message,result:s.result?kn.from(s.result):void 0,references:s.references?.map(Za.from)})}}e.from=r})(op||(op={}));var Za;(function(e){function t(s){return typeof s=="object"&&s!==null&&"uri"in s&&x.isUri(s.uri)&&"version"in s&&typeof s.version=="number"&&"ranges"in s&&Array.isArray(s.ranges)&&s.ranges.every(n=>n instanceof Ee)}e.is=t;function r(s){return{uri:s.uri,version:s.version,ranges:s.ranges.map(n=>O.from(n))}}e.from=r;function i(s){return{uri:x.revive(s.uri),version:s.version,ranges:s.ranges.map(n=>O.to(n))}}e.to=i})(Za||(Za={}));var Ji;(function(e){function t(i){return{start:i.start,end:i.end}}e.from=t;function r(i){return new $s(i.start,i.end)}e.to=r})(Ji||(Ji={}));var Ka;(function(e){function t(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}e.to=t;function r(i){return{lastRunSuccess:i.success,runStartTime:i.timing?.startTime,runEndTime:i.timing?.endTime,executionOrder:i.executionOrder}}e.from=r})(Ka||(Ka={}));var E0;(function(e){function t(r){if(r===Sl.Unconfirmed)return Ba.Pending;if(r===Sl.Pending)return;if(r===Sl.Executing)return Ba.Executing;throw new Error(`Unknown state: ${r}`)}e.to=t})(E0||(E0={}));var fu;(function(e){function t(i){switch(i){case wo.Markup:return ba.Markup;case wo.Code:default:return ba.Code}}e.from=t;function r(i){switch(i){case ba.Markup:return wo.Markup;case ba.Code:default:return wo.Code}}e.to=r})(fu||(fu={}));var bn;(function(e){function t(i){const s={metadata:i.metadata??Object.create(null),cells:[]};for(const n of i.cells)Sf.validate(n),s.cells.push(pu.from(n));return s}e.from=t;function r(i){const s=new Lk(i.cells.map(pu.to));return e5(i.metadata)||(s.metadata=i.metadata),s}e.to=r})(bn||(bn={}));var pu;(function(e){function t(i){return{cellKind:fu.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:Ka.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(yn.from):[]}}e.from=t;function r(i){return new Sf(fu.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(yn.to):void 0,i.metadata,i.internalMetadata?Ka.to(i.internalMetadata):void 0)}e.to=r})(pu||(pu={}));var ec;(function(e){function t(i){return{mime:i.mime,valueBytes:Y.wrap(i.data)}}e.from=t;function r(i){return new Nk(i.valueBytes.buffer,i.mime)}e.to=r})(ec||(ec={}));var yn;(function(e){function t(i){return{outputId:i.id,items:i.items.map(ec.from),metadata:i.metadata}}e.from=t;function r(i){const s=i.items.map(ec.to);return new $f(s,i.outputId,i.metadata)}e.to=r})(yn||(yn={}));var ap;(function(e){function t(s){return i(s)?{include:Ur.from(s.include)??void 0,exclude:Ur.from(s.exclude)??void 0}:Ur.from(s)??void 0}e.from=t;function r(s){return i(s)?{include:Ur.to(s.include),exclude:Ur.to(s.exclude)}:Ur.to(s)}e.to=r;function i(s){const n=s;return n?!yt(n.include)&&!yt(n.exclude):!1}})(ap||(ap={}));var k0;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{alignment:r.alignment===Cf.Left?1:2,command:i.toInternal(n,s),text:r.text,tooltip:r.tooltip,accessibilityInformation:r.accessibilityInformation,priority:r.priority}}e.from=t})(k0||(k0={}));var S0;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{command:i.toInternal(n,s),label:r.label,description:r.description,detail:r.detail,documentation:r.documentation}}e.from=t})(S0||(S0={}));var $0;(function(e){function t(r){return{transientOutputs:r?.transientOutputs??!1,transientCellMetadata:r?.transientCellMetadata??{},transientDocumentMetadata:r?.transientDocumentMetadata??{},cellContentMetadata:r?.cellContentMetadata??{}}}e.from=t})($0||($0={}));var cp;(function(e){function t(i){return{uri:i.uri,provides:i.provides}}e.from=t;function r(i){return new Fk(x.revive(i.uri),i.provides)}e.to=r})(cp||(cp={}));var tc;(function(e){function t(i){return{message:Ce.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:O.from(i.location.range),uri:i.location.uri},stackTrace:i.stackTrace?.map(s=>({label:s.label,position:s.position&&Be.from(s.position),uri:s.uri&&x.revive(s.uri).toJSON()}))}}e.from=t;function r(i){const s=new Tf(typeof i.message=="string"?i.message:Ce.to(i.message));return s.actualOutput=i.actual,s.expectedOutput=i.expected,s.contextValue=i.contextValue,s.location=i.location?Sr.to(i.location):void 0,s}e.to=r})(tc||(tc={}));var ki;(function(e){e.namespace=jd,e.denamespace=rk})(ki||(ki={}));var C0;(function(e){function t(r){return{controllerId:r.controllerId,profileId:r.profileId,group:rc.from(r.kind)}}e.from=t})(C0||(C0={}));var rc;(function(e){const t={[za.Coverage]:8,[za.Debug]:4,[za.Run]:2};function r(i){return t.hasOwnProperty(i)?t[i]:2}e.from=r})(rc||(rc={}));var xn;(function(e){function t(i){const s=qd(i).controllerId;return{extId:Ne.fromExtHostTestItem(i,s).toString(),label:i.label,uri:x.revive(i.uri),busy:i.busy,tags:i.tags.map(n=>ki.namespace(s,n.id)),range:Ke.lift(O.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&Ce.fromStrict(i.error)||null}}e.from=t;function r(i){return{parent:void 0,error:void 0,id:Ne.fromString(i.extId).localId,label:i.label,uri:x.revive(i.uri),tags:(i.tags||[]).map(s=>{const{tagId:n}=ki.denamespace(s);return new Kl(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:O.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}e.toPlain=r})(xn||(xn={})),function(e){function t(i){return{id:i.id}}e.from=t;function r(i){return new Kl(i.id)}e.to=r}(ki||(ki={}));var I0;(function(e){const t=(i,s)=>{const n=i.value;if(!n)return;const o={...xn.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(tc.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function r(i){const s=new bL;for(const a of i.items)s.insert(Ne.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>t(a)).filter(Hn)}}e.to=r})(I0||(I0={}));var gu;(function(e){function t(a){return{covered:a.covered,total:a.total}}function r(a){return"line"in a?Be.from(a):O.from(a)}function i(a){if(a)return"endLineNumber"in a?O.to(a):Be.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:i(l.location),label:l.label});return new Mk(a.count,i(a.location),a.branches?.map(l=>new Uk(l.count,i(l.location),l.label)))}else return new jk(a.name,a.count,i(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:r(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&r(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:r(a.location)}}e.fromDetails=n;function o(a,c,l){return Lf(l.statementCoverage),Lf(l.branchCoverage),Lf(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Nf&&l.includesTests.length?l.includesTests.map(u=>Ne.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(gu||(gu={}));var P0;(function(e){function t(r){switch(r){case 1:return Nl.Invoke;case 2:return Nl.Automatic}}e.to=t})(P0||(P0={}));var ko;(function(e){function t(i){const s=new zv(ei.to(i.kind),i.name,i.detail||"",x.revive(i.uri),O.to(i.range),O.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:ei.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:O.from(i.range),selectionRange:O.from(i.selectionRange),tags:i.tags?.map(Ps.from)}}e.from=r})(ko||(ko={}));var lp;(function(e){function t(r){if(r)return{value:r.value,tooltip:r.tooltip}}e.from=t})(lp||(lp={}));var up;(function(e){function t(n,o,a){const c=o.fileData;return c?new FF(new OF(c.name,x.revive(c.uri),c.id,xh(()=>a(c.id)))):n===ws.uriList&&o.uriListData?new gf(s(o.uriListData)):new gf(o.asString)}e.to=t;async function r(n,o){const a=await o.asString();if(n===ws.uriList)return{asString:a,fileData:void 0,uriListData:i(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=r;function i(n){return f1.split(n).map(o=>{if(o.startsWith("#"))return o;try{return x.parse(o)}catch{}return o})}function s(n){return f1.create(n.map(o=>typeof o=="string"?o:x.revive(o)))}})(up||(up={}));var En;(function(e){function t(i,s){const n=i.items.map(([o,a])=>[o,up.to(o,a,s)]);return new Hl(n)}e.toDataTransfer=t;async function r(i){const s={items:[]},n=[];for(const[o,a]of i)n.push((async()=>{s.items.push([o,await up.from(o,a)])})());return await Promise.all(n),s}e.from=r})(En||(En={}));var mu;(function(e){function t(i,s){return{kind:"reply",agentId:i.participant??s?.agentId??"",subCommand:i.command??s?.command,message:i.prompt,title:i.label}}e.from=t;function r(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}e.to=r})(mu||(mu={}));var hp;(function(e){function t(i){switch(i){case 0:return Kr.System;case 1:return Kr.User;case 2:return Kr.Assistant}}e.to=t;function r(i){switch(i){case Kr.System:return 0;case Kr.User:return 1;case Kr.Assistant:return 2}return 1}e.from=r})(hp||(hp={}));var ic;(function(e){function t(i){const s=i.content.map(a=>{if(a.type==="text")return new kr(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new kr(l.value):new Wa(l.value));return new Kv(a.toolCallId,c,a.isError)}else return new au(a.toolCallId,a.name,a.parameters)}),n=hp.to(i.role);return new Xk(n,s,i.name)}e.to=t;function r(i){const s=hp.from(i.role),n=i.name;let o=i.content;typeof o=="string"&&(o=[new kr(o)]);const a=o.map(c=>{if(c instanceof Kv)return{type:"tool_result",toolCallId:c.callId,value:St(c.content.map(l=>l instanceof kr?{type:"text",value:l.value}:l instanceof Wa?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof au)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof kr)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=r})(ic||(ic={}));var vu;(function(e){function t(i){return{kind:"markdownContent",content:Ce.from(i.value)}}e.from=t;function r(i){return new Of(Ce.to(i.content))}e.to=r})(vu||(vu={}));var dp;(function(e){function t(i){return{kind:"codeblockUri",uri:i.value}}e.from=t;function r(i){return new Bf(x.revive(i.uri))}e.to=r})(dp||(dp={}));var fp;(function(e){function t(i){return{kind:"markdownVuln",content:Ce.from(i.value),vulnerabilities:i.vulnerabilities}}e.from=t;function r(i){return new tu(Ce.to(i.content),i.vulnerabilities)}e.to=r})(fp||(fp={}));var pp;(function(e){function t(i){return{kind:"agentDetection",agentId:i.participant,command:i.command}}e.from=t;function r(i){return new ru(i.agentId,i.command)}e.to=r})(pp||(pp={}));var gp;(function(e){function t(r){return{kind:"confirmation",title:r.title,message:r.message,data:r.data,buttons:r.buttons}}e.from=t})(gp||(gp={}));var wu;(function(e){function t(i){const{value:s,baseUri:n}=i;function o(a,c){return a.map(l=>{const u=x.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:ji(n),uri:n,children:o(s,n)}}}e.from=t;function r(i){const s=Kt(i.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Uf(a,o)}e.to=r})(wu||(wu={}));var sc;(function(e){function t(i){const s=o=>x.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:i.title,inlineReference:s(i.value)?i.value:n(i.value)?yo.from(i.value):wn.from(i.value)}}e.from=t;function r(i){const s=Kt(i);return new iu(x.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?yo.to(s.inlineReference):wn.to(s.inlineReference),i.name)}e.to=r})(sc||(sc={}));var So;(function(e){function t(i){return{kind:"progressMessage",content:Ce.from(i.value)}}e.from=t;function r(i){return new su(i.content.value)}e.to=r})(So||(So={}));var bu;(function(e){function t(i){return{kind:"warning",content:Ce.from(i.value)}}e.from=t;function r(i){return new nu(i.content.value)}e.to=r})(bu||(bu={}));var D0;(function(e){function t(i){return{kind:"move",uri:i.uri,range:O.from(i.range)}}e.from=t;function r(i){return new zf(x.revive(i.uri),O.to(i.range))}e.to=r})(D0||(D0={}));var mp;(function(e){function t(r){return{kind:"progressTask",content:Ce.from(r.value)}}e.from=t})(mp||(mp={}));var A0;(function(e){function t(r){return{kind:"progressTaskResult",content:typeof r=="string"?Ce.from(r):void 0}}e.from=t})(A0||(A0={}));var yu;(function(e){function t(i,s,n){return{kind:"command",command:s.toInternal(i.value,n)??{command:i.value.command,title:i.value.title}}}e.from=t;function r(i,s){return new Hf(s.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}e.to=r})(yu||(yu={}));var vp;(function(e){function t(i){return{kind:"textEdit",uri:i.uri,edits:i.edits.map(s=>jt.from(s)),done:i.isDone}}e.from=t;function r(i){const s=new ou(x.revive(i.uri),i.edits.map(n=>jt.to(n)));return s.isDone=i.done,s}e.to=r})(vp||(vp={}));var Ds;(function(e){function t(i){const s=Jt.isThemeIcon(i.iconPath)?i.iconPath:x.isUri(i.iconPath)?{light:x.revive(i.iconPath)}:i.iconPath&&"light"in i.iconPath&&"dark"in i.iconPath&&x.isUri(i.iconPath.light)&&x.isUri(i.iconPath.dark)?{light:x.revive(i.iconPath.light),dark:x.revive(i.iconPath.dark)}:void 0;return typeof i.value=="object"&&"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:x.isUri(i.value.value)||!i.value.value?i.value.value:wn.from(i.value.value)},iconPath:s,options:i.options}:{kind:"reference",reference:x.isUri(i.value)||typeof i.value=="string"?i.value:wn.from(i.value),iconPath:s,options:i.options}}e.from=t;function r(i){const s=Kt(i),n=o=>x.isUri(o)?o:wn.to(o);return new Cs(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=r})(Ds||(Ds={}));var wp;(function(e){function t(r){return{kind:"codeCitation",value:r.value,license:r.license,snippet:r.snippet}}e.from=t})(wp||(wp={}));var bp;(function(e){function t(s,n,o){return s instanceof Of?vu.from(s):s instanceof iu?sc.from(s):s instanceof Cs?Ds.from(s):s instanceof su?So.from(s):s instanceof Uf?wu.from(s):s instanceof Hf?yu.from(s,n,o):s instanceof ou?vp.from(s):s instanceof tu?fp.from(s):s instanceof Bf?dp.from(s):s instanceof ru?pp.from(s):s instanceof nu?bu.from(s):s instanceof Mf?gp.from(s):s instanceof _f?wp.from(s):s instanceof zf?D0.from(s):{kind:"markdownContent",content:Ce.from("")}}e.from=t;function r(s,n){switch(s.kind){case"reference":return Ds.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(s,n)}}e.to=r;function i(s,n){switch(s.kind){case"markdownContent":return vu.to(s);case"inlineReference":return sc.to(s);case"progressMessage":return;case"treeData":return wu.to(s);case"command":return yu.to(s,n)}}e.toContent=i})(bp||(bp={}));var yp;(function(e){function t(r,i,s){const n=r.variables.variables.filter(a=>a.isTool),o=r.variables.variables.filter(a=>!a.isTool);return{prompt:r.message,command:r.command,attempt:r.attempt??0,enableCommandDetection:r.enableCommandDetection??!0,isParticipantDetected:r.isParticipantDetected??!1,references:o.map(xp.to),toolReferences:n.map(Ep.to),location:xu.to(r.location),acceptedConfirmationData:r.acceptedConfirmationData,rejectedConfirmationData:r.rejectedConfirmationData,location2:i,toolInvocationToken:Object.freeze({sessionId:r.sessionId}),model:s}}e.to=t})(yp||(yp={}));var T0;(function(e){function t(r){return{prompt:r.prompt,files:r.files.map(i=>x.revive(i))}}e.to=t})(T0||(T0={}));var xu;(function(e){function t(i){switch(i){case tr.Notebook:return Gr.Notebook;case tr.Terminal:return Gr.Terminal;case tr.Panel:return Gr.Panel;case tr.Editor:return Gr.Editor;case tr.EditingSession:return Gr.EditingSession}}e.to=t;function r(i){switch(i){case Gr.Notebook:return tr.Notebook;case Gr.Terminal:return tr.Terminal;case Gr.Panel:return tr.Panel;case Gr.Editor:return tr.Editor;case Gr.EditingSession:return tr.EditingSession}}e.from=r})(xu||(xu={}));var xp;(function(e){function t(r){const i=r.value;if(!i)throw new Error("Invalid value reference");return{id:r.id,name:r.name,range:r.range&&[r.range.start,r.range.endExclusive],value:n5(i)?x.revive(i):i&&typeof i=="object"&&"uri"in i&&"range"in i&&n5(i.uri)?wn.to(Kt(i)):r.isImage?new Yk(r.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i)))):i,modelDescription:r.modelDescription}}e.to=t})(xp||(xp={}));var Ep;(function(e){function t(r){if(r.value)throw new Error("Invalid tool reference");return{name:r.id,range:r.range&&[r.range.start,r.range.endExclusive]}}e.to=t})(Ep||(Ep={}));var R0;(function(e){function t(r,i,s){return{id:r.id,label:r.label,fullName:r.fullName,icon:r.icon?.id,value:r.values[0].value,insertText:r.insertText,detail:r.detail,documentation:r.documentation,command:i.toInternal(r.command,s)}}e.from=t})(R0||(R0={}));var kn;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:i(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function r(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=r;function i(s){return ra(s,n=>{if(n.$mid===20)return new e0(ra(n.content,i));if(n.$mid===21)return new kr(n.value);if(n.$mid===22)return new Wa(n.value)})}})(kn||(kn={}));var L0;(function(e){function t(r,i,s){if(i.action.kind==="vote")return;const n=kn.to(r);if(i.action.kind==="command"){const o=i.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return i.action.kind==="followUp"?{action:{kind:"followUp",followup:mu.to(i.action.followup)},result:n}:i.action.kind==="inlineChat"?{action:{kind:"editor",accepted:i.action.action==="accepted"},result:n}:i.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",bo.Accepted],["rejected",bo.Rejected],["saved",bo.Saved]]).get(i.action.outcome)??bo.Rejected,uri:x.revive(i.action.uri),hasRemainingEdits:i.action.hasRemainingEdits},result:n}:{action:i.action,result:n}}e.to=t})(L0||(L0={}));var kp;(function(e){function t(r,i,s){return"terminalCommand"in r?{terminalCommand:r.terminalCommand,shouldExecute:r.shouldExecute}:"uri"in r?{uri:r.uri}:i.toInternal(r,s)}e.from=t})(kp||(kp={}));var N0;(function(e){function t(r){return{kind:F0.to(r.kind)}}e.to=t})(N0||(N0={}));var F0;(function(e){function t(r){switch(r){case 0:return lo.Word;case 1:return lo.Line;case 2:return lo.Suggest;default:return lo.Unknown}}e.to=t})(F0||(F0={}));var O0;(function(e){function t(r,i){return{id:i,label:r.label,description:r.description,canEdit:r.canEdit,collapsibleState:r.collapsibleState||0,contextValue:r.contextValue}}e.from=t})(O0||(O0={}));var M0;(function(e){function t(r){return{name:r.id,description:r.modelDescription,inputSchema:r.inputSchema,tags:r.tags??[]}}e.to=t})(M0||(M0={}));var Sp;(function(e){function t(i){return new e0(i.content.map(s=>s.kind==="text"?new kr(s.value):new Wa(s.value)))}e.to=t;function r(i){return{content:i.content.map(s=>{if(s instanceof kr)return{kind:"text",value:s.value};if(s instanceof Wa)return{kind:"promptTsx",value:s.value};throw new Error("Unknown LanguageModelToolResult part type")})}}e.from=r})(Sp||(Sp={}));var Kk=class By{constructor(t,r){this.line=t,this.character=r}isBefore(t){return!1}isBeforeOrEqual(t){return!1}isAfter(t){return!1}isAfterOrEqual(t){return!1}isEqual(t){return!1}compareTo(t){return 0}translate(t,r){return new By(0,0)}with(t){return new By(0,0)}},e9=class _y{constructor(t,r,i,s){this.isEmpty=!1,this.isSingleLine=!1,this.start=new Kk(t,r),this.end=new Kk(i,s)}contains(t){return!1}isEqual(t){return!1}intersection(t){}union(t){return new _y(0,0,0,0)}with(t){return new _y(0,0,0,0)}},As=class{constructor(e,t,r){this.uri=e,this.ranges=t,this.previewText=r}},$p=class{constructor(e,t,r){this.uri=e,this.text=t,this.lineNumber=r}},Ts;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(Ts||(Ts={}));var Cp;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Cp||(Cp={}));var Ip=2e4,t9="\u27EA ",r9=" characters skipped \u27EB",KF=(t9.length+r9.length+5)*2,OG=J("searchService"),i9;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(i9||(i9={}));var s9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(s9||(s9={}));function U0(e){return!!e.rangeLocations&&!!e.previewText}var n9;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(n9||(n9={}));var o9=class{constructor(e,t,r,i){this.rangeLocations=[],this.webviewIndex=i;const s=Array.isArray(t)?t:[t];if(r&&r.matchLines===1&&eO(s)){e=CD(e,r.matchLines);let n="",o=0,a=0;const c=Math.floor(r.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+r.charsPerLine;if(u>a+c+KF){const d=t9+(u-a)+r9;n+=d+e.slice(u,h),o+=u-(a+d.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new tO(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=Eh(t,a=>({preview:new j0(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function eO(e){const t=e[0].startLineNumber;for(const r of e)if(r.startLineNumber!==t||r.endLineNumber!==t)return!1;return!0}var j0=class{constructor(e,t,r,i){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i}},tO=class extends j0{constructor(e,t,r){super(e,t,e,r)}},a9;(function(e){e.List="list",e.Tree="tree"})(a9||(a9={}));var c9;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(c9||(c9={}));function rO(e,t=!0){const r=e&&e.files&&e.files.exclude,i=t&&e&&e.search&&e.search.exclude;if(!r&&!i)return;if(!r||!i)return r||i||void 0;let s=Object.create(null);return s=ds(s,it(r)),s=ds(s,it(i),!0),s}function l9(e,t){return e.excludePattern&&wa(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&wa(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(r=>{const i=r.folder.fsPath;if(Bn(t,i)){const s=Xo(i,t);return!r.includePattern||!!wa(r.includePattern,s)}else return!1}):!1:!0}var Sn;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(Sn||(Sn={}));var $o=class extends Error{constructor(e,t){super(e),this.code=t}};function u9(e){const t={message:e.message,code:e.code};return new Error(JSON.stringify(t))}function iO(e){return!!e.path}function H0(e,t,r=!0){const i=e.searchPath?e.searchPath:e.relativePath;return r?SD(i,t):wa(t,i)}function nc(e,t){const r={...e||{},...t||{}};return Object.keys(r).filter(i=>{const s=r[i];return typeof s=="boolean"&&s})}var h9=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(i=>({...e.excludePattern||{},...i.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(i=>wi(i));let r=e.includePattern;t.includePattern&&(r?r={...r,...t.includePattern}:r=t.includePattern),r&&(this.c=wi(r))}d(e,t,r){let i=null;for(const s of this.b){const n=s(e,t,r);if(typeof n=="string"){i=n;break}}return i}matchesExcludesSync(e,t,r){return!!(this.b&&this.d(e,t,r))}includedInQuerySync(e,t,r){return!(this.b&&this.d(e,t,r)||this.c&&!this.c(e,t,r))}includedInQuery(e,t,r){const i=()=>this.c?!!this.c(e,t,r):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,r);return tn(n)?n.then(o=>o?!1:i()):i()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>sO(t)||e,!1)}};function sO(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function nO(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(i=>i?d9(i):{})),t.then(i=>!!i[r]))}function B0(e){if(!e)return;let t;return r=>{if(!t){const i=e();t=i?d9(i):{}}return!!t[r]}}function d9(e){const t={};for(const r of e)t[r]=!0;return t}function f9(e){return e.flatMap(t=>t.patterns.map(r=>t.baseUri?{baseUri:t.baseUri,pattern:r}:r))}var _0={matchLines:100,charsPerLine:1e4};function Eu(e,t,r){return new Gc(i=>z0(i,r)).isEqual(e,t)}function oO(e,t,r){return Eu(e.uri,t.uri,r)?0:jn(e.uri.toString(),t.uri.toString())}function aO(e,t,r){return e.index!==t.index?e.index<t.index?-1:1:Eu(e.uri,t.uri,r)?jn(e.name,t.name):jn(e.uri.toString(),t.uri.toString())}function p9(e,t,r,i){const s=e.slice(0).sort((o,a)=>r(o,a,i)),n=t.slice(0).sort((o,a)=>r(o,a,i));return cP(s,n,(o,a)=>r(o,a,i))}function z0(e,t){const r=t.getCapabilities(e.scheme);return!(r&&r&1024)}var W0=class zy extends bR{static toExtHostWorkspace(t,r,i,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],d=r;r?a.forEach((y,E)=>{const k=x.revive(y.uri),I=zy.o(i||r,k,s);I?(I.name=y.name,I.index=y.index,h.push(I)):h.push({uri:k,name:y.name,index:E})}):h.push(...a.map(({uri:y,name:E,index:k})=>({uri:x.revive(y),name:E,index:k}))),h.sort((y,E)=>y.index<E.index?-1:1);const f=new zy(n,o,h,!!l,c?x.revive(c):null,!!u,y=>z0(y,s)),{added:g,removed:v}=p9(d?d.workspaceFolders:[],f.workspaceFolders,oO,s);return{workspace:f,added:g,removed:v}}static o(t,r,i){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(Eu(n.uri,r,i))return n}}constructor(t,r,i,s,n,o,a){super(t,i.map(c=>new h1(c)),s,n,a),this.t=r,this.u=o,this.q=[],this.s=an.forUris(a,()=>!0),i.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,r){return r&&this.s.get(t)&&(t=jh(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},V0=class{constructor(t,r,i,s,n){this.c=new P,this.onDidChangeWorkspace=this.c.event,this.g=new P,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new Hc,this.D=new Map,this.h=s,this.s=i,this.t=n,this.j=new pR,this.k=new Xr,this.o=t.getProxy(Q.MainThreadWorkspace),this.q=t.getProxy(Q.MainThreadMessageService);const o=r.workspace;this.l=o?new W0(o.id,o.name,[],!!o.transient,o.configuration?x.revive(o.configuration):null,!!o.isUntitled,a=>z0(a,i)):void 0}$initializeWorkspace(t,r){this.v=r,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?x.from({scheme:V.untitled,path:ji(jh(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,r,i,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{x.isUri(u.uri)&&!n.some(h=>Eu(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Tm(u.uri)})}),this.n||[r,i].some(u=>typeof u!="number"||u<0)||i===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(r+i>o.length)return!1;const a=o.slice(0);a.splice(r,i,...n.map(u=>({uri:u.uri,name:u.name||Tm(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((d,f)=>f!==u&&Eu(h.uri,d.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=p9(o,a,aO,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,r,i,n).then(void 0,h=>{this.n=void 0;const d={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(mR.Error,p(2768,null,u,h.toString()),d,[])})}return this.y(a),!0}getWorkspaceFolder(t,r){if(this.x)return this.x.getWorkspaceFolder(t,r)}async getWorkspaceFolder2(t,r){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,r)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,r){let i,s="";if(typeof t=="string"?(i=x.file(t),s=t):typeof t<"u"&&(i=t,s=t.fsPath),!i)return s;const n=this.getWorkspaceFolder(i,!0);if(!n)return s;typeof r>"u"&&this.x&&(r=this.x.folders.length>1);let o=m5(n.uri,i);return r&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=W0.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:r,added:i,removed:s}=W0.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=r||void 0,this.n=void 0,this.c.fire(Object.freeze({added:i,removed:s}))}findFiles(t,r,i,s,n=Xe.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return r===null?a=!1:r!==void 0&&(typeof r=="string"?o=r:o=r.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:i,useExcludeSettings:a?Ts.FilesExclude:Ts.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,r={},i,s=Xe.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${i.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},r,s)}async z(t,r,i){if(i.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw new Error(`Invalid file pattern provided ${s}`);const n=s.map(o=>{const a=g9(r.exclude),c={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles?.local=="boolean"?!r.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Ts.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Ts.SearchAndFilesExclude,maxResults:r.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Pp(Ur.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,i)}async A(t,r){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,r).then(n=>Array.isArray(n)?n.map(o=>x.revive(o)):[]))??[])).flat()}findTextInFiles2(t,r,i,s=Xe.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${i.value}, entryPoint: findTextInFiles2`);const n=d=>{if(!r)return{folder:void 0,options:{}};const f=d?Pp(Ur.from(d)):void 0,g=r.exclude?g9(r.exclude):void 0;return{options:{ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Ts.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Ts.SearchAndFilesExclude,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:r.previewOptions?{matchLines:r.previewOptions?.numMatchLines??100,charsPerLine:r.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:r.surroundingContext,includePattern:f?.pattern,excludePattern:g},folder:f?.folder}},a=(r?.include?.map(d=>n(d))??[n(void 0)]).filter(d=>!!d),c=new he,l=c.add(new P),u=this.findTextInFilesBase(t,a,(d,f)=>l.fire({result:d,uri:f}),s);return{results:new Jc(async d=>{c.add(l.event(f=>{const g=f.result,v=f.uri;U0(g)?d.emitOne(new As(v,g.rangeLocations.map(y=>({previewRange:new Ee(y.preview.startLineNumber,y.preview.startColumn,y.preview.endLineNumber,y.preview.endColumn),sourceRange:new Ee(y.source.startLineNumber,y.source.startColumn,y.source.endLineNumber,y.source.endColumn)})),g.previewText)):d.emitOne(new $p(v,g.text,g.lineNumber))})),await u}),complete:u.then(d=>(c.dispose(),{limitHit:d?.limitHit??!1}))}}async findTextInFilesBase(t,r,i,s=Xe.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=x.revive(a.resource);a.results.forEach(l=>{const u=Kt(l);i(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(r?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,r,i,s,n=Xe.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof r.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:r.previewOptions,a=Pp(Ur.from(r.include)),c=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof r.useSearchExclude=="boolean"?!r.useSearchExclude:!0,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:o,surroundingContext:r.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,d)=>{U0(h)?i({uri:d,preview:{text:h.previewText,matches:Eh(h.rangeLocations,f=>new Ee(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:Eh(h.rangeLocations,f=>new Ee(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):i({uri:d,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,r){this.u[r]?.(t)}async save(t){const r=await this.o.$save(t,{saveAs:!1});return x.revive(r)}async saveAs(t){const r=await this.o.$save(t,{saveAs:!0});return x.revive(r)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,r){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,i),te(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const i=await this.resolveWorkspaceFolder(x.revive(t));if(!i){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const s=this.w.get(i.uri.scheme);if(this.h.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(i,r);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,r,i,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(x.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(r,i,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,r,i){const s=await this.resolveWorkspaceFolder(x.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},r,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>i&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),r.isCancellationRequested}registerCanonicalUriProvider(t,r){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,i),te(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,r,i){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(x.revive(t),r,i);if(n)return n}async $provideCanonicalUri(t,r,i){return this.provideCanonicalUri(x.revive(t),{targetScheme:r},i)}};V0=__decorate([__param(0,Ae),__param(1,Ot),__param(2,ca),__param(3,$e),__param(4,nl)],V0);var Si=J("IExtHostWorkspace");function Pp(e){let t,r;if(e)return typeof e=="string"?t=e:(t=e.pattern,r=x.revive(e.baseUri)),{pattern:t,folder:r}}function g9(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const r=Pp(t);return r?{pattern:r.pattern,uri:r.folder}:void 0}})??[]).filter(t=>!!t)}var m9;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(m9||(m9={}));var v9;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(v9||(v9={}));var w9;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(w9||(w9={}));var q0;(function(e){e.DEFAULT={allowTrailingComma:!0}})(q0||(q0={}));function cO(e,t=!1){let r=0;const i=e.length;let s="",n=0,o=16,a=0;function c(v){let y=0,E=0;for(;y<v;){const k=e.charCodeAt(r);if(k>=48&&k<=57)E=E*16+k-48;else if(k>=65&&k<=70)E=E*16+k-65+10;else if(k>=97&&k<=102)E=E*16+k-97+10;else break;r++,y++}return y<v&&(E=-1),E}function l(v){r=v,s="",n=0,o=16,a=0}function u(){const v=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&oc(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&oc(e.charCodeAt(r)))for(r++;r<e.length&&oc(e.charCodeAt(r));)r++;else return a=3,e.substring(v,r);let y=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&oc(e.charCodeAt(r))){for(r++;r<e.length&&oc(e.charCodeAt(r));)r++;y=r}else a=3;return e.substring(v,y)}function h(){let v="",y=r;for(;;){if(r>=i){v+=e.substring(y,r),a=2;break}const E=e.charCodeAt(r);if(E===34){v+=e.substring(y,r),r++;break}if(E===92){if(v+=e.substring(y,r),r++,r>=i){a=2;break}switch(e.charCodeAt(r++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:{const I=c(4);I>=0?v+=String.fromCharCode(I):a=4;break}default:a=5}y=r;continue}if(E>=0&&E<=31)if(Dp(E)){v+=e.substring(y,r),a=2;break}else a=6;r++}return v}function d(){if(s="",a=0,n=r,r>=i)return n=i,o=17;let v=e.charCodeAt(r);if(G0(v)){do r++,s+=String.fromCharCode(v),v=e.charCodeAt(r);while(G0(v));return o=15}if(Dp(v))return r++,s+=String.fromCharCode(v),v===13&&e.charCodeAt(r)===10&&(r++,s+=`
`),o=14;switch(v){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,s=h(),o=10;case 47:{const y=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<i&&!Dp(e.charCodeAt(r));)r++;return s=e.substring(y,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const E=i-1;let k=!1;for(;r<E;){if(e.charCodeAt(r)===42&&e.charCodeAt(r+1)===47){r+=2,k=!0;break}r++}return k||(r++,a=1),s=e.substring(y,r),o=13}return s+=String.fromCharCode(v),r++,o=16}case 45:if(s+=String.fromCharCode(v),r++,r===i||!oc(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;r<i&&f(v);)r++,v=e.charCodeAt(r);if(n!==r){switch(s=e.substring(n,r),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(v),r++,o=16}}function f(v){if(G0(v)||Dp(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function g(){let v;do v=d();while(v>=12&&v<=15);return v}return{setPosition:l,getPosition:()=>r,scan:t?g:d,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>r-n,getTokenError:()=>a}}function G0(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Dp(e){return e===10||e===13||e===8232||e===8233}function oc(e){return e>=48&&e<=57}var b9;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(b9||(b9={}));function lO(e,t,r=q0.DEFAULT){const i=cO(e,!1);function s(U){return U?()=>U(i.getTokenOffset(),i.getTokenLength()):()=>!0}function n(U){return U?ne=>U(ne,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),d=n(t.onSeparator),f=s(t.onComment),g=n(t.onError),v=r&&r.disallowComments,y=r&&r.allowTrailingComma;function E(){for(;;){const U=i.scan();switch(i.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:v||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(U){case 12:case 13:v?k(10):f();break;case 16:k(1);break;case 15:case 14:break;default:return U}}}function k(U,ne=[],ce=[]){if(g(U),ne.length+ce.length>0){let ve=i.getToken();for(;ve!==17;){if(ne.indexOf(ve)!==-1){E();break}else if(ce.indexOf(ve)!==-1)break;ve=E()}}}function I(U){const ne=i.getTokenValue();return U?h(ne):a(ne),E(),!0}function D(){switch(i.getToken()){case 11:{let U=0;try{U=JSON.parse(i.getTokenValue()),typeof U!="number"&&(k(2),U=0)}catch{k(2)}h(U);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return E(),!0}function T(){return i.getToken()!==10?(k(3,[],[2,5]),!1):(I(!1),i.getToken()===6?(d(":"),E(),W()||k(4,[],[2,5])):k(5,[],[2,5]),!0)}function _(){o(),E();let U=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(U||k(4,[],[]),d(","),E(),i.getToken()===2&&y)break}else U&&k(6,[],[]);T()||k(4,[],[2,5]),U=!0}return c(),i.getToken()!==2?k(7,[2],[]):E(),!0}function q(){l(),E();let U=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(U||k(4,[],[]),d(","),E(),i.getToken()===4&&y)break}else U&&k(6,[],[]);W()||k(4,[],[4,5]),U=!0}return u(),i.getToken()!==4?k(8,[4],[]):E(),!0}function W(){switch(i.getToken()){case 3:return q();case 1:return _();case 10:return I(!0);default:return D()}}return E(),i.getToken()===17?r.allowEmptyContent?!0:(k(4,[],[]),!1):W()?(i.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}function ku(e){return Object.isFrozen(e)?e:l6(e)}var ac=class jo{static createEmptyModel(t){return new jo({},[],[],void 0,t)}constructor(t,r,i,s,n){this.b=t,this.c=r,this.d=i,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(r=>{if(r instanceof jo)return r;const i=new uO("",this.f);return i.parseRaw(r),i.configurationModel});this.g=t.reduce((r,i)=>i===r?i:r.merge(i),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?yd(this.contents,t):this.contents}inspect(t,r){const i=this;return{get value(){return ku(i.rawConfiguration.getValue(t))},get override(){return r?ku(i.rawConfiguration.getOverrideValue(t,r)):void 0},get merged(){return ku(r?i.rawConfiguration.override(r).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new jo(n,a,[],void 0,i.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?ku(s):void 0}}}getOverrideValue(t,r){const i=this.j(r);return i?t?yd(i,t):i:void 0}getKeysForOverrideIdentifier(t){const r=[];for(const i of this.overrides)i.identifiers.includes(t)&&r.push(...i.keys);return Go(r)}getAllOverrideIdentifiers(){const t=[];for(const r of this.overrides)t.push(...r.identifiers);return Go(t)}override(t){let r=this.a.get(t);return r||(r=this.h(t),this.a.set(t,r)),r}merge(...t){const r=it(this.contents),i=it(this.overrides),s=[...this.keys],n=this.raw?.length?[...this.raw]:[this];for(const o of t)if(n.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.i(r,o.contents);for(const a of o.overrides){const[c]=i.filter(l=>Fi(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=Go(c.keys)):i.push(it(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new jo(r,s,i,n.every(o=>o instanceof jo)?void 0:n,this.f)}h(t){const r=this.j(t);if(!r||typeof r!="object"||!Object.keys(r).length)return this;const i={};for(const s of Go([...Object.keys(this.contents),...Object.keys(r)])){let n=this.contents[s];const o=r[s];o&&(typeof n=="object"&&typeof o=="object"?(n=it(n),this.i(n,o)):n=o),i[s]=n}return new jo(i,this.keys,this.overrides,void 0,this.f)}i(t,r){for(const i of Object.keys(r)){if(i in t&&mt(t[i])&&mt(r[i])){this.i(t[i],r[i]);continue}t[i]=it(r[i])}}j(t){let r=null,i=null;const s=n=>{n&&(i?this.i(i,n):i=it(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?r=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(r),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,r){this.k(t,r,!0)}setValue(t,r){this.k(t,r,!1)}removeValue(t){const r=this.keys.indexOf(t);r!==-1&&(this.keys.splice(r,1),dN(this.contents,t),zi.test(t)&&this.overrides.splice(this.overrides.findIndex(i=>Fi(i.identifiers,bl(t))),1))}k(t,r,i){if(c7(this.contents,t,r,s=>this.f.error(s)),i=i||this.keys.indexOf(t)===-1,i&&this.keys.push(t),zi.test(t)){const s=bl(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:B1(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Fi(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},uO=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||ac.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!yt(e)){const r=this.h(e);this.parseRaw(r,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:r,keys:i,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new ac(r,i,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},r=null,i=[];const s=[],n=[];function o(c){Array.isArray(i)?i.push(c):r!==null&&(i[r]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(i),i=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(i),i=c,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{lO(e,a),t=i[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const r=er.as(ma.Configuration).getConfigurationProperties(),i=this.j(e,r,!0,t);e=i.raw;const s=B1(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}j(e,t,r,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(zi.test(a)&&r){const c=this.j(e[a],t,!1,i);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,i)?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t,r){if(r.exclude?.includes(e))return!1;if(r.include?.includes(e))return!0;if(r.skipRestricted&&t?.restricted||r.skipUnregistered&&!t)return!1;const i=t?typeof t.scope<"u"?t.scope:3:void 0;return i===void 0||r.scopes===void 0?!0:r.scopes.includes(i)}m(e,t){const r=[];for(const i of Object.keys(e))if(zi.test(i)){const s={};for(const n in e[i])s[n]=e[i][n];r.push({identifiers:bl(i),keys:Object.keys(s),contents:B1(s,t)})}return r}},hO=class{constructor(e,t,r,i,s,n,o,a,c,l,u,h,d){this.a=e,this.b=t,this.c=r,this.overrideIdentifiers=i,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=d}get value(){return ku(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},J0=class z3{constructor(t,r,i,s,n,o,a,c,l,u){this.j=t,this.l=r,this.m=i,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new zt,this.v=null}getValue(t,r,i){return this.w(t,r,i).getValue(t)}updateValue(t,r,i={}){let s;i.resource?(s=this.t.get(i.resource),s||(s=ac.createEmptyModel(this.u),this.t.set(i.resource,s))):s=this.s,r===void 0?s.removeValue(t):s.setValue(t,r),i.resource||(this.h=null)}inspect(t,r,i){const s=this.w(t,r,i),n=this.A(r.resource,i),o=r.resource?this.t.get(r.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new hO(t,r,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this.q:void 0,n||void 0,o)}keys(t){const r=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:r?r.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,r){this.r.set(t,r),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,r){const i=[];if(!r){const{added:s,updated:n,removed:o}=$n(this.j,t);r=[...s,...n,...o]}for(const s of r)for(const n of bl(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!hi(this.j.override(n).getValue(l),t.override(n).getValue(l)))];i.push([n,c])}return this.updateDefaultConfiguration(t),{keys:r,overrides:i}}compareAndUpdatePolicyConfiguration(t){const{added:r,updated:i,removed:s}=$n(this.l,t),n=[...r,...i,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.applicationConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.localUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.remoteUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=$n(this.workspaceConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,r){const i=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=$n(i,r),c=[...s,...n,...o];return(c.length||!i)&&this.updateFolderConfiguration(t,r),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const r=this.folderConfigurations.get(t);if(!r)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:i,updated:s,removed:n,overrides:o}=$n(r,void 0);return{keys:[...i,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,r,i){let s=this.x(r,i);return r.overrideIdentifier&&(s=s.override(r.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(s=s.merge(this.l)),s}x({resource:t},r){let i=this.y();if(r&&t){const s=r.getFolder(t);s&&(i=this.z(s.uri)||i);const n=this.t.get(t);n&&(i=i.merge(n))}return i}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let r=this.i.get(t);if(!r){const i=this.y(),s=this.r.get(t);s?(r=i.merge(s),this.i.set(t,r)):r=i}return r}A(t,r){if(r&&t){const i=r.getFolder(t);if(i)return this.r.get(i.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,r)=>{const{contents:i,overrides:s,keys:n}=this.r.get(r);return t.push([r,{contents:i,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(r=>t.add(r)),this.userConfiguration.keys.forEach(r=>t.add(r)),this.q.keys.forEach(r=>t.add(r)),this.r.forEach(r=>r.keys.forEach(i=>t.add(i))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.userConfiguration.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.q.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.r.forEach(r=>r.getAllOverrideIdentifiers().forEach(i=>t.add(i))),[...t.values()]}D(t){const r=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.q.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.r.forEach(i=>i.getKeysForOverrideIdentifier(t).forEach(s=>r.add(s))),[...r.values()]}static parse(t,r){const i=this.E(t.defaults,r),s=this.E(t.policy,r),n=this.E(t.application,r),o=this.E(t.user,r),a=this.E(t.workspace,r),c=t.folders.reduce((l,u)=>(l.set(x.revive(u[0]),this.E(u[1],r)),l),new zt);return new z3(i,s,n,o,ac.createEmptyModel(r),a,c,ac.createEmptyModel(r),new zt,r)}static E(t,r){return new ac(t.contents,t.keys,t.overrides,void 0,r)}},dO=class{constructor(e,t,r,i,s){this.change=e,this.f=t,this.g=r,this.h=i,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=J0.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const r=this.a+e,i=this.d.indexOf(r);if(i<0)return!1;const s=i+r.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!hi(o,a)}return!0}};function $n(e,t){const{added:r,removed:i,updated:s}=y9(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=y9({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:r,removed:i,updated:s,overrides:n}}function y9(e,t){const r=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],i=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=yd(t.contents,n),a=yd(e.contents,n);hi(o,a)||s.push(n)}}return{added:r,removed:i,updated:s}}function Su(e,t){if(t){const r=t.split(".");let i=e;for(let s=0;i&&s<r.length;s++)i=i[r[s]];return i}}function fO(e){return e instanceof x}function pO(e){return e&&e.uri instanceof x&&e.languageId&&typeof e.languageId=="string"}function gO(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function mO(e){return e&&e.uri instanceof x&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function x9(e){if(fO(e))return{resource:e};if(pO(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(gO(e))return{overrideIdentifier:e.languageId};if(mO(e))return{resource:e.uri};if(e===null)return{resource:null}}var Q0=class{constructor(t,r,i){this.a=t.getProxy(Q.MainThreadConfiguration),this.c=r,this.b=i,this.d=new Xr,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new vO(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,r){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(t,r))}};Q0=__decorate([__param(0,Ae),__param(1,Si),__param(2,$e)],Q0);var vO=class{constructor(e,t,r,i){this.a=new P,this.b=e,this.f=i,this.c=t,this.e=J0.parse(r,i),this.d=this.k(r.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const r={data:this.e.toData(),workspace:this.c.workspace};this.e=J0.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,r))}getConfiguration(e,t,r){const i=x9(t)||{},s=this.g(e?Su(this.e.getValue(void 0,i,this.c.workspace),e):this.e.getValue(void 0,i,this.c.workspace));e&&this.h(e,i,r?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case La.Global:return 2;case La.Workspace:return 5;case La.WorkspaceFolder:return 6}}const o={has(a){return typeof Su(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,i,r?.identifier);let l=Su(s,a);if(typeof l>"u")l=c;else{let u;const h=(d,f)=>{if(mt(d)){let g;const v=()=>{u=u||it(s),g=g||Su(u,f)};return new Proxy(d,{get:(y,E)=>{if(typeof E=="string"&&E.toLowerCase()==="tojson")return v(),()=>g;if(u)return g=g||Su(u,f),g[E];const k=y[E];return typeof E=="string"?h(k,`${f}.${E}`):k},set:(y,E,k)=>(v(),g&&(g[E]=k),!0),deleteProperty:(y,E)=>(v(),g&&delete g[E],!0),defineProperty:(y,E,k)=>(v(),g&&Object.defineProperty(g,E,k),!0)})}return Array.isArray(d)?it(d):d};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,i,u):this.b.$removeConfigurationOption(h,a,i,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,i,this.c.workspace);if(c)return{key:a,defaultValue:it(c.policy?.value??c.default?.value),globalValue:it(c.user?.value??c.application?.value),workspaceValue:it(c.workspace?.value),workspaceFolderValue:it(c.workspaceFolder?.value),defaultLanguageValue:it(c.default?.override),globalLanguageValue:it(c.user?.override??c.application?.override),workspaceLanguageValue:it(c.workspace?.override),workspaceFolderLanguageValue:it(c.workspaceFolder?.override),languageIds:it(c.overrideIdentifiers)}}};return typeof s=="object"&&ds(o,s,!1),Object.freeze(o)}g(e){const t=r=>mt(r)?new Proxy(r,{get:(i,s)=>t(i[s]),set:(i,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(i,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(i,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:i=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):r;return t(e)}h(e,t,r){const i=zi.test(e)?4:this.d.get(e),s=r?`[${r.value}] `:"";if(i===4){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(i===3){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const r=new dO(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(i,s)=>r.affectsConfiguration(i,x9(s))})}k(e){return e.reduce((t,r)=>(t.set(r[0],r[1]),t),new Map)}},ti=J("IExtHostConfiguration"),wO=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},$u=class W3{static isHostExtension(t,r,i){if(r.getExtensionDescription(t))return!1;const s=i.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,r){this.j=t,this.c=new P,this.onDidChange=this.c.event,this.d=0,this.e=r,this.k()}k(){this.e.sort(yO),this.f=new ys,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const r=this.j.readActivationEvents(t);for(const i of r)this.h.has(i)||this.h.set(i,[]),this.h.get(i).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,r){this.e=k9(this.e,r),this.e=this.e.concat(t);const i=W3.l(this.e);return this.e=k9(this.e,i.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new wO(this.d,i)}static l(t){const r=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=r.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},i=new ys;for(const a of t)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)r.addArc(Je.toKey(a.identifier),Je.toKey(c));const s=new Set;r.getNodes().filter(a=>r.getArcs(a).length===0).forEach(a=>s.add(a));const n=r.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];r.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>i.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const r=this.h.get(t);return r?r.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new bO(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const r=this.f.get(t);return r||void 0}getExtensionDescriptionByUUID(t){for(const r of this.g)if(r.uuid===t)return r}getExtensionDescriptionByIdOrUUID(t,r){return this.getExtensionDescription(t)??(r?this.getExtensionDescriptionByUUID(r):void 0)}},bO=class{constructor(e,t){this.versionId=e,this.extensions=t}},E9;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(E9||(E9={}));function yO(e,t){const r=e.isBuiltin?0:e.isUnderDevelopment?2:1,i=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(r!==i)return r-i;const s=Re.basename(e.extensionLocation.path),n=Re.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function k9(e,t){const r=new Kn(t);return e.filter(i=>!r.has(i.identifier))}var Y0="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",jG=new RegExp(Y0),S9;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(S9||(S9={}));var $9;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})($9||($9={}));var C9;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(C9||(C9={}));var I9;(function(e){e.Install="install",e.Uninstall="uninstall"})(I9||(I9={}));var P9;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(P9||(P9={}));var HG=J("extensionGalleryService"),D9;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(D9||(D9={}));var A9;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadUninstalled="ReadUninstalled",e.UnsetUninstalled="UnsetUninstalled",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(A9||(A9={}));var T9;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(T9||(T9={}));var BG=J("extensionManagementService"),_G=J("IGlobalExtensionEnablementService"),zG=J("IExtensionTipsService"),WG=J("IAllowedExtensionsService"),VG=pm(1820,"Extensions"),qG=pm(1821,"Preferences"),GG=J("telemetryService"),JG=J("customEndpointTelemetryService"),R9;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(R9||(R9={}));var L9;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(L9||(L9={}));var X0=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},xO=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},QG=new xO,EO="extensionTelemetryLog",kO=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function SO(e){if(!e)return"none";const t=H1(e);return kO.has(t)?t:"other"}function $O(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let r=e;const i=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;i.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(r="";;){const a=n.exec(e);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(r+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(r+=e.substr(o)),r}function CO(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of t)if(r.regex.test(e))return`<REDACTED: ${r.label}>`;return e}function N9(e,t){return ra(e,r=>{if(r instanceof X0||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let i=r.replaceAll("%20"," ");i=$O(i,t);for(const s of t)i=i.replace(s,"");return i=CO(i),i}})}var YG=new Je("pprice.better-merge"),IO=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const r of e){const i=this.readActivationEvents(r);i.length>0&&(t[Je.toKey(r.identifier)]=i)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let r=0;r<t.length;r++)t[r]==="onUri"&&(t[r]=`onUri:${Je.toKey(e.identifier)}`);if(!e.contributes)return t;for(const r in e.contributes){const i=this.a.get(r);if(!i)continue;const s=e.contributes[r],n=Array.isArray(s)?s:[s];try{i(n,t)}catch(o){pt(o)}}return t}},PO=new IO,DO=Object.freeze({identifier:new Je("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:x.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),AO=J("extensionService"),F9=class{constructor(e){this.dependency=e}},O9;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(O9||(O9={}));function Vt(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function L(e,t){if(!Vt(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var M9;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(M9||(M9={}));var Ap=class V3{static{this.NONE=new V3(!1,-1,-1,-1)}constructor(t,r,i,s){this.startup=t,this.codeLoadingTime=r,this.activateCallTime=i,this.activateResolvedTime=s}},U9=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Ap(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Tp=class{constructor(e,t,r,i,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=r,this.module=i,this.exports=s,this.disposable=n}},TO=class extends Tp{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,K.None)}},RO=class extends Tp{constructor(){super(!1,null,Ap.NONE,{activate:void 0,deactivate:void 0},void 0,K.None)}},Rp=class extends Tp{constructor(e){super(!0,e,Ap.NONE,{activate:void 0,deactivate:void 0},void 0,K.None)}},Z0=class{constructor(t,r,i,s){this.g=s,this.a=t,this.b=r,this.c=i,this.d=new ys,this.f=Object.create(null)}dispose(){for(const[t,r]of this.d)r.dispose()}async waitForActivatingExtensions(){const t=[];for(const[r,i]of this.d)t.push(i.wait());await Promise.all(t)}isActivated(t){const r=this.d.get(t);return!!(r&&r.value)}getActivatedExtension(t){const r=this.d.get(t);if(!r||!r.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return r.value}async activateByEvent(t,r){if(this.f[t])return;const i=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(i.map(s=>({id:s.identifier,reason:{startup:r,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,r){const i=this.a.getExtensionDescription(t);if(!i)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:i.identifier,reason:r}])}async h(t){const r=t.filter(i=>!this.isActivated(i.id)).map(i=>this.j(i));await Promise.all(r.map(i=>i.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const r=this.a.getExtensionDescription(t.id);if(!r){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Rp(n));return this.c.onExtensionActivationError(t.id,n,new F9(t.id.value)),o}const i=[],s=typeof r.extensionDependencies>"u"?[]:r.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){i.push(o);continue}if(this.l(n)){i.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;i.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=r.displayName||r.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,r.displayName,[],new Rp(l));return this.c.onExtensionActivationError(r.identifier,l,new F9(n)),u}return this.k(t,r.displayName,i,null)}k(t,r,i,s){const n=new K0(t.id,r,t.reason,i,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return $u.isHostExtension(t,this.a,this.b)}m(t){const r=this.b.getExtensionDescription(t);return r?!r.main&&!r.browser:!1}};Z0=__decorate([__param(3,$e)],Z0);var K0=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new Xr,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const r=this.g[t];if(r.value&&!r.value.activationFailed){this.g.splice(t,1),t--;continue}if(r.value&&r.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${r.friendlyName}' failed to activate`);i.detail=r.value.activationFailedError,this.h=new Rp(i),this.j.onExtensionActivationError(this.c,i,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const r=new Error;if(t&&t.name&&(r.name=t.name),t&&t.message?r.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:r.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(r.stack=t.stack),this.h=new Rp(r),this.b&&Ni(t))return;this.j.onExtensionActivationError(this.c,r,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};K0=__decorate([__param(6,$e)],K0);var j9=class{constructor(e,t){this.c=t,this.b=new P,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(Q.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,r){const i=await this.a.$initializeExtensionStorage(e,t);let s;return i&&(s=this.d(e,t,i)),s||r}setValue(e,t,r){return this.a.$setValue(e,t,r)}$acceptValue(e,t,r){const i=this.d(e,t,r);i&&this.b.fire({shared:e,key:t,value:i})}d(e,t,r){try{return JSON.parse(r)}catch(i){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}},ew=J("IExtHostStorage"),H9=class{constructor(e,t,r){this.h=new Map,this.a=e,this.b=t,this.c=r,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(i=>(this.f=i,this)),this.g=this.c.onDidChangeStorage(i=>{i.shared===this.b&&i.key===this.a&&(this.f=i.value)}),this.i=new hs(()=>{const i=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of i.values())s.complete()}catch(s){for(const n of i.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let r=this.f[e];return typeof r>"u"&&(r=t),r}update(e,t){this.f[e]=t;const r=this.h.get(e);if(r!==void 0)return r.p;const i=new rn;return this.h.set(e,i),this.i.isScheduled()||this.i.schedule(),i.p}dispose(){this.g.dispose()}},LO=class extends H9{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},Qi,tw=Qi=class{constructor(t,r){this.b=new Map,this.c=new S5,this.a=t.getProxy(Q.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(s){try{let n;const o=i.b.get(s.scheme);return o?(await i.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await i.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===cn.Readonly?1:void 0}}catch(n){Qi.e(n)}},async readDirectory(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await i.a.$readdir(s)}catch(n){return Qi.e(n)}},async createDirectory(s){try{const n=i.b.get(s.scheme);return n&&!n.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(n.impl,n.extUri,s)):await i.a.$mkdir(s)}catch(n){return Qi.e(n)}},async readFile(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await i.a.$readFile(s)).buffer}catch(n){return Qi.e(n)}},async writeFile(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(o.impl,o.extUri,o.extUri.dirname(s)),await i.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await i.a.$writeFile(s,Y.wrap(n))}catch(o){return Qi.e(o)}},async delete(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await i.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await i.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return Qi.e(o)}},async rename(s,n,o){try{return await i.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return Qi.e(a)}},async copy(s,n,o){try{return await i.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return Qi.e(a)}},isWritableFileSystem(s){const n=r.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,r,i){const s=[];for(;!r.isEqual(i,r.dirname(i));)try{if(!((await t.stat(i)).type&Or.Directory))throw Mt.FileExists(`Unable to create folder '${i.scheme===V.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(md(n)!==oe.FileNotFound)throw n;s.push(r.basename(i)),i=r.dirname(i)}for(let n=s.length-1;n>=0;n--){i=r.joinPath(i,s[n]);try{await t.createDirectory(i)}catch(o){if(md(o)!==oe.FileExists)throw o}}}static e(t){if(t instanceof Mt)throw t;if(t instanceof gd)switch(t.code){case oe.FileExists:throw Mt.FileExists(t.message);case oe.FileNotFound:throw Mt.FileNotFound(t.message);case oe.FileNotADirectory:throw Mt.FileNotADirectory(t.message);case oe.FileIsADirectory:throw Mt.FileIsADirectory(t.message);case oe.NoPermissions:throw Mt.NoPermissions(t.message);case oe.Unavailable:throw Mt.Unavailable(t.message);default:throw new Mt(t.message,t.name)}if(!(t instanceof Error))throw new Mt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Mt.Unavailable(t.message);switch(t.name){case oe.FileExists:throw Mt.FileExists(t.message);case oe.FileNotFound:throw Mt.FileNotFound(t.message);case oe.FileNotADirectory:throw Mt.FileNotADirectory(t.message);case oe.FileIsADirectory:throw Mt.FileIsADirectory(t.message);case oe.NoPermissions:throw Mt.NoPermissions(t.message);case oe.Unavailable:throw Mt.Unavailable(t.message);default:throw new Mt(t.message,t.name)}}addFileSystemProvider(t,r,i){return this.b.set(t,{impl:r,extUri:i?.isCaseSensitive?He:t2,isReadonly:!!i?.isReadonly}),te(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??He}};tw=Qi=__decorate([__param(0,Ae),__param(1,ca)],tw);var Cu=J("IExtHostConsumerFileSystem"),rw=J("IExtensionStoragePaths"),iw=class{constructor(t,r,i){this.d=r,this.f=i,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return x.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,r=await this.g(t);try{return await this.f.value.stat(r),this.d.trace("[ExtHostStorage] storage dir already exists",r),r}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",r),await this.f.value.createDirectory(r),await this.f.value.writeFile(x.joinPath(r,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:x.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),r}catch(i){this.d.error("[ExtHostStorage]",i);return}}workspaceValue(t){if(this.c)return x.joinPath(this.c,t.identifier.value)}globalValue(t){return x.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};iw=__decorate([__param(0,Ot),__param(1,$e),__param(2,Cu)],iw);var NO=J("tunnelService"),tJ=J("sharedTunnelsService"),ri;(function(e){e.Http="http",e.Https="https"})(ri||(ri={}));var Yi;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Yi||(Yi={}));function FO(e){return!!e.forwardPort}var Cn;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Cn||(Cn={}));function OO(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var Iu=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function Co(e){return Iu.indexOf(e)>=0}var Lp=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Rs(e){return Lp.indexOf(e)>=0}function MO(e,t,r,i){if(r===1)return!1;if(r===2&&Rs(t)){const s=/(\d+)\.(\d+)\.(\d+)/g.exec(i);if(s?.length===4&&parseInt(s[1])>=18)return!1}return e<1024}var UO=class{constructor(e,t,r){this.remoteAddress=e,this.localAddress=t,this.b=r,this.a=new P,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},sw=class extends K{constructor(t,r){super(),this.r=t,this.s=r,this.a=new P,this.onTunnelOpened=this.a.event,this.b=new P,this.onTunnelClosed=this.b.event,this.c=new P,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],r=Array.from(this.f.values());for(const i of r){const s=Array.from(i.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:r}of t.values())await r.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,r,i,s,n){this.z(t,r,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:r,localAddress:i,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,r){(Rs(t)||Co(t))&&(t=Iu[0]);const i=this.D(t,r);if(i)return++i.refcount,i.value}openTunnel(t,r,i,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${r}:${i} on local port ${n}.`);const l=this.g??t;if(!l)return;if(r||(r="localhost"),s||(s=this.t),this.g&&this.n.has(i)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,r,i,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(r,i),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(r,i);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const d=this.w(h);return(h.tunnelRemoteHost!==r||h.tunnelRemotePort!==i)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(d),d}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const r=this.f.get(t.tunnelRemoteHost);if(r){const i=r.get(t.tunnelRemotePort);i&&(i.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async y(t,r,i){if(i.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${r}.`);const s=i.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(r),s}}async closeTunnel(t,r){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${r} `);const i=this.f.get(t);if(i&&i.has(r)){const s=i.get(r);s.refcount=0,await this.y(t,r,s)}}z(t,r,i){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(r,{refcount:1,value:i})}async C(t,r){const i=this.f.get(t);if(i){const s=i.get(r),n=s?await s.value:void 0;(!n||typeof n=="string")&&i.delete(r),i.size===0&&this.f.delete(t)}}D(t,r){const i=[t];Co(t)?(i.push(...Iu),i.push(...Lp)):Rs(t)&&i.push(...Lp);const s=i.map(n=>this.f.get(n));for(const n of s){const o=n?.get(r);if(o)return o}}canTunnel(t){return!!OO(t)}G(t,r,i,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${r}:${i} on local port ${s}.`);const c=i;this.n.add(c);const l=s===void 0?i:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:r,port:i},localAddressPort:s,privacy:o,public:o?o!==Yi.Private:void 0,protocol:a},d=t.forwardPort(h,u);return d?(this.z(r,i,d),d.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),d}};sw=__decorate([__param(0,$e),__param(1,xs)],sw);var jO=class extends UO{},nw;(function(e){function t(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?Yi.Public:Yi.Private),protocol:i.protocol}}e.fromApiTunnel=t;function r(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==Yi.ConstantPrivate&&i.privacy!==Yi.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}e.fromServiceTunnel=r})(nw||(nw={}));var Np=J("IExtHostTunnelService"),Fp=class extends K{constructor(t,r,i){super(),this.s=i,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new P,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(Q.MainThreadTunnelService)}async openTunnel(t,r){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${r.remoteAddress.host}:${r.remoteAddress.port}.`);const i=await this.a.$openTunnel(r,t.displayName);if(i){const s=new jO(i.remoteAddress,i.localAddress,()=>this.a.$closeTunnel(i.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,r){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.u();return this.r.set(i,{selector:t,provider:r}),this.a.$registerPortsAttributesProvider(t,i),new Te(()=>{this.r.delete(i),this.a.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(t,r,i,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(r.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:i,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,i,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,r){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Xe.None)??void 0;const i=r.tunnelFeatures?{elevation:!!r.tunnelFeatures?.elevation,privacyOptions:r.tunnelFeatures?.privacyOptions,protocol:r.tunnelFeatures.protocol===void 0?!0:r.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(i,!0),Promise.resolve(te(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,r){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const i=t.tunnelFactory??(r?this.w(r):void 0);if(i){this.b=i;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:p(2766,null),themeIcon:"lock"},{id:"public",label:p(2767,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return te(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,r){if(this.g.has(t.host)){const i=this.g.get(t.host);i.has(t.port)&&(r&&i.get(t.port).disposeListener.dispose(),await i.get(t.port).tunnel.dispose(),i.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,r){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this.b(t,r);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const s=await i;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),nw.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(t){const r=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),i=t.filter((s,n)=>r[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${i.map(s=>s.port).join(", ")}`),i}};Fp=__decorate([__param(0,Ae),__param(1,Ot),__param(2,$e)],Fp);function HO(e){return[...e.entries()]}function BO(e){return e?[...e.entries()]:[]}var _O=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,r=5){const i=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),r);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),i.dispose()}},this.a.set(e,o)});return i}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},Io=(e,t,r,i)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!r(s,n)){const o=s;s=n,e.listener?.(i(n,o))}}}},cc=(e,t)=>e===t,In={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:cc,description:cc,sortText:cc,busy:cc,error:cc,canResolveChildren:cc,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.find(i=>r.id===i.id)))},lc=e=>t=>({op:4,update:e(t)}),zO=(e,t)=>({range:(()=>{let r;const i=lc(s=>({range:Ke.lift(O.from(s))}));return{enumerable:!0,configurable:!1,get(){return r},set(s){e.listener?.({op:6}),In.range(r,s)||(r=s,e.listener?.(i(s)))}}})(),label:Io(e,t,In.label,lc(r=>({label:r}))),description:Io(e,void 0,In.description,lc(r=>({description:r}))),sortText:Io(e,void 0,In.sortText,lc(r=>({sortText:r}))),canResolveChildren:Io(e,!1,In.canResolveChildren,r=>({op:2,state:r})),busy:Io(e,!1,In.busy,lc(r=>({busy:r}))),error:Io(e,void 0,In.error,lc(r=>({error:Ce.fromStrict(r)||null}))),tags:Io(e,[],In.tags,(r,i)=>({op:1,new:r.map(ki.from),old:i.map(ki.from)}))}),WO=e=>{const t=Ne.fromString(e.extId),r=new Pu(t.controllerId,t.localId,e.label,x.revive(e.uri)||void 0);return r.range=O.to(e.range||void 0),r.description=e.description||void 0,r.sortText=e.sortText||void 0,r.tags=e.tags.map(i=>ki.to({id:rk(i).tagId})),r},B9=e=>{let t;for(const r of e.tests){const i=WO(r.item);qd(i).parent=t,t=i}return t},Pu=class q3{constructor(t,r,i,s){if(r.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(r)} symbol`);const n=kF(this,t);Object.defineProperties(this,{id:{value:r,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof ow?void 0:n.parent}},children:{value:EF(n,qd,q3),enumerable:!0,writable:!1},...zO(n,i)})}},ow=class extends Pu{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},VO=class extends bF{constructor(e,t,r){super({controllerId:e,getDocumentVersion:i=>i&&r.getDocument(i)?.version,getApiFor:qd,getChildren:i=>i.children,root:new ow(e,t),toITestItem:xn.from})}},Du;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(Du||(Du={}));var _9;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(_9||(_9={}));var z9;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(z9||(z9={}));function W9(e){const t=Y.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function qO(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var V9;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(V9||(V9={}));var aw=class extends K{constructor(t,r){super(),this.s=t,this.t=r,this.a=this.B(new P),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new P),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.g=!1,this.j=!1,this.r=new Map,this.m=x.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=r.createLogger(this.m,{id:EO,name:p(2763,null,this.j?" (Not Sent)":""),hidden:!0}),this.B(this.n),this.B(r.onDidChangeLogLevel(i=>{ZT(i)&&this.u()})),this.n.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this.n.info("===========================================================")}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===fe.Trace)}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,r,i){const s=this.getTelemetryDetails(),n=new q9(r,i,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,r,i){this.f=t,this.g=r,this.c=i??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const r=Object.create(null);switch(r["common.extname"]=`${t.publisher}.${t.name}`,r["common.extversion"]=t.version,r["common.vscodemachineid"]=this.s.telemetryInfo.machineId,r["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,r["common.sqmid"]=this.s.telemetryInfo.sqmId,r["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,r["common.vscodeversion"]=this.s.version,r["common.isnewappinstall"]=G9(this.s.telemetryInfo.firstSessionDate),r["common.product"]=this.s.environment.appHost,this.s.uiKind){case Du.Web:r["common.uikind"]="web";break;case Du.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}return r["common.remotename"]=H1(SO(this.s.remote.authority)),r}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const r=this.getTelemetryDetails();this.r.forEach((i,s)=>{const n=i.filter(o=>!o.isDisposed);n.length===0?this.r.delete(s):this.r.set(s,n)}),this.r.forEach(i=>{for(const s of i)s.updateTelemetryEnablements(r.isUsageEnabled,r.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,r){const s=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.r.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(r),n=!0);return n}};aw=__decorate([__param(0,Ot),__param(1,oa)],aw);var q9=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,r,i,s,n,o){this.g=r,this.h=i,this.i=s,this.j=n,this.a=new P,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=N9(t,[]),this.c&&(t=ds(t,this.c)),this.b||(t=ds(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const r={name:e.name,message:e.message,stack:e.stack,cause:e.cause},i=N9(r,[]),s=new Error(i.message,{cause:i.cause});s.stack=i.stack,s.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function G9(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var Op=J("IExtHostTelemetry"),cw=class{#e;#t;#r;constructor(t,r,i){this.b=new Map,this.c=new Map,this.#e=t.getProxy(Q.MainThreadCommands),this.d=r,this.#r=i,this.#t=t.getProxy(Q.MainThreadTelemetry),this.converter=new GO(this,s=>{const n=this.c.get(s);return n?.result===ge.Void?n:void 0},r),this.f=[{processArgument(s){return Kt(s)}},{processArgument(s){return ra(s,function(n){if(Ke.isIRange(n))return O.to(n);if(Vr.isIPosition(n))return Be.to(n);if(Ke.isIRange(n.range)&&x.isUri(n.uri))return Sr.to(n);if(n instanceof Y)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const r=this.registerCommand(!1,t.id,async(...i)=>{const s=t.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,i,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Te(()=>{r.dispose(),this.c.delete(t.id)})}registerCommand(t,r,i,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",r),!r.trim().length)throw new Error("invalid id");if(this.b.has(r))throw new Error(`command '${r}' already exists`);return this.b.set(r,{callback:i,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(r),new Te(()=>{this.b.delete(r)&&t&&this.#e.$unregisterCommand(r)})}executeCommand(t,...r){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,r,!0)}async g(t,r,i){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,r,!1);{let s=!1;const n=ra(r,function(o){if(o instanceof Ie)return Be.from(o);if(o instanceof Ee)return O.from(o);if(o instanceof qr)return Sr.from(o);if($s.isNotebookRange(o))return Ji.from(o);if(o instanceof ArrayBuffer)return s=!0,Y.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,Y.wrap(o);if(o instanceof Y)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new zr(n):n,i);return Kt(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,r,!1);throw o}}}async h(t,r,i){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{RD(r[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Ar.create();try{return await n.apply(o,r)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...r);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!i)throw l;if(s.extension?.identifier){const u=this.#r.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(pi(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,r,i){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new X0(r),duration:i})}$executeContributedCommand(t,...r){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const i=this.b.get(t);return i?(r=r.map(s=>this.f.reduce((n,o)=>o.processArgument(n,i.extension?.identifier),s)),this.h(t,r,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(r=>(t&&(r=r.filter(i=>i[0]!=="_")),r))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[r,i]of this.b){const{metadata:s}=i;s&&(t[r]=s)}return Promise.resolve(t)}};cw=__decorate([__param(0,Ae),__param(1,$e),__param(2,Op)],cw);var $i=J("IExtHostCommands"),GO=class{constructor(e,t,r){this.d=e,this.f=t,this.g=r,this.delegatingCommandId=`__vsc${Ft()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const r={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return r;const i=this.f(e.command);if(i)r.id=i.internalId,r.arguments=i.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Oc(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(te(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),r.$ident=s,r.id=this.delegatingCommandId,r.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return r}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},M=class fr{static{this.Uri=new fr("uri","Uri of a text document",t=>x.isUri(t),t=>t)}static{this.Position=new fr("position","A position in a text document",t=>Ie.isPosition(t),Be.from)}static{this.Range=new fr("range","A range in a text document",t=>Ee.isRange(t),O.from)}static{this.Selection=new fr("selection","A selection in a text document",t=>ks.isSelection(t),Ei.from)}static{this.Number=new fr("number","",t=>typeof t=="number",t=>t)}static{this.String=new fr("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=fr.Arr(fr.String)}static Arr(t){return new fr(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,r=>Array.isArray(r)&&r.every(i=>t.validate(i)),r=>r.map(i=>t.convert(i)))}static{this.CallHierarchyItem=new fr("item","A call hierarchy item",t=>t instanceof uv,xo.from)}static{this.TypeHierarchyItem=new fr("item","A type hierarchy item",t=>t instanceof zv,ko.from)}static{this.TestItem=new fr("testItem","A VS Code TestItem",t=>t instanceof Pu,xn.from)}static{this.TestProfile=new fr("testProfile","A VS Code test profile",t=>t instanceof Ok,C0.from)}constructor(t,r,i,s){this.name=t,this.description=r,this.validate=i,this.convert=s}optional(){return new fr(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,r){return new fr(t??this.name,r??this.description,this.validate,this.convert)}},ge=class G3{static{this.Void=new G3("no result",t=>t)}constructor(t,r){this.description=t,this.convert=r}},me=class{constructor(e,t,r,i,s){this.id=e,this.internalId=t,this.description=r,this.args=i,this.result=s}},Ls=J("IExtHostTerminalService"),lw=class extends K{constructor(e,t,r,i){super(),this.u=e,this._id=t,this.w=r,this.y=i,this.a=!1,this.m={isInteractedWith:!1},this.isOpen=!1,this.s=this.B(new P),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:Q9(e.iconPath)??void 0,color:la.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,r,i,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:i,color:la.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,r),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Ut.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={isInteractedWith:!0},!0)}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},uw=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new P,this.onProcessData=this.a.event,this.b=new P,this.d=new P,this.onDidChangeProperty=this.d.event,this.f=new P,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},JO=1,Mp=class extends K{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,r,i){super(),this.R=r,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new os),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new P,this.onDidCloseTerminal=this.I.event,this.J=new P,this.onDidOpenTerminal=this.J.event,this.L=new P,this.onDidChangeActiveTerminal=this.L.event,this.M=new P,this.onDidChangeTerminalDimensions=this.M.event,this.N=new P,this.onDidChangeTerminalState=this.N.event,this.O=new P,this.onDidChangeShell=this.O.event,this.P=new P({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new P({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=i.getProxy(Q.MainThreadTerminalService),this.y=new _O(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,r){const i=new lw(this.a,Ft(),t,t.name),s=new uw(t.pty);return i.createExtensionTerminal(t.location,r,this.S(t,r).resolvedExtHostIdentifier,Q9(t.iconPath),YO(t.color)).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(i),i.value}S(t,r){if(r=r||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const i=t.location.parentTerminal;if(i){const s=this.f.find(n=>n.value===i);s&&(r.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?r.location=t.location:r.location&&typeof r.location=="object"&&"splitActiveTerminal"in r.location&&(r.location={splitActiveTerminal:!0});return r}attachPtyToTerminal(t,r){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new uw(r),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const r=this.b;if(t===null){this.b=void 0,r!==this.b&&this.L.fire(this.b);return}const i=this.getTerminalById(t);i&&(this.b=i,r!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,r){const i=this.getTerminalById(t);i&&this.P.fire({terminal:i.value,data:r})}async $acceptTerminalDimensions(t,r,i){const s=this.getTerminalById(t);s&&s.setDimensions(r,i)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,r){const i=this.getTerminalById(t);i&&this.Q.fire({terminal:i.value,...r})}async $acceptTerminalMaximumDimensions(t,r,i){this.g.get(t)?.resize(r,i)}async $acceptTerminalTitleChange(t,r){const i=this.getTerminalById(t);i&&(i.name=r)}async $acceptTerminalClosed(t,r,i){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(r,i),this.I.fire(n.value)}}$acceptTerminalOpened(t,r,i,s){if(r){const a=this.Y(this.f,r);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:x.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new lw(this.a,t,n,i);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,r){this.getTerminalById(t)?._setProcessId(r)}async $startExtensionTerminal(t,r){const i=this.getTerminalById(t);if(!i)return{message:p(2764,null,t)};i.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(r):this.j[t]={initialDimensions:r}}U(t,r){const i=new he;i.add(r.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),i.add(r.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,r.onProcessData),i.add(r.onProcessExit(n=>this.W(t,n))),this.g.set(t,r);const s=this.j[t];return s&&r instanceof uw&&(r.startSendingEvents(s.initialDimensions),delete this.j[t]),i}$acceptProcessAckDataEvent(t,r){this.g.get(t)?.acknowledgeDataEvent(r)}$acceptProcessInput(t,r){this.g.get(t)?.input(r)}$acceptTerminalInteraction(t){const r=this.getTerminalById(t);r?.setInteractedWith()&&this.N.fire(r.value)}$acceptTerminalSelection(t,r){this.getTerminalById(t)?.setSelection(r)}$acceptProcessResize(t,r,i){try{this.g.get(t)?.resize(r,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,r){this.g.get(t)?.shutdown(r)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(r=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:r}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(r=>this.a.$sendProcessProperty(t,{type:"cwd",value:r}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,r,i){if(this.D.has(r))throw new Error(`Terminal profile provider "${r}" already registered`);return this.D.set(r,i),this.a.$registerProfileProvider(r,t.identifier.value),new Te(()=>{this.D.delete(r),this.a.$unregisterProfileProvider(r)})}registerTerminalCompletionProvider(t,r,...i){if(this.C.has(r.id))throw new Error(`Terminal completion provider "${r.id}" already registered`);return this.C.set(r.id,r),this.a.$registerCompletionProvider(r.id,t.identifier.value,...i),new Te(()=>{this.C.delete(r.id),this.a.$unregisterCompletionProvider(r.id)})}async $provideTerminalCompletions(t,r){const i=new rt().token;if(i.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,r,i);if(n!=null)return n}registerTerminalQuickFixProvider(t,r,i){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,i),this.a.$registerQuickFixProvider(t,r),new Te(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,r){const i=new rt().token;if(i.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(r,i);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new he;if(this.w.value=o,!Array.isArray(n))return n?kp.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=kp.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,r){const i=new rt().token;let s=await this.D.get(t)?.provideTerminalProfile(i);if(!i.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,r);return}this.createTerminalFromOptions(s.options,r)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Te(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,r){const i=this.getTerminalById(t);if(!i)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new rt;this.H.set(t,n);const o=[],a={terminal:i.value,line:r},c=[];for(const h of this.z)c.push(sn.withAsyncBody(async d=>{n.token.onCancellationRequested(()=>d({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||d({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(d=>{const f={id:JO++,startIndex:d.startIndex,length:d.length,label:d.tooltip};return u.set(f.id,{provider:h.provider,link:d}),f}));return this.G.set(t,u),o}$activateLink(t,r){const i=this.G.get(t)?.get(r);i&&i.provider.handleTerminalLink(i.link)}W(t,r){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const i=this.h[t];i&&(i.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,r)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const r=this.f.findIndex(i=>i.value===t);return r>=0?r:null}X(t,r){const i=this.Y(t,r);return i!==null?t[i]:null}Y(t,r){const i=t.findIndex(s=>s._id===r);return i>=0?i:null}getEnvironmentVariableCollection(t){let r=this.n.get(t.identifier.value);return r||(r=this.B(new J9),this.$(t.identifier.value,r)),r.getScopedEnvironmentVariableCollection(void 0)}Z(t,r){const i=HO(r.map),s=BO(r.descriptionMap);this.a.$setEnvironmentVariableCollection(t,r.persistent,i.length===0?void 0:i,s)}$initEnvironmentVariableCollections(t){t.forEach(r=>{const i=r[0],s=this.B(new J9(r[1]));this.$(i,s)})}$acceptDefaultProfile(t,r){const i=this.s;this.s=t,this.u=r,i?.path!==t.path&&this.O.fire(t.path)}$(t,r){this.n.set(t,r),this.B(r.onDidChangeCollection(()=>{this.Z(t,r)}))}};Mp=__decorate([__param(1,$i),__param(2,Ae)],Mp);var J9=class extends K{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new P,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let r=this.a.get(t);return r||(r=new QO(this,e),this.a.set(t,r),this.B(r.onDidChangeCollection(()=>this.f.fire()))),r}replace(e,t,r,i){this.g(e,{value:t,type:Ea.Replace,options:r??{applyAtProcessCreation:!0},scope:i})}append(e,t,r,i){this.g(e,{value:t,type:Ea.Append,options:r??{applyAtProcessCreation:!0},scope:i})}prepend(e,t,r,i){this.g(e,{value:t,type:Ea.Prepend,options:r??{applyAtProcessCreation:!0},scope:i})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const r=this.h(e,t.scope),i=this.map.get(r),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!i||i.value!==t.value||i.type!==t.type||i.options?.applyAtProcessCreation!==s.applyAtProcessCreation||i.options?.applyAtShellIntegration!==s.applyAtShellIntegration||i.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const r=this.h(e,t),i=this.map.get(r);return i?Y9(i):void 0}h(e,t){const r=this.j(t);return r.length?`${e}:::${r}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[r,i]of this.map)this.j(i.scope)===this.j(e)&&t.set(i.variable,Y9(i));return t}delete(e,t){const r=this.h(e,t);this.map.delete(r),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,r]of this.map)r.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const r=this.j(t),i=this.descriptionMap.get(r);if(!i||i.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(r,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},QO=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new P}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,r){this.b.replace(e,t,r,this.d)}append(e,t,r){this.b.append(e,t,r,this.d)}prepend(e,t,r){this.b.prepend(e,t,r,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((r,i)=>e.call(t,i,r,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},hw=class extends Mp{constructor(t,r){super(!1,t,r)}createTerminal(t,r,i){throw new um}createTerminalFromOptions(t,r){throw new um}};hw=__decorate([__param(0,$i),__param(1,Ae)],hw);function Q9(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function YO(e){return la.isThemeColor(e)?e:void 0}function Y9(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var XO=J("progressService"),X9;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(X9||(X9={}));var lJ=Object.freeze({total(){},worked(){},done(){}}),dw=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},Z9=class extends K{constructor(t,r){super(),this.a=new rn,r.withProgress(t,i=>(this.b=i,this.c&&i.report(this.c),this.a.p)),this.B(te(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};Z9=__decorate([__param(1,XO)],Z9);var hJ=J("editorProgressService"),K9="__",dJ=J("IAuthenticationService"),fJ=J("IAuthenticationExtensionsService"),fw=J("IExtHostAuthentication"),pw=class{constructor(t){this.b=new Map,this.c=new P,this.d=new ZO,this.a=t.getProxy(Q.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const r=t.toLowerCase();return je.chain(this.c.event,i=>i.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(r)).map(s=>({provider:s.provider})))}async getSession(t,r,i,s={}){const n=Je.toKey(t.identifier),o=[...i].sort().join(" ");return await this.d.getOrCreate(`${n} ${r} ${o}`,async()=>{await this.a.$ensureProvider(r);const a=t.displayName||t.name;return this.a.$getSession(r,i,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,r){const i=this.b.get(t);return i?i.provider.removeSession(r):this.a.$removeSession(t,r)}registerAuthenticationProvider(t,r,i,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:r,provider:i,options:s??{supportsMultipleAccounts:!1}});const n=i.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,r,s?.supportsMultipleAccounts??!1),new Te(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,r,i){const s=this.b.get(t);if(s)return await s.provider.createSession(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,r){const i=this.b.get(t);if(i)return await i.provider.removeSession(r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,r,i){const s=this.b.get(t);if(s)return await s.provider.getSessions(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,r,i){return t.startsWith(K9)||this.c.fire({provider:{id:t,label:r},extensionIdFilter:i}),Promise.resolve()}};pw=__decorate([__param(0,Ae)],pw);var ZO=class{constructor(){this.a=new Map}getOrCreate(e,t){const r=this.a.get(e);if(r)return r;const i=t().finally(()=>this.a.delete(e));return this.a.set(e,i),i}},Up,gw=J("IExtHostLanguageModels"),e8=class{constructor(e,t){this.option=e,this.stream=new Rm,this.stream=t??new Rm}},KO=class{constructor(){this.a=new Map,this.b=new Rm,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return Jc.map(e.b.asyncIterable,t=>{if(t instanceof kr)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new e8(e.index,this.b):t=new e8(e.index),this.a.set(e.index,t));let r;e.part.type==="text"?r=new kr(e.part.value):r=new au(e.part.toolCallId,e.part.name,e.part.parameters),t.stream.emitOne(r)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},mw=class{static{Up=this}static{this.a=1}constructor(t,r,i){this.k=r,this.l=i,this.c=new P,this.d=new P,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new ys,this.i=new Map,this.j=new Map,this.t=new Set,this.b=t.getProxy(Q.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,r,i,s){const n=Up.a++;this.f.set(n,{extension:t.identifier,provider:i,languageModelId:r});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Je.toKey(t.identifier)}/${r}`,{extension:t.identifier,id:r,vendor:s.vendor??Je.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable});const a=i.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(r,new Je(c),l,u)});return te(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,r,i,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new dw(async u=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof au?h={type:"tool_use",name:u.part.name,parameters:u.part.input,toolCallId:u.part.callId}:u.part instanceof kr&&(h={type:"text",value:u.part.value}),!h){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(r,{index:u.index,part:h})});let l;a.provider.provideLanguageModelResponse2?l=Promise.resolve(a.provider.provideLanguageModelResponse2(s.map(ic.to),n,Je.toKey(i),c,o)):l=Promise.resolve(a.provider.provideLanguageModelResponse(s.map(ic.to),n,Je.toKey(i),c,o)),l.then(()=>{this.b.$reportResponseDone(r,void 0)},u=>{this.b.$reportResponseDone(r,Nc(u))})}$provideTokenLength(t,r,i){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(r,i)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:r,metadata:i}of t.added)this.g.set(r,{metadata:i,apiObjects:new ys});if(t.removed)for(const r of t.removed){this.g.delete(r);for(const[i,s]of this.i)s.languageModelId===r&&(s.res.reject(new Xt),this.i.delete(i))}t.added?.forEach(r=>this.r(r.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const r=Hr.find(this.g.entries(),([,i])=>!!i.metadata.isDefault)?.[0];if(r)return this.getLanguageModelByIdentifier(t,r)}async getLanguageModelByIdentifier(t,r){const i=this.g.get(r);if(!i)return;this.q(t.identifier,i.metadata)&&await this.r(i.metadata);let s=i.apiObjects.get(t.identifier);if(!s){const n=this;s={id:i.metadata.id,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,maxInputTokens:i.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(r))throw Is.NotFound(r);return n.s(r,o,a??Xe.None)},sendRequest(o,a,c){if(!n.g.has(r))throw Is.NotFound(r);return n.m(t,r,o,a??{},c??Xe.None)}},Object.freeze(s),i.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,r){const i=await this.b.$selectChatModels({...r,extension:t.identifier}),s=[];for(const n of i){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,r,i,s,n){const o=this.n(t,i),a=t.identifier,c=this.g.get(r)?.metadata;if(!c||!this.g.has(r))throw Is.NotFound(`Language model '${r}' is unknown.`);if(this.q(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw Is.NoPermissions(`Language model '${r}' cannot be used by '${a.value}'.`);try{const l=Math.random()*1e6|0,u=new KO;this.i.set(l,{languageModelId:r,res:u});try{await this.b.$tryStartChatRequest(a,r,l,o,s,n)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===Is.name?l:new Is(`Language model '${r}' errored: ${pi(l)}`,"Unknown",l)}}n(t,r){const i=[];for(const s of r)s.role===Kr.System&&L(t,"languageModelSystem"),i.push(ic.from(s));return i}async $acceptResponsePart(t,r){const i=this.i.get(t);i&&i.res.handleFragment(r)}async $acceptResponseDone(t,r){const i=this.i.get(t);i&&(this.i.delete(t),r?i.res.reject(tP(r)):i.res.resolve())}async o(t,r,i,s){const n=K9+r.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=i?p(2755,null,r.displayName,i):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0}catch{return!1}}q(t,r){return!!r.auth&&!Je.equals(r.extension,t)}async r(t){if(t.auth)for(const r of this.t)try{await this.o(r,{identifier:t.extension,displayName:""},void 0,!0)}catch(i){this.k.error("Fake Auth request failed"),this.k.error(i)}}async s(t,r,i){if(!this.g.get(t))throw Is.NotFound(`Language model '${t}' is unknown.`);const n=Hr.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(r,i):this.b.$countTokens(t,typeof r=="string"?r:ic.from(r),i)}$updateModelAccesslist(t){const r=new Array;for(const{from:i,to:s,enabled:n}of t){const o=this.h.get(i)??new Kn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(i,o);const c={from:i,to:s};r.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.t.add(t);const r=this,i=je.signal(je.filter(this.c.event,n=>Je.equals(n.from,t.identifier))),s=je.signal(this.d.event);return{get onDidChange(){return je.any(i,s)},canSendRequest(n){let o;e:for(const[c,l]of r.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!r.q(t.identifier,o))return!0;const a=r.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,r,i){return L(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(r,i)}async $isFileIgnored(t,r,i){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(x.revive(r),i)??!1}registerIgnoredFileProvider(t,r){L(t,"chatParticipantPrivate");const i=Up.a++;return this.b.$registerFileIgnoreProvider(i),this.j.set(i,r),te(()=>{this.b.$unregisterFileIgnoreProvider(i),this.j.delete(i)})}};mw=Up=__decorate([__param(0,Ae),__param(1,$e),__param(2,fw)],mw);function Au(e,t=ze){return Im(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function eM(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var t8;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(t8||(t8={}));var tM=60,rM=tM*60,vw=rM*24,mJ=vw*7,vJ=vw*30,wJ=vw*365;function iM(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var sM={DateTimeFormat(e,t){try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}},Collator(e,t){try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}},Segmenter(e,t){try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}},Locale(e,t){try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(Gs,t)}}},r8;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(r8||(r8={}));function i8(e){return e<0?0:e>255?255:e|0}function uc(e){return e<0?0:e>4294967295?4294967295:e|0}var s8=class J3{constructor(t){const r=i8(t);this.c=r,this.a=J3.d(r),this.b=new Map}static d(t){const r=new Uint8Array(256);return r.fill(t),r}set(t,r){const i=i8(r);t>=0&&t<256?this.a[t]=i:this.b.set(t,i)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},n8;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(n8||(n8={}));var o8;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(o8||(o8={}));var nM=class extends s8{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=sM.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let r=0,i=e.length;r<i;r++)this.set(e.charCodeAt(r),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let r=null;for(const i of this.h(e)){if(i.index>t)break;r=i}return r}findNextIntlWordAtOrAfterOffset(e,t){for(const r of this.h(e))if(!(r.index<t))return r;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const r of e)this.k(r)&&t.push(r);return t}k(e){return!!e.isWordLike}},a8=new Mc(10);function oM(e,t){const r=`${e}/${t.join(",")}`;let i=a8.get(r);return i||(i=new nM(e,t),a8.set(r,i)),i}var ww;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(ww||(ww={}));var c8;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(c8||(c8={}));var l8;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(l8||(l8={}));var u8;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(u8||(u8={}));var h8;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(h8||(h8={}));var d8;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(d8||(d8={}));var f8;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(f8||(f8={}));var p8;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(p8||(p8={}));var bw=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},g8;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(g8||(g8={}));var m8;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(m8||(m8={}));var v8;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(v8||(v8={}));var aM=class{constructor(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}},cM=class{constructor(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}},w8=class{constructor(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=b8(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=M4(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new aM(t,this.wordSeparators?oM(this.wordSeparators,[]):null,r?this.searchString:null)}};function b8(e){if(!e||e.length===0)return!1;for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i===10)return!0;if(i===92){if(t++,t>=r)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function y8(e,t,r){if(!r)return new bw(e,null);const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s];return new bw(e,i)}function lM(e,t,r,i,s){if(i===0)return!0;const n=t.charCodeAt(i-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i);if(e.get(o)!==0)return!0}return!1}function uM(e,t,r,i,s){if(i+s===r)return!0;const n=t.charCodeAt(i+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i+s-1);if(e.get(o)!==0)return!0}return!1}function x8(e,t,r,i,s){return lM(e,t,r,i,s)&&uM(e,t,r,i,s)}var hM=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let r;do{if(this.b+this.c===t||(r=this.a.exec(e),!r))return null;const i=r.index,s=r[0].length;if(i===this.b&&s===this.c){if(s===0){z4(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=i,this.c=s,!this._wordSeparators||x8(this._wordSeparators,e,t,i,s))return r}while(r);return null}};function E8(e){return e.scheme!==V.file&&e.scheme!==V.vscodeRemote}function dM(e){if(e.folders.length)return e.folders.every(t=>E8(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&E8(e.configuration))return e.configuration}function fM(e){return dM(e)?.scheme}var k8=z1,S8=J("remoteAgentService"),bJ=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let i=0;i<this.maxSampleCount;i++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await lr(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let r;return this.initial.length<this.maxInitialCount?this.initial.push(t):r=this.initial.reduce((i,s)=>i+s,0)/this.initial.length,this.lastMeasurement={initial:r,current:t,average:this.average.reduce((i,s)=>i+s,0)/this.average.length,high:typeof r>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>r*this.highLatencyMultiple},this.lastMeasurement}},yw,pM=J("pathService"),$8=yw=class{constructor(t,r,i,s){this.d=t,this.e=r,this.f=i,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||vm)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,r,i){return typeof r=="string"||typeof r>"u"?this.a.then(s=>this.h(t,s,r)):this.h(t,r,i)}h(t,r,i){return t.scheme===V.file||t.scheme===V.vscodeRemote?MD(i??ji(t),r===1):!0}get defaultUriScheme(){return yw.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,r){if(t.remoteAuthority)return V.vscodeRemote;const i=fM(r.getWorkspace());if(i)return i;const s=r.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=r.getWorkspace().configuration;return n?n.scheme:V.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Tt:Re)}async fileURI(t){let r="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(r=t.substring(2),t="/"):(r=t.substring(2,s),t=t.substring(s)||"/")}return x.from({scheme:V.file,authority:r,path:t,query:"",fragment:""})}};$8=yw=__decorate([__param(1,S8),__param(2,k8),__param(3,sd)],$8);function gM(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var C8=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}aiText(t,r,i={}){return{...this.j(r?.map(d1),i),type:3,contentPattern:t}}text(t,r,i={}){t=this.h(t,i);const s=this.a.getValue(),n=r&&r.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(r?.map(d1),i),type:2,contentPattern:t,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:i.surroundingContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}h(t,r){const i=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:i.editor.wordSeparators};return this.l(t,r)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),r.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=r.notebookSearchConfig.includeMarkupInput),r.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=r.notebookSearchConfig.includeMarkupPreview),r.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=r.notebookSearchConfig.includeCodeInput),r.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=r.notebookSearchConfig.includeOutput),s}file(t,r={}){return{...this.j(t,r),type:1,filePattern:r.filePattern?r.filePattern.trim():r.filePattern,exists:r.exists,sortByScore:r.sortByScore,cacheKey:r.cacheKey,shouldGlobMatchFilePattern:r.shouldGlobSearch}}i(t,r){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(i=>i.length>0).map(jp),!t.length)return{}}else t=jp(t);return r?this.parseSearchPaths(t):{pattern:xw(...Array.isArray(t)?t:[t])}}j(t=[],r={}){let i=Array.isArray(r.excludePattern)?r.excludePattern.map(u=>u.pattern).flat():r.excludePattern;i=i?.length===1?i[0]:i;const s=this.i(r.includePattern,r.expandPatterns),n=this.i(i,r.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,r,n)):t.map(u=>this.u(u,r,n,o))).filter(u=>!!u),c={_reason:r._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:r.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:r.onlyOpenEditors,maxResults:r.maxResults,onlyFileScheme:r.onlyFileScheme};if(r.onlyOpenEditors){const u=St(this.c.groups.flatMap(f=>f.editors.map(g=>g.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>l9(c,f.fsPath)),d=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(d)),{...c,...d}}const l=r.extraFileResources&&r.extraFileResources.filter(u=>l9(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const r=[],i=new zt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===V.walkThrough)return;if(i2(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=i.get(c);l||(n=!0,l={folder:c,includePattern:{}},r.push(l),i.set(c,l));const u=Xo(c.fsPath,o.fsPath);Zo(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:r,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,r){if(r.isSmartCase){if(t.isRegExp){if(G4(t.pattern,!0))return!0}else if(G4(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&b8(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const r=h=>Ui(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:vM(t)).map(h=>{const d=this.f.resolvedUserHome;return d?eM(h,d.scheme===V.file?d.fsPath:d.path):h}),n=om(s,h=>r(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>Ks(h,"/")).map(h=>Ks(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),wM(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=xw(...l);return u&&(a.pattern=u),a}n(t,r){return r.disregardExcludeSettings?void 0:rO(t,!r.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const r=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=mM(s);return o&&(o=Ew(o)),this.q(n).flatMap(c=>this.r(c,o))}),i=new Map;return r.forEach(s=>{const n=s.searchPath.toString(),o=i.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):i.set(n,{searchPath:s.searchPath,pattern:s.pattern?xw(s.pattern):void 0})}),Array.from(i.values())}q(t){if(Ui(t)){const r=this.b.getWorkspace().folders;return r[0]&&r[0].uri.scheme!==V.file?[{searchPath:r[0].uri.with({path:t})}]:[{searchPath:x.file(ls(t))}]}if(this.b.getWorkbenchState()===2){const r=this.b.getWorkspace().folders[0].uri;if(t=jp(t),t.startsWith("../")||t===".."){const s=Re.resolve(r.path,t);return[{searchPath:r.with({path:s})}]}const i=Ew(t);return[{searchPath:r,pattern:i}]}else{if(t==="./"||t===".\\")return[];{const r=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=r.match(new RegExp(`^${Zs(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Hn);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&Ew(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=p(13106,null,o);throw new Error(a)}}}}r(t,r){const i=t.pattern&&r?`${t.pattern}/${r}`:t.pattern||r,s=[{searchPath:t.searchPath,pattern:i}];return i&&!i.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:i+"/**"}),s}t(t,r,i){const s=this.u(d1(t.searchPath),r,i,!1);return s?{...s,includePattern:t.pattern}:null}u(t,r,i,s){let n;const o=x.isUri(t)?t:t.uri;let a=r.excludePattern?.map(f=>{const g=r.excludePattern&&gM(f)?f.uri:void 0;return!g||!(x.isUri(t)&&this.g.extUri.isEqual(t,g))?g:void 0});if(a?.length||(a=[void 0]),i.searchPaths){const f=i.searchPaths.filter(g=>g5(g.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,r)||{},...n||{}},h=x.isUri(t)?ji(t):t.name,d=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:d,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof r.disregardIgnoreFiles=="boolean"?r.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof r.disregardGlobalIgnoreFiles=="boolean"?r.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof r.disregardParentIgnoreFiles=="boolean"?r.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof r.ignoreSymlinks=="boolean"?r.ignoreSymlinks:!c.search.followSymlinks}}};C8=__decorate([__param(0,xs),__param(1,sd),__param(2,fF),__param(3,$e),__param(4,pM),__param(5,p7)],C8);function mM(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const r=t.index,i=e.substr(0,r).match(/[/|\\][^/\\]*$/);if(i){let s=e.substr(0,i.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((i.index||0)+1)}}}return{pathPortion:e}}function xw(...e){return e.length?e.reduce((t,r)=>(t[r]=!0,t),Object.create(null)):void 0}function vM(e){return kl(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function wM(e){return[`**/${e}/**`,`**/${e}`].map(r=>r.replace(/\*\*\/\*\*/g,"**"))}function jp(e){return e.replace(/\\/g,"/")}function Ew(e){return jp(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var bM=7e3;function yM(e,t){const r=t.activationEvents;if(!r)return Promise.resolve(void 0);const i=[],s=[];for(const u of r)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):i.push(h)}if(i.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=x5(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>xM(e,u,a))).then(()=>{}),l=EM(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function xM(e,t,r){for(const i of e.folders)if(await e.exists(Ct(x.revive(i),t))){r(`workspaceContains:${t}`);return}}async function EM(e,t,r,i){if(r.length===0)return Promise.resolve(void 0);const s=new rt,n=e.checkExists(e.folders,r,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${r.join(",")}`)},bM);let a=!1;try{a=await n}catch(c){Ni(c)||pt(c)}s.dispose(),clearTimeout(o),a&&i(`workspaceContains:${r.join(",")}`)}var I8=class{constructor(e){this.b=new P,this.onDidChangePassword=this.b.event,this.a=e.getProxy(Q.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,r){return this.a.$setPassword(e,t,r)}delete(e,t){return this.a.$deletePassword(e,t)}},kw=J("IExtHostSecretState"),kM=class{#e;constructor(e,t){this.disposables=new he,this.a=Je.toKey(e.identifier),this.#e=t,this.onDidChange=je.map(je.filter(this.#e.onDidChangePassword,r=>r.extensionId===this.a),r=>({key:r.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},Sw=class{constructor(t,r,i){this.f=i,this.d=new Map,this.a=r.getProxy(Q.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===Gs}getMessage(t,r){const{message:i,args:s,comment:n}=r;if(this.c)return O4(i,s??{});let o=i;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),O4(a??i,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let r;const i=await this.g(t);if(!i){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(i),n=JSON.parse(s);r=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${i}: ${s.message}`);return}r&&this.d.set(t.identifier.value,{contents:r,uri:i})}async g(t){if(t.isBuiltin){const r=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return x.revive(r)}return t.l10n?x.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};Sw=__decorate([__param(0,Ot),__param(1,Ae),__param(2,$e)],Sw);var $w=J("IExtHostLocalizationService"),Cw=J("IExtHostManagedSockets"),Iw=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(Q.MainThreadManagedSockets)}setFactory(t,r){for(const i of this.d.values())i.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new SM(t,r),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const r=++this.b,i=await this.c.makeConnection(),s=new he;return this.d.set(r,new $M(r,i,s)),s.add(te(()=>this.d.delete(r))),s.add(i.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(r),s.dispose()})),s.add(i.onDidClose(n=>{this.a.$onDidManagedSocketClose(r,n?.stack??n?.message),s.dispose()})),s.add(i.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(r,Y.wrap(n)))),r}$remoteSocketWrite(t,r){this.d.get(t)?.actual.send(r.buffer)}$remoteSocketEnd(t){const r=this.d.get(t);r&&(r.actual.end(),r.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};Iw=__decorate([__param(0,Ae)],Iw);var SM=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},$M=class extends K{constructor(e,t,r){super(),this.socketId=e,this.actual=t,this.B(r)}},Pw,P8=J("IHostUtils"),Dw=Pw=class extends K{constructor(t,r,i,s,n,o,a,c,l,u,h,d,f){super(),this.Y=d,this.Z=f,this.a=this.B(new P),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=r,this.g=i,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(Q.MainThreadWorkspace),this.z=this.g.getProxy(Q.MainThreadTelemetry),this.C=this.g.getProxy(Q.MainThreadExtensionService),this.D=new Xr,this.F=new Xr,this.G=new Xr,this.H=new Xr,this.I=new IM(this.f.extensions.activationEvents),this.L=new $u(this.I,this.f.extensions.allExtensions);const g=new Kn(this.f.extensions.myExtensions);this.J=new $u(this.I,T8(this.L,g)),Fn&&(this.s.info(`Creating extension host with the following global extensions: ${hc(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${hc(this.J)}`)),this.M=new j9(this.g,this.s),this.N=new I8(this.g),this.O=c,this.h=this.q.add(t.createChild(new l1([ew,this.M],[kw,this.N]))),this.P=this.B(new Z0(this.J,this.L,{onExtensionActivationError:(v,y,E)=>{this.C.$onExtensionActivationError(v,Nc(y),E)},actualActivateExtension:async(v,y)=>{if($u.isHostExtension(v,this.J,this.L))return await this.C.$activateExtension(v,y),new RO;const E=this.J.getExtensionDescription(v);return this.fb(E,y)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),xt("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){pt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,r=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),am(s=>{this.s.error(s)}),this.g.dispose();const i=this.$();Promise.race([lr(5e3),i]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${r}`):this.s.info(`Extension host exiting with code ${r}`),this.s.flush(),this.s.dispose(),this.c.exit(r)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const r=await this.C.$getExtension(t);return r&&{...r,identifier:new Je(r.identifier.value),extensionLocation:x.revive(r.extensionLocation)}}ab(t,r){return this.P.activateByEvent(t,r)}bb(t,r){return this.P.activateById(t,r)}activateByIdWithErrors(t,r){return this.bb(t,r).then(()=>{const i=this.P.getActivatedExtension(t);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===V.file&&this.c.fsRealpath){const r=t.fsPath;this.R.has(r)||this.R.set(r,this.c.fsRealpath(r));const i=await this.R.get(r);return x.file(i)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new CM(t))),this.Q}async db(t){const r=an.forUris(i=>Am.ignorePathCasing(i));return await Promise.all(t.map(async i=>{if(this.wb(i)){const s=await this.cb(i.extensionLocation);r.set(s,i)}})),r}eb(t){let r=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return r;const i=this.P.getActivatedExtension(t);if(!i)return r;try{typeof i.module.deactivate=="function"&&(r=Promise.resolve(i.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{i.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return r}async fb(t,r){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,r).then(i=>{const s=i.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,r),this.gb(t,r,"success",s),i},i=>{throw this.gb(t,r,"failure"),i})}gb(t,r,i,s){const n=A8(t,r);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:i})}hb(t,r){const i=A8(t,r);this.z.$publicLog2("activatePlugin",i);const s=this.wb(t);if(!s)return Promise.resolve(new TO(Ap.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${r.startup}, activationEvent: '${r.activationEvent}'${t.identifier.value!==r.extensionId.value?`, root cause: ${r.extensionId.value}`:""}`),this.s.flush();const n=new he,o=new U9(r.startup);return Promise.all([this.xb(t,Ct(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>(xt(`code/extHost/willActivateExtension/${t.identifier.value}`),Pw.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>(xt(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,r){const i=this.Z.createLanguageModelAccessInformation(t),s=r.add(new LO(t,this.M)),n=r.add(new H9(t.identifier.value,!1,this.M)),o=r.add(new kM(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?_a.Test:_a.Development:_a.Production,c=this.f.remote.isRemote?vo.Workspace:vo.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const d=Vt(t,"ipc")?this.f.messagePorts?.get(Je.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return i},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return Ve(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Ve(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return x.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Tu(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return L(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!d)return;const f=je.buffer(je.fromDOMEventEmitter(d,"message",g=>g.data));d.start(),h={onDidReceiveMessage:f,postMessage:d.postMessage.bind(d)}}return h}})})}static jb(t,r,i,s,n,o){return i=i||{activate:void 0,deactivate:void 0},this.kb(t,r,i,s,o).then(a=>new Tp(!1,null,o.build(),i,a,te(()=>{n.dispose(),ai(s.subscriptions)})))}static kb(t,r,i,s,n){if(typeof i.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${r.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}lb(t,r){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:r}).then(void 0,i=>{this.s.error(i)})}mb(t,r=0){const s=Date.now();I4(()=>{for(let n=r;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(N2()),this.m.getConfigProvider().then(t=>{const r=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this.J.getAllExtensionDescriptions();if(r)this.mb(i);else for(const s of i)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const r=this.j.workspace?this.j.workspace.folders:[],i=this.pb(r),s=this.rb(),n=Promise.all([s,t,i]).then(()=>{});return Promise.race([n,lr(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(r=>this.qb(t,r))).then(()=>{})}async qb(t,r){if(this.isActivated(r.identifier))return;const i=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:i||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await yM(s,r);if(n)return this.bb(r.identifier,{startup:!0,extensionId:r.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:r}=this.f.environment;if(!t||!r)throw new Error(p(2751,null));const i=await this.xb(null,r,new U9(!1));if(!i||typeof i.run!="function")throw new Error(p(2752,null,r.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(Fn&&this.s.error("Test runner called back with error",l),n(l)):(Fn&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=ui(r),c=i.run(a,o);c&&c.then&&c.then(()=>{Fn&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{Fn&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),lr(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,r){return this.S[t]=r,te(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:r}=await this.ub(t);return r?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const r=t.indexOf("+");if(r===-1)throw new xa("Not an authority that can be resolved!",xr.InvalidAuthority);const i=t.substr(0,r);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this.S[i]}}async $resolveAuthority(t,r){const i=Ar.create(!1),s=()=>`[resolveAuthority(${yk(t)},${r})][${i.elapsed()}ms] `,n=k=>this.s.info(`${s()}${k}`),o=k=>this.s.warn(`${s()}${k}`),a=(k,I=void 0)=>this.s.error(`${s()}${k}`,I),c=k=>{if(k instanceof xa)return{type:"error",error:{code:k._code,message:k._message,detail:k._detail}};throw k},l=async k=>{n(`activating resolver for ${k}...`);const{resolver:I,authorityPrefix:D}=await this.ub(k);if(!I)throw a(`no resolver for ${D}`),new xa(`No remote extension installed to resolve ${D}.`,xr.NoResolverFound);return{resolver:I,authorityPrefix:D,remoteAuthority:k}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async k=>{if(!(k instanceof xa)||k._code!==xr.InvalidAuthority)throw k;return o(`resolving nested authorities failed: ${k.message}`),[await l(t)]})}catch(k){return c(k)}const d=new $5;d.cancelAndSet(()=>n("waiting..."),1e3);let f,g;for(const[k,{authorityPrefix:I,resolver:D,remoteAuthority:T}]of h.entries())try{if(k===h.length-1)n("invoking final resolve()..."),xt(`code/extHost/willResolveAuthority/${I}`),f=await D.resolve(T,{resolveAttempt:r,execServer:g}),xt(`code/extHost/didResolveAuthorityOK/${I}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(D,Jd.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${T}`),xt(`code/extHost/willResolveExecServer/${I}`),g=await D.resolveExecServer?.(T,{resolveAttempt:r,execServer:g}),!g)throw new xa(`Exec server was not available for ${T}`,xr.NoResolverFound);xt(`code/extHost/didResolveExecServerOK/${I}`)}}catch(_){return xt(`code/extHost/didResolveAuthorityError/${I}`),a("returned an error",_),d.dispose(),c(_)}d.dispose();const v={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},y={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${Jd.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let E;if(Jd.isManagedResolvedAuthority(f)){const k=r;this.Y.setFactory(k,f.makeConnection),E={authority:t,connectTo:new bk(k),connectionToken:f.connectionToken}}else E={authority:t,connectTo:new $F(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:E,options:y,tunnelInformation:v}}}async $getCanonicalURI(t,r){this.s.info(`$getCanonicalURI invoked for authority (${yk(t)})`);const{resolver:i}=await this.ub(t);if(!i)return null;const s=x.revive(r);if(typeof i.getCanonicalURI>"u")return s;const n=await sr(()=>i.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=x.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=D8(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Fn&&(this.s.info(`$startExtensionHost: global extensions: ${hc(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${hc(this.J)}`)),this.tb()}$activateByEvent(t,r){return r===1?this.D.wait().then(i=>this.ab(t,!1)):this.G.wait().then(i=>this.ab(t,!1))}async $activate(t,r){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,r),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=x.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=D8(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Fn&&(this.s.info(`$deltaExtensions: global extensions: ${hc(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${hc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const r=Y.alloc(t),i=Math.random()%256;for(let s=0;s<t;s++)r.writeUInt8(i,s);return r}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};Dw=Pw=__decorate([__param(0,td),__param(1,P8),__param(2,Ae),__param(3,Si),__param(4,ti),__param(5,$e),__param(6,Ot),__param(7,rw),__param(8,Np),__param(9,Ls),__param(10,$w),__param(11,Cw),__param(12,gw)],Dw);function D8(e,t,r,i){e.addActivationEvents(i.addActivationEvents);const s=new $u(e,t.getAllExtensionDescriptions());s.deltaExtensions(i.toAdd,i.toRemove);const n=new Kn(r.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)n.delete(a);for(const a of i.myToAdd)n.add(a);const o=T8(s,n);return{globalRegistry:s,myExtensions:o}}function A8(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function hc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Ns=J("IExtHostExtensionService"),Tu=class{#e;#t;#r;constructor(e,t,r,i,s){this.#e=e,this.#t=t,this.#r=r.identifier,this.id=r.identifier.value,this.extensionUri=r.extensionLocation,this.extensionPath=ls(ui(r.extensionLocation)),this.packageJSON=r,this.extensionKind=i,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#r)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#r)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#r,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function T8(e,t){return e.getAllExtensionDescriptions().filter(r=>t.has(r.identifier))}var CM=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},IM=class{constructor(e){this.a=new ys,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},R8=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get($e),i=e.get(Ae).getProxy(Q.MainThreadErrors);am(s=>{t.error(s);const n=Nc(s);i.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get($e),r=e.get(Ae),i=e.get(Ns),s=e.get(Op),n=r.getProxy(Q.MainThreadExtensionService),o=r.getProxy(Q.MainThreadErrors),a=await i.getExtensionPathIndex(),c=new WeakMap;function l(d,f){if(c.has(d))return c.get(d).stack;let g="",v,y;for(const k of f)g+=`
	at ${k.toString()}`,y=k.getFileName(),!v&&y&&(v=a.findSubstr(x.file(y)));const E=`${d.name||"Error"}: ${d.message||""}${g}`;return c.set(d,{extensionIdentifier:v?.identifier,stack:E}),E}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(d){if(d===l||!d||d[u]){h=d||l;return}h=function(f,g){return l(f,g),d.call(Error,f,g)},Object.assign(h,{[u]:!0})}}),am(d=>{t.error(d);const f=Nc(d),g=c.get(d);if(!g?.extensionIdentifier){o.$onUnexpectedError(f);return}n.$onExtensionRuntimeError(g.extensionIdentifier,f);const v=s.onExtensionError(g.extensionIdentifier,d);t.trace("forwarded error to extension?",v,g)})}},PM=class Q3{constructor(t,r,i,s,n){this.a=i,this.b=new LT(t,null,s),r=Q3.e(r,this.b);const o=new l1(...nR());o.set(Ot,{_serviceBrand:void 0,...r,messagePorts:n}),o.set(Ae,new lR(this.b)),o.set(nl,new uR(s)),o.set(P8,i);const a=new cR(o,!0);a.invokeFunction(R8.installEarlyHandler),this.d=a.invokeFunction(c=>c.get($e)),xt("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",r),this.c=a.invokeFunction(c=>c.get(Ns)),this.c.initialize(),a.invokeFunction(R8.installFullHandler)}async asBrowserUri(t){const r=this.b.getProxy(Q.MainThreadExtensionService);return x.revive(await r.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,r){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=x.revive(r.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=x.revive(r.transformIncomingURIs(t.environment.appRoot));const i=t.environment.extensionDevelopmentLocationURI;return i&&(t.environment.extensionDevelopmentLocationURI=i.map(s=>x.revive(r.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=x.revive(r.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=x.revive(r.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=x.revive(r.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=x.revive(r.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=x.revive(r.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=x.revive(r.transformIncomingURIs(t.logsLocation)),t.workspace=r.transformIncomingURIs(t.workspace),t}};function DM(e){return{transformIncoming:t=>t.scheme==="vscode-remote"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="file"?{scheme:"vscode-local",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoing:t=>t.scheme==="file"?{scheme:"vscode-remote",authority:e,path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="vscode-local"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoingScheme:t=>t==="file"?"vscode-remote":t==="vscode-local"?"file":t}}function AM(e){return new CT(DM(e))}var L8;(function(e){e[e.IPC=1]="IPC",e[e.Socket=2]="Socket",e[e.MessagePort=3]="MessagePort"})(L8||(L8={}));var Hp=class Y3{static{this.ENV_KEY="VSCODE_EXTHOST_IPC_HOOK"}constructor(t){this.pipeName=t,this.type=1}serialize(t){t[Y3.ENV_KEY]=this.pipeName}},Aw=class X3{constructor(){this.type=2}static{this.ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET"}serialize(t){t[X3.ENV_KEY]="1"}},Tw=class Z3{constructor(){this.type=3}static{this.ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT"}serialize(t){t[Z3.ENV_KEY]="1"}};function TM(e){delete e[Hp.ENV_KEY],delete e[Aw.ENV_KEY],delete e[Tw.ENV_KEY]}function RM(e){if(e[Hp.ENV_KEY])return Rw(e,new Hp(e[Hp.ENV_KEY]));if(e[Aw.ENV_KEY])return Rw(e,new Aw);if(e[Tw.ENV_KEY])return Rw(e,new Tw);throw new Error("No connection information defined in environment!")}function Rw(e,t){return TM(e),t}var $J=new H("inOutput",!1),CJ=new H("activeLogOutput",!1),IJ=new H("activeLogOutput.levelSettable",!1),PJ=new H("activeLogOutput.level",""),DJ=new H("activeLogOutput.levelIsDefault",!1),AJ=new H("outputView.scrollLock",!1),TJ=J("outputService"),Ru;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Ru||(Ru={}));var LM={OutputChannels:"workbench.contributions.outputChannels"},NM=class{constructor(){this.a=new Map,this.b=new P,this.onDidRegisterChannel=this.b.event,this.c=new P,this.onDidRemoveChannel=this.c.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}removeChannel(e){this.a.delete(e),this.c.fire(e)}};er.add(LM.OutputChannels,new NM);var RJ=new H("activeOutputChannel",""),N8=class extends c1{constructor(e,t,r,i,s){super(),this.id=e,this.name=t,this.r=r,this.s=i,this.extension=s,this.n=0,this.visible=!1,this.setLevel(r.getLevel()),this.B(r.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(te(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,Ru.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,Ru.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=Y.fromString(t).byteLength,eR(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,Ru.Append))}},FM=class extends N8{appendLine(e){this.append(e)}},Lw=class{constructor(t,r,i,s,n,o){this.i=r,this.j=i,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(Q.MainThreadOutputService),this.b=this.k.extUri.joinPath(r.logsLocation,`output_logging_${iM(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[r,i]of this.g)i.visible=r===this.h}createOutputChannel(t,r,i){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof r=="object"&&r.log,n=Pe(r)?r:void 0;if(Pe(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Je.equals(i.identifier,u))?.[1];a&&(o=sR(a));const c=new he,l=s?this.o(t,o,i,c):this.n(t,n,i,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(te(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,r,i,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,r,i.identifier.value);return s.add(te(()=>this.l.deregisterLogger(o))),new N8(c,t,a,this.a,i)}async o(t,r,i,s){const n=await this.p(i),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${i.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:r,extensionId:i.identifier.value}));return s.add(te(()=>this.l.deregisterLogger(a))),new FM(c,t,l,this.a,i)}p(t){let r=this.d.get(t.identifier.value);if(!r){const i=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,r=(async()=>{try{await this.j.value.createDirectory(i)}catch(s){if(md(s)!==oe.FileExists)throw s}return i})())}return r}q(t,r,i){const s=()=>{if(i.isDisposed)throw new Error("Channel has been closed")};return r.then(n=>i.add(n)),{get name(){return t},append(n){s(),r.then(o=>o.append(n))},appendLine(n){s(),r.then(o=>o.appendLine(n))},clear(){s(),r.then(n=>n.clear())},replace(n){s(),r.then(o=>o.replace(n))},show(n,o){s(),r.then(a=>a.show(n,o))},hide(){s(),r.then(n=>n.hide())},dispose(){i.dispose()}}}r(t,r,i,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new P);function a(c){r=c,o.fire(c)}return i.then(c=>{c.logLevel!==r&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,i,s),get logLevel(){return r},onDidChangeLogLevel:o.event,trace(c,...l){n(),i.then(u=>u.trace(c,...l))},debug(c,...l){n(),i.then(u=>u.debug(c,...l))},info(c,...l){n(),i.then(u=>u.info(c,...l))},warn(c,...l){n(),i.then(u=>u.warn(c,...l))},error(c,...l){n(),i.then(u=>u.error(c,...l))}}}};Lw=__decorate([__param(0,Ae),__param(1,Ot),__param(2,Cu),__param(3,ca),__param(4,oa),__param(5,$e)],Lw);var F8=J("IExtHostOutputService"),Lu,Nw=class{static{Lu=this}static{this.c=0}static{this.d=250}constructor(t,r){this.h=r,this.f=new Map,this.g=t.getProxy(Q.MainThreadDecorations)}registerFileDecorationProvider(t,r){const i=Lu.c++;this.f.set(i,{provider:t,extensionDescription:r}),this.g.$registerDecorationProvider(i,r.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(i,null);return}const o=Oi(n);if(o.length<=Lu.d){this.g.$onDidChange(i,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",r.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:lD(u.path,"/")})),c=aP(a,(u,h)=>u.rank-h.rank||jn(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const d of u){const f=gr(d.uri.path);if(h!==f&&(h=f,l.push(d.uri)>=Lu.d))break e}}this.g.$onDidChange(i,l)});return new Te(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(i),this.f.delete(i)})}async $provideDecorations(t,r,i){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(r.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(x.revive(c),i));if(!u)return;try{Ov.validate(u),u.badge&&typeof u.badge!="string"&&L(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};Nw=Lu=__decorate([__param(0,Ae),__param(1,$e)],Nw);var O8=J("IExtHostDecorations"),OM=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=uc(e);const r=this.a,i=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(r.length+s),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=uc(e),t=uc(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=uc(e),t=uc(t);const r=this.a,i=this.b;if(e>=r.length)return!1;const s=r.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(r.length-t),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=uc(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let r=t;r<=e;r++)this.b[r]=this.b[r-1]+this.a[r];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.a.length-1,i=0,s=0,n=0;for(;t<=r;)if(i=t+(r-t)/2|0,s=this.b[i],n=s-this.a[i],e<n)r=i-1;else if(e>=s)t=i+1;else break;return new MM(i,e-n)}},MM=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},UM=class{constructor(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const r of t)this.k(r.range),this.l(new Vr(r.range.startLineNumber,r.range.startColumn),r.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,r=new Uint32Array(t);for(let i=0;i<t;i++)r[i]=this.b[i].length+e;this.f=new OM(r)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const r=j4(t);if(r.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]+this.b[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]);const i=new Uint32Array(r.length-1);for(let s=1;s<r.length;s++)this.b.splice(e.lineNumber+s-1,0,r[s]),i[s-1]=r[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,i)}},Fw=new Map;function jM(e,t){t?Fw.set(e,t):Fw.delete(e)}function HM(e){return Fw.get(e)}var BM=class extends UM{constructor(e,t,r,i,s,n,o){super(t,r,i,s),this.o=e,this.p=n,this.q=o,this.n=!1}dispose(){yr(!this.n),this.n=!0,this.q=!1}equalLines(e){return Fi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===V.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.c===`
`?yi.LF:yi.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,r){return e.y(t,r)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){yr(!this.n),this.p=e}_acceptIsDirty(e){yr(!this.n),this.q=e}r(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const r=this.c,i=t.start.line,s=t.end.line,n=[];n.push(this.b[i].substring(t.start.character));for(let o=i+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(r)}t(e){let t;if(e instanceof Ie?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new _M(t,this.b[t],t===this.b.length-1)}u(e){return e=this.x(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),r=this.b[t.index].length;return new Ie(t.index,Math.min(t.remainder,r))}w(e){if(!(e instanceof Ee))throw new Error("Invalid argument");const t=this.x(e.start),r=this.x(e.end);return t===e.start&&r===e.end?e:new Ee(t.line,t.character,r.line,r.character)}x(e){if(!(e instanceof Ie))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.b.length)t=this.b.length-1,r=this.b[t].length,i=!0;else{const s=this.b[t].length;r<0?(r=0,i=!0):r>s&&(r=s,i=!0)}return i?new Ie(t,r):e}y(e,t){const r=this.x(e);if(!t)t=HM(this.p);else if(U4(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const i=m6(r.character+1,p6(t),this.b[r.line],0);if(i)return new Ee(r.line,i.startColumn-1,r.line,i.endColumn-1)}},_M=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Ee(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Ee(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Bp=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},FJ=new Bp("id#"),zM=class K3{static{this.c=new Bp("TextEditorDecorationType")}constructor(t,r,i){const s=K3.c.nextId();t.$registerTextEditorDecorationType(r.identifier,s,c0.from(i)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},WM=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let r=null;if(e instanceof Ie)r=new Ee(e,e);else if(e instanceof Ee)r=e;else throw new Error("Unrecognized location");this.l(r,t,!1)}insert(e,t){this.k(),this.l(new Ee(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Ee)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,r){const i=this.c.validateRange(e);this.g.push({range:i,text:t,forceMoveMarkers:r})}setEndOfLine(e){if(this.k(),e!==yi.LF&&e!==yi.CRLF)throw Se("endOfLine");this.h=e}},VM=class{constructor(e,t,r,i){this.c=e,this.d=t,this._accept(r),this.e=i;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=Ya.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:Ya.from(e)})))}assign(e){const t={};let r=!1;if(typeof e.tabSize<"u"){const i=this.m(e.tabSize);i==="auto"?(r=!0,t.tabSize=i):typeof i=="number"&&this.f!==i&&(this.f=i,r=!0,t.tabSize=i)}if(typeof e.indentSize<"u"){const i=this.o(e.indentSize);i==="tabSize"?(r=!0,t.indentSize=i):typeof i=="number"&&this.h!==i&&(this.g=i,this.h=i,r=!0,t.indentSize=i)}if(typeof e.insertSpaces<"u"){const i=this.q(e.insertSpaces);i==="auto"?(r=!0,t.insertSpaces=i):this.j!==i&&(this.j=i,r=!0,t.insertSpaces=i)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,r=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,r=!0,t.lineNumbers=Ya.from(e.lineNumbers)),r&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(r=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(r)})}},qM=class{constructor(e,t,r,i,s,n,o,a){this.id=e,this.k=t,this.l=r,this.g=!1,this.h=new Set,this.c=s,this.d=new VM(this.k,this.id,n,r),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return i.value},set document(l){throw new Nn("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof ks))throw Se("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof ks)))throw Se("selections");c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new Nn("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new Nn("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new WM(i.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let d;if(!u||Array.isArray(u)&&u.length===0)d=c.c.map(f=>O.from(f));else if(u instanceof Ie){const{lineNumber:f,column:g}=Be.from(u);d=[{startLineNumber:f,startColumn:g,endLineNumber:f,endColumn:g}]}else if(u instanceof Ee)d=[O.from(u)];else{d=[];for(const f of u)if(f instanceof Ee)d.push(O.from(f));else{const{lineNumber:g,column:v}=Be.from(f);d.push({startLineNumber:g,startColumn:v,endLineNumber:g,endColumn:v})}}return t.$tryInsertSnippet(e,i.value.version,l.value,d,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(Zk(u))return t.$trySetDecorations(e,l.key,ZF(u));{const d=new Array(4*u.length);for(let f=0,g=u.length;f<g;f++){const v=u[f];d[4*f]=v.start.line+1,d[4*f+1]=v.start.character+1,d[4*f+2]=v.end.line+1,d[4*f+3]=v.end.character+1}return t.$trySetDecorationsFast(e,l.key,d)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,O.from(l),u||af.Default))},show(l){t.$tryShowEditor(e,Ut.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){yr(!this.g),this.g=!0}_acceptOptions(e){yr(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){yr(!this.g),this.e=e}_acceptViewColumn(e){yr(!this.g),this.f=e}_acceptSelections(e){yr(!this.g),this.c=e}_acceptDiffInformation(e){yr(!this.g),this.j=e}async m(){const e=this.c.map(Ei.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const r=t.edits.map(s=>s.range);r.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=r.length-1;s<n;s++){const o=r[s].end;if(r[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const i=t.edits.map(s=>({range:O.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,i,{setEndOfLine:typeof t.setEndOfLine=="number"?Xa.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},GM=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},Ow=class{constructor(t,r){this.h=t,this.i=r,this.a=null,this.b=new Map,this.c=new zt,this.d=new P,this.e=new P,this.f=new P,this.g=new P,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const r=[],i=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=x.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),r.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=x.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==V.vscodeNotebookCell&&o.scheme!==V.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new GM(new BM(this.h.getProxy(Q.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty)),this.c.set(o,a),i.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=x.revive(n.documentUri);yr(this.c.has(o),`document '${o}' does not exist`),yr(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new qM(n.id,this.h.getProxy(Q.MainThreadTextEditors),this.i,new Lr(()=>a.document),n.selections.map(Ei.to),n.options,n.visibleRanges.map(l=>O.to(l)),typeof n.editorPosition=="number"?Ut.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(yr(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),ai(r),ai(s),t.removedDocuments&&this.e.fire(r),t.addedDocuments&&this.d.fire(i),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Hr.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const r=this.b.get(this.a);return t?r:r?.value}allEditors(){return[...this.b.values()]}};Ow=__decorate([__param(0,Ae),__param(1,$e)],Ow);var Po=J("IExtHostDocumentsAndEditors"),Nu=J("IExtHostApiDeprecationService"),Mw=class{constructor(t,r){this.c=r,this.a=new Set,this.b=t.getProxy(Q.MainThreadTelemetry)}report(t,r,i){const s=this.d(t,r);this.a.has(s)||(this.a.add(s),r.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${i}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:r.identifier.value,apiId:t}))}d(t,r){return`${t}-${r.identifier.value}`}};Mw=__decorate([__param(0,Ae),__param(1,$e)],Mw);var UJ=Object.freeze(new class{report(e,t,r){}}),JM={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},_p=Object.freeze(JM),Uw=er.as(xd.JSONContribution),QM=class Yg{static a(t){const r=new Kn;for(let i=0,s=t.length;i<s;i++)r.add(t[i].description.identifier);return r}static compute(t,r){if(!t||!t.length)return new Yg(r,[]);if(!r||!r.length)return new Yg([],t);const i=this.a(t),s=this.a(r),n=r.filter(a=>!i.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Yg(n,o)}constructor(t,r){this.added=t,this.removed=r}},YM=class{constructor(e,t,r){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=r,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=QM.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){pt(e)}}},XM={type:"string",enum:["ui","workspace"],enumDescriptions:[p(12810,null),p(12811,null)]},M8="vscode://schemas/vscode-extensions",jw={properties:{engines:{type:"object",description:p(12812,null),properties:{vscode:{type:"string",description:p(12813,null),default:"^1.22.0"}}},publisher:{description:p(12814,null),type:"string"},displayName:{description:p(12815,null),type:"string"},categories:{description:p(12816,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:uN},{type:"string",const:"Languages",deprecationMessage:p(12817,null)}]}},galleryBanner:{type:"object",description:p(12818,null),properties:{color:{description:p(12819,null),type:"string"},theme:{description:p(12820,null),type:"string",enum:["dark","light"]}}},contributes:{description:p(12821,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:p(12822,null)},enableProposedApi:{type:"boolean",deprecationMessage:p(12823,null)},enabledApiProposals:{markdownDescription:p(12824,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(_p).map(e=>e),markdownEnumDescriptions:Object.values(_p).map(e=>e.proposal)}},api:{markdownDescription:p(12825,null),type:"string",enum:["none"],enumDescriptions:[p(12826,null)]},activationEvents:{description:p(12827,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:p(12828,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:p(12829,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:p(12830,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:p(12831,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:p(12832,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:p(12833,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:p(12834,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:p(12835,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:p(12836,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:p(12837,null),body:"onStartupFinished"},{label:"onTaskType",description:p(12838,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:p(12839,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:p(12840,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:p(12841,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:p(12842,null)},{label:"onUri",body:"onUri",description:p(12843,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:p(12844,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:p(12845,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:p(12846,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:p(12847,null)},{label:"onRenderer",description:p(12848,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:p(12849,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:p(12850,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:p(12851,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:p(12852,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:p(12853,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:p(12854,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:p(12855,null)},{label:"*",description:p(12856,null),body:"*"}]}},badges:{type:"array",description:p(12857,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:p(12858,null)},href:{type:"string",description:p(12859,null)},description:{type:"string",description:p(12860,null)}}}},markdown:{type:"string",description:p(12861,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:p(12862,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:p(12863,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Y0}},extensionPack:{description:p(12864,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Y0}},extensionKind:{description:p(12865,null),type:"array",items:XM,default:["workspace"],defaultSnippets:[{body:["ui"],description:p(12866,null)},{body:["workspace"],description:p(12867,null)},{body:["ui","workspace"],description:p(12868,null)},{body:["workspace","ui"],description:p(12869,null)},{body:[],description:p(12870,null)}]},capabilities:{description:p(12871,null),type:"object",properties:{virtualWorkspaces:{description:p(12872,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:p(12873,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(12874,null),p(12875,null),p(12876,null)]},description:{type:"string",markdownDescription:p(12877,null)}}},untrustedWorkspaces:{description:p(12878,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:p(12879,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(12880,null),p(12881,null),p(12882,null)]},restrictedConfigurations:{description:p(12883,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:p(12884,null)}}}}},sponsor:{description:p(12885,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:p(12886,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:p(12887,null),type:"string"},"vscode:uninstall":{description:p(12888,null),type:"string"}}},icon:{type:"string",description:p(12889,null)},l10n:{type:"string",description:p(12890,null)},pricing:{type:"string",markdownDescription:p(12891,null),enum:["Free","Trial"],default:"Free"}}},ZM=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new YM(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&PO.register(e.extensionPoint,e.activationEventsGenerator),jw.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Uw.registerSchema(M8,jw),t}getExtensionPoints(){return Array.from(this.a.values())}},U8={ExtensionsRegistry:"ExtensionsRegistry"};er.add(U8.ExtensionsRegistry,new ZM);var KM=er.as(U8.ExtensionsRegistry);Uw.registerSchema(M8,jw),Uw.registerSchema(hN,{properties:{extensionEnabledApiProposals:{description:p(12892,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(_p),markdownEnumDescriptions:Object.values(_p).map(e=>e.proposal)}}]}}}});var eU={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:p(10350,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:p(10351,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:p(10352,null),default:""}}},Hw;(function(e){function t(r,i,s){if(!r)return;const n=Pe(r.type)?r.type:void 0;if(!n||n.length===0){s.error(p(10353,null));return}const o=[];if(Array.isArray(r.required))for(const a of r.required)Pe(a)&&o.push(a);return{extensionId:i.value,taskType:n,required:o,properties:r.properties?it(r.properties):{},when:r.when?Wt.deserialize(r.when):void 0}}e.from=t})(Hw||(Hw={}));var tU=KM.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const r of e)r.type&&t.push(`onTaskType:${r.type}`)},jsonSchema:{description:p(10354,null),type:"array",items:eU}}),rU=class{constructor(){this.d=new P,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{tU.setHandler((r,i)=>{this.c=void 0;try{for(const s of i.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of i.added){const n=s.value;for(const o of n){const a=Hw.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(i.removed.length>0||i.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const r={type:"object",additionalProperties:!1};t.required.length>0&&(r.required=t.required.slice(0)),t.properties!==void 0?r.properties=it(t.properties):r.properties=Object.create(null),r.properties.type={type:"string",enum:[t.taskType]},e.push(r)}this.c={oneOf:e}}return this.c}},iU=new rU,sU="settings",jJ=new H("taskRunning",!1,p(10355,null)),HJ=pm(10357,"Tasks"),zp;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(zp||(zp={})),function(e){function t(r){if(!r)return e.Strong;switch(r.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(zp||(zp={}));var j8;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(j8||(j8={}));var Fu;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Fu||(Fu={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Fu||(Fu={}));var Ou;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Ou||(Ou={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Ou||(Ou={}));var Mu;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Mu||(Mu={})),function(e){function t(r){switch(r.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Mu||(Mu={}));var H8;(function(e){e.defaults={echo:!0,reveal:Fu.Always,revealProblems:Ou.Never,focus:!1,panel:Mu.Shared,showReuseMessage:!0,clear:!1}})(H8||(H8={}));var Wp;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Wp||(Wp={})),function(e){function t(i){switch(i.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function r(i){switch(i){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=r}(Wp||(Wp={}));var B8;(function(e){function t(r){return Pe(r)?r:r.value}e.value=t})(B8||(B8={}));var _8;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(i){return i===e.Clean._id||i===e.Build._id||i===e.Rebuild._id||i===e.Test._id}e.is=t;function r(i){if(i!==void 0)return Pe(i)?t(i)?{_id:i,isDefault:!1}:void 0:i}e.from=r})(_8||(_8={}));var z8;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(z8||(z8={}));var W8;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(r){switch(r){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(W8||(W8={}));var V8;(function(e){e.parallel="parallel",e.sequence="sequence"})(V8||(V8={}));var Bw;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(Bw||(Bw={}));var q8;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:Bw.default,instanceLimit:1}})(q8||(q8={}));var Vp;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Vp||(Vp={})),function(e){e._default=e.Terminal}(Vp||(Vp={}));var G8;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(G8||(G8={}));var J8;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(J8||(J8={}));var Q8;(function(e){e.SingleRun="singleRun",e.Background="background"})(Q8||(Q8={}));var Y8;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(Y8||(Y8={}));var X8;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function r(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=r;function i(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=i;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})(X8||(X8={}));var qp;(function(e){function t(i){const s=Object.keys(i).sort();let n="";for(const o of s){let a=i[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function r(i){const n={_key:t(i),type:i.taskType};return Object.assign(n,i),n}e.create=r})(qp||(qp={}));var Z8;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(Z8||(Z8={}));var K8;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(K8||(K8={}));var eS;(function(e){function t(r,i){const s=iU.get(r.type);if(s===void 0){const c=it(r);return delete c._key,qp.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=r[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=it(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:i.error(p(10356,null,JSON.stringify(r,void 0,0),c));return}}}return qp.create(n)}e.createTaskIdentifier=t})(eS||(eS={}));var Gp;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Gp||(Gp={}));var Jp;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Jp||(Jp={}));var _w;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(_w||(_w={}));var Uu;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function r(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=_w.from(s.options)),n}e.from=r;function i(s){if(s!=null)return new Ta(s.process,s.args,s.options)}e.to=i})(Uu||(Uu={}));var zw;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(zw||(zw={}));var ju;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function r(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=zw.from(s.options)),n}e.from=r;function i(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new ho(s.commandLine,s.options):new ho(s.command,s.args?s.args:[],s.options)}e.to=i})(ju||(ju={}));var Ci;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function r(s){return{customExecution:"customExecution"}}e.from=r;function i(s,n){return n.get(s)}e.to=i})(Ci||(Ci={}));var Ww;(function(e){function t(r,i){let s;return r.scope!==void 0&&typeof r.scope!="number"?s=r.scope.uri:r.scope!==void 0&&typeof r.scope=="number"&&(r.scope===gn.Workspace&&i&&i.workspaceFile?s=i.workspaceFile:s=sU),{id:r._id,workspaceFolder:s}}e.from=t})(Ww||(Ww={}));var Vw;(function(e){function t(r){if(r!=null)return{_id:r.id,isDefault:r.isDefault}}e.from=t})(Vw||(Vw={}));var Xi;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=r(a,n);c&&o.push(c)}return o}e.fromMany=t;function r(s,n){if(s==null)return;let o;s.execution instanceof Ta?o=Uu.from(s.execution):s.execution instanceof ho?o=ju.from(s.execution):s.execution&&s.execution instanceof $v&&(o=Ci.from(s.execution));const a=Gp.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=gn.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:Vw.from(s.group),presentationOptions:Jp.from(s.presentationOptions),problemMatchers:Oi(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=r;async function i(s,n,o){if(s==null)return;let a;Uu.is(s.execution)?a=Uu.to(s.execution):ju.is(s.execution)?a=ju.to(s.execution):Ci.is(s.execution)&&(a=Ci.to(s._id,o));const c=Gp.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(x.revive(s.source.scope)):l=gn.Workspace),!c||!l)return;const u=new df(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=jl.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new jl(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=Jp.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=i})(Xi||(Xi={}));var qw;(function(e){function t(i){return i}e.from=t;function r(i){if(i)return Object.assign(Object.create(null),i)}e.to=r})(qw||(qw={}));var Gw=class{#e;constructor(e,t,r){this._id=t,this.a=r,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},Qp=class{constructor(t,r,i,s,n,o,a,c){this.q=new P,this.r=new P,this.s=new P,this.u=new P,this.a=t.getProxy(Q.MainThreadTask),this.b=i,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,r,i){if(!i)return new Te(()=>{});const s=this.x();return this.j.set(s,{type:r,provider:i,extension:t}),this.a.$registerTaskProvider(s,r),new Te(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,r){this.a.$registerTaskSystem(t,r)}fetchTasks(t){return this.a.$fetchTasks(qw.from(t)).then(async r=>{const i=[];for(const s of r){const n=await Xi.to(s,this.b,this.m);n&&i.push(n)}return i})}get taskExecutions(){const t=[];return this.k.forEach(r=>t.push(r)),t}terminateTask(t){if(!(t instanceof Gw))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,r,i){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(r,await s.callback(i))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const r=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:r})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const r=await this.z(t.id);this.s.fire({execution:r,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const r=await this.z(t.id);this.u.fire({execution:r,exitCode:t.exitCode})}$provideTasks(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));const s=[],n=sr(()=>i.provider.provideTasks(Xe.None)).then(o=>this.v(r,s,i,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));if(r.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${r.definition.type}] cannot be resolved by provider of type [${i.type}].`);const s=await Xi.to(r,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(s,Xe.None);if(!n)return;this.A(n,i);const o=Xi.from(n,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Ci.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,r,i){const s=await this.a.$createTaskId(t);!i&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,r.execution)),this.m.set(s,r.execution)}async z(t,r){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new oi("Unexpected: The specified task is missing an execution");return n}const i=this.l.get(t.id);if(i)return i;let s;return r?s=Promise.resolve(new Gw(this,t.id,r)):s=Xi.to(t.task,this.b,this.m).then(n=>{if(!n)throw new oi("Unexpected: Task does not exist.");return new Gw(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,r){t._deprecated&&this.g.report("Task.constructor",r.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const i=this.n.values();let s=i.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=i.next()}};Qp=__decorate([__param(0,Ae),__param(1,Ot),__param(2,Si),__param(3,Po),__param(4,ti),__param(5,Ls),__param(6,$e),__param(7,Nu)],Qp);var Jw=class extends Qp{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c),this.registerTaskSystem(V.vscodeRemote,{scheme:V.vscodeRemote,authority:"",platform:zP(0)})}async executeTask(t,r){if(!r.execution)throw new Error("Tasks to execute must include an execution");const i=Xi.from(r,t);if(i===void 0)throw new Error("Task is not valid");if(Ci.is(i.execution))await this.y(i,r,!1);else throw new um;const s=await this.z(await this.a.$getTaskExecution(i),r);return this.a.$executeTask(i).catch(n=>{throw new Error(n)}),s}v(t,r,i,s){const n=[];if(s)for(const o of s){if(this.A(o,i),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Xi.from(o,i.extension);a&&Ci.is(a.execution)?(n.push(a),r.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async w(t){if(Ci.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,r){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,r,i){}};Jw=__decorate([__param(0,Ae),__param(1,Ot),__param(2,Si),__param(3,Po),__param(4,ti),__param(5,Ls),__param(6,$e),__param(7,Nu)],Jw);var Qw=J("IExtHostTask"),tS=class{constructor(){this.f=new Map,this.m=[],this.n=new P,this.o=new P,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,r,i){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof i=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:p(6105,null,i,e)};o(a)}},i)}return r&&this.f.set(s.seq,r),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await lr(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,r=this.f.get(t.request_seq);r&&(this.f.delete(t.request_seq),r(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,r)=>e.set(r,t)),await lr(500),e.forEach((t,r)=>{t({type:"response",seq:0,request_seq:r,success:!1,command:"canceled",message:"canceled"}),this.f.delete(r)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function nU(e){return e.type&&(e.label||e.program||e.runtime)}var oU=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function aU(e){return!!(e&&e.match(oU))}function rS(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(aU(e.path))return x.parse(e.path);if(Ui(e.path))return x.file(e.path)}return e.path}function iS(e){if(typeof e.path=="object"){const t=x.revive(e.path);if(t)return t.scheme===V.file?t.fsPath:t.toString()}return e.path}function cU(e,t){const r=t?rS:iS,i=it(e);return sS(i,(s,n)=>{s&&n&&(n.path=r(n))}),i}function lU(e,t){const r=t?rS:iS,i=it(e);return sS(i,(s,n)=>{!s&&n&&(n.path=r(n))}),i}function sS(e,t){switch(e.type){case"event":{const r=e;switch(r.event){case"output":t(!1,r.body.source);break;case"loadedSource":t(!1,r.body.source);break;case"breakpoint":t(!1,r.body.breakpoint.source);break;default:break}break}case"request":{const r=e;switch(r.command){case"setBreakpoints":t(!0,r.arguments.source);break;case"breakpointLocations":t(!0,r.arguments.source);break;case"source":t(!0,r.arguments.source);break;case"gotoTargets":t(!0,r.arguments.source);break;case"launchVSCode":r.arguments.args.forEach(i=>t(!1,i));break;default:break}break}case"response":{const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach(i=>t(!1,i.source));break;case"loadedSources":r.body.sources.forEach(i=>t(!1,i));break;case"scopes":r.body.scopes.forEach(i=>t(!1,i.source));break;case"setFunctionBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"setBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"disassemble":r.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,r.body?.source);break;default:break}break}}}var dc=J("IExtHostEditorTabs"),nS=class{constructor(e,t,r){this.e=r,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new Wv(x.revive(this.b.input.uri));case 2:return new Ff(x.revive(this.b.input.original),x.revive(this.b.input.modified));case 3:return new Hk(x.revive(this.b.input.base),x.revive(this.b.input.input1),x.revive(this.b.input.input2),x.revive(this.b.input.result));case 6:return new Vv(x.revive(this.b.input.uri),this.b.input.viewType);case 7:return new Bk(this.b.input.viewType);case 4:return new qv(x.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new Gv(x.revive(this.b.input.original),x.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new _k;case 9:return new zk(x.revive(this.b.input.uri),x.revive(this.b.input.inputBoxUri));case 10:return new Wk;case 11:return new Vk(this.b.input.diffEditors.map(e=>new Ff(x.revive(e.original),x.revive(e.modified))));default:return}}},uU=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const r of e.tabs)r.isActive&&(this.d=r.id),this.c.push(new nS(r,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Ut.to(e.b.viewColumn)},get activeTab(){return e.c.find(r=>r.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(r=>r.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const r=new nS(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,r),e.tabDto.isActive&&(this.d=r.tabId),r}else if(e.kind===1){const r=this.c.splice(e.index,1)[0];if(!r)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return r.tabId===this.d&&(this.d=""),r}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const r=this.c.splice(e.oldIndex,1)[0];if(!r)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,r),r}const t=this.c.find(r=>r.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},Yw=class{constructor(t){this.b=new P,this.c=new P,this.e=[],this.a=t.getProxy(Q.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,r={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(i=>i.apiObject))},get activeTabGroup(){const i=t.d;return Zo(t.e.find(n=>n.groupId===i)?.apiObject)},close:async(i,s)=>{const n=Array.isArray(i)?i:[i];return n.length?hU(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(r)}return this.f}$acceptEditorTabModel(t){const r=new Set(this.e.map(l=>l.groupId)),i=new Set(t.map(l=>l.groupId)),s=ZI(r,i),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new uU(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=Zo(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const r=this.e.find(i=>i.groupId===t.groupId);if(!r)throw new Error("Update Group IPC call received before group creation.");r.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[r.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const r=this.e.find(s=>s.groupId===t.groupId);if(!r)throw new Error("Update Tabs IPC call received before group creation.");const i=r.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}g(t){for(const r of this.e)for(const i of r.tabs)if(i.apiObject===t)return i}h(t){return this.e.find(r=>r.apiObject===t)}async i(t,r){const i=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");i.push(n.tabId)}return this.a.$closeTab(i,r)}async j(t,r){const i=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");i.push(n.groupId)}return this.a.$closeGroup(i,r)}};Yw=__decorate([__param(0,Ae)],Yw);function hU(e){return e.tabs!==void 0}var dU=0,oS=new WeakMap,Hu=J("IExtHostTesting"),Xw=class extends K{constructor(t,r,i,s){super(),this.C=r,this.D=i,this.F=s,this.f=this.B(new P),this.g=new Map,this.w=this.B(new P),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(Q.MainThreadTesting),this.m=new wU(this.h),this.j=new gU(this.h,r),i.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Ne.root(a))?.collection.tree.get(a)?.actual??B9(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Ne.root(c))?.collection.tree.get(c)?.actual??B9({$mid:16,tests:[o]}),message:tc.to(a)}}default:return n}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Ne.root(a));if(c)return Ne.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Hn)||[],exclude:n?.exclude.map(o).filter(Hn)||[]}})}createTestController(t,r,i,s){if(this.g.has(r))throw new Error(`Attempt to insert a duplicate controller with ID "${r}"`);const n=new he,o=n.add(new VO(r,i,this.F));o.root.label=i;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const g=d.relatedCodeProvider;return g&&(g?.provideRelatedTests&&(f|=8),g?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return i},set label(f){i=f,o.root.label=f,l.$updateController(r,{label:i})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(r,{capabilities:u()})},get id(){return r},get relatedCodeProvider(){return d.relatedCodeProvider},set relatedCodeProvider(f){L(t,"testRelatedCode"),d.relatedCodeProvider=f,l.$updateController(r,{capabilities:u()})},createRunProfile:(f,g,v,y,E,k)=>{let I=gs(f);for(;a.has(I);)I++;return new uS(this.h,a,c,this.w.event,r,I,f,g,v,y,E,k)},createTestItem(f,g,v){return new Pu(r,f,g,v)},createTestRun:(f,g,v=!0)=>this.j.createTestRun(t,r,o,f,g,v),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const g=f instanceof Array?f:[f];this.h.$markTestRetired(g.map(v=>Ne.fromExtHostTestItem(v,r).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},d={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(r,i,u()),n.add(te(()=>l.$unregisterTestController(r))),this.g.set(r,d),n.add(te(()=>this.g.delete(r))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(r,f.map(Wd.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,r=Xe.None){const i=cS(t);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(i.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:rc.from(i.kind),targets:[{testIds:t.include?.map(n=>Ne.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:t.exclude?.map(n=>n.id)},r)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,r,i){const s=this.F.getDocument(x.revive(t));if(!s)return[];const n=Be.to(r),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,i)}catch(l){i.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Ne.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,r){const i=this.g.get(Ne.root(t));if(!i)return[];const s=i.collection.tree.get(t);return s?(await i.relatedCodeProvider?.provideRelatedCode?.(s.actual,r))?.map(Sr.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,r,i){return(await this.j.getCoverageDetails(t,r,i))?.map(gu.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,r){this.g.get(t)?.profiles.get(r)?.configureHandler?.()}$setDefaultRunProfiles(t){const r=new Map;for(const[i,s]of Object.entries(t)){const n=this.g.get(i);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&r.set(i,o)}this.w.fire(r)}async $refreshTests(t,r){await this.g.get(t)?.controller.refreshHandler?.(r)}$publishTestResults(t){this.results=Object.freeze(t.map(r=>{const i=I0.to(r),s=r.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(i.getDetailedCoverage=(n,o=Xe.None)=>this.h.$getCoverageDetails(r.id,s,n,o).then(a=>a.map(gu.to))),oS.set(i,r.id),i}).concat(this.results).sort((r,i)=>i.completedAt-r.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,r){const i=this.g.get(Ne.fromString(t).controllerId)?.collection;i&&(await i.expand(t,r<0?1/0:r),i.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(r=>Wd.deserialize({asCanonicalUri:i=>i},r)))}async $runControllerTests(t,r){return Promise.all(t.map(i=>this.G(i,!1,r)))}async $startContinuousRun(t,r){const i=new rt(r),s=await Promise.all(t.map(n=>this.G(n,!0,i.token)));return!r.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>r.onCancellationRequested(n)),i.dispose(!0),s}async $provideTestFollowups(t,r){const i=this.results.find(o=>oS.get(o)===t.resultId),s=i&&bU(Ne.fromString(t.extId),i?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(i,s,t.taskIndex,t.messageIndex,r);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),r.isCancellationRequested?[]:n.map(o=>{const a=dU++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const r of t)this.z.delete(r)}$executeTestFollowup(t){const r=this.z.get(t);return r?this.D.executeCommand(r.command,...r.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,r){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,r)}getMetadataForRun(t){for(const r of this.j.trackers){const i=r.getTaskIdForRun(t);if(i)return{taskId:i,runId:r.id}}}async G(t,r,i){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(Hn),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(Hn).filter(f=>l.some(g=>g.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new Af(l.some(f=>f.actual instanceof ow)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,r),d=hF(t)&&this.j.prepareForMainThreadTestRun(a,h,lS.fromInternal(t,s.collection),c,i);try{return await c.runHandler(h,i),{}}catch(f){return{error:String(f)}}finally{d&&d.hasRunningTasks&&!i.isCancellationRequested&&await je.toPromise(d.onEnd)}}};Xw=__decorate([__param(0,Ae),__param(1,$e),__param(2,$i),__param(3,Po)],Xw);var fU=1e4,aS;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(aS||(aS={}));var pU=class extends K{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,r,i,s,n){super(),this.C=e,this.D=t,this.F=r,this.G=i,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new P),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new rt(n));const o=this.B(new hs(()=>this.I(),fU));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new P;this.y=a.event,this.B(te(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:r}]of this.h)if(r===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,r){const[,i]=Ne.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(i);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Nf){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,r):this.G?.loadDetailedCoverage?.(a.run,n,r))??[]}createRun(e){const t=this.C.id,r=this.C.controllerId,i=Ft(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(tc.from):[tc.from(u)];if(l.uri&&l.range){const d={range:O.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||d}this.D.$appendTestMessagesInRun(t,i,Ne.fromExtHostTestItem(l,r).toString(),h)};let o=!1;const a=this.B(new rt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Nf?l.includesTests:[];if(u.length)for(const f of u)this.L(f);const h=l.uri.toString(),d=new Ne([t,i,h]).toString();this.z.set(d,{report:l,extIds:u.map(f=>Ne.fromExtHostTestItem(f,r).toString())}),this.D.$appendCoverage(t,i,gu.fromFile(r,d,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,i,Ne.fromExtHostTestItem(l,r).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,i,Ne.fromExtHostTestItem(l,r).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,i,Ne.fromExtHostTestItem(l,r).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Ne.fromExtHostTestItem(l,r).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Ne.fromExtHostTestItem(l,r).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,i,Ne.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,i,Y.fromString(l),u&&Sr.from(u),h&&Ne.fromExtHostTestItem(h,r).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,i),--this.g||this.J())}};return this.g++,this.h.set(i,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:i,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof Pu))throw new Vd(e.id);if(this.j.has(Ne.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],r=this.C.colllection.root;for(;;){const i=xn.from(e);if(t.unshift(i),this.j.has(i.extId)||(this.j.add(i.extId),e===r))break;e=e.parent||r}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},gU=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,r){const i=Ne.root(e);return this.g.get(i)?.getCoverageDetails(e,t,r)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:r}]of this.f)r===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,r,i,s){return this.k(t,r,i,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,r,i,s,n){const o=this.f.get(i);if(o)return o.createRun(s);const a=lS.fromPublic(t,r,i,n),c=cS(i);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!i.continuous,profile:c&&{group:rc.from(c.kind),id:c.profileId},exclude:i.exclude?.map(u=>Ne.fromExtHostTestItem(u,r.root.id).toString())??[],id:a.id,include:i.include?.map(u=>Ne.fromExtHostTestItem(u,r.root.id).toString())??[r.root.id],preserveFocus:i.preserveFocus??!0,persist:n});const l=this.k(i,a,i.profile,e);return je.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,r,i,s){const n=new pU(t,this.h,this.j,r,i,s);return this.f.set(e,n),this.g.set(n.id,n),n}},cS=e=>{if(e.profile){if(!(e.profile instanceof uS))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},lS=class Wy{static fromPublic(t,r,i,s){return new Wy(t,Ft(),s,r)}static fromInternal(t,r){return new Wy(t.controllerId,t.runId,!0,r)}constructor(t,r,i,s){this.controllerId=t,this.id=r,this.isPersisted=i,this.colllection=s}},mU=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,xn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Ne.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:r}=this;return{get added(){return[...e].map(i=>i.revived)},get updated(){return[...t].map(i=>i.revived)},get removed(){return[...r].map(i=>i.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},vU=class extends dF{constructor(){super(...arguments),this.z=new P,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:xn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new mU(this.z)}},wU=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:xh(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new vU({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Bu=(e,t,r,i)=>{r?Object.assign(r,i):t.$updateTestRunConfig(e.controllerId,e.profileId,i)},uS=class extends Ok{#e;#t;#r;#i;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Bu(this,this.#e,this.#i,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,Bu(this,this.#e,this.#i,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Bu(this,this.#e,this.#i,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Bu(this,this.#e,this.#i,{tag:e?ki.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Bu(this,this.#e,this.#i,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return je.chain(this.#r,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Hn))}constructor(e,t,r,i,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=r,this.#r=i,t.set(n,this);const d=rc.from(a);l&&r.add(n),this.#i={profileId:n,controllerId:s,tag:u?ki.namespace(this.controllerId,u.id):null,label:o,group:d,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#i&&(this.#e.$publishTestRunProfile(this.#i),this.#i=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#i=void 0}};function bU(e,t){for(let r=0;r<e.path.length;r++){const i=t.find(s=>s.id===e.path[r]);if(!i)return;if(r===e.path.length-1)return i;t=i.children}}var VJ=J("configurationResolverService"),ot;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(ot||(ot={}));var $r=class extends oi{constructor(e,t){super(t),this.variable=e}},yU=class Xg{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,r,i,s){this.h=new Map,this.a=t,this.b=r,this.g=i,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(ze){const r=Object.create(null);return Object.keys(t).forEach(i=>{r[i.toLowerCase()]=t[i]}),r}return t}resolveWithEnvironment(t,r,i){return this.l({env:this.i(t),userHome:void 0},r?r.uri:void 0,i)}async resolveAsync(t,r){const i={env:await this.c,userHome:await this.g};return this.l(i,t?t.uri:void 0,r)}async j(t,r,i,s){const n=it(r);ze&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):Nt&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):bt&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,i,s)}async resolveAnyAsync(t,r,i){return this.j(t,r,i)}async resolveAnyMap(t,r,i){const s=new Map;return{newConfig:await this.j(t,r,i,s),resolvedVariables:s}}resolveWithInteractionReplace(t,r,i,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,r,i,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,r){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,r)}async l(t,r,i,s,n){if(Pe(i))return this.m(t,r,i,s,n);if(Array.isArray(i))return Promise.all(i.map(o=>this.l(t,r,o,s,n)));if(mt(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.m(t,r,c,s,n),await this.l(t,r,i[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return i}m(t,r,i,s,n){return fD(i,Xg.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(Xg.VARIABLE_LHS))return o;let c=await this.o(t,o,a,r,s);return n?.set(a,c),c!==o&&Pe(c)&&c.match(Xg.VARIABLE_REGEXP)&&(c=await this.m(t,r,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,r,i,s,n){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=h=>{const d=this.a.getFilePath();if(d)return Au(d);throw new $r(h,p(12637,null,r))},l=h=>{const d=c(h);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return Au(f)}throw new $r(h,p(12638,null,r,ut(d)))},u=h=>{if(o){const d=this.a.getFolderUri(o);if(d)return d;throw new $r(h,p(12639,null,r,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new $r(h,p(12640,null,r)):new $r(h,p(12641,null,r))};switch(i){case"env":if(o){if(t.env){const h=t.env[ze?o.toLowerCase():o];if(Pe(h))return h}return""}throw new $r(ot.Env,p(12642,null,r));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if(yt(h))throw new $r(ot.Config,p(12643,null,r,o));if(mt(h))throw new $r(ot.Config,p(12644,null,r,o));return h}throw new $r(ot.Config,p(12645,null,r));case"command":return this.p(ot.Command,r,o,n,"command");case"input":return this.p(ot.Input,r,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new $r(ot.ExtensionInstallFolder,p(12646,null,r,o));return this.n(h.extensionLocation)}throw new $r(ot.ExtensionInstallFolder,p(12647,null,r));default:switch(i){case"workspaceRoot":case"workspaceFolder":return Au(this.n(u(ot.WorkspaceFolder)));case"cwd":return s||o?Au(this.n(u(ot.Cwd))):Mn();case"workspaceRootFolderName":case"workspaceFolderBasename":return Au(ut(this.n(u(ot.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new $r(ot.UserHome,p(12648,null,r))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new $r(ot.LineNumber,p(12649,null,r))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new $r(ot.SelectedText,p(12650,null,r))}case"file":return c(ot.File);case"fileWorkspaceFolder":return l(ot.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return ut(l(ot.FileWorkspaceFolderBasename));case"relativeFile":return s||o?Xo(this.n(u(ot.RelativeFile)),c(ot.RelativeFile)):c(ot.RelativeFile);case"relativeFileDirname":{const h=gr(c(ot.RelativeFileDirname));if(s||o){const d=Xo(this.n(u(ot.RelativeFileDirname)),h);return d.length===0?".":d}return h}case"fileDirname":return gr(c(ot.FileDirname));case"fileExtname":return Rh(c(ot.FileExtname));case"fileBasename":return ut(c(ot.FileBasename));case"fileBasenameNoExtension":{const h=ut(c(ot.FileBasenameNoExtension));return h.slice(0,h.length-Rh(h).length)}case"fileDirnameBasename":return ut(gr(c(ot.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||r}case"execInstallFolder":{const h=this.a.getAppRoot();return h||r}case"pathSeparator":case"/":return gt;default:try{const h=o?`${i}:${o}`:i;return this.p(ot.Unknown,r,h,n,void 0)}catch{return r}}}}p(t,r,i,s,n){if(i&&s){const o=n===void 0?s[i]:s[n+":"+i];if(typeof o=="string")return o;throw new $r(t,p(12651,null,r))}return r}},fc=J("IExtHostVariableResolverProvider"),xU=class extends yU{constructor(e,t,r,i,s,n,o){function a(){if(r){const c=r.activeEditor();if(c)return c.document.uri;const l=i.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Ff||l.input instanceof Gv)return l.input.modified;if(l.input instanceof Wv||l.input instanceof qv||l.input instanceof Vv)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>Mn(),getExecPath:()=>Un.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return ls(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return ls(l.uri.fsPath)}}},getSelectedText:()=>{if(r){const c=r.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.line+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(Un))}},Yp=class extends K{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.g=i,this.h=s,this.j=n,this.a=new Lr(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new xU(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};Yp=__decorate([__param(0,Ns),__param(1,Si),__param(2,Po),__param(3,ti),__param(4,dc)],Yp);var Zw=J("IExtHostDebugService"),Xp=class extends K{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,r,i,s,n,o,a,c){super(),this.Z=r,this.$=i,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new P),this.z=this.B(new P),this.C=this.B(new P),this.F=this.B(new P),this.u=t.getProxy(Q.MainThreadDebugService),this.I=this.B(new P),this.L=this.B(new P),this.G=new kU(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(Q.MainThreadTelemetry)}async $getVisualizerTreeItem(t,r){const i=this.hb(r);if(!i)return;const s=await this.Q.get(t)?.getTreeItem?.(i);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,r,i){const s=Je.toKey(t.identifier),n=this.zb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.Q.set(n,i),this.u.$registerDebugVisualizerTree(n,!!i.editItem),te(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(r)})}async $getVisualizerTreeItemChildren(t,r){const i=this.S.get(r)?.item;return i?(await this.Q.get(t)?.getChildren?.(i))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,r){const i=this.S.get(t);if(!i)return;const s=await this.Q.get(i.provider)?.editItem?.(i.item,r);return this.fb(i.provider,s||i.item)}$disposeVisualizedTree(t){const r=this.S.get(t);if(!r)return;const i=[r.children];for(const s of i)if(s)for(const n of s)i.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,r){let i=this.R.get(r);return i||(i=this.O++,this.R.set(r,i),this.S.set(i,{provider:t,item:r})),O0.from(r,i)}asDebugSourceUri(t,r){const i=t;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let s=`debug:${encodeURIComponent(i.path||"")}`,n="?";return r&&(s+=`${n}session=${encodeURIComponent(r.id)}`,n="&"),s+=`${n}ref=${i.sourceReference}`,x.parse(s)}else{if(i.path)return x.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const r=[];for(const i of t.getAllExtensionDescriptions())if(i.contributes){const s=i.contributes.debuggers;if(s&&s.length>0)for(const n of s)nU(n)&&r.push(n.type)}this.u.$registerDebugTypes(r)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(r=>t.push(r)),t}async $resolveDebugVisualizer(t,r){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=i;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,r)||s,i.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);const i=r.v.visualization;i&&"command"in i&&this.db.executeCommand(i.command,...i.arguments||[])}hb(t){const r=this.w.get(t.sessionId);return r&&{session:r.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,r,i,s){const n=this.hb(i),o=this.zb(t,r),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const r of t)this.W.delete(r)}registerDebugVisualizationProvider(t,r,i){if(!t.contributes?.debugVisualizers?.some(o=>o.id===r))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${r})`);const s=Je.toKey(t.identifier),n=this.zb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.P.set(n,i),this.u.$registerDebugVisualizer(s,r),te(()=>{this.u.$unregisterDebugVisualizer(s,r),this.P.delete(r)})}addBreakpoints(t){const r=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(r,[],[]);const i=[],s=new Map;for(const n of r)if(n instanceof go){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),i.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof mo&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(i)}removeBreakpoints(t){const r=t.filter(o=>this.H.delete(o.id));this.wb([],r,[]);const i=r.filter(o=>o instanceof go).map(o=>o.id),s=r.filter(o=>o instanceof mo).map(o=>o.id),n=r.filter(o=>o instanceof mf).map(o=>o.id);return this.u.$unregisterBreakpoints(i,s,n)}startDebugging(t,r,i){const s=i.testRun&&this.eb.getMetadataForRun(i.testRun);return this.u.$startDebugging(t?t.uri:void 0,r,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Ef.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,r,i){if(!r)return new Te(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:r}),this.u.$registerDebugConfigurationProvider(t,i,!!r.provideDebugConfigurations,!!r.resolveDebugConfiguration,!!r.resolveDebugConfigurationWithSubstitutedVariables,s),new Te(()=>{this.g=this.g.filter(n=>n.provider!==r),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,r,i){if(!i)return new Te(()=>{});if(!this.sb(t,r))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${r}' debugger.`);if(this.pb(r))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:r,handle:s,factory:i}),this.u.$registerDebugAdapterDescriptorFactory(r,s),new Te(()=>{this.j=this.j.filter(n=>n.factory!==i),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,r){if(!r)return new Te(()=>{});const i=this.m++;return this.n.push({type:t,handle:i,factory:r}),new Te(()=>{this.n=this.n.filter(s=>s.factory!==r)})}async $runInTerminal(t,r){return Promise.resolve(void 0)}async $substituteVariables(t,r){let i;const s=await this.yb(t);return s&&(i={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAnyAsync(i,r)}ib(t,r){if(t instanceof zl)return new $U(t.implementation)}jb(){}async $startDASession(t,r){const i=this,s=await this.xb(r);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const d=await this.U.sign(u.arguments.value);h.body={signature:d},a.sendResponse(h)}else throw new Error("no signer")}catch(d){h.success=!1,h.message=d.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=lU(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}i.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,r){r=cU(r,!1);const i=this.N.get(t);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(r),this.M.get(t)?.sendMessage(r)}$stopDASession(t){const r=this.N.get(t);this.N.delete(t),r&&r.onWillStopSession&&r.onWillStopSession();const i=this.M.get(t);return this.M.delete(t),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const r=[],i=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new mo(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new mf(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=x.revive(n.uri);a=new go(new qr(c,new Ie(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}UF(a,o),this.H.set(o,a),r.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),i.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof mo&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof go&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new qr(x.revive(n.uri),new Ie(n.line,n.character))}s.push(o)}}}this.wb(r,i,s)}async $acceptStackFrameFocus(t){let r;if(t){const i=await this.xb(t.sessionId);t.kind==="thread"?r=new Tk(i.api,t.threadId):r=new Ak(i.api,t.threadId,t.frameId)}this.J=r,this.L.fire(this.J)}$provideDebugConfigurations(t,r,i){return sr(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(r);return s.provideDebugConfigurations(n,i)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,r,i,s){return sr(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(r);return n.resolveDebugConfiguration(o,i,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,r,i,s){return sr(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(r);return n.resolveDebugConfigurationWithSubstitutedVariables(o,i,s)})}async $provideDebugAdapter(t,r){const i=this.qb(t);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(r);return this.ub(i,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const r=await this.xb(t);this.y.fire(r.api)}async $acceptDebugSessionTerminated(t){const r=await this.xb(t);r&&(this.z.fire(r.api),this.w.delete(r.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,r){(await this.xb(t))?._acceptNameChanged(r)}async $acceptDebugSessionCustomEvent(t,r){const s={session:(await this.xb(t)).api,event:r.event,body:r.body};this.F.fire(s)}kb(t){if(t instanceof Oa)return this.lb(t);if(t instanceof Ma)return this.mb(t);if(t instanceof _l)return this.nb(t);if(t instanceof zl)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const r=this.j.filter(i=>i.type===t);if(r.length>0)return r[0].factory}qb(t){const r=this.j.filter(i=>i.handle===t);if(r.length>0)return r[0].factory}rb(t){const r=this.g.filter(i=>i.handle===t);if(r.length>0)return r[0].provider}sb(t,r){if(t.contributes){const i=t.contributes.debuggers;if(i&&i.length>0){for(const s of i)if(s.label&&s.type&&s.type===r)return!0}}return!1}tb(t){const i=t.configuration.type,s=this.n.filter(n=>n.type===i||n.type==="*").map(n=>sr(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=St(n);if(o.length>0)return new SU(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,r){const i=r.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new Ma(i));if(t){const n=await this.$.getExtensionRegistry();return sr(()=>t.createDebugAdapterDescriptor(r.api,this.vb(r,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(r,s))}vb(t,r){}wb(t,r,i){(t.length>0||r.length>0||i.length>0)&&this.I.fire(Object.freeze({added:t,removed:r,changed:i}))}async xb(t){if(t)if(typeof t=="string"){const r=this.w.get(t);if(r)return r}else{let r=this.w.get(t.id);if(!r){const i=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;r=new EU(this.u,t.id,t.type,t.name,i,t.configuration,s?.api),this.w.set(r.id,r),this.u.$sessionCached(r.id)}return r}throw new Error("cannot find session")}yb(t){if(t){const r=x.revive(t);return this.Z.resolveWorkspaceFolder(r)}return Promise.resolve(void 0)}zb(t,r){return`${t}\0${r}`}Ab(t,r){if(r){if("title"in r&&"command"in r)return{type:0};if("treeId"in r)return{type:1,id:`${t}\0${r.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const r=this.Cb(t);let i,s;return"id"in r?s=Jt.asClassName(r):i=r,{iconPath:i,iconClass:s}}Cb(t){if(t instanceof nr)return{id:t.id};const r=typeof t=="object"&&"dark"in t?t.dark:t,i=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof r=="string"?x.file(r):r,light:typeof i=="string"?x.file(i):i}}};Xp=__decorate([__param(0,Ae),__param(1,Si),__param(2,Ns),__param(3,ti),__param(4,dc),__param(5,fc),__param(6,$i),__param(7,Hu)],Xp);var EU=class{constructor(e,t,r,i,s,n,o){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,r){return e.f.$customDebugAdapterRequest(e.g,t,r)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},kU=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},SU=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(r=>r.onExit?r.onExit(e,t):void 0)}},$U=class extends tS{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Kw=class extends Xp{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c)}};Kw=__decorate([__param(0,Ae),__param(1,Si),__param(2,Ns),__param(3,ti),__param(4,dc),__param(5,fc),__param(6,$i),__param(7,Hu)],Kw);function CU(e){return"uri"in e&&"ranges"in e&&"preview"in e}function IU(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var hS=class{constructor(e){this.a=e}provideFileSearchResults(e,t,r){return(async()=>{const s=IU(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,r)))})().then(s=>St(s).flat())}};function PU(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:dS(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function dS(e){return{matchLines:e?.matchLines??_0.matchLines,charsPerLine:e?.charsPerLine??_0.charsPerLine}}function DU(e){if(CU(e)){const t=Oi(e.ranges).map((r,i)=>{const n=Oi(e.preview.matches)[i];return{sourceRange:r,previewRange:n}});return new As(e.uri,t,e.preview.text)}else return new $p(e.uri,e.text,e.lineNumber)}var AU=class{constructor(e){this.a=e}provideTextSearchResults(e,t,r,i){const s=a=>{TU(a)&&r.report(DU(a))};return(async()=>St(await Promise.all(PU(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:St(Oi(a.message))}))}};function TU(e){if(RU(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function RU(e){return!!e.preview}var fS=class extends an{constructor(e,t,r=()=>!1){const i=new wx(r,()=>!1);super(i);const s=new zt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.l(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const r=this.l(e);return t.get(r)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(r=>e(r)))}l(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},LU=class{constructor(e,t,r){this.l=e,this.o=t,this.p=r,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&wi(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&wi(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((r,i)=>{const s=n=>{this.g++,e(n)};if(this.h)return r({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=ut(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{r({limitHit:this.f,stats:n||void 0})},n=>{i(new Error(pi(n)))})})}async q(e,t){const r=new rt,i=e.map(l=>this.r(l)),s=this.o instanceof hS?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:i,maxResults:this.l.maxResults??Ip,session:s},o=l=>{const u=new h9(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new fS(e,o);let c;try{this.j.add(r),c=Ar.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,r.token),u=c.elapsed(),h=Ar.create();return this.h&&!this.f||(l&&l.forEach(d=>{const f=a.findQueryFragmentAwareSubstr(d),g=Re.relative(f.folder.path,d.path);if(f.noSiblingsClauses){const v=ut(d.path);this.w(t,{base:f.folder,relativePath:g,basename:v});return}this.u(f.tree,f.folder,g,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(d=>{this.v(d.tree,d.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{r.dispose(),this.j.delete(r)}}r(e){const t=nc(this.l.includePattern,e.includePattern);let r=e.excludePattern?.map(s=>({folder:s.folder,patterns:nc(this.l.excludePattern,s.pattern)}));r?.length||(r=[{folder:void 0,patterns:nc(this.l.excludePattern,void 0)}]);const i=f9(r);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,r,i){if(r===this.a){const n=ut(this.a);this.w(i,{base:t,relativePath:this.a,basename:n})}function s(n){const o=ut(n),a=gr(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(r)}v({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.a;function o(a){const c=B0(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:d,basename:f}=h;if(r.matchesExcludesSync(d,f,n!==f?c:void 0))continue;const g=t[d];if(g)o(g);else{if(d===n)continue;s.w(i,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},NU=class{constructor(){this.a=new Object,this.tokenSource=new rt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},FU=class eI{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,r,i,s){const n=this.c(t.cacheKey),o=new LU(t,r,n);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.d(u)))};return this.f(o,eI.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new NU),this.b.get(t)}d(t){return t.relativePath?{resource:Ct(t.base,t.relativePath)}:{resource:t.base}}f(t,r,i,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),r>0&&a.length>=r&&(i(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&i(a),n.dispose(),c),c=>(a.length&&i(a),n.dispose(),Promise.reject(c)))}},eb=class{constructor(e,t,r){this.f=e,this.g=t,this.h=r,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const r=this.j.folderQueries||[],i=new rt(t);return new Promise((s,n)=>{this.b=new MU(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof As&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,i.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const d=c instanceof As;(h>0||!d)&&this.b.add(c,l)}};this.n(r,a,i.token).then(c=>{i.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{i.dispose();const l=pi(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof As?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new As(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,r){const i=new fS(e,(l,u)=>({queryTester:new h9(this.j,l),folder:l.folder,folderIdx:u}),()=>!0),s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=i.findQueryFragmentAwareSubstr(l.uri),h=u.folder.scheme===V.file?nO(()=>this.g.readdir(jh(l.uri))):void 0,d=m5(u.folder,l.uri);if(d){const f=u.queryTester.includedInQuery(d,ut(d),h);tn(f)?s.push(f.then(g=>{g&&t(l,u.folderIdx)})):f&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??Ip,previewOptions:this.j.previewOptions??_0,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,r):c=await this.f.provider.provideTextSearchResults(OU(this.f.query.contentPattern),a,n,r),s.length&&await Promise.all(s),c}o(e){const t=nc(this.j.includePattern,e.includePattern);let r=e.excludePattern?.map(n=>({folder:n.folder,patterns:nc(this.j.excludePattern,n.pattern)}));(!r||r.length===0)&&(r=[{folder:void 0,patterns:nc(this.j.excludePattern,void 0)}]);const i=f9(r);return{folder:x.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function OU(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var MU=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new jU(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!g5(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(UU(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function UU(e){return e instanceof As?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var jU=class Vy{static{this.b=4e3}static{this.c=50}constructor(t,r){this.j=t,this.k=r,this.d=0,this.f=[],this.g=0}addItem(t,r){t&&this.l(t,r)}addItems(t,r){t&&this.m(t,r)}l(t,r){this.f.push(t),this.g+=r,this.n()}m(t,r){this.f=this.f.concat(t),this.g+=r,this.n()}n(){this.d<Vy.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},Vy.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},tb=J("IExtHostSearch"),Zp=class{constructor(t,r,i){this.o=t,this.q=r,this.s=i,this.c=this.o.getProxy(Q.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new FU}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,new AU(r)),this.c.$registerTextSearchProvider(i,this.t(t)),te(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerTextSearchProvider(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,r),this.c.$registerTextSearchProvider(i,this.t(t)),te(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProvider(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,r),this.c.$registerAITextSearchProvider(i,this.t(t)),te(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProviderOld(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,new hS(r)),this.c.$registerFileSearchProvider(i,this.t(t)),te(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProvider(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,r),this.c.$registerFileSearchProvider(i,this.t(t)),te(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=Kp(i),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,r,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,r,i){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,r,i,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=Kp(i);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$provideAITextSearchResults(t,r,i,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=Kp(i);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const r=this.i.get(t);if(!(!r||!r.provideAITextSearchResults))return r.name??"AI"}v(t,r){return new eb({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}w(t,r){return new eb({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};Zp=__decorate([__param(0,Ae),__param(1,nl),__param(2,$e)],Zp);function Kp(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(HU),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>x.revive(t))}}function HU(e){return Kt(e)}var rb,ib=class{static{rb=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,r){this.c=new P,this.onDidChangeWindowState=this.c.event,this.f=rb.a,t.handle&&(this.d=Vh(t.handle).buffer),this.b=r.getProxy(Q.MainThreadWindow),this.b.$getInitialState().then(({isFocused:i,isActive:s})=>{this.onDidChangeWindowProperty("focused",i),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?Vh(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,r){r!==this.f[t]&&(this.f={...this.f,[t]:r},this.c.fire(this.f))}openUri(t,r){let i;if(typeof t=="string"){i=t;try{t=x.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return Lh(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===V.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,i,r)}async asExternalUri(t,r){if(Lh(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this.b.$asExternalUri(t,r);return x.from(i)}};ib=rb=__decorate([__param(0,Ot),__param(1,Ae)],ib);var pS=J("IExtHostWindow"),eg=class extends rR{constructor(t,r){super(r.logLevel,r.logsLocation,r.loggers.map(i=>Kt(i))),this.r=t.getProxy(Q.MainThreadLogger)}$setLogLevel(t,r){r?this.setLogLevel(x.revive(r),t):this.setLogLevel(t)}setVisibility(t,r){super.setVisibility(t,r),this.r.$setVisibility(t,r)}s(t,r,i){return new BU(this.r,t,r,i)}};eg=__decorate([__param(0,Ae),__param(1,Ot)],eg);var BU=class extends c1{constructor(e,t,r,i){super(i?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(r),this.s.$createLogger(t,i).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const r=[[e,t]];this.n?this.w(r):this.r.push(...r)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},sb=J("IExtHostTerminalShellIntegration"),nb=class extends K{constructor(t,r){super(),this.h=r,this.b=new Map,this.c=new P,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new P,this.onDidStartTerminalShellExecution=this.f.event,this.g=new P,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(Q.MainThreadTerminalShellIntegration),this.B(te(()=>{for(const[i,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const r=this.h.getTerminalById(t);if(!r)return;const i=r.value;let s=this.b.get(t);s||(s=new _U(r.value,this.f),this.b.set(t,s),s.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),r.shellIntegration=s.value),this.c.fire({terminal:i,shellIntegration:s.value})}$shellExecutionStart(t,r,i,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.startShellExecution(o,x.revive(n))}$shellExecutionEnd(t,r,i,s,n){const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,r){this.b.get(t)?.emitData(r)}$cwdChange(t,r){this.b.get(t)?.setCwd(x.revive(r))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};nb=__decorate([__param(0,Ae),__param(1,Ls)],nb);var _U=class extends K{get currentExecution(){return this.a}constructor(e,t){super(),this.j=e,this.m=t,this.b=!1,this.store=this.B(new he),this.f=this.B(new P),this.onDidRequestChangeShellIntegration=this.f.event,this.g=this.B(new P),this.onDidRequestShellExecution=this.g.event,this.h=this.B(new P),this.onDidRequestEndExecution=this.h.event;const r=this;this.value={get cwd(){return r.c},executeCommand(i,s){let n=i;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;r.g.fire(n);const o={value:n,confidence:hf.High,isTrusted:!0},a=r.startShellExecution(o,r.c,!0).value;return r.b=!0,a}}}startShellExecution(e,t,r){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const i=this.a=new zU(e,t??this.c);r?queueMicrotask(()=>this.m.fire({terminal:this.j,shellIntegration:this.value,execution:i.value})):this.m.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setCwd(e){let t=!1;x.isUri(this.c)?t=!x.isUri(e)||this.c.toString()!==e.toString():this.c!==e&&(t=!0),t&&(this.c=e,this.f.fire({terminal:this.j,shellIntegration:this.value}))}},zU=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const r=this;this.value={get commandLine(){return r.c},get cwd(){return r.cwd},read(){return r.d()}}}d(){if(!this.a){if(this.b)return Jc.EMPTY;this.a=new WU}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},WU=class extends K{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new Xr);const e=this.a;return new Jc(async r=>{this.b.push(r),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}};Le($w,Sw,1),Le(oa,eg,1),Le(Nu,Mw,1),Le($i,cw,0),Le(fw,pw,0),Le(gw,mw,0),Le(ti,Q0,0),Le(Cu,tw,0),Le(Hu,Xw,0),Le(Zw,Kw,0),Le(O8,Nw,0),Le(Po,Ow,0),Le(Cw,Iw,0),Le(ca,ER,0),Le(F8,Lw,1),Le(tb,Zp,0),Le(ew,j9,0),Le(Qw,Jw,0),Le(Ls,hw,0),Le(sb,nb,0),Le(Np,Fp,0),Le(pS,ib,0),Le(Si,V0,0),Le(kw,I8,0),Le(Op,aw,0),Le(dc,Yw,0),Le(fc,Yp,0);var ob=class extends Mp{constructor(t,r){super(!0,t,r)}createTerminal(t,r,i){return this.createTerminalFromOptions({name:t,shellPath:r,shellArgs:i})}createTerminalFromOptions(t,r){const i=new lw(this.a,Ft(),t,t.name);return this.f.push(i),i.create(t,this.S(t,r)),i.value}};ob=__decorate([__param(0,$i),__param(1,Ae)],ob);import{promises as gS}from"fs";var mS;(function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"})(mS||(mS={}));var vS;(function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.AccessDenied=2]="AccessDenied",e[e.ProcessNotFound=3]="ProcessNotFound"})(vS||(vS={}));function VU(e,...t){const r=t.reduce((n,o)=>(n[o]=!0,n),{}),i=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(e).filter(n=>!r[n]).forEach(n=>{for(let o=0;o<i.length;o++)if(n.search(i[o])!==-1){delete e[n];break}})}function qU(e){e&&(delete e.DEBUG,bt&&delete e.LD_PRELOAD)}function wS(e=Un){return e.comspec||"cmd.exe"}function GU(e){let t=[],r=!1;const i=function(s){if(r){t.push(s);return}(!e.send(s,o=>{if(o&&console.error(o),r=!1,t.length>0){const a=t.slice(0);t=[],a.forEach(c=>i(c))}})||ze)&&(r=!0)};return{send:i}}var _u;(function(e){async function t(r,i,s){if(Ui(r))return r;if(i===void 0&&(i=Mn()),gr(r)!=="."||(s===void 0&&Pe(Un.PATH)&&(s=Un.PATH.split(F4)),s===void 0||s.length===0))return Ve(i,r);async function o(a){if(await qe.exists(a)){let c;try{c=await gS.stat(a)}catch(l){l.message.startsWith("EACCES")&&(c=await gS.lstat(a))}return c?!c.isDirectory():!1}return!1}for(const a of s){let c;if(Ui(a)?c=Ve(a,r):c=Ve(i,a,r),await o(c))return c;let l=c+".com";if(await o(l)||(l=c+".exe",await o(l)))return l}return Ve(i,r)}e.findExecutable=t})(_u||(_u={}));import{homedir as JU}from"os";var ab=class extends Qp{constructor(t,r,i,s,n,o,a,c,l){super(t,r,i,s,n,o,a,c),this.C=i,this.D=l,r.remote.isRemote&&r.remote.authority?this.registerTaskSystem(V.vscodeRemote,{scheme:V.vscodeRemote,authority:r.remote.authority,platform:process.platform}):this.registerTaskSystem(V.file,{scheme:V.file,authority:"",platform:process.platform}),this.a.$registerSupportedExecutions(!0,!0,!0)}async executeTask(t,r){const i=r;if(!r.execution&&i._id===void 0)throw new Error("Tasks to execute must include an execution");if(i._id!==void 0){const s=Ww.from(i,this.C),n=await this.a.$getTaskExecution(s);if(n.task===void 0)throw new Error("Task from execution DTO is undefined");const o=await this.z(n,r);return this.a.$executeTask(s).catch(()=>{}),o}else{const s=Xi.from(r,t);if(s===void 0)return Promise.reject(new Error("Task is not valid"));Ci.is(s.execution)&&await this.y(s,r,!1);const n=await this.z(await this.a.$getTaskExecution(s),r);return this.a.$executeTask(s).catch(()=>{}),n}}v(t,r,i,s){const n=[];if(s)for(const o of s){this.A(o,i),(!o.definition||!t[o.definition.type])&&this.f.warn(`The task [${o.source}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`);const a=Xi.from(o,i.extension);a&&(n.push(a),Ci.is(a.execution)&&r.push(this.y(a,o,!0)))}return{tasks:n,extension:i.extension}}async w(t){return t}async G(t){let r=t&&t.length>0?t[0]:void 0;if(!r){const i=x.file(JU());r=new h1({uri:i,name:ji(i),index:0})}return{uri:r.uri,name:r.name,index:r.index,toResource:()=>{throw new Error("Not implemented")}}}async $resolveVariables(t,r){const i=x.revive(t),s={process:void 0,variables:Object.create(null)},n=await this.b.resolveWorkspaceFolder(i),o=await this.b.getWorkspaceFolders2()??[],a=await this.D.getResolver(),c=n?{uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}:await this.G(o);for(const l of r.variables)s.variables[l]=await a.resolveAsync(c,l);if(r.process!==void 0){let l;if(r.process.path!==void 0){l=r.process.path.split(F4);for(let u=0;u<l.length;u++)l[u]=await a.resolveAsync(c,l[u])}s.process=await _u.findExecutable(await a.resolveAsync(c,r.process.name),r.process.cwd!==void 0?await a.resolveAsync(c,r.process.cwd):void 0,l)}return s}async $jsonTasksSupported(){return!0}async $findExecutable(t,r,i){return _u.findExecutable(t,r,i)}};ab=__decorate([__param(0,Ae),__param(1,Ot),__param(2,Si),__param(3,Po),__param(4,ti),__param(5,Ls),__param(6,$e),__param(7,Nu),__param(8,fc)],ab);import*as pc from"child_process";var iQ=J("externalTerminal"),tg="Terminal.app",bS=p(1896,null),cb=class{async getDefaultTerminalForPlatforms(){return{windows:lb.getDefaultTerminalWindows(),linux:await yS.getDefaultTerminalLinuxReady(),osx:"xterm"}}},lb=class zs extends cb{static{this.b="cmd.exe"}openTerminal(t,r){return this.spawnTerminal(pc,t,wS(),r)}spawnTerminal(t,r,i,s){const n=r.windowsExec||zs.getDefaultTerminalWindows();s&&s[1]===":"&&(s=s[0].toUpperCase()+s.substr(1));const o=ut(n,".exe").toLowerCase();if(o==="cmder")return t.spawn(n,s?[s]:void 0),Promise.resolve(void 0);const a=["/c","start","/wait"];return n.indexOf(" ")>=0&&a.push(n),a.push(n),o==="wt"&&a.push("-d ."),new Promise((c,l)=>{const u=gc(process),h=t.spawn(i,a,{cwd:s,env:u,detached:!0});h.on("error",l),h.on("exit",()=>c())})}async runInTerminal(t,r,i,s,n){const o="windowsExec"in n&&n.windowsExec?n.windowsExec:zs.getDefaultTerminalWindows(),a=await zs.f();return new Promise((c,l)=>{const u=`"${r} - ${bS}"`,h=`"${i.join('" "')}" & pause`,d=Object.assign({},gc(process),s);Object.keys(d).filter(E=>d[E]===null).forEach(E=>delete d[E]);const f={cwd:r,env:d,windowsVerbatimArguments:!0};let g,v;ut(o,".exe")==="wt"?(g=o,v=["-d",".",zs.b,"/c",h]):a?(g=a,v=["-d",".",o,"/c",h]):(g=zs.b,v=["/c","start",u,"/wait",o,"/c",`"${h}"`]),pc.spawn(g,v,f).on("error",E=>{l(ub(E))}),c(void 0)})}static getDefaultTerminalWindows(){if(!zs.d){const t=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");zs.d=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${t?"Sysnative":"System32"}\\cmd.exe`}return zs.d}static async f(){try{const t=await _u.findExecutable("wt");return await qe.exists(t)?t:void 0}catch{return}}};__decorate([W5],lb,"f",null);var QU=class tI extends cb{static{this.b="/usr/bin/osascript"}openTerminal(t,r){return this.spawnTerminal(pc,t,r)}runInTerminal(t,r,i,s,n){const o=n.osxExec||tg;return new Promise((a,c)=>{if(o===tg||o==="iTerm.app"){const l=o===tg?"TerminalHelper":"iTermHelper",h=[f5.asFileUri(`vs/workbench/contrib/externalTerminal/node/${l}.scpt`).fsPath,"-t",t||bS,"-w",r];for(const g of i)h.push("-a"),h.push(g);if(s){const g=Object.assign({},gc(process),s);for(const v in g){const y=g[v];y===null?(h.push("-u"),h.push(v)):(h.push("-e"),h.push(`${v}=${y}`))}}let d="";const f=pc.spawn(tI.b,h);f.on("error",g=>{c(ub(g))}),f.stderr.on("data",g=>{d+=g.toString()}),f.on("exit",g=>{if(g===0)a(void 0);else if(d){const v=d.split(`
`,1);c(new Error(v[0]))}else c(new Error(p(1897,null,l,g)))})}else c(new Error(p(1898,null,o)))})}spawnTerminal(t,r,i){const s=r.osxExec||tg;return new Promise((n,o)=>{const a=["-a",s];i&&a.push(i);const c=gc(process),l=t.spawn("/usr/bin/open",a,{cwd:i,env:c});l.on("error",o),l.on("exit",()=>n())})}},yS=class Tn extends cb{static{this.b=p(1899,null)}openTerminal(t,r){return this.spawnTerminal(pc,t,r)}runInTerminal(t,r,i,s,n){const o=n.linuxExec?Promise.resolve(n.linuxExec):Tn.getDefaultTerminalLinuxReady();return new Promise((a,c)=>{const l=[];o.then(u=>{u.indexOf("gnome-terminal")>=0?l.push("-x"):l.push("-e"),l.push("bash"),l.push("-c");const h=`${YU(i)}; echo; read -p "${Tn.b}" -n1;`;l.push(`''${h}''`);const d=Object.assign({},gc(process),s);Object.keys(d).filter(y=>d[y]===null).forEach(y=>delete d[y]);const f={cwd:r,env:d};let g="";const v=pc.spawn(u,l,f);v.on("error",y=>{c(ub(y))}),v.stderr.on("data",y=>{g+=y.toString()}),v.on("exit",y=>{if(y===0)a(void 0);else if(g){const E=g.split(`
`,1);c(new Error(E[0]))}else c(new Error(p(1900,null,u,y)))})})})}static async getDefaultTerminalLinuxReady(){if(!Tn.d)if(!bt)Tn.d=Promise.resolve("xterm");else{const t=await qe.exists("/etc/debian_version");Tn.d=new Promise(r=>{t?r("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?r("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?r("konsole"):process.env.COLORTERM?r(process.env.COLORTERM):process.env.TERM?r(process.env.TERM):r("xterm")})}return Tn.d}spawnTerminal(t,r,i){const s=r.linuxExec?Promise.resolve(r.linuxExec):Tn.getDefaultTerminalLinuxReady();return new Promise((n,o)=>{s.then(a=>{const c=gc(process),l=t.spawn(a,[],{cwd:i,env:c});l.on("error",o),l.on("exit",()=>n())})})}};function gc(e){const t={...e.env};return VU(t),t}function ub(e){return"errno"in e&&e.errno==="ENOENT"&&"path"in e&&typeof e.path=="string"?new Error(p(1901,null,e.path)):e}function YU(e){let t="";for(const r of e)r.indexOf(" ")>=0?t+='"'+r+'"':t+=r,t+=" ";return t}var XU=class rI{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(t){try{const r=await this.c();if(r){const i=String(rI.a++);return this.b.set(i,r),{id:i,data:r.createNewMessage(t)}}}catch{}return{id:"",data:t}}async validate(t,r){if(!t.id)return!0;const i=this.b.get(t.id);if(!i)return!1;this.b.delete(t.id);try{return i.validate(r)==="ok"}catch{return!1}finally{i.dispose?.()}}async sign(t){try{return await this.d(t)}catch{}return t}},xS=class extends XU{c(){return this.h().then(e=>new e.validator)}d(e){return this.h().then(t=>new t.signer().sign(e))}async h(){const e="vsda",{default:t}=await import(e);return t}};import*as hb from"child_process";import*as ES from"net";var kS=class Dc extends tS{static{this.b=`\r
\r
`}static{this.i=/\r?\n/}static{this.l=/: */}constructor(){super(),this.r=Buffer.allocUnsafe(0),this.t=-1}v(t,r){this.p=r,this.r=Buffer.allocUnsafe(0),this.t=-1,t.on("data",i=>this.x(i))}sendMessage(t){if(this.p){const r=JSON.stringify(t);this.p.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}${Dc.b}${r}`,"utf8")}}x(t){for(this.r=Buffer.concat([this.r,t]);;){if(this.t>=0){if(this.r.length>=this.t){const r=this.r.toString("utf8",0,this.t);if(this.r=this.r.slice(this.t),this.t=-1,r.length>0)try{this.acceptMessage(JSON.parse(r))}catch(i){this.n.fire(new Error((i.message||i)+`
`+r))}continue}}else{const r=this.r.indexOf(Dc.b);if(r!==-1){const s=this.r.toString("utf8",0,r).split(Dc.i);for(const n of s){const o=n.split(Dc.l);o[0]==="Content-Length"&&(this.t=Number(o[1]))}this.r=this.r.slice(r+Dc.b.length);continue}}break}}},SS=class extends kS{startSession(){return new Promise((e,t)=>{let r=!1;this.y=this.z(()=>{this.v(this.y,this.y),e(),r=!0}),this.y.on("close",()=>{r?this.n.fire(new Error("connection closed")):t(new Error("connection closed"))}),this.y.on("error",i=>{r?this.n.fire(i):t(i)})})}async stopSession(){await this.w(),this.y&&(this.y.end(),this.y=void 0)}},ZU=class extends SS{constructor(e){super(),this.A=e}z(e){return ES.createConnection(this.A.port,this.A.host||"127.0.0.1",e)}},KU=class extends SS{constructor(e){super(),this.A=e}z(e){return ES.createConnection(this.A.path,e)}},$S=class Ho extends kS{constructor(t,r){super(),this.z=t,this.A=r}async startSession(){const t=this.z.command,r=this.z.args,i=this.z.options||{};try{if(t)if(Ui(t)){if(!await qe.exists(t))throw new Error(p(6243,null,t))}else t.indexOf("/")<0&&t.indexOf("\\")<0;else throw new Error(p(6244,null,this.A));let s=process.env;if(i.env&&Object.keys(i.env).length>0&&(s=ds(it(process.env),i.env)),t==="node")if(Array.isArray(r)&&r.length>0){const n=!!process.env.ELECTRON_RUN_AS_NODE||!!process.versions.electron,o={env:s,execArgv:n?["-e","delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])"]:[],silent:!0};i.cwd&&(o.cwd=i.cwd);const a=hb.fork(r[0],r.slice(1),o);if(!a.pid)throw new Error(p(6245,null,r[0]));this.y=a}else throw new Error(p(6246,null));else{let n=t,o=r;const a={env:s};i.cwd&&(a.cwd=i.cwd),ze&&(t.endsWith(".bat")||t.endsWith(".cmd"))&&(a.shell=!0,n=`"${t}"`,o=r.map(c=>(c=c.replace(/"/g,'\\"'),`"${c}"`))),this.y=hb.spawn(n,o,a)}this.y.on("error",n=>{this.n.fire(n)}),this.y.on("exit",(n,o)=>{this.o.fire(n)}),this.y.stdout.on("close",()=>{this.n.fire(new Error("read error"))}),this.y.stdout.on("error",n=>{this.n.fire(n)}),this.y.stdin.on("error",n=>{this.n.fire(n)}),this.y.stderr.resume(),this.v(this.y.stdout,this.y.stdin)}catch(s){this.n.fire(s)}}async stopSession(){return this.y?(await this.w(),ze?new Promise((t,r)=>{const i=hb.exec(`taskkill /F /T /PID ${this.y.pid}`,function(s,n,o){if(s)return r(s)});i.on("exit",t),i.on("error",r)}):(this.y.kill("SIGTERM"),Promise.resolve(void 0))):Promise.resolve(void 0)}static B(t,r){if(!t)return;const i=Object.create(null);t.runtime&&(t.runtime.indexOf("./")===0?i.runtime=Ve(r,t.runtime):i.runtime=t.runtime),t.runtimeArgs&&(i.runtimeArgs=t.runtimeArgs),t.program&&(Ui(t.program)?i.program=t.program:i.program=Ve(r,t.program)),t.args&&(i.args=t.args);const s=t;return s.win&&(i.win=Ho.B(s.win,r)),s.winx86&&(i.winx86=Ho.B(s.winx86,r)),s.windows&&(i.windows=Ho.B(s.windows,r)),s.osx&&(i.osx=Ho.B(s.osx,r)),s.linux&&(i.linux=Ho.B(s.linux,r)),i}static platformAdapterExecutable(t,r){let i=Object.create(null);r=r.toLowerCase();for(const l of t)if(l.contributes){const u=l.contributes.debuggers;u&&u.length>0&&u.filter(h=>typeof h.type=="string"&&ci(h.type,r)).forEach(h=>{const d=Ho.B(h,l.extensionLocation.fsPath);i=ds(i,d,l.isBuiltin)})}let s;ze&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?s=i.winx86||i.win||i.windows:ze?s=i.win||i.windows:Nt?s=i.osx:bt&&(s=i.linux),s=s||i;const n=s.program||i.program,o=s.args||i.args,a=s.runtime||i.runtime,c=s.runtimeArgs||i.runtimeArgs;if(a)return{type:"executable",command:a,args:(c||[]).concat(typeof n=="string"?[n]:[]).concat(o||[])};if(n)return{type:"executable",command:n,args:o||[]}}};import*as ej from"child_process";function tj(e,t){return new Promise((r,i)=>{let s="";const n=ej.spawn(e,t);n.pid&&n.stdout.on("data",o=>{s+=o.toString()}),n.on("error",o=>{i(o)}),n.on("close",o=>{r(s)})})}async function rj(e){if(e)if(ze){const t=await import("@vscode/windows-process-tree");return new Promise(r=>{t.getProcessTree(e,i=>{r(!!i&&i.children.length>0)})})}else return tj("/usr/bin/pgrep",["-lP",String(e)]).then(t=>{const r=t.trim();return!(r.length===0||r.indexOf(" tmux")>=0)},t=>!0);return Promise.resolve(!0)}var CS;(function(e){e[e.cmd=0]="cmd",e[e.powershell=1]="powershell",e[e.bash=2]="bash"})(CS||(CS={}));function ij(e,t,r,i,s){e=e.trim().toLowerCase();let n;e.indexOf("powershell")>=0||e.indexOf("pwsh")>=0?n=1:e.indexOf("cmd.exe")>=0?n=0:e.indexOf("bash")>=0?n=2:ze?n=0:n=2;let o,a=" ";switch(n){case 1:if(o=c=>(c=c.replace(/\'/g,"''"),c.length>0&&c.charAt(c.length-1)==="\\"?`'${c}\\'`:`'${c}'`),i){const c=s5(i);c&&(a+=`${c}:; `),a+=`cd ${o(i)}; `}if(s)for(const c in s){const l=s[c];l===null?a+=`Remove-Item env:${c}; `:a+=`\${env:${c}}='${l}'; `}if(t.length>0){const c=t.shift(),l=r?c:o(c);a+=l[0]==="'"?`& ${l} `:`${l} `;for(const u of t)a+=u==="<"||u===">"||r?u:o(u),a+=" "}break;case 0:if(o=c=>(c=c.replace(/\"/g,'""'),c=c.replace(/([><!^&|])/g,"^$1"),' "'.split("").some(l=>c.includes(l))||c.length===0?`"${c}"`:c),i){const c=s5(i);c&&(a+=`${c}: && `),a+=`cd ${o(i)} && `}if(s){a+='cmd /C "';for(const c in s){let l=s[c];l===null?a+=`set "${c}=" && `:(l=l.replace(/[&^|<>]/g,u=>`^${u}`),a+=`set "${c}=${l}" && `)}}for(const c of t)a+=c==="<"||c===">"||r?c:o(c),a+=" ";s&&(a+='"');break;case 2:{o=l=>(l=l.replace(/(["'\\\$!><#()\[\]*&^| ;{}?`])/g,"\\$1"),l.length===0?'""':l);const c=l=>/[^\w@%\/+=,.:^-]/.test(l)?`'${l.replace(/'/g,"'\\''")}'`:l;if(i&&(a+=`cd ${o(i)} ; `),s){a+="/usr/bin/env";for(const l in s){const u=s[l];u===null?a+=` -u ${c(l)}`:a+=` ${c(`${l}=${u}`)}`}a+=" "}for(const l of t)a+=l==="<"||l===">"||r?l:o(l),a+=" ";break}}return a}var db=class extends Xp{constructor(t,r,i,s,n,o,a,c,l,u){super(t,r,i,s,a,c,l,u),this.Fb=n,this.Gb=o,this.Db=new nj}ib(t,r){return t instanceof Oa?new $S(this.lb(t),r.type):t instanceof Ma?new ZU(this.mb(t)):t instanceof _l?new KU(this.nb(t)):super.ib(t,r)}vb(t,r){const i=$S.platformAdapterExecutable(r.getAllExtensionDescriptions(),t.type);if(i)return new Oa(i.command,i.args,i.options)}jb(){return new xS}async $runInTerminal(t,r){if(t.kind==="integrated"){this.Eb||(this.Eb=this.B(this.Fb.onDidCloseTerminal(g=>{this.Db.onTerminalClosed(g)})));const i=await this.ab.getConfigProvider(),s=this.Fb.getDefaultShell(!0),n=this.Fb.getDefaultShellArgs(!0),o=t.title||p(2781,null),a=JSON.stringify({shell:s,shellArgs:n});let c=await this.Db.checkout(a,o),l,u=!1;if(c)l=t.cwd;else{const g={shellPath:s,shellArgs:n,cwd:t.cwd,name:o,iconPath:new nr("debug")};u=!0,c=this.Fb.createTerminalFromOptions(g,{isFeatureTerminal:!0,forceShellIntegration:!0,useShellEnvironment:!0}),this.Db.insert(c,a)}c.show(!0);const h=await c.processId;if(u){let g;(function(y){y[y.DataDebounce=500]="DataDebounce",y[y.MaxDelay=5e3]="MaxDelay"})(g||(g={}));const v=new he;await new Promise(y=>{const E=v.add(new hs(y,500));v.add(this.Fb.onDidWriteTerminalData(k=>{k.terminal===c&&E.schedule()})),v.add(this.Gb.onDidChangeTerminalShellIntegration(k=>{k.terminal===c&&y()})),v.add(k5(y,5e3))}),v.dispose()}else c.state.isInteractedWith&&!c.shellIntegration&&(c.sendText(""),await lr(200)),i.getConfiguration("debug.terminal").get("clearBeforeReusing")&&(s.indexOf("powershell")>=0||s.indexOf("pwsh")>=0||s.indexOf("cmd.exe")>=0?c.sendText("cls"):s.indexOf("bash")>=0?c.sendText("clear"):ze?c.sendText("cls"):c.sendText("clear"));const d=ij(s,t.args,!!t.argsCanBeInterpretedByShell,l,t.env);c.shellIntegration?c.shellIntegration.executeCommand(d):c.sendText(d);const f=this.onDidTerminateDebugSession(g=>{g.id===r&&(this.Db.free(c),f.dispose())});return h}else if(t.kind==="external")return sj(t,await this.ab.getConfigProvider());return super.$runInTerminal(t,r)}};db=__decorate([__param(0,Ae),__param(1,Si),__param(2,Ns),__param(3,ti),__param(4,Ls),__param(5,sb),__param(6,dc),__param(7,fc),__param(8,$i),__param(9,Hu)],db);var zu=void 0;function sj(e,t){if(!zu)if(ze)zu=new lb;else if(Nt)zu=new QU;else if(bt)zu=new yS;else throw new Error("external terminals not supported on this platform");const r=t.getConfiguration("terminal");return zu.runInTerminal(e.title,e.cwd,e.args,e.env||{},r.external||{})}var nj=class iI{constructor(){this.b=new Map}static{this.a=1e3}async checkout(t,r,i=!1){const n=[...this.b.entries()].map(([o,a])=>us(async c=>{if(o.name!==r||a.lastUsedAt!==-1&&await rj(await o.processId))return null;const l=Date.now();return a.lastUsedAt+iI.a>l||c.isCancellationRequested?null:a.config!==t?(i&&o.dispose(),null):(a.lastUsedAt=l,o)}));return await l2(n,o=>!!o)}insert(t,r){this.b.set(t,{lastUsedAt:Date.now(),config:r})}free(t){const r=this.b.get(t);r&&(r.lastUsedAt=-1)}onTerminalClosed(t){this.b.delete(t)}},IS=new Lr(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),nQ=new Lr(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),oQ=new Lr(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function PS(e,t,r=!1){const i=e||"",s=t||"",n=IS.value.collator.compare(i,s);return IS.value.collatorIsNumeric&&n===0&&i!==s?i<s?-1:1:n}function oj(e,t,r=!1){return r||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function rg(e,t,r=!1){const i=e.split(gt),s=t.split(gt),n=i.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return PS(i[l],s[l],r);if(a)return-1;if(c)return 1;const u=oj(i[l],s[l],r);if(u!==0)return u}}function fb(e,t,r){const i=e.toLowerCase(),s=t.toLowerCase(),n=aj(e,t,r);if(n)return n;const o=i.endsWith(r),a=s.endsWith(r);if(o!==a)return o?-1:1;const c=PS(i,s);return c!==0?c:i.localeCompare(s)}function aj(e,t,r){const i=e.toLowerCase(),s=t.toLowerCase(),n=i.startsWith(r),o=s.startsWith(r);if(n!==o)return n?-1:1;if(n&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var ig=0,DS=[ig,[]];function AS(e,t,r,i){if(!e||!t)return DS;const s=e.length,n=t.length;if(s<n)return DS;const o=e.toLowerCase();return cj(t,r,n,e,o,s,i)}function cj(e,t,r,i,s,n,o){const a=[],c=[];for(let d=0;d<r;d++){const f=d*n,g=f-n,v=d>0,y=e[d],E=t[d];for(let k=0;k<n;k++){const I=k>0,D=f+k,T=D-1,_=g+k-1,q=I?a[T]:0,W=v&&I?a[_]:0,U=v&&I?c[_]:0;let ne;!W&&v?ne=0:ne=lj(y,E,i,s,k,U),ne&&W+ne>=q&&(o||v||s.startsWith(t,k))?(c[D]=U+1,a[D]=W+ne):(c[D]=ig,a[D]=q)}}const l=[];let u=r-1,h=n-1;for(;u>=0&&h>=0;){const d=u*n+h;c[d]===ig||(l.push(h),u--),h--}return[a[r*n-1],l.reverse()]}function lj(e,t,r,i,s,n){let o=0;if(!uj(t,i[s]))return o;if(o+=1,n>0&&(o+=n*5),e===r[s]&&(o+=1),s===0)o+=8;else{const a=hj(r.charCodeAt(s-1));a?o+=a:al(r.charCodeAt(s))&&n===0&&(o+=2)}return o}function uj(e,t){return e===t?!0:e==="/"||e==="\\"?t==="/"||t==="\\":!1}function hj(e){switch(e){case 47:case 92:return 5;case 95:case 45:case 46:case 32:case 39:case 34:case 58:return 4;default:return 0}}var sg=Object.freeze({score:0}),ng=1<<18,pb=1<<17,gb=65536;function dj(e,t,r,i){const s=i.values?i.values:[i];return gs({[i.normalized]:{values:s.map(o=>({value:o.normalized,expectContiguousMatch:o.expectContiguousMatch})),label:e,description:t,allowNonContiguousMatches:r}})}function TS(e,t,r,i,s){if(!e||!t.normalized)return sg;const n=i.getItemLabel(e);if(!n)return sg;const o=i.getItemDescription(e),a=dj(n,o,r,t),c=s[a];if(c)return c;const l=fj(n,o,i.getItemPath(e),t,r);return s[a]=l,l}function fj(e,t,r,i,s){const n=!r||!i.containsPathSeparator;return r&&(bt?i.pathNormalized===r:ci(i.pathNormalized,r))?{score:ng,labelMatch:[{start:0,end:e.length}],descriptionMatch:t?[{start:0,end:t.length}]:void 0}:i.values&&i.values.length>1?pj(e,t,r,i.values,n,s):RS(e,t,r,i,n,s)}function pj(e,t,r,i,s,n){let o=0;const a=[],c=[];for(const l of i){const{score:u,labelMatch:h,descriptionMatch:d}=RS(e,t,r,l,s,n);if(u===ig)return sg;o+=u,h&&a.push(...h),d&&c.push(...d)}return{score:o,labelMatch:NS(a),descriptionMatch:NS(c)}}function RS(e,t,r,i,s,n){if(s||!t){const[o,a]=AS(e,i.normalized,i.normalizedLowercase,n&&!i.expectContiguousMatch);if(o){const c=p1(i.normalized,e);let l;if(c){l=pb;const u=Math.round(i.normalized.length/e.length*100);l+=u}else l=gb;return{score:l+o,labelMatch:c||LS(a)}}}if(t){let o=t;r&&(o=`${t}${gt}`);const a=o.length,c=`${o}${e}`,[l,u]=AS(c,i.normalized,i.normalizedLowercase,n&&!i.expectContiguousMatch);if(l){const h=LS(u),d=[],f=[];return h.forEach(g=>{g.start<a&&g.end>a?(d.push({start:0,end:g.end-a}),f.push({start:g.start,end:a})):g.start>=a?d.push({start:g.start-a,end:g.end-a}):f.push(g)}),{score:l,labelMatch:d,descriptionMatch:f}}}return sg}function LS(e){const t=[];if(!e)return t;let r;for(const i of e)r&&r.end===i?r.end+=1:(r={start:i,end:i+1},t.push(r));return t}function NS(e){const t=e.sort((s,n)=>s.start-n.start),r=[];let i;for(const s of t)!i||!gj(i,s)?(i=s,r.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return r}function gj(e,t){return!(e.end<t.start||t.end<e.start)}function mj(e,t,r,i,s,n){const o=TS(e,r,i,s,n),a=TS(t,r,i,s,n),c=o.score,l=a.score;if((c===ng||l===ng)&&c!==l)return c===ng?-1:1;if(c>gb||l>gb){if(c!==l)return c>l?-1:1;if(c<pb&&l<pb){const y=vj(o.labelMatch,a.labelMatch);if(y!==0)return y}const g=s.getItemLabel(e)||"",v=s.getItemLabel(t)||"";if(g.length!==v.length)return g.length-v.length}if(c!==l)return c>l?-1:1;const u=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(u&&!h)return-1;if(h&&!u)return 1;const d=FS(e,o,s),f=FS(t,a,s);return d&&f&&d!==f?f>d?-1:1:wj(e,t,r,s)}function FS(e,t,r){let i=-1,s=-1;if(t.descriptionMatch&&t.descriptionMatch.length?i=t.descriptionMatch[0].start:t.labelMatch&&t.labelMatch.length&&(i=t.labelMatch[0].start),t.labelMatch&&t.labelMatch.length){if(s=t.labelMatch[t.labelMatch.length-1].end,t.descriptionMatch&&t.descriptionMatch.length){const n=r.getItemDescription(e);n&&(s+=n.length)}}else t.descriptionMatch&&t.descriptionMatch.length&&(s=t.descriptionMatch[t.descriptionMatch.length-1].end);return s-i}function vj(e,t){if(!e&&!t||(!e||!e.length)&&(!t||!t.length))return 0;if(!t||!t.length)return-1;if(!e||!e.length)return 1;const r=e[0].start,s=e[e.length-1].end-r,n=t[0].start,a=t[t.length-1].end-n;return s===a?0:a<s?1:-1}function wj(e,t,r,i){const s=i.getItemLabel(e)||"",n=i.getItemLabel(t)||"",o=i.getItemDescription(e),a=i.getItemDescription(t),c=s.length+(o?o.length:0),l=n.length+(a?a.length:0);if(c!==l)return c-l;const u=i.getItemPath(e),h=i.getItemPath(t);return u&&h&&u.length!==h.length?u.length-h.length:s!==n?fb(s,n,r.normalized):o&&a&&o!==a?fb(o,a,r.normalized):u&&h&&u!==h?fb(u,h,r.normalized):0}function OS(e){return e.startsWith('"')&&e.endsWith('"')}var bj=" ";function mb(e){typeof e!="string"&&(e="");const t=e.toLowerCase(),{pathNormalized:r,normalized:i,normalizedLowercase:s}=MS(e),n=r.indexOf(gt)>=0,o=OS(e);let a;const c=e.split(bj);if(c.length>1)for(const l of c){const u=OS(l),{pathNormalized:h,normalized:d,normalizedLowercase:f}=MS(l);d&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:h,normalized:d,normalizedLowercase:f,expectContiguousMatch:u}))}return{original:e,originalLowercase:t,pathNormalized:r,normalized:i,normalizedLowercase:s,values:a,containsPathSeparator:n,expectContiguousMatch:o}}function MS(e){let t;ze?t=e.replace(/\//g,gt):t=e.replace(/\\/g,gt);const r=hD(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:r,normalizedLowercase:r.toLowerCase()}}import*as yj from"child_process";import*as vb from"fs";import{StringDecoder as US}from"string_decoder";import*as xj from"child_process";function og(e){return e.startsWith("**")||e.startsWith("/")?e:`/${e}`}function Ej(e){return new j0(e.start.line,e.start.character,e.end.line,e.end.character)}function jS(e){return new e9(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}var ag=class{constructor(t,r){this.a=t,this.b=r}appendLine(t){this.b.debug(`${this.a}#search`,t)}};ag=__decorate([__param(1,$e)],ag);import{rgPath as kj}from"@vscode/ripgrep";var HS=kj.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function Sj(e,t,r,i,s){const n=$j(e,t,r,i,s),o=t.folder.fsPath;return{cmd:xj.spawn(HS,n.args,{cwd:o}),rgDiskPath:HS,siblingClauses:n.siblingClauses,rgArgs:n,cwd:o}}function $j(e,t,r,i,s){const n=["--files","--hidden","--case-sensitive","--no-require-git"];Ij([t],r,!1).forEach(a=>{const c=og(a);if(n.push("-g",c),Nt){const l=L5(c);l!==c&&n.push("-g",l)}});const o=Cj([t],i,void 0,!1);return o.globArgs.forEach(a=>{const c=`!${og(a)}`;if(n.push("-g",c),Nt){const l=L5(c);l!==c&&n.push("-g",l)}}),t.disregardIgnoreFiles!==!1?n.push("--no-ignore"):t.disregardParentIgnoreFiles!==!1&&n.push("--no-ignore-parent"),t.ignoreSymlinks||n.push("--follow"),e.exists&&n.push("--quiet"),s&&n.push("--threads",`${s}`),n.push("--no-config"),t.disregardGlobalIgnoreFiles&&n.push("--no-ignore-global"),{args:n,siblingClauses:o.siblingClauses}}function Cj(e,t,r,i=!0){const s=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=BS(a,i?o.folder.fsPath:void 0,r);s.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:s,siblingClauses:n}}function Ij(e,t,r=!0){const i=[];return e.forEach(s=>{const n=Object.assign({},t||{},s.includePattern||{}),o=BS(n,r?s.folder.fsPath:void 0);i.push(...o.globArgs)}),i}function BS(e,t,r){const i=[],s={};return Object.keys(e).forEach(n=>{if(r&&r.has(n)||!n)return;const o=e[n];n=Dj(t?Pj(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),i.push(Aj(n))):o&&o.when&&(s[n]=o)}),{globArgs:i,siblingClauses:s}}function Pj(e,t){return Ui(t)?t:Ve(e,t)}function Dj(e){return e=Ks(e,"\\"),Ks(e,"/")}function Aj(e){return $m(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var cg=new Set;process.on("exit",()=>{cg.forEach(e=>e())});var Tj=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&wi(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:mb(this.b).normalizedLowercase),this.u=e.excludePattern&&wi(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const r={};t.excludePattern?.forEach(s=>{Object.assign(r,s.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(r,this.a.excludePattern||{});const i=t.folder.fsPath;e.folderQueries.map(s=>s.folder.fsPath).filter(s=>s!==i).forEach(s=>{Bn(s,i)&&(r[Xo(i,s)]=!0)}),this.t.set(i,new Rj(r,i))})}cancel(){this.l=!0,cg.forEach(e=>e())}walk(e,t,r,i,s,n){if(this.m=Ar.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=ut(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(i,{relativePath:o.fsPath,searchPath:void 0})}),this.r=Ar.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,r,i,s,c=>{if(c){const l=pi(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?St(o)[0]:null;n(c,this.j)})}w(e,t,r){const i=new Array(e.length),s=new Array(e.length);let n=!1,o=0;if(e.length===0)return r(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,i[c]=null,s[c]=l):(i[c]=u,s[c]=null),++o===e.length)return r(n?s:null,i)})})}x(e,t,...r){try{e.apply(t,r)}catch(i){r[r.length-1](i)}}y(e,t,r,i,s){const n=e.folder.fsPath,o=Nt,a=()=>d&&d.kill();cg.add(a);let c=y=>{cg.delete(a),c=()=>{},s(y)},l="";const u=this.D(),h=Sj(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),d=h.cmd,f=!Object.keys(h.siblingClauses).length,g=h.rgArgs.args.map(y=>y.match(/^-/)?y:`'${y}'`).join(" ");let v=`${h.rgDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),i({message:v}),this.s=0,this.z(d,"utf8",i,(y,E,k)=>{if(y){c(y);return}if(this.j){c();return}const D=(l+(o?Jh(E||""):E)).split(`
`);if(k){const T=D.length;D[T-1]=D[T-1].trim(),D[T-1]||D.pop()}else l=D.pop()||"";if(D.length&&D[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=D.length,f){for(const T of D)if(this.J(r,{base:n,relativePath:T,searchPath:this.N(e,T)}),this.j){a();break}(k||this.j)&&c();return}this.G(e,u,n,D,r),k&&(this.H(u,n,r),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),r=t.getBasenameTerms(),i=t.getPathTerms(),s=["-L","."];if(r.length||i.length){s.push("-not","(","(");for(const n of r)s.push("-name",n),s.push("-o");for(const n of i)s.push("-path",n),s.push("-o");s.pop(),s.push(")","-prune",")")}return s.push("-type","f"),yj.spawn("find",s,{cwd:e.folder.fsPath})}readStdout(e,t,r){let i="";this.z(e,t,()=>{},(s,n,o)=>{if(s){r(s);return}i+=n,o&&r(null,i)})}z(e,t,r,i){let s=(a,c,l)=>{(a||l)&&(s=()=>{},this.r?.stop()),i(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,s),e.stdout.once("data",()=>n=!0)):r({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):r({message:"stderr is null"}),e.on("error",a=>{s(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&Lj(c)?s(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),s(null,"",!0))})}A(e,t,r){const i=new US(t);return e.on("data",s=>{r(null,i.write(s))}),i}B(e){const t=[];return e.on("data",r=>{t.push(r)}),t}C(e,t){const r=new US(t);return e.map(i=>r.write(i)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},r,i,s){i.indexOf(this.b)!==-1&&this.J(s,{base:r,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=ut(o),c=gr(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:r,relativePath:o,basename:a,searchPath:this.N(e,o)})};i.forEach(n)}H({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.t.get(r),o=this.b;function a(c){s.o++;const l=B0(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const d=c[u],{relativePath:f,basename:g}=d;if(n.test(f,g,o!==g?l:void 0))continue;const v=t[f];if(v)a(v);else{if(s.p++,f===o)continue;s.J(i,d)}if(s.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,r,i,s){const n=e.folder,o=B0(()=>r);this.w(r,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join(gt):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join(gt);vb.lstat(u,(h,d)=>{if(h||this.l||this.j)return c(null);this.L(u,d,(f,g)=>f||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,d,(v,y)=>v||this.l||this.j||(y=y||"",this.v[y])?c(null):(this.v[y]=!0,qe.readdir(u).then(E=>{if(this.l||this.j)return c(null);this.I(e,l,E,i,k=>c(k||null))},E=>{c(null)})))):(this.p++,l===this.b||this.h&&_r(g.size)&&g.size>this.h||this.J(i,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&St(a);return s(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,ut(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return H0(e,this.c);if(this.b)return H0(e,this.b,!1)}return!0}L(e,t,r){return t.isSymbolicLink()?vb.stat(e,r):r(null,t)}M(e,t,r){return t.isSymbolicLink()?vb.realpath(e,(i,s)=>i?r(i):r(null,s)):r(null,e)}N(e,t){return e.folderName?Ve(e.folderName,t):t}},_S=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new Tj(e)}search(e,t,r){this.c.walk(this.a,this.b,this.d,e,t,(i,s)=>{r(i,{limitHit:s,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},Rj=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,r;Object.keys(e).filter(i=>e[i]).forEach(i=>{Ui(i)?(t=t||k7(),t[i]=e[i]):(r=r||k7(),r[i]=e[i])}),this.a=t&&wi(t,{trimForExclusions:!0}),this.b=r&&wi(r,{trimForExclusions:!0})}test(e,t,r){return this.b&&this.b(e,t,r)||this.a&&this.a(Ve(this.c,e),t,r)}getBasenameTerms(){const e=[];return this.a&&e.push(...A7(this.a)),this.b&&e.push(...A7(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...T7(this.a)),this.b&&e.push(...T7(this.b)),e}};function Lj(e){const t=e.trim().split(`
`),r=t[0].trim();if(r.startsWith("Error parsing regex"))return r;if(r.startsWith("regex parse error"))return $D(t[t.length-1].trim());if(r.startsWith("error parsing glob")||r.startsWith("unsupported encoding"))return r.charAt(0).toUpperCase()+r.substr(1);if(r==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(r.startsWith("Literal "))return r}import*as Nj from"child_process";import{EventEmitter as Fj}from"events";import{StringDecoder as Oj}from"string_decoder";import{RegExpParser as Mj,RegExpVisitor as Uj}from"vscode-regexpp";import{rgPath as jj}from"@vscode/ripgrep";var zS=jj.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),WS=class{constructor(e,t){this.a=e,this.b=t}provideTextSearchResults(e,t,r,i){return Promise.all(t.folderOptions.map(s=>{const n={folderOptions:s,numThreads:this.b,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};return this.provideTextSearchResultsWithRgOptions(e,n,r,i)})).then(s=>({limitHit:s.some(o=>!!o&&o.limitHit)}))}provideTextSearchResultsWithRgOptions(e,t,r,i){return this.a.appendLine(`provideTextSearchResults ${e.pattern}, ${JSON.stringify({...t,folder:t.folderOptions.folder.toString()})}`),new Promise((s,n)=>{i.onCancellationRequested(()=>g());const o={...t,numThreads:this.b},a=zj(e,o),c=t.folderOptions.folder.fsPath,l=a.map(I=>I.match(/^-/)?I:`'${I}'`).join(" ");this.a.appendLine(`${zS} ${l}
 - cwd: ${c}`);let u=Nj.spawn(zS,a,{cwd:c});u.on("error",I=>{console.error(I),this.a.appendLine("Error: "+(I&&I.message)),n(u9(new $o(I&&I.message,Sn.rgProcessError)))});let h=!1;const d=new _j(t.maxResults??Ip,t.folderOptions.folder,dS(t.previewOptions));d.on("result",I=>{h=!0,y="",r.report(I)});let f=!1;const g=()=>{f=!0,u?.kill(),d?.cancel()};let v=!1;d.on("hitLimit",()=>{v=!0,g()});let y="";u.stdout.on("data",I=>{d.handleData(I),h||(y+=I)});let E=!1;u.stdout.once("data",()=>E=!0);let k="";u.stderr.on("data",I=>{const D=I.toString();this.a.appendLine(D),k.length+D.length<1e6&&(k+=D)}),u.on("close",()=>{if(this.a.appendLine(E?"Got data from stdout":"No data from stdout"),this.a.appendLine(h?"Got result from parser":"No result from parser"),y&&this.a.appendLine(`Got data without result: ${y}`),this.a.appendLine(""),f)s({limitHit:v});else{d.flush(),u=null;let I;k&&!E&&(I=Hj(k))?n(u9(new $o(I.message,I.code))):s({limitHit:v})}})})}};function Hj(e){const t=e.split(`
`),r=t[0].trim();if(t.some(s=>s.startsWith("regex parse error")))return new $o(Bj(t),Sn.regexParseError);const i=r.match(/grep config error: unknown encoding: (.*)/);if(i)return new $o(`Unknown encoding: ${i[1]}`,Sn.unknownEncoding);if(r.startsWith("error parsing glob"))return new $o(r.charAt(0).toUpperCase()+r.substr(1),Sn.globParseError);if(r.startsWith("the literal"))return new $o(r.charAt(0).toUpperCase()+r.substr(1),Sn.invalidLiteral);if(r.startsWith("PCRE2: error compiling pattern"))return new $o(r,Sn.regexParseError)}function Bj(e){const t=["Regex parse error"],r=e.filter(i=>i.startsWith("PCRE2:"));if(r.length>=1){const i=r[0].replace("PCRE2:","");if(i.indexOf(":")!==-1&&i.split(":").length>=2){const s=i.split(":")[1];t.push(":"+s)}}return t.join("")}var _j=class extends Fj{constructor(e,t,r){super(),this.g=e,this.h=t,this.j=r,this.a="",this.b=!1,this.c=!1,this.f=0,this.d=new Oj}cancel(){this.b=!0}flush(){this.k(this.d.end())}on(e,t){return super.on(e,t),this}handleData(e){if(this.b)return;const t=typeof e=="string"?e:this.d.write(e);this.k(t)}k(e){let t=e.indexOf(`
`);const r=this.a+e;if(t>=0)t+=this.a.length;else{this.a=r;return}let i=0;for(;t>=0;)this.m(r.substring(i,t).trim()),i=t+1,t=r.indexOf(`
`,i);this.a=r.substring(i)}m(e){if(this.b||!e)return;let t;try{t=JSON.parse(e)}catch{throw new Error(`malformed line from rg: ${e}`)}if(t.type==="match"){const r=Wu(t.data.path),i=x.joinPath(this.h,r),s=this.n(t.data,i);this.p(s),this.c&&(this.cancel(),this.emit("hitLimit"))}else if(t.type==="context"){const r=Wu(t.data.path),i=x.joinPath(this.h,r);this.o(t.data,i).forEach(n=>this.p(n))}}n(e,t){const r=e.line_number-1,i=Wu(e.lines),s=Buffer.from(i);let n=0,o=0,a=r;e.submatches.length===0&&e.submatches.push(i.length?{start:0,end:1,match:{text:i[0]}}:{start:0,end:0,match:{text:""}});const c=St(e.submatches.map((h,d)=>{if(this.c)return null;this.f++,this.f>=this.g&&(this.c=!0);const f=Wu(h.match),g=s.slice(n,h.start).toString(),v=VS(g),y=v.numLines>0?v.lastLineLength:v.lastLineLength+o,E=VS(f),k=v.numLines+a,I=E.numLines+k,D=E.numLines>0?E.lastLineLength:E.lastLineLength+y;return n=h.end,o=D,a=I,new e9(k,y,I,D)})),l=Eh(c,Ej),u=new o9(i,l,this.j);return new As(t,u.rangeLocations.map(h=>({sourceRange:jS(h.source),previewRange:jS(h.preview)})),u.previewText)}o(e,t){const r=Wu(e.lines),i=e.line_number;return r.replace(/\r?\n$/,"").split(`
`).map((s,n)=>new $p(t,s,i+n))}p(e){this.emit("result",e)}};function Wu(e){return e.bytes?Buffer.from(e.bytes,"base64").toString():e.text}function VS(e){const t=/\n/g;let r=0,i=-1,s;for(;s=t.exec(e);)r++,i=s.index;const n=i>=0?e.length-i-1:e.length;return{numLines:r,lastLineLength:n}}function zj(e,t){const r=["--hidden","--no-require-git"];r.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case");const{doubleStarIncludes:i,otherIncludes:s}=om(t.folderOptions.includes,o=>o.startsWith("**")?"doubleStarIncludes":"otherIncludes");if(s&&s.length){const o=new Set;s.forEach(a=>{o.add(a)}),r.push("-g","!*"),o.forEach(a=>{Wj(a).map(og).forEach(c=>{r.push("-g",c)})})}i&&i.length&&i.forEach(o=>{r.push("-g",o)}),t.folderOptions.excludes.map(o=>typeof o=="string"?o:o.pattern).map(og).forEach(o=>r.push("-g",`!${o}`)),t.maxFileSize&&r.push("--max-filesize",t.maxFileSize+""),t.folderOptions.useIgnoreFiles.local?t.folderOptions.useIgnoreFiles.parent||r.push("--no-ignore-parent"):r.push("--no-ignore"),t.folderOptions.followSymlinks&&r.push("--follow"),t.folderOptions.encoding&&t.folderOptions.encoding!=="utf8"&&r.push("--encoding",t.folderOptions.encoding),t.numThreads&&r.push("--threads",`${t.numThreads}`),e.pattern==="--"&&(e.isRegExp=!0,e.pattern="\\-\\-"),e.isMultiline&&!e.isRegExp&&(e.pattern=Zs(e.pattern),e.isRegExp=!0),t.usePCRE2&&r.push("--pcre2"),r.push("--crlf"),e.isRegExp&&(e.pattern=Vj(e.pattern),r.push("--engine","auto"));let n;if(e.isWordMatch){const a=M4(e.pattern,!!e.isRegExp,{wholeWord:e.isWordMatch}).source.replace(/\\\//g,"/");r.push("--regexp",a)}else if(e.isRegExp){let o=qj(e.pattern);o=Gj(o),r.push("--regexp",o)}else n=e.pattern,r.push("--fixed-strings");return r.push("--no-config"),t.folderOptions.useIgnoreFiles.global||r.push("--no-ignore-global"),r.push("--json"),e.isMultiline&&r.push("--multiline"),t.surroundingContext&&(r.push("--before-context",t.surroundingContext+""),r.push("--after-context",t.surroundingContext+"")),r.push("--"),n&&r.push(n),r.push("."),r}function Wj(e){return GS(e).flatMap(r=>{const i=kl(r,"/");return i.map((s,n)=>i.slice(0,n+1).join("/"))})}function Vj(e){const t=/((?:[^\\]|^)(?:\\\\)*)\\u([a-z0-9]{4})/gi;for(;e.match(t);)e=e.replace(t,"$1\\x{$2}");const r=/((?:[^\\]|^)(?:\\\\)*)\\u\{([a-z0-9]{4})\}/gi;for(;e.match(r);)e=e.replace(r,"$1\\x{$2}");return e}var qS=e=>e.type==="Assertion"&&e.kind==="lookbehind";function qj(e){let t;try{t=new Mj().parsePattern(e)}catch{return e}let r="",i=0;const s=(a,c,l)=>{r+=e.slice(i,a)+l,i=c},n=[];return new Uj({onCharacterEnter(a){if(a.raw!=="\\n")return;const c=n[0];if(!c)s(a.start,a.end,"\\r?\\n");else if(!n.some(qS))if(c.type==="CharacterClass")if(c.negate){const l=e.slice(c.start+2,a.start)+e.slice(a.end,c.end-1);c.parent?.type==="Quantifier"?s(c.start,c.end,l?`[^${l}]`:"."):s(c.start,c.end,"(?!\\r?\\n"+(l?`|[${l}]`:"")+")")}else{const l=e.slice(c.start+1,a.start)+e.slice(a.end,c.end-1);s(c.start,c.end,l===""?"\\r?\\n":`(?:[${l}]|\\r?\\n)`)}else c.type==="Quantifier"&&s(a.start,a.end,"(?:\\r?\\n)")},onQuantifierEnter(a){n.unshift(a)},onQuantifierLeave(){n.shift()},onCharacterClassRangeEnter(a){n.unshift(a)},onCharacterClassRangeLeave(){n.shift()},onCharacterClassEnter(a){n.unshift(a)},onCharacterClassLeave(){n.shift()},onAssertionEnter(a){qS(a)&&n.push(a)},onAssertionLeave(a){n[0]===a&&n.shift()}}).visit(t),r+=e.slice(i),r}function Gj(e){return e.replace(/\n/g,"\\r?\\n")}function Jj(e){let t=!1,r=!1,i="",s="";for(let n=0;n<e.length;n++){const o=e[n];switch(o){case"\\":r?(t?s+="\\"+o:i+="\\"+o,r=!1):r=!0;break;case"{":if(r)t?s+=o:i+=o,r=!1;else{if(t)return{strInBraces:i+"{"+s+"{"+e.substring(n+1)};t=!0}break;case"}":if(r)t?s+=o:i+=o,r=!1;else{if(t)return{fixedStart:i,strInBraces:s,fixedEnd:e.substring(n+1)};i+=o}break;default:t?s+=(r?"\\":"")+o:i+=(r?"\\":"")+o,r=!1;break}}return{strInBraces:i+(t?"{"+s:"")}}function GS(e){const{fixedStart:t,strInBraces:r,fixedEnd:i}=Jj(e);if(t===void 0||i===void 0)return[r];let s=kl(r,",");s.length||(s=[""]);const n=GS(i);return s.flatMap(o=>{const a=t+o;return n.map(c=>a+c)})}var Qj=class{constructor(e,t,r){this.id=e,this.dependencies=t,this.callback=r}},Do;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(Do||(Do={}));var pQ=class sI{static{this.INSTANCE=new sI}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=Do.Uninitialized}g(){if(this.d===Do.Uninitialized){if(globalThis.define){this.d=Do.InitializedExternal;return}}else return;this.d=Do.InitializedInternal,globalThis.define=(t,r,i)=>{typeof t!="string"&&(i=r,r=t,t=null),(typeof r!="object"||!Array.isArray(r))&&(i=r,r=null),this.c.push(new Qj(t,r,i))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${V.vscodeFileResource}://${d5}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===Do.InitializedExternal)return new Promise(o=>{const a=Ft();globalThis.define(a,[t],function(c){o(c)})});const r=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!r){console.warn(`Did not receive a define call from script ${t}`);return}const i={},s=[],n=[];if(Array.isArray(r.dependencies))for(const o of r.dependencies)o==="exports"?s.push(i):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof r.callback=="function"?r.callback(...s)??i:r.callback}h(t){return new Promise((r,i)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),r(this.c.pop())},a=c=>{n(),i(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const r=(await import("fs")).default,i=(await import("vm")).default,s=(await import("module")).default,n=x.parse(t).fsPath,o=r.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new i.Script(a).runInThisContext().apply(),this.c.pop()}catch(r){throw r}}},gQ=512*8,mQ=512*128,JS;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(JS||(JS={}));function Yj(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}}}var wb={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},vQ=(()=>{const e={};for(const t in wb)wb[t].guessableName&&(e[t]=wb[t]);return e})(),QS=class extends eb{constructor(e,t,r=Gh,i="searchProcess"){super({query:e,provider:t},{readdir:s=>r.Promises.readdir(s.fsPath),toCanonicalName:s=>Yj(s)},i)}},Xj=class{constructor(e,t){this.a=e,this.b=t}search(e,t,r){if((!this.a.folderQueries||!this.a.folderQueries.length)&&(!this.a.extraFileResources||!this.a.extraFileResources.length))return Promise.resolve({type:"success",limitHit:!1,stats:{type:"searchProcess"},messages:[]});const i={appendLine(n){r({message:n})}},s=new QS(this.a,new WS(i,this.b),Gh);return new Promise((n,o)=>s.search(a=>{t(a.map(Zj))},e).then(a=>n({limitHit:a.limitHit??!1,type:"success",stats:a.stats,messages:[]}),o))}};function Zj(e){return{path:e.resource&&e.resource.fsPath,results:e.results,numMatches:(e.results||[]).reduce((t,r)=>U0(r)?t+r.rangeLocations.length:t+1,0)}}var Kj=class Zg{static{this.a=512}constructor(t="searchProcess",r){this.d=t,this.f=r,this.b=Object.create(null)}fileSearch(t){let r;const i=YS(t),s=new P({onDidAddFirstListener:()=>{r=us(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(_S,i,a=>s.fire(a),n,Zg.a,o)}),r.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{r.cancel()}});return s.event}textSearch(t){let r;const i=YS(t),s=new P({onDidAddFirstListener:()=>{r=us(n=>this.g(i,o=>s.fire(o),n)),r.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{r.cancel()}});return s.event}async g(t,r,i){t.maxFileSize=this.h().maxFileSize;const s=await this.f?.();return new Xj(t,s).search(i,r,r)}h(){return{maxFileSize:16*LE.GB}}doFileSearch(t,r,i,s){return this.doFileSearchWithEngine(_S,t,i,s,Zg.a,r)}doFileSearchWithEngine(t,r,i,s,n=Zg.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,i(u.map(h=>this.j(h)))):u.relativePath?(a++,i(this.j(u))):i(u)};if(r.sortByScore){let u=this.n(r,c,s);if(!u){const h=r.maxResults?Object.assign({},r,{maxResults:null}):r,d=new t(h,o);u=this.k(d,r,i,c,s)}return new Promise((h,d)=>{u.then(([f,g])=>{const v=g.map(y=>this.j(y));this.q(v,i,n),h(f)},d)})}const l=new t(r,o);return this.s(l,c,n,s).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}j(t){return{path:t.base?Ve(t.base,t.relativePath):t.relativePath}}k(t,r,i,s,n){const o=new P;let a=us(l=>{let u=[];const h=d=>{Array.isArray(d)?u=d:(s(d),o.fire(d))};return this.s(t,h,-1,l).then(d=>[d,u])}),c;if(r.cacheKey){c=this.l(r.cacheKey);const l={promise:a,event:o.event,resolved:!1};c.resultsToSearchCache[r.filePattern||""]=l,a.then(()=>{l.resolved=!0},u=>{delete c.resultsToSearchCache[r.filePattern||""]}),a=this.t(a)}return a.then(([l,u])=>{const h=c?c.scorerCache:Object.create(null),d=(typeof r.maxResults!="number"||r.maxResults>0)&&Ar.create(!1);return this.o(r,u,h,n).then(f=>{const g=d?d.elapsed():-1;return[{type:"success",stats:{detailStats:l.stats,sortingTime:g,fromCache:!1,type:this.d,resultCount:f.length},messages:l.messages,limitHit:l.limitHit||typeof r.maxResults=="number"&&u.length>r.maxResults},f]})})}l(t){const r=this.b[t];return r||(this.b[t]=new eH)}n(t,r,i){const s=t.cacheKey&&this.b[t.cacheKey];if(!s)return;const n=this.r(s,t.filePattern||"",r,i);if(n)return n.then(([o,a,c])=>{const l=Ar.create(!1);return this.o(t,a,s.scorerCache,i).then(u=>{const h=l.elapsed(),d={fromCache:!0,detailStats:c,type:this.d,resultCount:a.length,sortingTime:h};return[{type:"success",limitHit:o.limitHit||typeof t.maxResults=="number"&&a.length>t.maxResults,stats:d,messages:[]},u]})})}o(t,r,i,s){const n=mb(t.filePattern||""),o=(c,l)=>mj(c,l,n,!0,tH,i),a=typeof t.maxResults=="number"?t.maxResults:Ip;return lP(r,o,a,1e4,s)}q(t,r,i){if(i&&i>0)for(let s=0;s<t.length;s+=i)r(t.slice(s,s+i));else r(t)}r(t,r,i,s){const n=Ar.create(!1),o=r.indexOf(gt)>=0;let a;for(const h in t.resultsToSearchCache)if(r.startsWith(h)){if(o&&h.indexOf(gt)<0&&h!=="")continue;const d=t.resultsToSearchCache[h];a={promise:this.t(d.promise),event:d.event,resolved:d.resolved};break}if(!a)return null;const c=n.elapsed(),l=Ar.create(!1),u=a.event(i);return s&&s.onCancellationRequested(()=>{u.dispose()}),a.promise.then(([h,d])=>{if(s&&s.isCancellationRequested)throw Fc();const f=[],g=mb(r).normalizedLowercase;for(const v of d)H0(v,g)&&f.push(v);return[h,f,{cacheWasResolved:a.resolved,cacheLookupTime:c,cacheFilterTime:l.elapsed(),cacheEntryCount:d.length}]})}s(t,r,i,s){return new Promise((n,o)=>{let a=[];s?.onCancellationRequested(()=>t.cancel()),t.search(c=>{c&&(i?(a.push(c),i>0&&a.length>=i&&(r(a),a=[])):r(c))},c=>{r(c)},(c,l)=>{a.length&&r(a),c?(r({message:"Search finished. Error: "+c.message}),o(c)):(r({message:"Search finished. Stats: "+JSON.stringify(l.stats)}),n(l))})})}clearCache(t){return delete this.b[t],Promise.resolve(void 0)}t(t){return new class{get[Symbol.toStringTag](){return this.toString()}cancel(){}then(r,i){return t.then(r,i)}catch(r){return this.then(void 0,r)}finally(r){return t.finally(r)}}}},eH=class{constructor(){this.resultsToSearchCache=Object.create(null),this.scorerCache=Object.create(null)}},tH=new class{getItemLabel(e){return ut(e.relativePath)}getItemDescription(e){return gr(e.relativePath)}getItemPath(e){return e.relativePath}};function YS(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(rH),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>x.revive(t))}}function rH(e){return Kt(e)}var XS=class{constructor(e,t){this.b=e,this.c=t,this.a=new Set,process.once("exit",()=>this.f())}async provideTextSearchResults(e,t,r,i){const s=await this.c(),n=new WS(this.b,s);return Promise.all(t.folderOptions.map(o=>{const a={folderOptions:o,numThreads:s,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};if(o.folder.scheme===V.vscodeUserData){const c={...a,folder:o.folder.with({scheme:V.file})},l=new dw(u=>r.report({...u,uri:u.uri.with({scheme:o.folder.scheme})}));return this.d(i,u=>n.provideTextSearchResultsWithRgOptions(e,c,l,u))}else return this.d(i,c=>n.provideTextSearchResultsWithRgOptions(e,a,r,c))})).then(o=>({limitHit:o.some(c=>!!c&&c.limitHit)}))}async d(e,t){const r=iH(e);this.a.add(r);const i=await t(r.token);return this.a.delete(r),i}f(){this.a.forEach(e=>e.cancel())}};function iH(e){const t=new rt;return e.onCancellationRequested(()=>t.cancel()),t}var bb=class extends Zp{constructor(t,r,i,s,n){super(t,i,n),this.E=s,this.x=Gh,this.y=-1,this.z=null,this.A=!1,this.C=new he,this.D=!1,this.getNumThreads=this.getNumThreads.bind(this),this.getNumThreadsCached=this.getNumThreadsCached.bind(this),this.F=this.F.bind(this);const o=new ag("RipgrepSearchUD",this.s);this.C.add(this.registerTextSearchProvider(V.vscodeUserData,new XS(o,this.getNumThreadsCached))),r.remote.isRemote&&r.remote.authority&&this.G(),s.getConfigProvider().then(a=>{this.D||this.C.add(a.onDidChangeConfiguration(this.F))})}F(t){t.affectsConfiguration("search")&&(this.B=void 0)}async getNumThreads(){return(await this.E.getConfigProvider()).getConfiguration("search").get("ripgrep.maxThreads")}async getNumThreadsCached(){return this.B||(this.B=this.getNumThreads()),this.B}dispose(){this.D=!0,this.C.dispose()}$enableExtensionHostSearch(){this.G()}G(){if(this.A)return;this.A=!0;const t=new ag("RipgrepSearchEH",this.s);this.C.add(this.registerTextSearchProvider(V.file,new XS(t,this.getNumThreadsCached))),this.C.add(this.H(V.file,new Kj("fileSearchProvider",this.getNumThreadsCached)))}H(t,r){const i=this.e++;return this.z=r,this.y=i,this.c.$registerFileSearchProvider(i,this.t(t)),te(()=>{this.z=null,this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=Kp(i);if(t===this.y){const o=Date.now();return this.I(t,r,n,s).then(a=>{const c=Date.now()-o;return this.s.debug(`Ext host file search time: ${c}ms`),a})}return super.$provideFileSearchResults(t,r,i,s)}async doInternalFileSearchWithCustomCallback(t,r,i){const s=o=>{if(iO(o)&&(o=[o]),Array.isArray(o)){i(o.map(a=>x.file(a.path)));return}o.message&&this.s.debug("ExtHostSearch",o.message)};if(!this.z)throw new Error("No internal file search handler");const n=await this.getNumThreadsCached();return this.z.doFileSearch(t,n,s,r)}async I(t,r,i,s){return this.doInternalFileSearchWithCustomCallback(i,s,n=>{this.c.$handleFileMatch(t,r,n)})}$clearCache(t){return this.z?.clearCache(t),super.$clearCache(t)}v(t,r){return new QS(t,r,void 0,"textSearchProvider")}};bb=__decorate([__param(0,Ae),__param(1,Ot),__param(2,nl),__param(3,ti),__param(4,$e)],bb);function ZS(e,t,r,i,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=ZS(a,t,r,i,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return i?e==="*"?5:e===r?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!i&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===r)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let d;if(typeof a=="string"?d=a:d={...a,base:ls(a.base)},d===t.fsPath||wa(d,t.fsPath))h=10;else return 0}return h}else return 0}}function KS(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(KS):!!e.notebookType}var yb;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(yb||(yb={}));var bQ=J("editSessionIdentityService"),xb;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(xb||(xb={}));var sH=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Q.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,r){if(this.a.size===0)throw new Error("No related information providers registered");const i=this.a.get(e);if(!i)throw new Error("related information provider not found");return await i.provideRelatedInformation(t,r)??[]}getRelatedInformation(e,t,r){return this.c.$getAiRelatedInformation(t,r)}registerRelatedInformationProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiRelatedInformationProvider(i,t),new Te(()=>{this.c.$unregisterAiRelatedInformationProvider(i),this.a.delete(i)})}},e$;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(e$||(e$={}));function t$(e){for(let t=0,r=e.length;t<r;t+=4){const i=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=i}}function nH(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return T4()||t$(t),Y.wrap(t)}function oH(e){const t=e.buffer;if(T4()||t$(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const r=new Uint8Array(t.byteLength);return r.set(t),new Uint32Array(r.buffer,r.byteOffset,r.length/4)}}function Eb(e){const t=new Uint32Array(aH(e));let r=0;if(t[r++]=e.id,e.type==="full")t[r++]=1,t[r++]=e.data.length,t.set(e.data,r),r+=e.data.length;else{t[r++]=2,t[r++]=e.deltas.length;for(const i of e.deltas)t[r++]=i.start,t[r++]=i.deleteCount,i.data?(t[r++]=i.data.length,t.set(i.data,r),r+=i.data.length):t[r++]=0}return nH(t)}function aH(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const r of e.deltas)r.data&&(t+=r.data.length)}return t}function r$(e){const t=oH(e);let r=0;const i=t[r++];if(t[r++]===1){const a=t[r++],c=t.subarray(r,r+a);return r+=a,{id:i,type:"full",data:c}}const n=t[r++],o=[];for(let a=0;a<n;a++){const c=t[r++],l=t[r++],u=t[r++];let h;u>0&&(h=t.subarray(r,r+u),r+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:i,type:"delta",deltas:o}}var cH=[new me("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[M.Uri,M.Position],new ge("A promise that resolves to an array of DocumentHighlight-instances.",Ii(Ja.to))),new me("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[M.Uri],new ge("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(hm(e))return;class r extends Rl{static to(s){const n=new r(s.name,ei.to(s.kind),s.containerName||"",new qr(t[0],O.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=O.to(s.selectionRange),n.children=s.children?s.children.map(r.to):[],n}}return e.map(r.to)})),new me("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[M.Uri,new M("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ii(jt.to))),new me("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[M.Uri,M.Range,new M("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ii(jt.to))),new me("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[M.Uri,M.Position,new M("ch","Trigger character",e=>typeof e=="string",e=>e),new M("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ii(jt.to))),new me("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Pn)),new me("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location-instances.",Ii(Sr.to))),new me("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Location-instances.",Ii(Sr.to))),new me("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Hover-instances.",Ii(uu.to))),new me("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[M.Uri,M.Position],new ge("A promise that resolves to an array of Hover-instances.",Ii(uu.to))),new me("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[M.Uri,new M("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ie.isPosition(t)),e=>e.map(Be.from))],new ge("A promise that resolves to an array of ranges.",e=>e.map(t=>{let r;for(const i of t.reverse())r=new Fl(O.to(i),r);return r}))),new me("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[M.String.with("query","Search string")],new ge("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(yo.to))),new me("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[M.Uri,M.Position],new ge("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(xo.to))),new me("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[M.CallHierarchyItem],new ge("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(u0.to))),new me("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[M.CallHierarchyItem],new ge("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(h0.to))),new me("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[M.Uri,M.Position],new ge("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:O.to(e.range),placeholder:e.text}})),new me("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[M.Uri,M.Position,M.String.with("newName","The new symbol name")],new ge("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return dr.to(e)}})),new me("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[M.Uri,M.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ge("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Eo.to))),new me("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[M.Uri],new ge("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Nv(e.tokenTypes,e.tokenModifiers)})),new me("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[M.Uri],new ge("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=r$(e);if(t.type==="full")return new ja(t.data,void 0)})),new me("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[M.Uri,M.Range.optional()],new ge("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Nv(e.tokenTypes,e.tokenModifiers)})),new me("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[M.Uri,M.Range],new ge("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=r$(e);if(t.type==="full")return new ja(t.data,void 0)})),new me("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[M.Uri,M.Position,M.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),M.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ge("A promise that resolves to a CompletionList-instance.",(e,t,r)=>{if(!e)return new $a([]);const i=e.suggestions.map(s=>m0.to(s,r));return new $a(i,e.incomplete)})),new me("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[M.Uri,M.Position,M.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ge("A promise that resolves to SignatureHelp.",e=>{if(e)return hu.to(e)})),new me("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[M.Uri,M.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ge("A promise that resolves to an array of CodeLens-instances.",(e,t,r)=>Ii(i=>new rf(O.to(i.range),i.command&&r.fromInternal(i.command)))(e))),new me("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[M.Uri,new M("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Ee.isRange(e),e=>ks.isSelection(e)?Ei.from(e):O.from(e)),M.String.with("kind","Code action kind to return code actions for").optional(),M.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ge("A promise that resolves to an array of Command-instances.",(e,t,r)=>Ii(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return r.fromInternal(i.command)}else{const s=new tf(i.title,i.kind?new dt(i.kind):void 0);return i.edit&&(s.edit=dr.to(i.edit)),i.command&&(s.command=r.fromInternal(i.command)),s.isPreferred=i.isPreferred,s}})(e))),new me("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[M.Uri],new ge("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new lf(O.to(t.range),Qa.to(t.color))):[])),new me("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new M("color","The color to show and insert",e=>e instanceof Aa,Qa.from),new M("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:O.from(e.range)}))],new ge("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(rp.to):[])),new me("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[M.Uri,M.Range],new ge("A promise that resolves to an array of Inlay objects",(e,t,r)=>e.map(v0.to.bind(void 0,r)))),new me("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[M.Uri],new ge("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(sp.to)})),new me("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ge("A promise that resolves to an array of NotebookContentProvider static info objects.",Ii(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>ap.to(t))})))),new me("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[M.Uri,M.Range,new M("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Ee,e=>Yf.from(e))],new ge("A promise that resolves to an array of InlineValue objects",e=>e.map(Qf.to))),new me("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new M("uriOrString","Uri-instance or string (only http/https)",e=>x.isUri(e)||typeof e=="string"&&YD(e,V.http,V.https),e=>e),new M("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ut.from(e),void 0]:[Ut.from(e.viewColumn),du.from(e)])).optional(),M.String.with("label","").optional()],ge.Void),new me("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[M.Uri.with("resource","Resource to open"),M.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new M("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ut.from(e),void 0]:[Ut.from(e.viewColumn),du.from(e)])).optional()],ge.Void),new me("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[M.Uri.with("left","Left-hand side resource of the diff editor"),M.Uri.with("right","Right-hand side resource of the diff editor"),M.String.with("title","Human readable title for the diff editor").optional(),new M("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Ut.from(e.viewColumn),du.from(e)]).optional()],ge.Void),new me("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[M.String.with("title","Human readable title for the changes editor"),new M("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[r,i,s]=t;if(!x.isUri(r)||!x.isUri(i)&&i!==void 0&&i!==null||!x.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ge.Void),new me("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[M.Uri,M.Position],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(ko.to))),new me("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[M.TypeHierarchyItem],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(ko.to))),new me("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[M.TypeHierarchyItem],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(ko.to))),new me("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[M.TestItem],ge.Void),new me("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[M.TestProfile,M.Arr(M.TestItem)],ge.Void),new me("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[M.Arr(M.TestItem)],ge.Void),new me("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[M.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ge.Void),new me("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[M.String.with("name","The context key name"),new M("value","The context key value",()=>!0,e=>e)],ge.Void),new me("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[M.Uri,M.StringArray,new M("MappedEditsContext","Mapped Edits Context",e=>op.is(e),e=>op.from(e))],new ge("A promise that resolves to a workspace edit or null",e=>e?dr.to(e):null)),new me("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new M("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?O.from(e.initialRange):void 0,initialSelection:ks.isSelection(e.initialSelection)?Ei.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?Be.from(e.position):void 0}})],ge.Void)],lH=class{static register(e){cH.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",YT)}};function Ii(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Pn(e){if(!Array.isArray(e))return;const t=[];for(const r of e)xL(r)?t.push(lu.to(r)):t.push(Sr.to(r));return t}var kb=class{constructor(t,r){this.a=t.getProxy(Q.MainThreadBulkEdits),this.b={getTextDocumentVersion:i=>r.getDocument(i)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,r,i){const s=new zr(dr.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,i?.isRefactoring??!1)}};kb=__decorate([__param(0,Ae)],kb);var i$;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(i$||(i$={}));var lg;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(lg||(lg={}));var s$;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(s$||(s$={}));var n$;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(n$||(n$={}));var xQ=J("IChatService");function uH(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var hH=class{constructor(e,t,r,i,s){this.j=e,this.k=t,this.l=r,this.m=i,this.n=s,this.b=Ar.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(r.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this;this.b.reset();const i=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(Mr.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,bu.from(c),l):this.l.$handleProgressChunk(this.k.requestId,Ds.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,A0.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g=Object.freeze({markdown(s){t(this.markdown);const n=new Of(s),o=vu.from(n);return i(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&L(r.j,"chatParticipantAdditions");const o=new tu(s,n),a=fp.from(o);return i(a),this},codeblockUri(s){t(this.codeblockUri),L(r.j,"chatParticipantAdditions");const n=new Bf(s),o=dp.from(n);return i(o),this},filetree(s,n){t(this.filetree);const o=new Uf(s,n),a=wu.from(o);return i(a),this},anchor(s,n){const o=new iu(s,n);return this.push(o)},button(s){t(this.anchor);const n=new Hf(s),o=yu.from(n,r.m,r.n);return i(o),this},progress(s,n){t(this.progress);const o=new jf(s,n),a=n?mp.from(o):So.from(o);return i(a,n),this},warning(s){t(this.progress),L(r.j,"chatParticipantAdditions");const n=new nu(s),o=bu.from(n);return i(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&L(r.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=r.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new Cs(s,n,o);c=[Ds.from(l)]}return c.forEach(l=>i(l)),this}}else{const a=new Cs(s,n,o),c=Ds.from(a);i(c)}return this},codeCitation(s,n,o){t(this.codeCitation),L(r.j,"chatParticipantAdditions");const a=new _f(s,n,o),c=wp.from(a);i(c)},textEdit(s,n){t(this.textEdit),L(r.j,"chatParticipantAdditions");const o=new ou(s,Array.isArray(n)?n:[]);o.isDone=n===!0?!0:void 0;const a=vp.from(o);return i(a),this},detectedParticipant(s,n){t(this.detectedParticipant),L(r.j,"chatParticipantAdditions");const o=new ru(s,n),a=pp.from(o);return i(a),this},confirmation(s,n,o,a){t(this.confirmation),L(r.j,"chatParticipantAdditions");const c=new Mf(s,n,o,a),l=gp.from(c);return i(l),this},push(s){if(t(this.push),(s instanceof ou||s instanceof tu||s instanceof ru||s instanceof nu||s instanceof Mf||s instanceof _f||s instanceof zf||s instanceof jf)&&L(r.j,"chatParticipantAdditions"),s instanceof Cs)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof jf){const n=s.task?mp.from(s):So.from(s);i(n,s.task)}else if(s instanceof iu){const n=sc.from(s);if(s.resolve){L(r.j,"chatParticipantAdditions"),n.resolveId=Ft();const o=new rt;s.resolve(o.token).then(()=>{const a=sc.from(s);r.l.$handleAnchorResolve(r.k.requestId,n.resolveId,a)}).then(()=>o.dispose(),()=>o.dispose()),r.n.add(te(()=>o.dispose(!0)))}i(n)}else{const n=bp.from(s,r.m,r.n);i(n)}return this}})}return this.g}},dH=class fh extends K{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,r,i,s,n){super(),this.w=r,this.y=i,this.z=s,this.C=n,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new kh),this.u=this.B(new kh),this.g=t.getProxy(Q.MainThreadChatAgents2),i.registerArgumentProcessor({processArgument:o=>uH(o)?null:o})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,r,i){const s=fh.b++,n=new o$(t,r,this.g,s,i);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,r,{},void 0),n.apiAgent}createDynamicChatAgent(t,r,i,s){const n=fh.b++,o=new o$(t,r,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,r,{isSticky:!0},i),o.apiAgent}registerChatParticipantDetectionProvider(t,r){const i=fh.j++;return this.m.set(i,new fH(t,r)),this.g.$registerChatParticipantDetectionProvider(i),te(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}registerRelatedFilesProvider(t,r,i){const s=fh.n++;return this.s.set(s,new pH(t,r)),this.g.$registerRelatedFilesProvider(s,i),te(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,r,i){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=T0.to(r);return await s.provider.provideRelatedFiles(n,i)??void 0}async $detectChatParticipant(t,r,i,s,n){const{request:o,location:a,history:c}=await this.D(r,i),l=this.m.get(t);if(!l)return;const u=await this.F(o,l.extension),h=yp.to(o,a,u);return l.provider.provideParticipantDetection(h,{history:c},{participants:s.participants,location:xu.to(s.location)},n)}async D(t,r){const i=Kt(t),s=await this.G(i.agentId,r);let n;if(i.locationData?.type===tr.Editor){const o=this.z.getDocument(i.locationData.document);n=new Jk(o,Ei.to(i.locationData.selection),O.to(i.locationData.wholeRange))}else if(i.locationData?.type===tr.Notebook){const o=this.z.getDocument(i.locationData.sessionInputUri);n=new Qk(o)}else i.locationData?.type,tr.Terminal;return{request:i,location:n,history:s}}async F(t,r){let i;if(t.userSelectedModelId&&(i=await this.C.getLanguageModelByIdentifier(r,t.userSelectedModelId)),!i&&(i=await this.C.getDefaultLanguageModel(r),!i))throw new Error("Language model unavailable");return i}async $invokeAgent(t,r,i,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o;try{const{request:a,location:c,history:l}=await this.D(r,i);let u=this.t.get(a.sessionId);u||(u=new he,this.t.set(a.sessionId,u)),o=new hH(n.extension,a,this.g,this.y.converter,u);const h=await this.F(a,n.extension),d=yp.to(a,c,h),f=n.invoke(d,{history:l},o.apiObject,s);return await y5(Promise.resolve(f).then(g=>{if(g?.metadata)try{JSON.stringify(g.metadata)}catch(y){const E=`result.metadata MUST be JSON.stringify-able. Got error: ${y.message}`;return this.w.error(`[${n.extension.identifier.value}] [@${n.id}] ${E}`,n.extension),{errorDetails:{message:E},timings:o?.timings,nextQuestion:g.nextQuestion}}let v;return g?.errorDetails&&(v={...g.errorDetails,responseIsIncomplete:!0}),(v?.responseIsRedacted||v?.isQuotaExceeded)&&L(n.extension,"chatParticipantPrivate"),{errorDetails:v,timings:o?.timings,metadata:g?.metadata,nextQuestion:g?.nextQuestion}}),s)}catch(a){this.w.error(a,n.extension),a instanceof Is&&a.cause&&(a=a.cause);const c=a instanceof Error&&a.name==="ChatQuotaExceeded";return{errorDetails:{message:pi(a),responseIsIncomplete:!0,isQuotaExceeded:c}}}finally{o?.close()}}async G(t,r){const i=[];for(const s of r.history){const n=kn.to(s.result),o=t===s.request.agentId?n:{...n,metadata:void 0},a=s.request.variables.variables.filter(h=>!h.isTool).map(xp.to),c=s.request.variables.variables.filter(h=>h.isTool).map(Ep.to),l=new qk(s.request.message,s.request.command,a,s.request.agentId,c);i.push(l);const u=St(s.response.map(h=>bp.toContent(h,this.y.converter)));i.push(new Gk(u,o,s.request.agentId,s.request.command))}return i}$releaseSession(t){this.t.deleteAndDispose(t)}async $provideFollowups(t,r,i,s,n){const o=this.c.get(r);if(!o)return Promise.resolve([]);const a=Kt(t),c=await this.G(o.id,s),l=kn.to(i);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Hr.some(this.c.values(),d=>d.id===u.participant&&Je.equals(d.extension.identifier,o.extension.identifier));return h||this.w.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>mu.from(u,a))}$acceptFeedback(t,r,i){const s=this.c.get(t);if(!s)return;const n=kn.to(r);let o;switch(i.direction){case lg.Down:o=eu.Unhelpful;break;case lg.Up:o=eu.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Vt(s.extension,"chatParticipantAdditions")?i.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,r,i){const s=this.c.get(t);if(!s||i.action.kind==="vote")return;const n=L0.to(r,i,this.y.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,r,i){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new he,this.u.set(t,n)),(await s.invokeCompletionProvider(r,i)).map(a=>R0.from(a,this.y.converter,n))}async $provideWelcomeMessage(t,r){const i=this.c.get(t);if(i)return await i.provideWelcomeMessage(r)}async $provideChatTitle(t,r,i){const s=this.c.get(t);if(!s)return;const n=await this.G(s.id,{history:r});return await s.provideTitle({history:n},i)}async $provideSampleQuestions(t,r,i){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(xu.to(r),i)).map(n=>mu.from(n,void 0))}},fH=class{constructor(e,t){this.extension=e,this.provider=t}},pH=class{constructor(e,t){this.extension=e,this.provider=t}},o$=class{constructor(e,t,r,i,s){this.extension=e,this.id=t,this.w=r,this.x=i,this.y=s,this.l=new P,this.m=new P}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,r){if(!this.b)return[];const i=await this.b.provideFollowups(e,t,r);return i?i.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),r=t?.icon;if(!(!t||!Jt.isThemeIcon(r)))return{...t,icon:r,message:Ce.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const r=await this.q.provideSampleQuestions(e,t);return r||[]}get apiAgent(){let e=!1,t=!1;const r=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof x?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof nr?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:Ce.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:Ce.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:Ce.from(this.j),supportIssueReporting:this.n,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},i=this;return{get id(){return i.id},get iconPath(){return i.c},set iconPath(s){i.c=s,r()},get requestHandler(){return i.y},set requestHandler(s){K4(typeof s=="function","Invalid request handler"),i.y=s},get followupProvider(){return i.b},set followupProvider(s){i.b=s,r()},get helpTextPrefix(){return L(i.extension,"defaultChatParticipant"),i.d},set helpTextPrefix(s){L(i.extension,"defaultChatParticipant"),i.d=s,r()},get helpTextVariablesPrefix(){return L(i.extension,"defaultChatParticipant"),i.g},set helpTextVariablesPrefix(s){L(i.extension,"defaultChatParticipant"),i.g=s,r()},get helpTextPostfix(){return L(i.extension,"defaultChatParticipant"),i.j},set helpTextPostfix(s){L(i.extension,"defaultChatParticipant"),i.j=s,r()},get isSecondary(){return L(i.extension,"defaultChatParticipant"),i.k},set isSecondary(s){L(i.extension,"defaultChatParticipant"),i.k=s,r()},get supportIssueReporting(){return L(i.extension,"chatParticipantPrivate"),i.n},set supportIssueReporting(s){L(i.extension,"chatParticipantPrivate"),i.n=s,r()},get onDidReceiveFeedback(){return i.l.event},set participantVariableProvider(s){if(L(i.extension,"chatParticipantAdditions"),i.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");i.w.$registerAgentCompletionsProvider(i.x,i.id,s.triggerCharacters)}else i.w.$unregisterAgentCompletionsProvider(i.x,i.id)},get participantVariableProvider(){return L(i.extension,"chatParticipantAdditions"),i.o},set welcomeMessageProvider(s){L(i.extension,"defaultChatParticipant"),i.q=s,r()},get welcomeMessageProvider(){return L(i.extension,"defaultChatParticipant"),i.q},set titleProvider(s){L(i.extension,"defaultChatParticipant"),i.s=s,r()},get titleProvider(){return L(i.extension,"defaultChatParticipant"),i.s},onDidPerformAction:Vt(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){i.t=s,r()},get requester(){return i.t},set supportsSlowReferences(s){L(i.extension,"chatParticipantPrivate"),i.u=s,r()},get supportsSlowReferences(){return L(i.extension,"chatParticipantPrivate"),i.u},dispose(){e=!0,i.b=void 0,i.l.dispose(),i.w.$unregisterAgent(i.x)}}}invoke(e,t,r,i){return this.y(e,t,r,i)}},gH=class nI{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(Q.MainThreadChatVariables)}async $resolveVariable(t,r,i,s){const n=this.b.get(t);if(n)try{if(n.resolver.resolve2){L(n.extension,"chatParticipantAdditions");const o=new mH(r,this.c),a=await n.resolver.resolve2(n.data.name,{prompt:i},o.apiObject,s);if(a&&a[0])return a[0].value}else{const o=await n.resolver.resolve(n.data.name,{prompt:i},s);if(o&&o[0])return o[0].value}}catch(o){cm(o)}}registerVariableResolver(t,r,i,s,n,o,a,c,l){const u=nI.a++,h=l?Jt.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:r,name:i,description:s,modelDescription:n,icon:h},resolver:a}),this.c.$registerVariable(u,{id:r,name:i,description:s,modelDescription:n,isSlow:o,fullName:c,icon:h}),te(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},mH=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(s){if(r.a){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this,i=s=>{this.d.$handleProgressChunk(this.c,s)};this.b={progress(s){t(this.progress);const n=new su(s),o=So.from(n);return i(o),this},reference(s){t(this.reference);const n=new Cs(s),o=Ds.from(n);return i(o),this},push(s){return t(this.push),s instanceof Cs?i(Ds.from(s)):s instanceof su&&i(So.from(s)),this}}}return this.b}},vH=class{constructor(e){const t=e.getProxy(Q.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(r){return t.$writeText(r)}})}},a$="vscode-cdn.net",wH=`vscode-resource.${a$}`,Sb=`'self' https://*.${a$}`;function Vu(e,t){return e.scheme===V.http||e.scheme===V.https?e:(t&&t.authority&&t.isRemote&&e.scheme===V.file&&(e=x.from({scheme:V.vscodeRemote,authority:t.authority,path:e.path})),x.from({scheme:V.https,authority:`${e.scheme}+${bH(e.authority)}.${wH}`,path:e.path,fragment:e.fragment,query:e.query}))}function bH(e){return e.replace(/./g,t=>{const r=t.charCodeAt(0);return r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57?t:"-"+r.toString(16).padStart(4,"0")})}var yH=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r,this.a=0,this.b=new he,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const i=t.getVisibleTextEditors();for(const s of this.c.values())i.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,r,i,s){let n;for(const d of this.e.getVisibleTextEditors(!0))if(d.value===e){n=d;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new P,l=new P,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(d){return Vu(d,o.f)}get cspSource(){return Sb}set options(d){this.b=d,o.d.$setOptions(a,d)}get options(){return this.b}set html(d){this.a=d,o.d.$setHtml(a,d)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(d){return o.d.$postMessage(a,d)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=r,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,r,i||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function xH(e,t,r){const i=e.getProxy(Q.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new ys,t.registerArgumentProcessor({processArgument:g=>{if(g&&g.$mid===6){const v=this.b.get(g.handle);return v?v.value:g}else if(g&&g.$mid===7){const v=g,y=this.b.get(v.commentControlHandle);if(!y)return v;const E=y.getCommentThread(v.commentThreadHandle);return E?E.value:v}else if(g&&(g.$mid===9||g.$mid===8)){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const y=v.getCommentThread(g.thread.commentThreadHandle);return y?g.$mid===8?y.value:{thread:y.value,text:g.text}:g}else if(g&&g.$mid===10){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const y=v.getCommentThread(g.thread.commentThreadHandle);if(!y)return g;const E=g.commentUniqueId,k=y.getCommentByUniqueId(E);return k||g}else if(g&&g.$mid===11){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const y=v.getCommentThread(g.thread.commentThreadHandle);if(!y)return g;const E=g.text,k=g.commentUniqueId,I=y.getCommentByUniqueId(k);return I?(typeof I.body=="string"?I.body=E:I.body=new Mr(E),I):g}return g}})}createCommentController(g,v,y){const E=s.a++,k=new o(g,E,v,y);this.b.set(k.handle,k);const I=this.c.get(g.identifier)||[];return I.push(k),this.c.set(g.identifier,I),k.value}async $createCommentThreadTemplate(g,v,y,E){const k=this.b.get(g);k&&k.$createCommentThreadTemplate(v,y,E)}async $setActiveComment(g,v){const y=this.b.get(g);y&&y.$setActiveComment(v??void 0)}async $updateCommentThreadTemplate(g,v,y){const E=this.b.get(g);E&&E.$updateCommentThreadTemplate(v,y)}$deleteCommentThread(g,v){this.b.get(g)?.$deleteCommentThread(v)}async $updateCommentThread(g,v,y){this.b.get(g)?.$updateCommentThread(v,y)}async $provideCommentingRanges(g,v,y){const E=this.b.get(g);if(!E||!E.commentingRangeProvider)return Promise.resolve(void 0);const k=await r.ensureDocumentData(x.revive(v));return sr(async()=>{const I=await E.commentingRangeProvider.provideCommentingRanges(k.document,y);let D;return Array.isArray(I)?D={ranges:I,fileComments:!1}:I?D={ranges:I.ranges||[],fileComments:I.enableFileComments||!1}:D=I??void 0,D}).then(I=>{let D;return I&&(D={ranges:I.ranges.map(T=>O.from(T)),fileComments:I.fileComments}),D})}$toggleReaction(g,v,y,E,k){const I=this.b.get(g);return!I||!I.reactionHandler?Promise.resolve(void 0):sr(()=>{const D=I.getCommentThread(v);if(D){const T=D.getCommentByUniqueId(E.uniqueIdInThread);if(I!==void 0&&T&&I.reactionHandler)return I.reactionHandler(T,l(k))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(g){this.n=g}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(g){(g===void 0!=(this.p===void 0)||!g||!this.p||!g.isEqual(this.p))&&(this.p=g,this.b.range=g,this.c.fire())}get range(){return this.p}set canReply(g){this.d!==g&&(this.d=g,this.b.canReply=g,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(g){this.e=g,this.b.label=g,this.c.fire()}get contextValue(){return this.f}set contextValue(g){this.f=g,this.b.contextValue=g,this.c.fire()}get comments(){return this.q}set comments(g){this.q=g,this.b.comments=g,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(g){this.g!==g&&(this.g=g,this.b.collapsibleState=g,this.c.fire())}get state(){return this.h}set state(g){this.h=g,typeof g=="object"?(L(this.extensionDescription,"commentThreadApplicability"),this.b.state=g.resolved,this.b.applicability=g.applicability):this.b.state=g,this.c.fire()}get isDisposed(){return this.j}constructor(g,v,y,E,k,I,D,T,_){this.m=v,this.n=y,this.o=E,this.p=k,this.q=I,this.extensionDescription=D,this.r=T,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new P,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new os,this.l.value=new he,this.n===void 0&&(this.n=`${g}.${this.handle}`),i.$createCommentThread(v,this.handle,this.n,this.o,O.from(this.p),this.q.map(W=>a(this,W,this.k,this.extensionDescription)),D.identifier,this.r,_),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{i.$deleteCommentThread(v,this.handle)}});const q=this;this.value={get uri(){return q.uri},get range(){return q.range},set range(W){q.range=W},get comments(){return q.comments},set comments(W){q.comments=W},get collapsibleState(){return q.collapsibleState},set collapsibleState(W){q.collapsibleState=W},get canReply(){return q.canReply},set canReply(W){q.canReply=W},get contextValue(){return q.contextValue},set contextValue(W){q.contextValue=W},get label(){return q.label},set label(W){q.label=W},get state(){return q.state},set state(W){q.state=W},reveal:(W,U)=>q.reveal(W,U),hide:()=>q.hide(),dispose:()=>{q.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new he);const g=y=>Object.prototype.hasOwnProperty.call(this.b,y),v={};g("range")&&(v.range=O.from(this.p)),g("label")&&(v.label=this.label),g("contextValue")&&(v.contextValue=this.contextValue??null),g("comments")&&(v.comments=this.q.map(y=>a(this,y,this.k,this.extensionDescription))),g("collapsibleState")&&(v.collapseState=u(this.g)),g("canReply")&&(v.canReply=this.canReply),g("state")&&(v.state=h(this.h)),g("applicability")&&(v.applicability=d(this.h)),g("isTemplate")&&(v.isTemplate=this.r),this.b={},i.$updateCommentThread(this.m,this.handle,this.n,this.o,v)}getCommentByUniqueId(g){for(const v of this.k){const y=v[0],E=v[1];if(g===E)return y}}async reveal(g,v){L(this.extensionDescription,"commentReveal");let y;g&&g.body!==void 0?y=g:v=v??g;let E=y?this.k.get(y):void 0;E??=this.k.get(this.q[0]);let k=!0,I=!1;return v?.focus===Ql.Reply?(I=!0,k=!1):v?.focus===Ql.Comment&&(k=!1),i.$revealCommentThread(this.m,this.handle,E,{preserveFocus:k,focusReply:I})}async hide(){return i.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(g=>g.dispose())}}__decorate([Yh(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(g){this.b=g,g?.resourceHints&&L(this.h,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,g?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(g){this.c=g,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!g})}get options(){return this.d}set options(g){this.d=g,i.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return L(this.h,"activeComment"),this.e}get activeCommentThread(){return L(this.h,"activeComment"),this.f?.value}constructor(g,v,y,E){this.h=g,this.i=v,this.j=y,this.k=E,this.a=new Map,i.$registerCommentController(this.handle,y,E,this.h.identifier.value);const k=this;this.value=Object.freeze({id:k.id,label:k.label,get options(){return k.options},set options(I){k.options=I},get commentingRangeProvider(){return k.commentingRangeProvider},set commentingRangeProvider(I){k.commentingRangeProvider=I},get reactionHandler(){return k.reactionHandler},set reactionHandler(I){k.reactionHandler=I},get activeCommentThread(){return k.activeCommentThread},createCommentThread(I,D,T){return k.createCommentThread(I,D,T).value},dispose:()=>{k.dispose()}}),this.g=[],this.g.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(g,v,y){v===void 0&&L(this.h,"fileComments");const E=new n(this.id,this.handle,void 0,g,v,y,this.h,!1);return this.a.set(E.handle,E),E}$setActiveComment(g){if(!g){this.e=void 0,this.f=void 0;return}const v=this.a.get(g.commentThreadHandle);v&&(this.e=g.uniqueIdInThread?v.getCommentByUniqueId(g.uniqueIdInThread):void 0,this.f=v)}$createCommentThreadTemplate(g,v,y){const E=new n(this.id,this.handle,void 0,x.revive(g),O.to(v),[],this.h,!0,y);return E.collapsibleState=ha.Expanded,this.a.set(E.handle,E),E}$updateCommentThreadTemplate(g,v){const y=this.a.get(g);y&&(y.range=O.to(v))}$updateCommentThread(g,v){const y=this.a.get(g);if(!y)return;(k=>Object.prototype.hasOwnProperty.call(v,k))("collapseState")&&(y.collapsibleState=u(v.collapseState))}$deleteCommentThread(g){this.a.get(g)?.dispose(),this.a.delete(g)}getCommentThread(g){return this.a.get(g)}dispose(){this.a.forEach(g=>{g.dispose()}),this.g.forEach(g=>g.dispose())}}function a(f,g,v,y){let E=v.get(g);return E||(E=++f.commentHandle,v.set(g,E)),g.state!==void 0&&L(y,"commentsDraftState"),g.reactions?.some(k=>k.reactors!==void 0)&&L(y,"commentReactor"),{mode:g.mode,contextValue:g.contextValue,uniqueIdInThread:E,body:typeof g.body=="string"?g.body:Ce.from(g.body),userName:g.author.name,userIconPath:g.author.iconPath,label:g.label,commentReactions:g.reactions?g.reactions.map(k=>c(k)):void 0,state:g.state,timestamp:g.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?Gf(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(g=>g.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?x.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(g=>({name:g}))}}function u(f){if(f!==void 0)switch(f){case ql.Expanded:return ha.Expanded;case ql.Collapsed:return ha.Collapsed}return ha.Collapsed}function h(f){let g;if(typeof f=="object"?g=f.resolved:g=f,g!==void 0)switch(g){case Gl.Unresolved:return fl.Unresolved;case Gl.Resolved:return fl.Resolved}return fl.Unresolved}function d(f){let g;if(typeof f=="object"&&(g=f.applicability),g!==void 0)switch(g){case Jl.Current:return pl.Current;case Jl.Outdated:return pl.Outdated}return pl.Current}return new s}var ug={},Fe={exports:ug};(function(e,t){if(typeof ug=="object"&&typeof Fe=="object")Fe.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof ug=="object"?ug:e)[i]=r[i]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(i,s,n){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:n})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)r.d(n,o,function(a){return i[a]}.bind(null,o));return n},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=0)}([function(e,t,r){(function(i){var s;t=e.exports=_e,s=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var C=Array.prototype.slice.call(arguments,0);C.unshift("SEMVER"),console.log.apply(console,C)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var d=l++;c[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="(?:"+c[u]+"|"+c[d]+")";var y=l++;c[y]="(?:"+c[h]+"|"+c[d]+")";var E=l++;c[E]="(?:-("+c[v]+"(?:\\."+c[v]+")*))";var k=l++;c[k]="(?:-?("+c[y]+"(?:\\."+c[y]+")*))";var I=l++;c[I]="[0-9A-Za-z-]+";var D=l++;c[D]="(?:\\+("+c[I]+"(?:\\."+c[I]+")*))";var T=l++,_="v?"+c[f]+c[E]+"?"+c[D]+"?";c[T]="^"+_+"$";var q="[v=\\s]*"+c[g]+c[k]+"?"+c[D]+"?",W=l++;c[W]="^"+q+"$";var U=l++;c[U]="((?:<|>)?=?)";var ne=l++;c[ne]=c[h]+"|x|X|\\*";var ce=l++;c[ce]=c[u]+"|x|X|\\*";var ve=l++;c[ve]="[v=\\s]*("+c[ce]+")(?:\\.("+c[ce]+")(?:\\.("+c[ce]+")(?:"+c[E]+")?"+c[D]+"?)?)?";var We=l++;c[We]="[v=\\s]*("+c[ne]+")(?:\\.("+c[ne]+")(?:\\.("+c[ne]+")(?:"+c[k]+")?"+c[D]+"?)?)?";var G=l++;c[G]="^"+c[U]+"\\s*"+c[ve]+"$";var B=l++;c[B]="^"+c[U]+"\\s*"+c[We]+"$";var Z=l++;c[Z]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var z=l++;c[z]="(?:~>?)";var ae=l++;c[ae]="(\\s*)"+c[z]+"\\s+",a[ae]=new RegExp(c[ae],"g");var ye=l++;c[ye]="^"+c[z]+c[ve]+"$";var de=l++;c[de]="^"+c[z]+c[We]+"$";var et=l++;c[et]="(?:\\^)";var Qe=l++;c[Qe]="(\\s*)"+c[et]+"\\s+",a[Qe]=new RegExp(c[Qe],"g");var Rt=l++;c[Rt]="^"+c[et]+c[ve]+"$";var Dt=l++;c[Dt]="^"+c[et]+c[We]+"$";var Qt=l++;c[Qt]="^"+c[U]+"\\s*("+q+")$|^$";var at=l++;c[at]="^"+c[U]+"\\s*("+_+")$|^$";var or=l++;c[or]="(\\s*)"+c[U]+"\\s*("+q+"|"+c[ve]+")",a[or]=new RegExp(c[or],"g");var Vs=l++;c[Vs]="^\\s*("+c[ve]+")\\s+-\\s+("+c[ve]+")\\s*$";var rs=l++;c[rs]="^\\s*("+c[We]+")\\s+-\\s+("+c[We]+")\\s*$";var Rn=l++;c[Rn]="(<|>)?=?\\s*\\*";for(var ke=0;ke<35;ke++)s(ke,c[ke]),a[ke]||(a[ke]=new RegExp(c[ke]));function is(C,R){if(C instanceof _e)return C;if(typeof C!="string"||C.length>n||!(R?a[W]:a[T]).test(C))return null;try{return new _e(C,R)}catch{return null}}function _e(C,R){if(C instanceof _e){if(C.loose===R)return C;C=C.version}else if(typeof C!="string")throw new TypeError("Invalid Version: "+C);if(C.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof _e))return new _e(C,R);s("SemVer",C,R),this.loose=R;var F=C.trim().match(R?a[W]:a[T]);if(!F)throw new TypeError("Invalid Version: "+C);if(this.raw=C,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(ue){if(/^[0-9]+$/.test(ue)){var be=+ue;if(be>=0&&be<o)return be}return ue}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}t.parse=is,t.valid=function(C,R){var F=is(C,R);return F?F.version:null},t.clean=function(C,R){var F=is(C.trim().replace(/^[=v]+/,""),R);return F?F.version:null},t.SemVer=_e,_e.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},_e.prototype.toString=function(){return this.version},_e.prototype.compare=function(C){return s("SemVer.compare",this.version,this.loose,C),C instanceof _e||(C=new _e(C,this.loose)),this.compareMain(C)||this.comparePre(C)},_e.prototype.compareMain=function(C){return C instanceof _e||(C=new _e(C,this.loose)),Qr(this.major,C.major)||Qr(this.minor,C.minor)||Qr(this.patch,C.patch)},_e.prototype.comparePre=function(C){if(C instanceof _e||(C=new _e(C,this.loose)),this.prerelease.length&&!C.prerelease.length)return-1;if(!this.prerelease.length&&C.prerelease.length)return 1;if(!this.prerelease.length&&!C.prerelease.length)return 0;var R=0;do{var F=this.prerelease[R],ue=C.prerelease[R];if(s("prerelease compare",R,F,ue),F===void 0&&ue===void 0)return 0;if(ue===void 0)return 1;if(F===void 0)return-1;if(F!==ue)return Qr(F,ue)}while(++R)},_e.prototype.inc=function(C,R){switch(C){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",R);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",R);break;case"prepatch":this.prerelease.length=0,this.inc("patch",R),this.inc("pre",R);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",R),this.inc("pre",R);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}R&&(this.prerelease[0]===R?isNaN(this.prerelease[1])&&(this.prerelease=[R,0]):this.prerelease=[R,0]);break;default:throw new Error("invalid increment argument: "+C)}return this.format(),this.raw=this.version,this},t.inc=function(C,R,F,ue){typeof F=="string"&&(ue=F,F=void 0);try{return new _e(C,F).inc(R,ue).version}catch{return null}},t.diff=function(C,R){if(Ac(C,R))return null;var F=is(C),ue=is(R);if(F.prerelease.length||ue.prerelease.length){for(var be in F)if((be==="major"||be==="minor"||be==="patch")&&F[be]!==ue[be])return"pre"+be;return"prerelease"}for(var be in F)if((be==="major"||be==="minor"||be==="patch")&&F[be]!==ue[be])return be},t.compareIdentifiers=Qr;var Ri=/^[0-9]+$/;function Qr(C,R){var F=Ri.test(C),ue=Ri.test(R);return F&&ue&&(C=+C,R=+R),F&&!ue?-1:ue&&!F?1:C<R?-1:C>R?1:0}function Yr(C,R,F){return new _e(C,F).compare(new _e(R,F))}function Bo(C,R,F){return Yr(C,R,F)>0}function _o(C,R,F){return Yr(C,R,F)<0}function Ac(C,R,F){return Yr(C,R,F)===0}function Tc(C,R,F){return Yr(C,R,F)!==0}function Rc(C,R,F){return Yr(C,R,F)>=0}function zo(C,R,F){return Yr(C,R,F)<=0}function Wo(C,R,F,ue){var be;switch(R){case"===":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),be=C===F;break;case"!==":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),be=C!==F;break;case"":case"=":case"==":be=Ac(C,F,ue);break;case"!=":be=Tc(C,F,ue);break;case">":be=Bo(C,F,ue);break;case">=":be=Rc(C,F,ue);break;case"<":be=_o(C,F,ue);break;case"<=":be=zo(C,F,ue);break;default:throw new TypeError("Invalid operator: "+R)}return be}function ar(C,R){if(C instanceof ar){if(C.loose===R)return C;C=C.value}if(!(this instanceof ar))return new ar(C,R);s("comparator",C,R),this.loose=R,this.parse(C),this.semver===ss?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(C,R){return Qr(R,C)},t.major=function(C,R){return new _e(C,R).major},t.minor=function(C,R){return new _e(C,R).minor},t.patch=function(C,R){return new _e(C,R).patch},t.compare=Yr,t.compareLoose=function(C,R){return Yr(C,R,!0)},t.rcompare=function(C,R,F){return Yr(R,C,F)},t.sort=function(C,R){return C.sort(function(F,ue){return t.compare(F,ue,R)})},t.rsort=function(C,R){return C.sort(function(F,ue){return t.rcompare(F,ue,R)})},t.gt=Bo,t.lt=_o,t.eq=Ac,t.neq=Tc,t.gte=Rc,t.lte=zo,t.cmp=Wo,t.Comparator=ar;var ss={};function vt(C,R){if(C instanceof vt)return C.loose===R?C:new vt(C.raw,R);if(C instanceof ar)return new vt(C.value,R);if(!(this instanceof vt))return new vt(C,R);if(this.loose=R,this.raw=C,this.set=C.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+C);this.format()}function ir(C){return!C||C.toLowerCase()==="x"||C==="*"}function qs(C,R,F,ue,be,Bt,Oe,cr,Et,Yt,Dr,wt,S){return((R=ir(F)?"":ir(ue)?">="+F+".0.0":ir(be)?">="+F+"."+ue+".0":">="+R)+" "+(cr=ir(Et)?"":ir(Yt)?"<"+(+Et+1)+".0.0":ir(Dr)?"<"+Et+"."+(+Yt+1)+".0":wt?"<="+Et+"."+Yt+"."+Dr+"-"+wt:"<="+cr)).trim()}function im(C,R){for(var F=0;F<C.length;F++)if(!C[F].test(R))return!1;if(R.prerelease.length){for(F=0;F<C.length;F++)if(s(C[F].semver),C[F].semver!==ss&&C[F].semver.prerelease.length>0){var ue=C[F].semver;if(ue.major===R.major&&ue.minor===R.minor&&ue.patch===R.patch)return!0}return!1}return!0}function Vo(C,R,F){try{R=new vt(R,F)}catch{return!1}return R.test(C)}function ns(C,R,F,ue){var be,Bt,Oe,cr,Et;switch(C=new _e(C,ue),R=new vt(R,ue),F){case">":be=Bo,Bt=zo,Oe=_o,cr=">",Et=">=";break;case"<":be=_o,Bt=Rc,Oe=Bo,cr="<",Et="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Vo(C,R,ue))return!1;for(var Yt=0;Yt<R.set.length;++Yt){var Dr=R.set[Yt],wt=null,S=null;if(Dr.forEach(function(kt){kt.semver===ss&&(kt=new ar(">=0.0.0")),wt=wt||kt,S=S||kt,be(kt.semver,wt.semver,ue)?wt=kt:Oe(kt.semver,S.semver,ue)&&(S=kt)}),wt.operator===cr||wt.operator===Et||(!S.operator||S.operator===cr)&&Bt(C,S.semver)||S.operator===Et&&Oe(C,S.semver))return!1}return!0}ar.prototype.parse=function(C){var R=this.loose?a[Qt]:a[at],F=C.match(R);if(!F)throw new TypeError("Invalid comparator: "+C);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new _e(F[2],this.loose):this.semver=ss},ar.prototype.toString=function(){return this.value},ar.prototype.test=function(C){return s("Comparator.test",C,this.loose),this.semver===ss||(typeof C=="string"&&(C=new _e(C,this.loose)),Wo(C,this.operator,this.semver,this.loose))},ar.prototype.intersects=function(C,R){if(!(C instanceof ar))throw new TypeError("a Comparator is required");var F;if(this.operator==="")return F=new vt(C.value,R),Vo(this.value,F,R);if(C.operator==="")return F=new vt(this.value,R),Vo(C.semver,F,R);var ue=!(this.operator!==">="&&this.operator!==">"||C.operator!==">="&&C.operator!==">"),be=!(this.operator!=="<="&&this.operator!=="<"||C.operator!=="<="&&C.operator!=="<"),Bt=this.semver.version===C.semver.version,Oe=!(this.operator!==">="&&this.operator!=="<="||C.operator!==">="&&C.operator!=="<="),cr=Wo(this.semver,"<",C.semver,R)&&(this.operator===">="||this.operator===">")&&(C.operator==="<="||C.operator==="<"),Et=Wo(this.semver,">",C.semver,R)&&(this.operator==="<="||this.operator==="<")&&(C.operator===">="||C.operator===">");return ue||be||Bt&&Oe||cr||Et},t.Range=vt,vt.prototype.format=function(){return this.range=this.set.map(function(C){return C.join(" ").trim()}).join("||").trim(),this.range},vt.prototype.toString=function(){return this.range},vt.prototype.parseRange=function(C){var R=this.loose;C=C.trim(),s("range",C,R);var F=R?a[rs]:a[Vs];C=C.replace(F,qs),s("hyphen replace",C),C=C.replace(a[or],"$1$2$3"),s("comparator trim",C,a[or]),C=(C=(C=C.replace(a[ae],"$1~")).replace(a[Qe],"$1^")).split(/\s+/).join(" ");var ue=R?a[Qt]:a[at],be=C.split(" ").map(function(Bt){return function(Oe,cr){return s("comp",Oe),Oe=function(Et,Yt){return Et.trim().split(/\s+/).map(function(Dr){return function(wt,S){s("caret",wt,S);var kt=S?a[Dt]:a[Rt];return wt.replace(kt,function(pr,j,ee,ct,ft){var _t;return s("caret",wt,pr,j,ee,ct,ft),ir(j)?_t="":ir(ee)?_t=">="+j+".0.0 <"+(+j+1)+".0.0":ir(ct)?_t=j==="0"?">="+j+"."+ee+".0 <"+j+"."+(+ee+1)+".0":">="+j+"."+ee+".0 <"+(+j+1)+".0.0":ft?(s("replaceCaret pr",ft),ft.charAt(0)!=="-"&&(ft="-"+ft),_t=j==="0"?ee==="0"?">="+j+"."+ee+"."+ct+ft+" <"+j+"."+ee+"."+(+ct+1):">="+j+"."+ee+"."+ct+ft+" <"+j+"."+(+ee+1)+".0":">="+j+"."+ee+"."+ct+ft+" <"+(+j+1)+".0.0"):(s("no pr"),_t=j==="0"?ee==="0"?">="+j+"."+ee+"."+ct+" <"+j+"."+ee+"."+(+ct+1):">="+j+"."+ee+"."+ct+" <"+j+"."+(+ee+1)+".0":">="+j+"."+ee+"."+ct+" <"+(+j+1)+".0.0"),s("caret return",_t),_t})}(Dr,Yt)}).join(" ")}(Oe,cr),s("caret",Oe),Oe=function(Et,Yt){return Et.trim().split(/\s+/).map(function(Dr){return function(wt,S){var kt=S?a[de]:a[ye];return wt.replace(kt,function(pr,j,ee,ct,ft){var _t;return s("tilde",wt,pr,j,ee,ct,ft),ir(j)?_t="":ir(ee)?_t=">="+j+".0.0 <"+(+j+1)+".0.0":ir(ct)?_t=">="+j+"."+ee+".0 <"+j+"."+(+ee+1)+".0":ft?(s("replaceTilde pr",ft),ft.charAt(0)!=="-"&&(ft="-"+ft),_t=">="+j+"."+ee+"."+ct+ft+" <"+j+"."+(+ee+1)+".0"):_t=">="+j+"."+ee+"."+ct+" <"+j+"."+(+ee+1)+".0",s("tilde return",_t),_t})}(Dr,Yt)}).join(" ")}(Oe,cr),s("tildes",Oe),Oe=function(Et,Yt){return s("replaceXRanges",Et,Yt),Et.split(/\s+/).map(function(Dr){return function(wt,S){wt=wt.trim();var kt=S?a[B]:a[G];return wt.replace(kt,function(pr,j,ee,ct,ft,_t){s("xRange",wt,pr,j,ee,ct,ft,_t);var vh=ir(ee),Li=vh||ir(ct),Ln=Li||ir(ft);return j==="="&&Ln&&(j=""),vh?pr=j===">"||j==="<"?"<0.0.0":"*":j&&Ln?(Li&&(ct=0),Ln&&(ft=0),j===">"?(j=">=",Li?(ee=+ee+1,ct=0,ft=0):Ln&&(ct=+ct+1,ft=0)):j==="<="&&(j="<",Li?ee=+ee+1:ct=+ct+1),pr=j+ee+"."+ct+"."+ft):Li?pr=">="+ee+".0.0 <"+(+ee+1)+".0.0":Ln&&(pr=">="+ee+"."+ct+".0 <"+ee+"."+(+ct+1)+".0"),s("xRange return",pr),pr})}(Dr,Yt)}).join(" ")}(Oe,cr),s("xrange",Oe),Oe=function(Et,Yt){return s("replaceStars",Et,Yt),Et.trim().replace(a[Rn],"")}(Oe,cr),s("stars",Oe),Oe}(Bt,R)}).join(" ").split(/\s+/);return this.loose&&(be=be.filter(function(Bt){return!!Bt.match(ue)})),be=be.map(function(Bt){return new ar(Bt,R)})},vt.prototype.intersects=function(C,R){if(!(C instanceof vt))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(ue){return C.set.some(function(be){return be.every(function(Bt){return ue.intersects(Bt,R)})})})})},t.toComparators=function(C,R){return new vt(C,R).set.map(function(F){return F.map(function(ue){return ue.value}).join(" ").trim().split(" ")})},vt.prototype.test=function(C){if(!C)return!1;typeof C=="string"&&(C=new _e(C,this.loose));for(var R=0;R<this.set.length;R++)if(im(this.set[R],C))return!0;return!1},t.satisfies=Vo,t.maxSatisfying=function(C,R,F){var ue=null,be=null;try{var Bt=new vt(R,F)}catch{return null}return C.forEach(function(Oe){Bt.test(Oe)&&(ue&&be.compare(Oe)!==-1||(be=new _e(ue=Oe,F)))}),ue},t.minSatisfying=function(C,R,F){var ue=null,be=null;try{var Bt=new vt(R,F)}catch{return null}return C.forEach(function(Oe){Bt.test(Oe)&&(ue&&be.compare(Oe)!==1||(be=new _e(ue=Oe,F)))}),ue},t.validRange=function(C,R){try{return new vt(C,R).range||"*"}catch{return null}},t.ltr=function(C,R,F){return ns(C,R,"<",F)},t.gtr=function(C,R,F){return ns(C,R,">",F)},t.outside=ns,t.prerelease=function(C,R){var F=is(C,R);return F&&F.prerelease.length?F.prerelease:null},t.intersects=function(C,R,F){return C=new vt(C,F),R=new vt(R,F),C.intersects(R)},t.coerce=function(C){if(C instanceof _e)return C;if(typeof C!="string")return null;var R=C.match(a[Z]);return R==null?null:is((R[1]||"0")+"."+(R[2]||"0")+"."+(R[3]||"0"))}}).call(this,r(1))},function(e,t){var r,i,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(y){if(r===setTimeout)return setTimeout(y,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(y,0);try{return r(y,0)}catch{try{return r.call(null,y,0)}catch{return r.call(this,y,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:n}catch{r=n}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var y=a(d);u=!0;for(var E=l.length;E;){for(c=l,l=[];++h<E;)c&&c[h].run();h=-1,E=l.length}c=null,u=!1,function(k){if(i===clearTimeout)return clearTimeout(k);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(k);try{i(k)}catch{try{return i.call(null,k)}catch{return i.call(this,k)}}}(y)}}function g(y,E){this.fun=y,this.array=E}function v(){}s.nextTick=function(y){var E=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)E[k-1]=arguments[k];l.push(new g(y,E)),l.length!==1||u||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(y){return[]},s.binding=function(y){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(y){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var EQ=Fe.exports.SEMVER_SPEC_VERSION,kQ=Fe.exports.parse,SQ=Fe.exports.valid,$Q=Fe.exports.coerce,CQ=Fe.exports.clean,IQ=Fe.exports.inc,PQ=Fe.exports.major,DQ=Fe.exports.minor,AQ=Fe.exports.patch,TQ=Fe.exports.prerelease,RQ=Fe.exports.gt,LQ=Fe.exports.gte,NQ=Fe.exports.lt,FQ=Fe.exports.lte,OQ=Fe.exports.eq,MQ=Fe.exports.neq,UQ=Fe.exports.cmp,jQ=Fe.exports.compare,HQ=Fe.exports.rcompare,BQ=Fe.exports.compareIdentifiers,_Q=Fe.exports.rcompareIdentifiers,zQ=Fe.exports.compareBuild,WQ=Fe.exports.sort,VQ=Fe.exports.rsort,qQ=Fe.exports.diff,GQ=Fe.exports.validRange,JQ=Fe.exports.satisfies,QQ=Fe.exports.maxSatisfying,YQ=Fe.exports.minSatisfying,XQ=Fe.exports.minVersion,ZQ=Fe.exports.gtr,KQ=Fe.exports.ltr,eY=Fe.exports.outside,tY=Fe.exports.intersects,rY=Fe.exports.SemVer,iY=Fe.exports.Comparator,sY=Fe.exports.Range,c$=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,EH=/^-(\d{4})(\d{2})(\d{2})$/;function kH(e){return e=e.trim(),e==="*"||c$.test(e)}function l$(e){if(!kH(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(c$);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function u$(e){if(!e)return null;const t=e.majorBase,r=e.majorMustEqual,i=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=EH.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:r,minorBase:i,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var SH=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function $H(e,t){if(t.serializeBuffersForPostMessage){const r=new SH,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a)};if(ArrayBuffer.isView(a)){const c=CH(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=r.buffers.map(o=>{const a=new Uint8Array(o);return Y.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function CH(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function IH(e,t){const r=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),i=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=r[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,i),arrayBuffers:r}}var PH=class{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,r,i,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new P,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new P,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=r,this.#i=i,this.#n=s,this.#s=n,this.#u=mc(n),this.#d=DH(n),this.#r=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,Vu(e,this.#i)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===V.https||e.scheme===V.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Sb}return Sb}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#r.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),hi(this.#o,e)||this.#t.$setOptions(this.#e,h$(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=$H(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===V.vscodeRemote,r=this.#s.extensionLocation.scheme===V.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=x.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Vu(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=x.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Vu(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`})}};function mc(e){try{const t=u$(l$(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function DH(e){try{const t=u$(l$(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var AH=class extends K{constructor(e,t,r,i,s){super(),this.c=t,this.f=r,this.g=i,this.h=s,this.b=new Map,this.a=e.getProxy(Q.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,r){const i=this.j(e);if(i){const{message:s}=IH(t,r.value);i._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,r){const i=new PH(e,this.a,TH(t),this.c,this.f,r,this.h);this.b.set(e,i);const s=i._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return i}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function hg(e){return{id:e.identifier,location:e.extensionLocation}}function h$(e,t,r){return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:r.localResourceRoots||RH(e,t)}}function TH(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>x.from(t))}}function RH(e,t){return[...(t?.getWorkspaceFolders()||[]).map(r=>r.uri),e.extensionLocation]}var Pi=class oI{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const r=this.c++;return this.b.set(r,t),this.e(),r}get(t,r){return this.b.has(t)?this.b.get(t)[r]:void 0}delete(t){this.b.delete(t),this.e()}e(){oI.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},LH=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new Pi("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=jH(this.document.uri)+this.a++;return Ct(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},NH=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,r){const i=this.b(e,t.uri);if(this.a.has(i))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new LH(t,r);return this.a.set(i,s),s}delete(e,t){const r=this.b(e,t.uri);this.a.delete(r)}b(e,t){return`${e}@@@${t}`}},d$;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(d$||(d$={}));var FH=class{constructor(){this.a=new Map}addTextProvider(e,t,r){return this.b(e,{type:0,extension:t,provider:r})}addCustomProvider(e,t,r){return this.b(e,{type:1,extension:t,provider:r})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Te(()=>this.a.delete(e))}},OH=class{constructor(e,t,r,i,s){this.d=t,this.f=r,this.g=i,this.h=s,this.b=new FH,this.c=new NH,this.a=e.getProxy(Q.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,r,i){const s=new he;return MH(r)?(s.add(this.b.addTextProvider(t,e,r)),this.a.$registerTextEditorProvider(hg(e),t,i.webviewOptions||{},{supportsMove:!!r.moveCustomTextEditor},mc(e))):(s.add(this.b.addCustomProvider(t,e,r)),dg(r)&&s.add(r.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(UH(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(hg(e),t,i.webviewOptions||{},!!i.supportsMultipleEditorsPerDocument,mc(e))),Te.from(s,new Te(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=x.revive(e),a=await n.provider.openCustomDocument(o,{backupId:r,untitledDocumentData:i?.buffer},s);let c;return dg(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:dg(n.provider)}}async $disposeCustomDocument(e,t){const r=this.b.get(t);if(!r)throw new Error(`No provider found for '${t}'`);if(r.type!==1)throw new Error(`Invalid provider type for '${t}'`);const i=x.revive(e),{document:s}=this.i(t,i);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,r,i,s,n){const o=this.b.get(r);if(!o)throw new Error(`No provider found for '${r}'`);const a=Ut.to(s),c=this.g.createNewWebview(t,i.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,r,i.title,a,i.options,c,i.active),u=x.revive(e);switch(o.type){case 1:{const{document:h}=this.i(r,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,r){this.i(t,e).disposeEdits(r)}async $onMoveCustomEditor(e,t,r){const i=this.b.get(r);if(!i)throw new Error(`No provider found for '${r}'`);if(!i.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${r}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=x.revive(t),o=this.d.getDocument(n);await i.provider.moveCustomTextEditor(o,s,Xe.None)}async $undo(e,t,r,i){return this.i(t,e).undo(r,i)}async $redo(e,t,r,i){return this.i(t,e).redo(r,i)}async $revert(e,t,r){const i=this.i(t,e);await this.j(t).revertCustomDocument(i.document,r),i.disposeBackup()}async $onSave(e,t,r){const i=this.i(t,e);await this.j(t).saveCustomDocument(i.document,r),i.disposeBackup()}async $onSaveAs(e,t,r,i){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,x.revive(r),i)}async $backup(e,t,r){const i=this.i(t,e),n=await this.j(t).backupCustomDocument(i.document,{destination:i.getNewBackupUri()},r);return i.updateBackup(n),n.id}i(e,t){const r=this.c.get(e,x.revive(t));if(!r)throw new Error("No custom document found");return r}j(e){const r=this.b.get(e)?.provider;if(!r||!dg(r))throw new Error("Custom document is not editable");return r}};function dg(e){return!!e.onDidChangeCustomDocument}function MH(e){return typeof e.resolveCustomTextEditor=="function"}function UH(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function jH(e){const t=e.scheme===V.file||e.scheme===V.untitled?e.fsPath:e.toString();return gs(t)+""}var Ao,f$=class aI{#e;#t;#r;constructor(t,r,i,s,n,o,a,c){this.d=t,this.e=r,this.f=i,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,i),this.#r=new zt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#r.keys()]),this.#e?.$clear(this.e),this.#r.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,r){if(!t){this.clear();return}this.j();let i=[];if(x.isUri(t)){if(!r){this.delete(t);return}this.#r.set(t,r.slice()),i=[t]}else if(Array.isArray(t)){i=[];let o;t=[...t].sort(aI.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#r.get(o).length===0&&this.#r.delete(o),o=c,i.push(c),this.#r.set(c,[])),l)this.#r.get(c)?.push(...l);else{const u=this.#r.get(c);u&&(u.length=0)}}}if(this.#t.fire(i),!this.#e)return;const s=[];let n=0;for(const o of i){let a=[];const c=this.#r.get(o);if(c)if(c.length>this.g){a=[];const l=[rr.Error,rr.Warning,rr.Information,rr.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...qa.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:br.Info,message:p(2750,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...qa.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#r.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#r.keys()]),this.#r.clear(),this.#e?.$clear(this.e)}forEach(t,r){this.j();for(const[i,s]of this)t.call(r,i,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#r.keys())yield[t,this.get(t)]}get(t){this.j();const r=this.#r.get(t);return Array.isArray(r)?Object.freeze(r.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#r.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,r){return t[0].toString()<r[0].toString()?-1:t[0].toString()>r[0].toString()?1:0}},$b=class{static{Ao=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const r=new zt;for(const i of t)r.set(i,i);return{uris:Object.freeze(Array.from(r.values()))}}constructor(t,r,i,s){this.j=r,this.k=i,this.l=s,this.g=new Map,this.h=new NP({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=je.map(this.h.event,Ao._mapper),this.f=t.getProxy(Q.MainThreadDiagnostics)}createDiagnosticCollection(t,r){const{g:i,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(d,f){s.$changeMany(d,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,d,f.length===0?"CLEARING":f)}$clear(d){s.$clear(d),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,d)}dispose(){s.dispose()}};let u;if(!r)r="_generated_diagnostic_collection_name_#"+Ao.c++,u=r;else if(!i.has(r))u=r;else{this.j.warn(`DiagnosticCollection with name '${r}' does already exist.`);do u=r+Ao.c++;while(i.has(u))}return new class extends f${constructor(){super(r,u,Ao.e,Ao.d,d=>c.getDocument(d)?.version,a.extUri,l,n),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const r=new Map,i=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=r.get(n.toString());typeof a>"u"&&(a=i.length,r.set(n.toString(),a),i.push([n,[]])),i[a][1]=i[a][1].concat(...o)});return i}}m(t){let r=[];for(const i of this.g.values())i.has(t)&&(r=r.concat(i.get(t)));return r}$acceptMarkersChange(t){if(!this.n){const r="_generated_mirror",i=new f$(r,r,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(r,i),this.n=i}for(const[r,i]of t)this.n.set(x.revive(r),i.map(qa.to))}};$b=Ao=__decorate([__param(1,$e),__param(2,ca)],$b);var HH=class{constructor(e){this.a=e.getProxy(Q.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&L(e,"showLocal"),this.a.$showOpenDialog(t).then(r=>r?r.map(i=>x.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?x.revive(t):void 0)}},BH=class cI{static{this.a=0}constructor(t,r,i){this.d=r,this.e=i,this.b=new Map,this.c=t.getProxy(Q.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,r){if(Object.keys(V).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const i=cI.a++;this.b.set(i,r),this.c.$registerTextContentProvider(i,t);let s;if(typeof r.onDidChange=="function"){let n;s=r.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=j4(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(pt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Te(()=>{this.b.delete(i)&&this.c.$unregisterTextContentProvider(i),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,r){const i=this.b.get(t);return i?Promise.resolve(i.provideTextDocumentContent(x.revive(r),Xe.None)):Promise.reject(new Error(`unsupported uri-scheme: ${r.scheme}`))}},_H=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=r,this.g=i,this.a=new jc,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,r,i)=>{const n={dispose:this.a.push([t,r,e])};return Array.isArray(i)&&i.push(n),n}}async $participateInSave(e,t){const r=x.revive(e);let i=!1;const s=setTimeout(()=>i=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(i)break;const a=this.d.getDocument(r),c=await this.h(o,{document:a,reason:ip.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,r],i){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(r,e,t,i).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,r,i){const s=[],n=Date.now(),{document:o,reason:a}=i,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw lm("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(r,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const d=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(d),u(f)}).catch(f=>{clearTimeout(d),h(f)})}).then(u=>{const h={edits:[]};for(const d of u)if(Array.isArray(d)&&d.every(f=>f instanceof fn))for(const{newText:f,newEol:g,range:v}of d)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:v&&O.from(v),text:f,eol:g&&Xa.from(g)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new zr(h)):Promise.reject(new Error("concurrent_edits"))})}},zH=class{constructor(e,t){this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new he,this.h=new Map,this.f=e.getProxy(Q.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(r=>{for(const i of r)this.b.fire(i.document)},void 0,this.e),this.g.onDidAddDocuments(r=>{for(const i of r)this.a.fire(i.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let r=this.h.get(e.toString());return r||(r=this.f.$tryOpenDocument(e).then(i=>{this.h.delete(e.toString());const s=x.revive(i);return Zo(this.g.getDocument(s))},i=>(this.h.delete(e.toString()),Promise.reject(i))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>x.revive(t))}$acceptModelLanguageChanged(e,t){const r=x.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");this.b.fire(i.document),i._acceptLanguageId(t),this.a.fire(i.document)}$acceptModelSaved(e){const t=x.revive(e),r=this.g.getDocument(t);if(!r)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(r.document)}$acceptDirtyStateChanged(e,t){const r=x.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptIsDirty(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,r){const i=x.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(r),s.onEvents(t);let n;t.isUndoing?n=Ul.Undo:t.isRedoing&&(n=Ul.Redo),this.c.fire(l6({document:s.document,contentChanges:t.changes.map(o=>({range:O.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){jM(e,t)}},WH=class{constructor(e){this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(Q.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,r){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const i=this.e++;return this.a.$registerEmbeddingProvider(i,t),this.b.set(i,{id:t,provider:r}),te(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(i),this.b.delete(i)})}async computeEmbeddings(e,t,r){r??=Xe.None;let i=!1;typeof t=="string"&&(t=[t],i=!0);const s=await this.a.$computeEmbeddings(e,t,r);if(s.length!==t.length)throw new Error;if(i){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,r){const i=this.b.get(e);if(!i)return[];const s=await i.provider.provideEmbeddings(t,r);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},VH=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Q.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,r){if(this.a.size===0)throw new Error("No embedding vector providers registered");const i=this.a.get(e);if(!i)throw new Error("Embedding vector provider not found");const s=await i.provideEmbeddingVector(t,r);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiEmbeddingVectorProvider(t,i),new Te(()=>{this.c.$unregisterAiEmbeddingVectorProvider(i),this.a.delete(i)})}},p$;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(p$||(p$={}));var qH=class{constructor(e,t,r){const i=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)i[s]=r;this.a=i,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,r){this.a[e*this.cols+t]=r}},g$=class{constructor(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>r&&(r=o),c>r&&(r=c)}t++,r++;const i=new qH(r,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];i.set(o,a,c)}this.a=i,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Cb=null;function GH(){return Cb===null&&(Cb=new g$([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Cb}var m$;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(m$||(m$={}));var qu=null;function JH(){if(qu===null){qu=new s8(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let r=0;r<e.length;r++)qu.set(e.charCodeAt(r),1);const t=".,;:";for(let r=0;r<t.length;r++)qu.set(t.charCodeAt(r),2)}return qu}var QH=class qy{static a(t,r,i,s,n){let o=n-1;do{const a=r.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=r.charCodeAt(s-1),c=r.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:r.substring(s,o+1)}}static computeLinks(t,r=GH()){const i=JH(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,d=1,f=!1,g=!1,v=!1,y=!1;for(;l<c;){let E=!1;const k=a.charCodeAt(l);if(d===13){let I;switch(k){case 40:f=!0,I=0;break;case 41:I=f?0:1;break;case 91:v=!0,g=!0,I=0;break;case 93:v=!1,I=g?0:1;break;case 123:y=!0,I=0;break;case 125:I=y?0:1;break;case 39:case 34:case 96:h===k?I=1:h===39||h===34||h===96?I=0:I=1;break;case 42:I=h===42?1:0;break;case 124:I=h===124?1:0;break;case 32:I=v?0:1;break;default:I=i.get(k)}I===1&&(s.push(qy.a(i,a,n,u,l)),E=!0)}else if(d===12){let I;k===91?(g=!0,I=0):I=i.get(k),I===1?E=!0:d=13}else d=r.nextState(d,k),d===0&&(E=!0);E&&(d=1,f=!1,g=!1,y=!1,u=l+1,h=k),l++}d===13&&s.push(qy.a(i,a,n,u,c))}return s}},YH=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let r,i,s=14,n=14;for(const o of e){let a=r?pD(r,o):0;for(a===0?i=1:i=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([i,o.toUpperCase().charCodeAt(a),n]),t.push([i,o.toLowerCase().charCodeAt(a),n]),i=n;r=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new g$(t)}}provideDocumentLinks(e){this.c();const t=[],r=QH.computeLinks({getLineContent(i){return e.lineAt(i-1).text},getLineCount(){return e.lineCount}},this.b);for(const i of r){const s=Eo.to(i);s.target&&t.push(s)}return t}},XH=class Gy{constructor(t,r){this.i=r,this.b=new YH,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(Q.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,r,i,s={}){if(Gy.j(i),this.d.has(r))throw new Error(`a provider for the scheme '${r}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(r),this.d.add(r),this.c.set(n,i);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(L(t,"fsChunks"),o+=4);let a;s.isReadonly&&Jn(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,r,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${r}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:d,type:f}=h;if(d.scheme!==r)continue;let g;switch(f){case Ua.Changed:g=0;break;case Ua.Created:g=1;break;case Ua.Deleted:g=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:d,type:g})}this.a.$onFileSystemChange(n,u)});return te(()=>{c.dispose(),this.b.delete(r),this.d.delete(r),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:r,ctime:i,mtime:s,size:n,permissions:o}=t;return{type:r,ctime:i,mtime:s,size:n,permissions:o}}$stat(t,r){return Promise.resolve(this.l(t).stat(x.revive(r))).then(i=>Gy.k(i))}$readdir(t,r){return Promise.resolve(this.l(t).readDirectory(x.revive(r)))}$readFile(t,r){return Promise.resolve(this.l(t).readFile(x.revive(r))).then(i=>Y.wrap(i))}$writeFile(t,r,i,s){return Promise.resolve(this.l(t).writeFile(x.revive(r),i.buffer,s))}$delete(t,r,i){return Promise.resolve(this.l(t).delete(x.revive(r),i))}$rename(t,r,i,s){return Promise.resolve(this.l(t).rename(x.revive(r),x.revive(i),s))}$copy(t,r,i,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(x.revive(r),x.revive(i),s))}$mkdir(t,r){return Promise.resolve(this.l(t).createDirectory(x.revive(r)))}$watch(t,r,i,s){const n=this.l(t).watch(x.revive(i),s);this.f.set(r,n)}$unwatch(t,r){const i=this.f.get(r);i&&(i.dispose(),this.f.delete(r))}$open(t,r,i){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(x.revive(r),i))}$close(t,r){const i=this.l(t);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(r))}$read(t,r,i,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=Y.alloc(s);return Promise.resolve(n.read(r,i,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,r,i,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(r,i,s.buffer,0,s.byteLength))}l(t){const r=this.c.get(t);if(!r){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return r}};function v$(e){return typeof e.correlationId=="number"}function ZH(e){return e.recursive===!0}var w$=class lI extends K{static{this.a=5}constructor(t,r,i,s){super(),this.h=t,this.j=r,this.m=i,this.n=s,this.c=this.B(new os),this.f=void 0,this.g=0}s(){const t=new he;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(r=>this.h(r))),t.add(this.b.onDidLogMessage(r=>this.j(r))),t.add(this.b.onDidError(r=>this.t(r.error,r.request)))}t(t,r){this.u(t,r)?this.g<lI.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,r){return!(!this.n.restartOnError||r||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}},KH=class extends w${constructor(e,t,r){super(e,t,r,{type:"node.js",restartOnError:!1})}},eB=class extends w${constructor(e,t,r){super(e,t,r,{type:"universal",restartOnError:!0})}};function b$(e){return e.map(t=>({type:t.type,resource:x.revive(t.resource),cId:t.cId}))}function tB(e){const t=new rB;for(const r of e)t.processEvent(r);return t.coalesce()}function y$(e,t){return typeof t=="string"&&!t.startsWith(ro)&&!Ui(t)?{base:e,pattern:t}:t}function x$(e,t){const r=[];for(const i of t)r.push(wi(y$(e,i)));return r}var rB=class{constructor(){this.a=new Set,this.b=new Map}c(e){return bt?e.resource.fsPath:e.resource.fsPath.toLowerCase()}processEvent(e){const t=this.b.get(this.c(e));let r=!1;if(t){const i=t.type,s=e.type;t.resource.fsPath!==e.resource.fsPath&&(e.type===2||e.type===1)?r=!0:i===1&&s===2?(this.b.delete(this.c(e)),this.a.delete(t)):i===2&&s===1?t.type=0:i===1&&s===0||(t.type=s)}else r=!0;r&&(this.a.add(e),this.b.set(this.c(e),e))}coalesce(){const e=[],t=[];return Array.from(this.a).filter(r=>r.type!==2?(e.push(r),!1):!0).sort((r,i)=>r.resource.fsPath.length-i.resource.fsPath.length).filter(r=>t.some(i=>IL(r.resource.fsPath,i,!bt))?!1:(t.push(r.resource.fsPath),!0)).concat(e)}};function iB(e,t){if(typeof t=="number")switch(e.type){case 1:return(t&4)===0;case 2:return(t&8)===0;case 0:return(t&2)===0}return!1}function sB(e){if(typeof e=="number"){const t=[];return e&4&&t.push("Added"),e&8&&t.push("Deleted"),e&2&&t.push("Updated"),t.length===0?"<all>":`[${t.join(", ")}]`}return"<none>"}var nB=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,r,i,s,n,o){this.a=Math.random(),this.b=new P,this.c=new P,this.d=new P,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=wi(n),c=typeof n=="string",l=o.correlate,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const d of h.created){const f=x.revive(d);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const d of h.changed){const f=x.revive(d);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const d of h.deleted){const f=x.revive(d);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=Te.from(this.i(e,r,t,i,n,o,o.correlate),this.b,this.c,this.d,u)}i(e,t,r,i,s,n,o){const a=Te.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(Q.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(ro)||s.pattern.includes(W1))&&(l=!0);const u=n.excludes??[];let h,d;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(d=14,n.ignoreChangeEvents&&(d&=-3),n.ignoreCreateEvents&&(d&=-5),n.ignoreDeleteEvents&&(d&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(x.revive(s.baseUri)),g=r.getConfiguration("files",f).get("watcherExclude");if(g)for(const v in g)v&&g[v]===!0&&u.push(v)}else if(!l){const f=t.getWorkspaceFolder(x.revive(s.baseUri));if(f){const g=r.getConfiguration("files",f).get("watcherExclude");if(g){for(const v in g)if(v&&g[v]===!0){const y=`${Ks(v,"/")}/${ro}`;h||(h=[]),h.push(y$(f.uri.fsPath,y))}}if(!h||h.length===0)return a}}return c.$watch(i.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:d},!!o),Te.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},oB=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new Lr(()=>this.a.created.map(x.revive)),this.c=new Lr(()=>this.a.changed.map(x.revive)),this.d=new Lr(()=>this.a.deleted.map(x.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},aB=class{constructor(e,t,r){this.j=e,this.k=t,this.l=r,this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.g=new Hc,this.h=new Hc,this.i=new Hc,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,r,i,s){return new nB(this.j,t,e,r,this.a.event,Ur.from(i),s)}$onFileEvent(e){this.a.fire(new oB(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(r=>({oldUri:x.revive(r.source),newUri:x.revive(r.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(r=>x.revive(r.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(r=>x.revive(r.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,r,i){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:x.revive(s.source),newUri:x.revive(s.target)}))},r,i);case 1:return await this.n(this.i,{files:t.map(s=>x.revive(s.target))},r,i);case 0:case 3:return await this.n(this.h,{files:t.map(s=>x.revive(s.target))},r,i)}}async n(e,t,r,i){const s=new Set,n=[];if(await e.fireAsync(t,i,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof oo&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>r&&this.k.warn("SLOW file-participant",c.extension.identifier)}),i.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=dr.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},cB=class{constructor(e,t,r,i,s){this.a=t,this.b=r,this.c=i;const n=new me("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new M("showOptions","Show Options",o=>!0,o=>o),new M("resource","Interactive resource Uri",o=>!0,o=>o),new M("controllerId","Notebook controller Id",o=>!0,o=>o),new M("title","Interactive editor title",o=>!0,o=>o)],new ge("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:x.revive(o.notebookUri),inputUri:x.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:x.revive(o.notebookUri),inputUri:x.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,r,i){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:r,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},lB=class{constructor(e){this.b=0,this.a=e.getProxy(Q.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),te(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},E$;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(E$||(E$={}));var uB=class ni extends Ke{constructor(t,r,i,s){super(t,r,i,s),this.selectionStartLineNumber=t,this.selectionStartColumn=r,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return ni.selectionsEqual(this,t)}static selectionsEqual(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,r){return this.getDirection()===0?new ni(this.startLineNumber,this.startColumn,t,r):new ni(t,r,this.startLineNumber,this.startColumn)}getPosition(){return new Vr(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Vr(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,r){return this.getDirection()===0?new ni(t,r,this.endLineNumber,this.endColumn):new ni(this.endLineNumber,this.endColumn,t,r)}static fromPositions(t,r=t){return new ni(t.lineNumber,t.column,r.lineNumber,r.column)}static fromRange(t,r){return r===0?new ni(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new ni(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new ni(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,r,i,s,n){return n===0?new ni(t,r,i,s):new ni(i,s,t,r)}},k$=class uI{constructor(t,r){this.d=t,this.e=r}async provideDocumentSymbols(t,r){const i=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(i,r);if(!hm(s))return s[0]instanceof Ll?s.map(l0.from):uI.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const r=[],i=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:ei.from(s.kind),tags:s.tags?.map(Ps.from)||[],detail:"",containerName:s.containerName,range:O.from(s.location.range),selectionRange:O.from(s.location.range),children:[]};for(;;){if(i.length===0){i.push(n),r.push(n);break}const o=i[i.length-1];if(Ke.containsRange(o.range,n.range)&&!Ke.equalsRange(o.range,n.range)){o.children?.push(n),i.push(n);break}i.pop()}}return r}},fg=class{constructor(e,t,r,i,s,n){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.d=new Pi("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const r=this.f.getDocument(e),i=await this.h.provideCodeLenses(r,t);if(!i||t.isCancellationRequested)return;const s=this.d.add(i),n=new he;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<i.length;a++)o.lenses.push({cacheId:[s,a],range:O.from(i[a].range),command:this.g.toInternal(i[a].command,n)});return o}async resolveCodeLens(e,t){const r=e.cacheId&&this.d.get(...e.cacheId);if(!r)return;let i;if(typeof this.h.resolveCodeLens!="function"||r.isResolved?i=r:i=await this.h.resolveCodeLens(r,t),i||(i=r),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!i.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(i.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function pg(e){return Array.isArray(e)?e.map(lu.from):e?[lu.from(e)]:[]}var S$=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideDefinition(i,s,r);return pg(n)}},$$=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideDeclaration(i,s,r);return pg(n)}},C$=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideImplementation(i,s,r);return pg(n)}},I$=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideTypeDefinition(i,s,r);return pg(n)}},Ib=class hI{static{this.f=10}constructor(t,r){this.g=t,this.h=r,this.d=0,this.e=new Map}async provideHover(t,r,i,s){const n=this.g.getDocument(t),o=Be.to(r);let a;if(i&&i.verbosityRequest){const h=i.verbosityRequest.previousHover.id,d=this.e.get(h);if(!d)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:d};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||hm(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new Ee(o,o));const c=uu.from(a),l=this.d;if(this.e.size===hI.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},P$=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideEvaluatableExpression(i,s,r);if(n)return d0.from(n)}},D$=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,r,i){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,O.to(t),Yf.to(r),i);if(Array.isArray(n))return n.map(o=>Qf.from(o))}},A$=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideDocumentHighlights(i,s,r);if(Array.isArray(n))return n.map(Ja.from)}},T$=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideMultiDocumentHighlights(e,t,r,i){const s=this.d.getDocument(e),n=r.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Be.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,i);if(Array.isArray(a))return a.map(f0.from)}},R$=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,r){const i=this.d.getDocument(e),s=Be.to(t),n=await this.e.provideLinkedEditingRanges(i,s,r);if(n&&Array.isArray(n.ranges))return{ranges:St(n.ranges.map(O.from)),wordPattern:n.wordPattern}}},L$=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,r,i){const s=this.d.getDocument(e),n=Be.to(t),o=await this.e.provideReferences(s,n,r,i);if(Array.isArray(o))return o.map(Sr.from)}},gg=class Kg{static{this.d=1e3}constructor(t,r,i,s,n,o,a){this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new Pi("CodeAction"),this.f=new Map}async provideCodeActions(t,r,i,s){const n=this.g.getDocument(t),o=uB.isISelection(r)?Ei.to(r):O.to(r),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>Kg.d)break;const c={diagnostics:a,only:i.only?new dt(i.only):void 0,triggerKind:P0.to(i.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Oc(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new he;this.f.set(u,h);const d=[];for(let f=0;f<l.length;f++){const g=l[f];if(g)if(Kg.o(g))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),d.push({_isSynthetic:!0,title:g.title,command:this.h.toInternal(g,h)});else{c.only&&(g.kind?c.only.contains(g.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${g.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const v=g.ranges??[];d.push({cacheId:[u,f],title:g.title,command:g.command&&this.h.toInternal(g.command,h),diagnostics:g.diagnostics&&g.diagnostics.map(qa.from),edit:g.edit&&dr.from(g.edit,void 0),kind:g.kind&&g.kind.value,isPreferred:g.isPreferred,isAI:Vt(this.m,"codeActionAI")?g.isAI:!1,ranges:Vt(this.m,"codeActionRanges")?St(v.map(O.from)):void 0,disabled:g.disabled?.reason})}}return{cacheId:u,actions:d}}async resolveCodeAction(t,r){const[i,s]=t,n=this.e.get(i,s);if(!n||Kg.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,r)??n;let a;o.edit&&(a=dr.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(i);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},Gu=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new Pi("DocumentPasteEdit")}async prepareDocumentPaste(e,t,r,i){if(!this.g.prepareDocumentPaste)return;const s=this.f.getDocument(e),n=t.map(c=>O.to(c)),o=En.toDataTransfer(r,()=>{throw new rP});if(await this.g.prepareDocumentPaste(s,n,o,i),i.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof gf));return En.from(a)}async providePasteEdits(e,t,r,i,s,n){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=r.map(h=>O.to(h)),c=En.toDataTransfer(i,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:s.only?new Ra(s.only):void 0,triggerKind:s.triggerKind},n);if(!l||n.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(2753,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?dr.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentPasteEdit)return{};const n=await this.g.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:n.additionalEdit?dr.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},N$=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(i,t,r);if(Array.isArray(s))return s.map(jt.from)}},Pb=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,r,i){const s=this.d.getDocument(e),n=O.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(jt.from)}async provideDocumentRangesFormattingEdits(e,t,r,i){K4(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(O.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(jt.from)}},F$=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,r,i,s){const n=this.d.getDocument(e),o=Be.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,r,i,s);if(Array.isArray(a))return a.map(jt.from)}},mg=class{constructor(e,t){this.e=e,this.f=t,this.d=new Pi("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const r=await this.e.provideWorkspaceSymbols(e,t);if(!Oc(r))return{symbols:[]};const i=this.d.add(r),s={cacheId:i,symbols:[]};for(let n=0;n<r.length;n++){const o=r[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...yo.from(o),cacheId:[i,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const r=this.d.get(...e.cacheId);if(r){const i=await this.e.resolveWorkspaceSymbol(r,t);return i&&ds(e,yo.from(i),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},vg=class Jy{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,r,i){this.d=t,this.e=r,this.f=i}async provideRenameEdits(t,r,i,s){const n=this.d.getDocument(t),o=Be.to(r);try{const a=await this.e.provideRenameEdits(n,o,i,s);return a?dr.from(a):void 0}catch(a){const c=Jy.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,r,i){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=Be.to(r);try{const o=await this.e.prepareRename(s,n,i);let a,c;if(Ee.isRange(o)?(a=o,c=s.getText(o)):mt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:O.from(a),text:c}}catch(o){const a=Jy.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Db=class Qy{static{this.d={[fd.Invoke]:Vl.Invoke,[fd.Automatic]:Vl.Automatic}}constructor(t,r,i){this.e=t,this.f=r,this.g=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,r,i,s){const n=this.e.getDocument(t),o=O.to(r);try{const a=Qy.d[i],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(Qy.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Ab=class{constructor(e,t){this.resultId=e,this.tokens=t}},Tb=class Ai{constructor(t,r){this.f=t,this.g=r,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,r,i){const s=this.f.getDocument(t),n=r!==0?this.d.get(r):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,i):await this.g.provideDocumentSemanticTokens(s,i);return n&&this.d.delete(r),o?(o=Ai.h(o),this.o(Ai.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return Ai.j(t)?Ai.k(t)?t:new ja(new Uint32Array(t.data),t.resultId):Ai.l(t)?Ai.m(t)?t:new xf(t.edits.map(r=>new Rk(r.start,r.deleteCount,r.data?new Uint32Array(r.data):r.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const r of t.edits)if(!(r.data instanceof Uint32Array))return!1;return!0}static n(t,r){if(!Ai.j(r)||!t||!t.tokens)return r;const i=t.tokens,s=i.length,n=r.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&i[a]===n[a];)a++;if(a===s&&a===o)return new xf([],r.resultId);let l=0;const u=c-a;for(;l<u&&i[s-l-1]===n[o-l-1];)l++;return new xf([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],r.resultId)}o(t,r){if(Ai.j(t)){const i=this.e++;return this.d.set(i,new Ab(t.resultId,t.data)),Eb({id:i,type:"full",data:t.data})}if(Ai.l(t)){const i=this.e++;return Ai.j(r)?this.d.set(i,new Ab(r.resultId,r.data)):this.d.set(i,new Ab(t.resultId)),Eb({id:i,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},O$=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(i,O.to(t),r);return s?this.f(s):null}f(e){return Eb({id:0,type:"full",data:e.data})}},Ju=class dI{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,r,i,s,n){this.f=t,this.g=r,this.h=i,this.j=s,this.k=n,this.d=new Pi("CompletionItem"),this.e=new Map}async provideCompletionItems(t,r,i,s){const n=this.f.getDocument(t),o=Be.to(r),a=n.getWordRangeAtPosition(o)||new Ee(o,o),c=a.with({end:o}),l=new Ar,u=await this.h.provideCompletionItems(n,o,s,g0.to(i));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new $a(u):u,d=dI.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new he;this.e.set(d,f);const g=[],v={x:d,b:g,a:{replace:O.from(a),insert:O.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let y=0;y<h.items.length;y++){const E=h.items[y],k=this.l(E,[d,y],c,a);g.push(k)}return v}async resolveCompletionItem(t,r){if(typeof this.h.resolveCompletionItem!="function")return;const i=this.d.get(...t);if(!i)return;const s=this.l(i,t),n=await this.h.resolveCompletionItem(i,r);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!hi(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,r,i,s){const n=this.e.get(r[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:r,a:t.label,b:t.kind!==void 0?Zf.from(t.kind):void 0,m:t.tags&&t.tags.map(Xf.from),c:t.detail,d:typeof t.documentation>"u"?void 0:Ce.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(jt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof ao&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Ee.isRange(c)?a.j=O.from(c):c&&(!i?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:O.from(c.inserting),replace:O.from(c.replacing)}),a}},vc=class{async provideInlineCompletions(e,t,r,i){}async provideInlineEditsForRange(e,t,r,i){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,r){}handlePartialAccept(e,t,r,i){}},hB=class extends vc{constructor(e,t,r,i){super(),this.f=e,this.g=t,this.h=r,this.j=i,this.d=new M$,this.e=Vt(this.f,"inlineCompletionsAdditions"),this.k={[dd.Automatic]:Wl.Automatic,[dd.Explicit]:Wl.Invoke}}get supportsHandleEvents(){return Vt(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,r,i){const s=this.g.getDocument(e),n=Be.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:O.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind]},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((d,f)=>{let g;d.command&&(u||(u=new he),g=this.j.toInternal(d.command,u));const v=d.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:d.filterText,range:d.range?O.from(d.range):void 0,command:g,idx:f,completeBracketPairs:this.e?d.completeBracketPairs:!1}}),commands:c.map(d=>(u||(u=new he),this.j.toInternal(d,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,r,i){if(!this.h.provideInlineEditsForRange)return;L(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=O.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:O.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],userPrompt:r.userPrompt},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((d,f)=>{let g;d.command&&(u||(u=new he),g=this.j.toInternal(d.command,u));const v=d.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:d.filterText,range:d.range?O.from(d.range):void 0,command:g,idx:f,completeBracketPairs:this.e?d.completeBracketPairs:!1}}),commands:c.map(d=>(u||(u=new he),this.j.toInternal(d,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,r){const i=this.d.get(e)?.items[t];i&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(i,r)}handlePartialAccept(e,t,r,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,r),this.h.handleDidPartiallyAcceptCompletionItem(s,N0.to(i)))}},Rb=class{async provideInlineEdits(e,t,r){const i=this.f.getDocument(e),s=await this.g.provideInlineEdit(i,{triggerKind:this.e[t.triggerKind]},r);if(!s||r.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new he),a=this.h.toInternal(s.accepted,n));let c;s.rejected&&(n||(n=new he),c=this.h.toInternal(s.rejected,n));let l;return s.shown&&(n||(n=new he),l=this.h.toInternal(s.shown,n)),n||(n=new he),{pid:o,text:s.text,range:O.from(s.range),accepted:a,rejected:c,shown:l,commands:s.commands?.map(h=>this.h.toInternal(h,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,r,i){this.f=t,this.g=r,this.h=i,this.d=new M$,this.e={[pd.Automatic]:cu.Automatic,[pd.Invoke]:cu.Invoke}}},M$=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Lb=class{constructor(e,t){this.e=e,this.f=t,this.d=new Pi("SignatureHelp")}async provideSignatureHelp(e,t,r,i){const s=this.e.getDocument(e),n=Be.to(t),o=this.g(r),a=await this.f.provideSignatureHelp(s,n,i,o);if(a){const c=this.d.add([a]);return{...hu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const r=hu.to(e.activeSignatureHelp),i=this.d.get(e.activeSignatureHelp.id,0);i?(t=i,t.activeSignature=r.activeSignature,t.activeParameter=r.activeParameter):t=r}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},wg=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.d=new Pi("InlayHints"),this.e=new Map}async provideInlayHints(e,t,r){const i=this.f.getDocument(e),s=O.to(t),n=await this.h.provideInlayHints(i,s,r);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(r.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new he);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const r=this.d.get(...e);if(!r)return;const i=await this.h.resolveInlayHint(r,t);if(i&&this.l(i))return this.m(i,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(r=>r.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const r=this.e.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const i={label:"",cacheId:t,tooltip:Ce.fromStrict(e.tooltip),position:Be.from(e.position),textEdits:e.textEdits&&e.textEdits.map(jt.from),kind:e.kind&&tp.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")i.label=e.label;else{const s=[];i.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:Ce.fromStrict(n.tooltip)};qr.isLocation(n.location)&&(o.location=Sr.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,r)),s.push(o)}}return i}},bg=class em{constructor(t,r){this.e=t,this.f=r,this.d=new Pi("DocumentLink")}async provideLinks(t,r){const i=this.e.getDocument(t),s=await this.f.provideDocumentLinks(i,r);if(!(!Array.isArray(s)||s.length===0)&&!r.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(em.g).map(Eo.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!em.g(s[a]))continue;const c=Eo.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,r){if(typeof this.f.resolveDocumentLink!="function")return;const i=this.d.get(...t);if(!i)return;const s=await this.f.resolveDocumentLink(i,r);if(!(!s||!em.g(s)))return Eo.from(s)}releaseLinks(t){this.d.delete(t)}},Nb=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const r=this.d.getDocument(e),i=await this.e.provideDocumentColors(r,t);return Array.isArray(i)?i.map(n=>({color:Qa.from(n.color),range:O.from(n.range)})):[]}async provideColorPresentations(e,t,r){const i=this.d.getDocument(e),s=O.to(t.range),n=Qa.to(t.color),o=await this.e.provideColorPresentations(n,{document:i,range:s},r);if(Array.isArray(o))return o.map(rp.from)}},U$=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideFoldingRanges(i,t,r);if(Array.isArray(s))return s.map(sp.from)}},j$=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideSelectionRanges(e,t,r){const i=this.d.getDocument(e),s=t.map(Be.to),n=await this.e.provideSelectionRanges(i,s,r);if(!Oc(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(b0.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Qu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Bp(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Be.to(t),n=await this.g.prepareCallHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(i,r);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>O.from(o))}))}async provideCallsFrom(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(i,r);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>O.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=xo.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},Yu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Bp(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Be.to(t),n=await this.g.prepareTypeHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(i,r);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(i,r);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=ko.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},yg=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new Pi("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,r,i,s){const n=this.f.getDocument(t),o=Be.to(r),a=En.toDataTransfer(i,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Oi(c),u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(2754,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?dr.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?dr.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},H$=class{constructor(e,t){this.d=e,this.e=t}async provideMappedEdits(e,t,r,i){const s=x.revive(e),n=this.d.getDocument(s),o=u=>({uri:x.revive(u.uri),version:u.version,ranges:u.ranges.map(h=>O.to(h))}),a=r.documents.map(u=>u.map(o)),c={documents:a,selections:a[0]?.[0]?.ranges??[],conversation:r.conversation?.map(u=>u.type==="response"?{type:"response",message:u.message,references:u.references?.map(o)}:{type:"request",message:u.message})},l=await this.e.provideMappedEdits(n,t,c,i);return l?dr.from(l):null}},Xu=class{constructor(e,t){this.adapter=e,this.extension=t}},dB=class qt{static{this.d=0}constructor(t,r,i,s,n,o,a,c){this.g=r,this.h=i,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(Q.MainThreadLanguageFeatures)}o(t,r){return Va.from(t,this.g,r)}p(t){return new Te(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return qt.d++}async s(t,r,i,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof r))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{Ni(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Xe.isCancellationToken(n)?n2(l,n):l}t(t,r){const i=this.q();return this.f.set(i,new Xu(t,r)),i}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,r,i,s){const n=this.t(new k$(this.h,i),t),o=s&&s.label||qt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(r,t),o),this.p(n)}$provideDocumentSymbols(t,r,i){return this.s(t,k$,s=>s.provideDocumentSymbols(x.revive(r),i),void 0,i)}registerCodeLensProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new Xu(new fg(this.h,this.j.converter,i,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(r,t),n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Te.from(o,a)}return o}$provideCodeLenses(t,r,i){return this.s(t,fg,s=>s.provideCodeLenses(x.revive(r),i),void 0,i,r.scheme==="output")}$resolveCodeLens(t,r,i){return this.s(t,fg,s=>s.resolveCodeLens(r,i),void 0,void 0,!0)}$releaseCodeLenses(t,r){this.s(t,fg,i=>Promise.resolve(i.releaseCodeLenses(r)),void 0,void 0,!0)}registerDefinitionProvider(t,r,i){const s=this.t(new S$(this.h,i),t);return this.e.$registerDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideDefinition(t,r,i,s){return this.s(t,S$,n=>n.provideDefinition(x.revive(r),i,s),[],s)}registerDeclarationProvider(t,r,i){const s=this.t(new $$(this.h,i),t);return this.e.$registerDeclarationSupport(s,this.o(r,t)),this.p(s)}$provideDeclaration(t,r,i,s){return this.s(t,$$,n=>n.provideDeclaration(x.revive(r),i,s),[],s)}registerImplementationProvider(t,r,i){const s=this.t(new C$(this.h,i),t);return this.e.$registerImplementationSupport(s,this.o(r,t)),this.p(s)}$provideImplementation(t,r,i,s){return this.s(t,C$,n=>n.provideImplementation(x.revive(r),i,s),[],s)}registerTypeDefinitionProvider(t,r,i){const s=this.t(new I$(this.h,i),t);return this.e.$registerTypeDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideTypeDefinition(t,r,i,s){return this.s(t,I$,n=>n.provideTypeDefinition(x.revive(r),i,s),[],s)}registerHoverProvider(t,r,i,s){const n=this.t(new Ib(this.h,i),t);return this.e.$registerHoverProvider(n,this.o(r,t)),this.p(n)}$provideHover(t,r,i,s,n){return this.s(t,Ib,o=>o.provideHover(x.revive(r),i,s,n),void 0,n)}$releaseHover(t,r){this.s(t,Ib,i=>Promise.resolve(i.releaseHover(r)),void 0,void 0)}registerEvaluatableExpressionProvider(t,r,i,s){const n=this.t(new P$(this.h,i),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(r,t)),this.p(n)}$provideEvaluatableExpression(t,r,i,s){return this.s(t,P$,n=>n.provideEvaluatableExpression(x.revive(r),i,s),void 0,s)}registerInlineValuesProvider(t,r,i,s){const n=typeof i.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new D$(this.h,i),t);this.e.$registerInlineValuesProvider(o,this.o(r,t),n);let a=this.p(o);if(n!==void 0){const c=i.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Te.from(a,c)}return a}$provideInlineValues(t,r,i,s,n){return this.s(t,D$,o=>o.provideInlineValues(x.revive(r),i,s,n),void 0,n)}registerDocumentHighlightProvider(t,r,i){const s=this.t(new A$(this.h,i),t);return this.e.$registerDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,r,i){const s=this.t(new T$(this.h,i,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}$provideDocumentHighlights(t,r,i,s){return this.s(t,A$,n=>n.provideDocumentHighlights(x.revive(r),i,s),void 0,s)}$provideMultiDocumentHighlights(t,r,i,s,n){return this.s(t,T$,o=>o.provideMultiDocumentHighlights(x.revive(r),i,s.map(a=>x.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,r,i){const s=this.t(new R$(this.h,i),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(r,t)),this.p(s)}$provideLinkedEditingRanges(t,r,i,s){return this.s(t,R$,async n=>{const o=await n.provideLinkedEditingRanges(x.revive(r),i,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?qt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,r,i){const s=this.t(new L$(this.h,i),t);return this.e.$registerReferenceSupport(s,this.o(r,t)),this.p(s)}$provideReferences(t,r,i,s,n){return this.s(t,L$,o=>o.provideReferences(x.revive(r),i,s,n),void 0,n)}registerCodeActionProvider(t,r,i,s){const n=new he,o=this.t(new gg(this.h,this.j.converter,this.k,i,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(r,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},qt.u(t),qt.w(t),!!i.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,r,i,s,n){return this.s(t,gg,o=>o.provideCodeActions(x.revive(r),i,s,n),void 0,n)}$resolveCodeAction(t,r,i){return this.s(t,gg,s=>s.resolveCodeAction(r,i),{},void 0)}$releaseCodeActions(t,r){this.s(t,gg,i=>Promise.resolve(i.releaseCodeActions(r)),void 0,void 0)}registerDocumentFormattingEditProvider(t,r,i){const s=this.t(new N$(this.h,i),t);return this.e.$registerDocumentFormattingSupport(s,this.o(r,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,r,i,s){return this.s(t,N$,n=>n.provideDocumentFormattingEdits(x.revive(r),i,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,r,i){const s=typeof i.provideDocumentRangesFormattingEdits=="function",n=this.t(new Pb(this.h,i),t);return this.e.$registerRangeFormattingSupport(n,this.o(r,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,r,i,s,n){return this.s(t,Pb,o=>o.provideDocumentRangeFormattingEdits(x.revive(r),i,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,r,i,s,n){return this.s(t,Pb,o=>o.provideDocumentRangesFormattingEdits(x.revive(r),i,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,r,i,s){const n=this.t(new F$(this.h,i),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(r,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,r,i,s,n,o){return this.s(t,F$,a=>a.provideOnTypeFormattingEdits(x.revive(r),i,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,r){const i=this.t(new mg(r,this.l),t);return this.e.$registerNavigateTypeSupport(i,typeof r.resolveWorkspaceSymbol=="function"),this.p(i)}$provideWorkspaceSymbols(t,r,i){return this.s(t,mg,s=>s.provideWorkspaceSymbols(r,i),{symbols:[]},i)}$resolveWorkspaceSymbol(t,r,i){return this.s(t,mg,s=>s.resolveWorkspaceSymbol(r,i),void 0,void 0)}$releaseWorkspaceSymbols(t,r){this.s(t,mg,i=>i.releaseWorkspaceSymbols(r),void 0,void 0)}registerRenameProvider(t,r,i){const s=this.t(new vg(this.h,i,this.l),t);return this.e.$registerRenameSupport(s,this.o(r,t),vg.supportsResolving(i)),this.p(s)}$provideRenameEdits(t,r,i,s,n){return this.s(t,vg,o=>o.provideRenameEdits(x.revive(r),i,s,n),void 0,n)}$resolveRenameLocation(t,r,i,s){return this.s(t,vg,n=>n.resolveRenameLocation(x.revive(r),i,s),void 0,s)}registerNewSymbolNamesProvider(t,r,i){const s=this.t(new Db(this.h,i,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(r,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,Db,r=>r.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,r,i,s,n){return this.s(t,Db,o=>o.provideNewSymbolNames(x.revive(r),i,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,r,i,s){const n=this.t(new Tb(this.h,i),t),o=typeof i.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(r,t),s,o);let a=this.p(n);if(o){const c=i.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Te.from(a,c)}return a}$provideDocumentSemanticTokens(t,r,i,s){return this.s(t,Tb,n=>n.provideDocumentSemanticTokens(x.revive(r),i,s),null,s)}$releaseDocumentSemanticTokens(t,r){this.s(t,Tb,i=>i.releaseDocumentSemanticColoring(r),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,r,i,s){const n=this.t(new O$(this.h,i),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(r,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,r,i,s){return this.s(t,O$,n=>n.provideDocumentRangeSemanticTokens(x.revive(r),i,s),null,s)}registerCompletionItemProvider(t,r,i,s){const n=this.t(new Ju(this.h,this.j.converter,i,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(r,t),s,Ju.supportsResolving(i),t.identifier),this.p(n)}$provideCompletionItems(t,r,i,s,n){return this.s(t,Ju,o=>o.provideCompletionItems(x.revive(r),i,s,n),void 0,n)}$resolveCompletionItem(t,r,i){return this.s(t,Ju,s=>s.resolveCompletionItem(r,i),void 0,i)}$releaseCompletionItems(t,r){this.s(t,Ju,i=>i.releaseCompletionItems(r),void 0,void 0)}registerInlineCompletionsProvider(t,r,i,s){const n=new hB(t,this.h,i,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(r,t),n.supportsHandleEvents,Je.toKey(t.identifier.value),s?.yieldTo?.map(a=>Je.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,r,i,s,n){return this.s(t,vc,o=>o.provideInlineCompletions(x.revive(r),i,s,n),void 0,n)}$provideInlineEditsForRange(t,r,i,s,n){return this.s(t,vc,o=>o.provideInlineEditsForRange(x.revive(r),i,s,n),void 0,n)}$handleInlineCompletionDidShow(t,r,i,s){this.s(t,vc,async n=>{n.handleDidShowCompletionItem(r,i,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,r,i,s,n){this.s(t,vc,async o=>{o.handlePartialAccept(r,i,s,n)},void 0,void 0)}$freeInlineCompletionsList(t,r){this.s(t,vc,async i=>{i.disposeCompletions(r)},void 0,void 0)}registerInlineEditProvider(t,r,i){const s=new Rb(t,this.h,i,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(r,t),t.identifier),this.p(n)}$provideInlineEdit(t,r,i,s){return this.s(t,Rb,n=>n.provideInlineEdits(x.revive(r),i,s),void 0,s)}$freeInlineEdit(t,r){this.s(t,Rb,async i=>{i.disposeEdit(r)},void 0,void 0)}registerSignatureHelpProvider(t,r,i,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new Lb(this.h,i),t);return this.e.$registerSignatureHelpProvider(o,this.o(r,t),n),this.p(o)}$provideSignatureHelp(t,r,i,s,n){return this.s(t,Lb,o=>o.provideSignatureHelp(x.revive(r),i,s,n),void 0,n)}$releaseSignatureHelp(t,r){this.s(t,Lb,i=>i.releaseSignatureHelp(r),void 0,void 0)}registerInlayHintsProvider(t,r,i){const s=typeof i.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new wg(this.h,this.j.converter,i,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(r,t),typeof i.resolveInlayHint=="function",s,qt.u(t));let o=this.p(n);if(s!==void 0){const a=i.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Te.from(o,a)}return o}$provideInlayHints(t,r,i,s){return this.s(t,wg,n=>n.provideInlayHints(x.revive(r),i,s),void 0,s)}$resolveInlayHint(t,r,i){return this.s(t,wg,s=>s.resolveInlayHint(r,i),void 0,i)}$releaseInlayHints(t,r){this.s(t,wg,i=>i.releaseHints(r),void 0,void 0)}registerDocumentLinkProvider(t,r,i){const s=this.t(new bg(this.h,i),t);return this.e.$registerDocumentLinkProvider(s,this.o(r,t),typeof i.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,r,i){return this.s(t,bg,s=>s.provideLinks(x.revive(r),i),void 0,i,r.scheme==="output")}$resolveDocumentLink(t,r,i){return this.s(t,bg,s=>s.resolveLink(r,i),void 0,void 0,!0)}$releaseDocumentLinks(t,r){this.s(t,bg,i=>i.releaseLinks(r),void 0,void 0,!0)}registerColorProvider(t,r,i){const s=this.t(new Nb(this.h,i),t);return this.e.$registerDocumentColorProvider(s,this.o(r,t)),this.p(s)}$provideDocumentColors(t,r,i){return this.s(t,Nb,s=>s.provideColors(x.revive(r),i),[],i)}$provideColorPresentations(t,r,i,s){return this.s(t,Nb,n=>n.provideColorPresentations(x.revive(r),i,s),void 0,s)}registerFoldingRangeProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new Xu(new U$(this.h,i),t)),this.e.$registerFoldingRangeProvider(s,this.o(r,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Te.from(o,a)}return o}$provideFoldingRanges(t,r,i,s){return this.s(t,U$,n=>n.provideFoldingRanges(x.revive(r),i,s),void 0,s)}registerSelectionRangeProvider(t,r,i){const s=this.t(new j$(this.h,i,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(r,t)),this.p(s)}$provideSelectionRanges(t,r,i,s){return this.s(t,j$,n=>n.provideSelectionRanges(x.revive(r),i,s),[],s)}registerCallHierarchyProvider(t,r,i){const s=this.t(new Qu(this.h,i),t);return this.e.$registerCallHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareCallHierarchy(t,r,i,s){return this.s(t,Qu,n=>Promise.resolve(n.prepareSession(x.revive(r),i,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,r,i,s){return this.s(t,Qu,n=>n.provideCallsTo(r,i,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,r,i,s){return this.s(t,Qu,n=>n.provideCallsFrom(r,i,s),void 0,s)}$releaseCallHierarchy(t,r){this.s(t,Qu,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerTypeHierarchyProvider(t,r,i){const s=this.t(new Yu(this.h,i),t);return this.e.$registerTypeHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareTypeHierarchy(t,r,i,s){return this.s(t,Yu,n=>Promise.resolve(n.prepareSession(x.revive(r),i,s)),void 0,s)}$provideTypeHierarchySupertypes(t,r,i,s){return this.s(t,Yu,n=>n.provideSupertypes(r,i,s),void 0,s)}$provideTypeHierarchySubtypes(t,r,i,s){return this.s(t,Yu,n=>n.provideSubtypes(r,i,s),void 0,s)}$releaseTypeHierarchy(t,r){this.s(t,Yu,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerDocumentOnDropEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Xu(new yg(this.e,this.h,i,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(r,t),Vt(t,"documentPaste")&&s?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,r,i,s,n,o){return this.s(t,yg,a=>Promise.resolve(a.provideDocumentOnDropEdits(r,x.revive(i),s,n,o)),void 0,void 0)}$resolveDropEdit(t,r,i){return this.s(t,yg,s=>s.resolveDropEdit(r,i),{},void 0)}$releaseDocumentOnDropEdits(t,r){this.s(t,yg,i=>Promise.resolve(i.releaseDropEdits(r)),void 0,void 0)}registerMappedEditsProvider(t,r,i){const s=this.t(new H$(this.h,i),t);return this.e.$registerMappedEditsProvider(s,this.o(r,t),t.displayName??t.name),this.p(s)}$provideMappedEdits(t,r,i,s,n){return this.s(t,H$,o=>Promise.resolve(o.provideMappedEdits(r,i,s,n)),null,n)}registerDocumentPasteEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Xu(new Gu(this.e,this.h,i,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(r,t),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,r,i,s,n){return this.s(t,Gu,o=>o.prepareDocumentPaste(x.revive(r),i,s,n),void 0,n)}$providePasteEdits(t,r,i,s,n,o,a){return this.s(t,Gu,c=>c.providePasteEdits(r,x.revive(i),s,n,o,a),void 0,a)}$resolvePasteEdit(t,r,i){return this.s(t,Gu,s=>s.resolvePasteEdit(r,i),{},void 0)}$releasePasteEdits(t,r){this.s(t,Gu,i=>Promise.resolve(i.releasePasteEdits(r)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:qt.y(t.decreaseIndentPattern),increaseIndentPattern:qt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?qt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?qt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:qt.y(t.beforeText),afterText:t.afterText?qt.y(t.afterText):void 0,previousLineText:t.previousLineText?qt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(qt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(r=>Da.toString(r)):void 0}}static E(t){return t.map(qt.D)}setLanguageConfiguration(t,r,i){const{wordPattern:s}=i;if(s&&U4(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(r,s):this.h.setWordDefinitionFor(r,void 0),i.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),i.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?qt.y(i.wordPattern):void 0,indentationRules:i.indentationRules?qt.z(i.indentationRules):void 0,onEnterRules:i.onEnterRules?qt.C(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?qt.E(i.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,r,o),this.p(n)}$setWordDefinitions(t){for(const r of t)this.h.setWordDefinitionFor(r.languageId,new RegExp(r.regexSource,r.regexFlags))}};function fB(e){return typeof e=="object"&&typeof e.sessionId=="string"}var oY=J("ILanguageModelToolsService"),pB=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(Q.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const r of t)this.d.set(r.id,Kt(r))})}async $countTokensForInvocation(e,t,r){const i=this.c.get(e);if(!i)throw new Error(`Tool invocation call ${e} not found`);return await i(t,r)}async invokeTool(e,t,r){const i=Ft();if(t.tokenizationOptions&&this.c.set(i,t.tokenizationOptions.countTokens),t.toolInvocationToken&&!fB(t.toolInvocationToken))throw new Error("Invalid tool invocation token");try{const s=await this.b.$invokeTool({toolId:e,callId:i,parameters:t.input,tokenBudget:t.tokenizationOptions?.tokenBudget,context:t.toolInvocationToken},r);return Sp.to(s)}finally{this.c.delete(i)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}get tools(){return Array.from(this.d.values()).map(e=>M0.to(e))}async $invokeTool(e,t){const r=this.a.get(e.toolId);if(!r)throw new Error(`Unknown tool ${e.toolId}`);const i={input:e.parameters,toolInvocationToken:e.context};e.tokenBudget!==void 0&&(i.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=Xe.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await y5(Promise.resolve(r.tool.invoke(i,t)),t);if(!s)throw new Xt;return Sp.from(s)}async $prepareToolInvocation(e,t,r){const i=this.a.get(e);if(!i)throw new Error(`Unknown tool ${e}`);if(!i.tool.prepareInvocation)return;const s={input:t},n=await i.tool.prepareInvocation(s,r);if(n)return{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:Ce.from(n.confirmationMessages.message)}:void 0,invocationMessage:typeof n.invocationMessage=="string"?n.invocationMessage:n.invocationMessage?Ce.from(n.invocationMessage):void 0}}registerTool(e,t,r){return this.a.set(t,{extension:e,tool:r}),this.b.$registerTool(t),te(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},gB=class{constructor(e,t,r,i){this.c=t,this.d=r,this.e=i,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(Q.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const r=this.c.getDocumentData(e);if(!r)throw new Error(`document '${e.toString()}' NOT found`);return r.document}async tokenAtPosition(e,t){const r=e.version,i=Be.from(t),s=await this.a.$tokensAtPosition(e.uri,i),n={type:vn.Other,range:e.getWordRangeAtPosition(t)??new Ee(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:O.to(s.range),type:o0.to(s.type)};return!o.range.contains(t)||r!==e.version?n:o}createLanguageStatusItem(e,t,r){const i=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:r,id:t,name:e.displayName??e.name,severity:ka.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new he,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=k5(()=>{l.clear(),this.a.$setLanguageStatus(i,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:Va.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===ka.Error?Pt.Error:a.severity===ka.Warning?Pt.Warning:Pt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(i),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(d){a.name=d,u()},get selector(){return a.selector},set selector(d){a.selector=d,u()},get text(){return a.text},set text(d){a.text=d,u()},set text2(d){L(e,"languageStatusText"),a.text=d,u()},get text2(){return L(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(d){a.detail=d,u()},get severity(){return a.severity},set severity(d){a.severity=d,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(d){a.accessibilityInformation=d,u()},get command(){return a.command},set command(d){a.command=d,u()},get busy(){return a.busy},set busy(d){a.busy=d,u()}};return u(),h}};function mB(e){return e&&e.title}var Fb=class{constructor(t,r){this.b=r,this.a=t.getProxy(Q.MainThreadMessageService)}showMessage(t,r,i,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||mB(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&L(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:d,isCloseAffordance:f}=h;c.push({title:d,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(r,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};Fb=__decorate([__param(1,$e)],Fb);var Ob=class{constructor(e,t,r,i){this.start=e,this.deletedCount=t,this.deletedItems=r,this.items=i}asApiEvent(){return{range:new $s(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},Mb=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,r){this.notebook=e,this.h=t,this.j=r,this.handle=r.handle,this.uri=x.revive(r.uri),this.cellKind=r.cellKind,this.a=r.outputs.map(yn.to),this.e=r.internalMetadata??{},this.b=Object.freeze(r.metadata??{}),this.d=Object.freeze(Ka.to(r.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const r={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:fu.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(i){e.g=i},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(r)}return this.f}setOutputs(e){this.a=e.map(yn.to)}setOutputItems(e,t,r){const i=r.map(ec.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...i),s.items.length>1&&s.items.every(n=>G7(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=iF(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(Ka.to(e))}setMime(e){}},vB=class fI{static{this.a=0}constructor(t,r,i,s,n){this.k=t,this.l=r,this.m=i,this.uri=s,this.handle=fI.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,r={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===V.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(i){return i=t.n(i),t.b[i].apiCell},getCells(i){return(i?t.p(i):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(r)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,r,i){this.g=t.versionId,this.h=r,this.acceptDocumentPropertiesChanged({metadata:i});const s={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===bi.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===bi.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===bi.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===bi.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===bi.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===bi.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===bi.ChangeCellMime?this.w(a.index,a.mime):a.kind===bi.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===bi.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let r=t.start|0,i=t.end|0;return r<0&&(r=0),i>this.b.length&&(i=this.b.length),t.with({start:r,end:i})}p(t){t=this.o(t);const r=[];for(let i=t.start;i<t.end;i++)r.push(this.b[i]);return r}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,r,i){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(d=>{const f=new Mb(this,this.l,d);return r||n.push(Mb.asModelAddData(d)),f}),u=new Ob(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const d of h)o.push(d.uri),u.deletedItems.push(d.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),i)for(const a of s)i.push(a.asApiEvent())}s(t,r,i,s){const n=this.b.splice(t,r);this.b.splice(i,0,...n);const o=[new Ob(t,r,n.map(a=>a.apiCell),[]),new Ob(i,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,r){this.b[t].setOutputs(r)}u(t,r,i,s){this.b[t].setOutputItems(r,i,s)}v(t,r){const i=this.b[t];i.apiCell.document.languageId!==r&&this.m.$acceptModelLanguageChanged(i.uri,r)}w(t,r){const i=this.b[t];i.apiCell.mime=r}x(t,r){this.b[t].setMetadata(r)}y(t,r){this.b[t].setInternalMetadata(r)}getCellFromApiCell(t){return this.b.find(r=>r.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(r=>r.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},Ub=class pI{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,r,i,s,n,o,a){this.id=t,this.c=r,this.notebookData=i,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(r){this.selections=[r]},get selections(){return t.e},set selections(r){if(!Array.isArray(r)||!r.every($s.isNotebookRange))throw Se("selections");t.e=r,t.h(r)},get visibleRanges(){return t.d},revealRange(r,i){t.c.$tryRevealRange(t.id,Ji.from(r),i??If.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},pI.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(Ji.from))}_acceptViewColumn(t){this.f=t}},jb=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ie)return Hb(this.right);let e=this;for(;e.parent!==ie&&e.parent.left!==e;)e=e.parent;return e.parent===ie?ie:e.parent}prev(){if(this.left!==ie)return _$(this.left);let e=this;for(;e.parent!==ie&&e.parent.right!==e;)e=e.parent;return e.parent===ie?ie:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},B$;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(B$||(B$={}));var ie=new jb(null,0);ie.parent=ie,ie.left=ie,ie.right=ie,ie.color=0;function Hb(e){for(;e.left!==ie;)e=e.left;return e}function _$(e){for(;e.right!==ie;)e=e.right;return e}function Bb(e){return e===ie?0:e.size_left+e.piece.length+Bb(e.right)}function _b(e){return e===ie?0:e.lf_left+e.piece.lineFeedCnt+_b(e.right)}function zb(){ie.parent=ie}function Zu(e,t){const r=t.right;r.size_left+=t.size_left+(t.piece?t.piece.length:0),r.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=r.left,r.left!==ie&&(r.left.parent=t),r.parent=t.parent,t.parent===ie?e.root=r:t.parent.left===t?t.parent.left=r:t.parent.right=r,r.left=t,t.parent=r}function Ku(e,t){const r=t.left;t.left=r.right,r.right!==ie&&(r.right.parent=t),r.parent=t.parent,t.size_left-=r.size_left+(r.piece?r.piece.length:0),t.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),t.parent===ie?e.root=r:t===t.parent.right?t.parent.right=r:t.parent.left=r,r.right=t,t.parent=r}function xg(e,t){let r,i;if(t.left===ie?(i=t,r=i.right):t.right===ie?(i=t,r=i.left):(i=Hb(t.right),r=i.right),i===e.root){e.root=r,r.color=0,t.detach(),zb(),e.root.parent=ie;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===t?(r.parent=i.parent,eh(e,r)):(i.parent===t?r.parent=i:r.parent=i.parent,eh(e,r),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==ie&&(i.left.parent=i),i.right!==ie&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,eh(e,i)),t.detach(),r.parent.left===r){const o=Bb(r),a=_b(r);if(o!==r.parent.size_left||a!==r.parent.lf_left){const c=o-r.parent.size_left,l=a-r.parent.lf_left;r.parent.size_left=o,r.parent.lf_left=a,Fs(e,r.parent,c,l)}}if(eh(e,r.parent),s){zb();return}let n;for(;r!==e.root&&r.color===0;)r===r.parent.left?(n=r.parent.right,n.color===1&&(n.color=0,r.parent.color=1,Zu(e,r.parent),n=r.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.right.color===0&&(n.left.color=0,n.color=1,Ku(e,n),n=r.parent.right),n.color=r.parent.color,r.parent.color=0,n.right.color=0,Zu(e,r.parent),r=e.root)):(n=r.parent.left,n.color===1&&(n.color=0,r.parent.color=1,Ku(e,r.parent),n=r.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.left.color===0&&(n.right.color=0,n.color=1,Zu(e,n),n=r.parent.left),n.color=r.parent.color,r.parent.color=0,n.left.color=0,Ku(e,r.parent),r=e.root));r.color=0,zb()}function z$(e,t){for(eh(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const r=t.parent.parent.right;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Zu(e,t)),t.parent.color=0,t.parent.parent.color=1,Ku(e,t.parent.parent))}else{const r=t.parent.parent.left;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Ku(e,t)),t.parent.color=0,t.parent.parent.color=1,Zu(e,t.parent.parent))}e.root.color=0}function Fs(e,t,r,i){for(;t!==e.root&&t!==ie;)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}function eh(e,t){let r=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,r=Bb(t.left)-t.size_left,i=_b(t.left)-t.lf_left,t.size_left+=r,t.lf_left+=i;t!==e.root&&(r!==0||i!==0);)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}}var Os=65535;function W$(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var wB=class{constructor(e,t,r,i,s){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=s}};function Ms(e,t=!0){const r=[0];let i=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:o===10&&(r[i++]=s+1)}return t?W$(r):r}function bB(e,t){e.length=0,e[0]=0;let r=1,i=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[r++]=c+2,c++):(i++,e[r++]=c+1):u===10?(s++,e[r++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new wB(W$(e),i,s,n,o);return e.length=0,a}var Cr=class{constructor(e,t,r,i,s){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=s}},To=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},yB=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ie&&e.iterate(e.root,r=>(r!==ie&&this.a.push(r.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},xB=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const r=this.b;for(let i=0;i<r.length;i++){const s=r[i];if(s.node.parent===null||s.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){const i=[];for(const s of r)s!==null&&i.push(s);this.b=i}}},EB=class{constructor(e,t,r){this.create(e,t,r)}create(e,t,r){this.a=[new To("",[0])],this.g={line:0,column:0},this.root=ie,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=r;let i=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Ms(e[s].buffer));const o=new Cr(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),i=this.S(i,o)}this.h=new xB(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=Os,r=t-Math.floor(t/3),i=r*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=r||n+l<i)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new To(u,Ms(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new To(a,Ms(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new yB(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===ie)return!0;const s=this.R(i),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let r=0,i=this.root;for(;i!==ie;)if(i.left!==ie&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;const s=this.B(i,e-i.lf_left-2);return r+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,r=0;const i=e;for(;t!==ie;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(r+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(r+1,1),o=i-n;return new Vr(r+1,o+1)}return new Vr(r+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===ie){const s=this.getOffsetAt(r+1,1),n=i-e-s;return new Vr(r+1,n+1)}else t=t.right;return new Vr(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const r=this.H(e.startLineNumber,e.startColumn),i=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(r,i);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let r=e.node;const i=this.a[r.piece.bufferIndex].buffer,s=this.u(r.piece.bufferIndex,r.piece.start);let n=i.substring(s+e.remainder,s+r.piece.length);for(r=r.next();r!==ie;){const o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(r===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,r.piece.length);r=r.next()}return n}getLinesContent(){const e=[];let t=0,r="",i=!1;return this.iterate(this.root,s=>{if(s===ie)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(i&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=r,r="",i=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(i=!0,r+=a.substr(h,o-1)):r+=a.substr(h,o),!0;r+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;for(let d=l+1;d<u;d++)r=this.f?a.substring(c[d],c[d+1]-this.e):a.substring(c[d],c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(i=!0,n.end.column===0?t--:r=a.substr(c[u],n.end.column-1)):r=a.substr(c[u],n.end.column),!0}),i&&(e[t++]=r,r=""),e[t++]=r,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const r=this.a[t.piece.bufferIndex],i=this.u(t.piece.bufferIndex,t.piece.start);return r.buffer.charCodeAt(i)}else{const t=this.a[e.node.piece.bufferIndex],i=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const r=this.H(e,t+1);return this.l(r)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r||r===ie)return"";const i=this.a[r.piece.bufferIndex],s=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.substring(s,s+r.piece.length)}else{const r=this.a[t.node.piece.bufferIndex],i=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=i+t.remainder,n=i+t.node.piece.length;return r.buffer.substring(s,n)}}findMatchesInNode(e,t,r,i,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],d=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),g=this.u(e.piece.bufferIndex,n);let v;const y={line:0,column:0};let E,k;t._wordSeparators?(E=h.buffer.substring(f,g),k=I=>I+f,t.reset(0)):(E=h.buffer,k=I=>I,t.reset(f));do if(v=t.next(E),v){if(k(v.index)>=g)return l;this.s(e,k(v.index)-d,y);const I=this.t(e.piece.bufferIndex,s,y),D=y.line===s.line?y.column-s.column+i:y.column+1,T=D+v[0].length;if(u[l++]=y8(new Ke(r+I,D,r+I,T),v,a),k(v.index)+v[0].length>=g||l>=c)return l}while(v);return l}findMatchesLineByLine(e,t,r,i){const s=[];let n=0;const o=new hM(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,r,i,n,s),s;let h=e.startLineNumber,d=a.node;for(;d!==c.node;){const g=this.t(d.piece.bufferIndex,l,d.piece.end);if(g>=1){const y=this.a[d.piece.bufferIndex].lineStarts,E=this.u(d.piece.bufferIndex,d.piece.start),k=y[l.line+g],I=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(d,o,h,I,l,this.s(d,k-E),t,r,i,n,s),n>=i)return s;h+=g}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const y=this.getLineContent(h).substring(v,e.endColumn-1);return n=this.n(t,o,y,e.endLineNumber,v,n,s,r,i),s}if(n=this.n(t,o,this.getLineContent(h).substr(v),h,v,n,s,r,i),n>=i)return s;h++,a=this.H(h,1),d=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const g=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(g,e.endColumn-1);return n=this.n(t,o,v,e.endLineNumber,g,n,s,r,i),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,r,i,n,s),s}n(e,t,r,i,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,d=h.length,f=r.length;let g=-d;for(;(g=r.indexOf(h,g+d))!==-1;)if((!l||x8(l,r,f,g,d))&&(o[n++]=new bw(new Ke(i,g+1+s,i,g+1+d+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(r),u&&(o[n++]=y8(new Ke(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,r=!1){if(this.f=this.f&&r,this.j.lineNumber=0,this.j.value="",this.root!==ie){const{node:i,remainder:s,nodeStartOffset:n}=this.G(e),o=i.piece,a=o.bufferIndex,c=this.s(i,s);if(i.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<Os){this.F(i,t),this.y();return}if(n===e)this.o(t,i),this.h.validate(e);else if(n+i.piece.length>e){const l=[];let u=new Cr(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(i,s)===10){const g={line:u.start.line+1,column:0};u=new Cr(u.bufferIndex,g,u.end,this.t(u.bufferIndex,g,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(i,s-1)===13){const g=this.s(i,s-1);this.C(i,g),t="\r"+t,i.piece.length===0&&l.push(i)}else this.C(i,c);else this.C(i,c);const h=this.w(t);u.length>0&&this.S(i,u);let d=i;for(let f=0;f<h.length;f++)d=this.S(d,h[f]);this.v(l)}else this.q(t,i)}else{const i=this.w(t);let s=this.T(null,i[0]);for(let n=1;n<i.length;n++)s=this.S(s,i[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ie)return;const r=this.G(e),i=this.G(e+t),s=r.node,n=i.node;if(s===n){const h=this.s(s,r.remainder),d=this.s(s,i.remainder);if(r.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();xg(this,s),this.N(f),this.y();return}this.D(s,d),this.h.validate(e),this.N(s),this.y();return}if(r.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,d),this.y();return}const o=[],a=this.s(s,r.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,i.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ie&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const r=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Cr(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Fs(this,t,-1,-1),t.piece.length===0&&r.push(t)}const i=this.w(e);let s=this.T(t,i[i.length-1]);for(let n=i.length-2;n>=0;n--)s=this.T(s,i[n]);this.N(s),this.v(r)}q(e,t){this.Q(e,t)&&(e+=`
`);const r=this.w(e),i=this.S(t,r[0]);let s=i;for(let n=1;n<r.length;n++)s=this.S(s,r[n]);this.N(i)}s(e,t,r){const i=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[i.start.line]+i.start.column+t;let c=i.start.line,l=i.end.line,u=0,h=0,d=0;for(;c<=l&&(u=c+(l-c)/2|0,d=n[u],u!==l);)if(h=n[u+1],a<d)l=u-1;else if(a>=h)c=u+1;else break;return r?(r.line=u,r.column=a-d,null):{line:u,column:a-d}}t(e,t,r){if(r.column===0)return r.line-t.line;const i=this.a[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;const s=i[r.line+1],n=i[r.line]+r.column;if(s>n+1)return r.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?r.line-t.line+1:r.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)xg(this,e[t])}w(e){if(e.length>Os){const l=[];for(;e.length>Os;){const h=e.charCodeAt(Os-1);let d;h===13||h>=55296&&h<=56319?(d=e.substring(0,Os-1),e=e.substring(Os-1)):(d=e.substring(0,Os),e=e.substring(Os));const f=Ms(d);l.push(new Cr(this.a.length,{line:0,column:0},{line:f.length-1,column:d.length-f[f.length-1]},f.length-1,d.length)),this.a.push(new To(d,f))}const u=Ms(e);return l.push(new Cr(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new To(e,u)),l}let t=this.a[0].buffer.length;const r=Ms(e,!1);let i=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},i=this.g;for(let l=0;l<r.length;l++)r[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<r.length;l++)r[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Cr(0,i,a,this.t(0,i,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let r=this.root,i="";const s=this.h.get2(e);if(s){r=s.node;const n=this.B(r,e-s.nodeStartLineNumber-1),o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(s.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=o.substring(a+n,a+r.piece.length);else{const c=this.B(r,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;r!==ie;)if(r.left!==ie&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const a=this.B(r,e-r.lf_left-2),c=this.B(r,e-r.lf_left-1),l=this.a[r.piece.bufferIndex].buffer,u=this.u(r.piece.bufferIndex,r.piece.start);return n+=r.size_left,this.h.set({node:r,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-r.lf_left)}),l.substring(u+a,u+c-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const a=this.B(r,e-r.lf_left-2),c=this.a[r.piece.bufferIndex].buffer,l=this.u(r.piece.bufferIndex,r.piece.start);i=c.substring(l+a,l+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==ie;){const n=this.a[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const o=this.B(r,0),a=this.u(r.piece.bufferIndex,r.piece.start);return i+=n.substring(a,a+o-t),i}else{const o=this.u(r.piece.bufferIndex,r.piece.start);i+=n.substr(o,r.piece.length)}r=r.next()}return i}y(){let e=this.root,t=1,r=0;for(;e!==ie;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=r,this.h.validate(this.c)}A(e,t){const r=e.piece,i=this.s(e,t),s=i.line-r.start.line;if(this.u(r.bufferIndex,r.end)-this.u(r.bufferIndex,r.start)===t){const n=this.t(e.piece.bufferIndex,r.start,i);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:i.column}}B(e,t){if(t<0)return 0;const r=e.piece,i=this.a[r.bufferIndex].lineStarts,s=r.start.line+t+1;return s>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[s]-i[r.start.line]-r.start.column}C(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.end),n=t,o=this.u(r.bufferIndex,n),a=this.t(r.bufferIndex,r.start,n),c=a-i,l=o-s,u=r.length+l;e.piece=new Cr(r.bufferIndex,r.start,n,a,u),Fs(this,e,l,c)}D(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.start),n=t,o=this.t(r.bufferIndex,n,r.end),a=this.u(r.bufferIndex,n),c=o-i,l=s-a,u=r.length+l;e.piece=new Cr(r.bufferIndex,n,r.end,o,u),Fs(this,e,l,c)}E(e,t,r){const i=e.piece,s=i.start,n=i.end,o=i.length,a=i.lineFeedCnt,c=t,l=this.t(i.bufferIndex,i.start,c),u=this.u(i.bufferIndex,t)-this.u(i.bufferIndex,s);e.piece=new Cr(i.bufferIndex,i.start,c,l,u),Fs(this,e,u-o,l-a);const h=new Cr(i.bufferIndex,r,n,this.t(i.bufferIndex,r,n),this.u(i.bufferIndex,n)-this.u(i.bufferIndex,r)),d=this.S(e,h);this.N(d)}F(e,t){this.Q(t,e)&&(t+=`
`);const r=this.K()&&this.L(t)&&this.M(e),i=this.a[0].buffer.length;this.a[0].buffer+=t;const s=Ms(t,!1);for(let d=0;d<s.length;d++)s[d]+=i;if(r){const d=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:i-d}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Cr(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Fs(this,e,t.length,h)}G(e){let t=this.root;const r=this.h.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};let i=0;for(;t!==ie;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this.h.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let r=this.root,i=0;for(;r!==ie;)if(r.left!==ie&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const s=this.B(r,e-r.lf_left-2),n=this.B(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(s+t-1,n),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const s=this.B(r,e-r.lf_left-2);if(s+t-1<=r.piece.length)return{node:r,remainder:s+t-1,nodeStartOffset:i};t-=r.piece.length-s;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==ie;){if(r.piece.lineFeedCnt>0){const s=this.B(r,0),n=this.J(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(r.piece.length>=t-1){const s=this.J(r);return{node:r,remainder:t-1,nodeStartOffset:s}}else t-=r.piece.length;r=r.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const r=this.a[e.piece.bufferIndex],i=this.u(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ie||e.piece.lineFeedCnt===0)return!1;const t=e.piece,r=this.a[t.bufferIndex].lineStarts,i=t.start.line,s=r[i]+t.start.column;return i===r.length-1||r[i+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ie||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const r=[],i=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Cr(e.piece.bufferIndex,e.piece.start,s,o,n),Fs(this,e,-1,-1),e.piece.length===0&&r.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Cr(t.piece.bufferIndex,a,t.piece.end,l,c),Fs(this,t,-1,-1),t.piece.length===0&&r.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<r.length;h++)xg(this,r[h])}Q(e,t){if(this.K()&&this.M(e)){const r=t.next();if(this.L(r)){if(e+=`
`,r.piece.length===1)xg(this,r);else{const i=r.piece,s={line:i.start.line+1,column:0},n=i.length-1,o=this.t(i.bufferIndex,s,i.end);r.piece=new Cr(i.bufferIndex,s,i.end,o,n),Fs(this,r,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ie)return t(ie);const r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ie)return"";const t=this.a[e.piece.bufferIndex],r=e.piece,i=this.u(r.bufferIndex,r.start),s=this.u(r.bufferIndex,r.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this.a[e.bufferIndex],r=this.u(e.bufferIndex,e.start),i=this.u(e.bufferIndex,e.end);return t.buffer.substring(r,i)}S(e,t){const r=new jb(t,1);if(r.left=ie,r.right=ie,r.parent=ie,r.size_left=0,r.lf_left=0,this.root===ie)this.root=r,r.color=0;else if(e.right===ie)e.right=r,r.parent=e;else{const s=Hb(e.right);s.left=r,r.parent=s}return z$(this,r),r}T(e,t){const r=new jb(t,1);if(r.left=ie,r.right=ie,r.parent=ie,r.size_left=0,r.lf_left=0,this.root===ie)this.root=r,r.color=0;else if(e.left===ie)e.left=r,r.parent=e;else{const i=_$(e.left);i.right=r,r.parent=i}return z$(this,r),r}U(e){let t="";return this.iterate(e,r=>(t+=this.R(r),!0)),t}},V$;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(V$||(V$={}));function Wb(e){let t=0,r=0,i=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(r=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,i=n+1):a===10&&(s|=1,t===0&&(r=n),t++,i=n+1)}return t===0&&(r=e.length),[t,r,e.length-i,s]}var Vb;function kB(){return Vb||(Vb=new TextDecoder("UTF-16LE")),Vb}function SB(e,t,r){const i=new Uint16Array(e.buffer,t,r);return r>0&&(i[0]===65279||i[0]===65534)?$B(e,t,r):kB().decode(i)}function $B(e,t,r){const i=[];let s=0;for(let n=0;n<r;n++){const o=E2(e,t);t+=2,i[s++]=String.fromCharCode(o)}return i.join("")}function Eg(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var CB=class ts{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,r,i,s){this.oldPosition=t,this.oldText=r,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Eg(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Eg(this.oldText)}")`:`(replace@${this.oldPosition} "${Eg(this.oldText)}" with "${Eg(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,r,i){const s=r.length;Wh(t,s,i),i+=4;for(let n=0;n<s;n++)k2(t,r.charCodeAt(n),i),i+=2;return i}static d(t,r){const i=zh(t,r);return r+=4,SB(t,r,i)}writeSize(){return 8+ts.a(this.oldText)+ts.a(this.newText)}write(t,r){return Wh(t,this.oldPosition,r),r+=4,Wh(t,this.newPosition,r),r+=4,r=ts.c(t,this.oldText,r),r=ts.c(t,this.newText,r),r}static read(t,r,i){const s=zh(t,r);r+=4;const n=zh(t,r);r+=4;const o=ts.d(t,r);r+=ts.a(o);const a=ts.d(t,r);return r+=ts.a(a),i.push(new ts(s,o,n,a)),r}},IB=class ph extends K{constructor(t,r,i,s,n,o,a){super(),this.m=this.B(new P),this.onDidChangeContent=this.m.event,this.f=r,this.j=!o,this.g=s,this.h=n,this.c=new EB(t,i,a)}equals(t){return!(t instanceof ph)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,r){return this.c.getOffsetAt(t,r)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,r){const i=t+r,s=this.getPositionAt(t),n=this.getPositionAt(i);return new Ke(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,r=0){if(t.isEmpty())return"";const i=this.n(r);return this.c.getValueInRange(t,i)}getValueLengthInRange(t,r=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const i=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(r),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-i+n}getCharacterCountInRange(t,r=0){if(this.j){let i=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)Fh(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this.n(r).length*(n-s),i}return this.getValueLengthInRange(t,r)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,r){return this.c.getLineCharCode(t,r)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const r=xm(this.getLineContent(t));return r===-1?0:r+1}getLineLastNonWhitespaceColumn(t){const r=dD(this.getLineContent(t));return r===-1?0:r+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,r,i){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let v=0;v<t.length;v++){const y=t[v];a&&y._isTracked&&(a=!1);const E=y.range;if(y.text){let _=!0;o||(_=!yD(y.text),o=_),!s&&_&&(s=V4(y.text)),!n&&_&&(n=q4(y.text))}let k="",I=0,D=0,T=0;if(y.text){let _;[I,D,T,_]=Wb(y.text);const q=this.getEOL();_===0||_===(q===`\r
`?2:1)?k=y.text:k=y.text.replace(/\r\n|\r|\n/g,q)}c[v]={sortIndex:v,identifier:y.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:k,eolCount:I,firstLineLength:D,lastLineLength:T,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}c.sort(ph.u);let l=!1;for(let v=0,y=c.length-1;v<y;v++){const E=c[v].range.getEndPosition(),k=c[v+1].range.getStartPosition();if(k.isBeforeOrEqual(E)){if(k.isBefore(E))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=i||r?ph._getInverseEditRanges(c):[],h=[];if(r)for(let v=0;v<c.length;v++){const y=c[v],E=u[v];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let k=E.startLineNumber;k<=E.endLineNumber;k++){let I="";k===E.startLineNumber&&(I=this.getLineContent(y.range.startLineNumber),xm(I)!==-1)||h.push({lineNumber:k,oldContent:I})}}let d=null;if(i){let v=0;d=[];for(let y=0;y<c.length;y++){const E=c[y],k=u[y],I=this.getValueInRange(E.range),D=E.rangeOffset+v;v+=E.text.length-I.length,d[y]={sortIndex:E.sortIndex,identifier:E.identifier,range:k,text:I,textChange:new CB(E.rangeOffset,I,D,E.text)}}l||d.sort((y,E)=>y.sortIndex-E.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let g=null;if(r&&h.length>0){h.sort((v,y)=>y.lineNumber-v.lineNumber),g=[];for(let v=0,y=h.length;v<y;v++){const E=h[v].lineNumber;if(v>0&&h[v-1].lineNumber===E)continue;const k=h[v].oldContent,I=this.getLineContent(E);I.length===0||I===k||xm(I)!==-1||g.push(E)}}return this.m.fire(),new cM(d,f,g)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let r=!1;const i=t[0].range,s=t[t.length-1].range,n=new Ke(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let f=0,g=t.length;f<g;f++){const v=t[f],y=v.range;r=r||v.forceMoveMarkers,c.push(this.getValueInRange(new Ke(o,a,y.startLineNumber,y.startColumn))),v.text.length>0&&c.push(v.text),o=y.endLineNumber,a=y.endColumn}const l=c.join(""),[u,h,d]=Wb(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:d,forceMoveMarkers:r,isAutoWhitespaceEdit:!1}}t(t){t.sort(ph.w);const r=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Ke(n,o,a,c);r.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return r}findMatchesLineByLine(t,r,i,s){return this.c.findMatchesLineByLine(t,r,i,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,r){const i=t.startLineNumber,s=t.startColumn,[n,o,a]=Wb(r);let c;if(r.length>0){const l=n+1;l===1?c=new Ke(i,s,i,s+o):c=new Ke(i,s,i+l-1,a+1)}else c=new Ke(i,s,i,s);return c}static _getInverseEditRanges(t){const r=[];let i=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=i,u=s+(c.range.startColumn-n.range.endColumn)):(l=i+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const d=c.eolCount+1;d===1?h=new Ke(l,u,l,u+c.firstLineLength):h=new Ke(l,u,l+d-1,c.lastLineLength+1)}else h=new Ke(l,u,l,u);i=h.endLineNumber,s=h.endColumn,r.push(h),n=c}return r}static u(t,r){const i=Ke.compareRangesUsingEnds(t.range,r.range);return i===0?t.sortIndex-r.sortIndex:i}static w(t,r){const i=Ke.compareRangesUsingEnds(t.range,r.range);return i===0?r.sortIndex-t.sortIndex:-i}},PB=class{constructor(e,t,r,i,s,n,o,a,c){this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,r=this.c+this.e;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`}create(e){const t=this.k(e),r=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=r.length;s<n;s++){const o=r[s].buffer.replace(/\r\n|\r|\n/g,t),a=Ms(o);r[s]=new To(o,a)}const i=new IB(r,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},q$=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&kD(e)&&(this.b=ED,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=bB(this.e,e);this.a.push(new To(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=V4(e)),this.k||(this.k=q4(e)))}finish(e=!0){return this.o(),new PB(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Ms(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},DB=class extends K{constructor(e,t,r){super(),this._source=e,this.b=t,this.c=r,this.a=void 0}f(e){const t=e.getLineCount();return new Ke(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new q$;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:r,disposable:i}=t.create(1);this.b=r,this.B(i)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new q$;t.acceptChunk(e);const r=t.finish(!0),{textBuffer:i,disposable:s}=r.create(1);return this.B(s),i})),this.a}findInInputs(e){const r=new w8(e,!1,!1,null).parseSearchRequest();if(!r)return[];const i=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,r,!0,5e3)}findInOutputs(e){const r=new w8(e,!1,!1,null).parseSearchRequest();return r?this.outputTextBuffers.map(i=>{const s=i.findMatchesLineByLine(this.f(i),r,!0,5e3);if(s.length!==0)return{textBuffer:i,matches:s}}).filter(i=>!!i):[]}};function G$(e,t){let r=-1;const i=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==r&&s.length>0&&(i.push([...s]),s=[]),s.push(o),r=o.range.endLineNumber}),s.length>0&&i.push([...s]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new o9(a.join(`
`)+`
`,o.map(u=>new Ke(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var cY=Object.freeze({id:"application",order:100,title:p(4049,null),type:"object"}),AB=Object.freeze({id:"workbench",order:7,title:p(4050,null),type:"object"}),TB=Object.freeze({id:"security",scope:1,title:p(4051,null),type:"object",order:7}),lY=Object.freeze({id:"problems",title:p(4052,null),type:"object",order:101}),RB=Object.freeze({id:"window",order:8,title:p(4053,null),type:"object"}),LB={ConfigurationMigration:"base.contributions.configuration.migration"},NB=class{constructor(){this.migrations=[],this.a=new P,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},kg=new NB;er.add(LB.ConfigurationMigration,kg);var J$=class extends K{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,r){super(),this.a=t,this.b=r,this.B(this.b.onDidChangeWorkspaceFolders(async i=>{for(const s of i.added)await this.f(s,kg.migrations)})),this.c(kg.migrations),this.B(kg.onDidRegisterConfigurationMigration(i=>this.c(i)))}async c(t){await this.f(void 0,t);for(const r of this.b.getWorkspace().folders)await this.f(r,t)}async f(t,r){await Promise.all([r.map(i=>this.g(i,t?.uri))])}async g(t,r){const i=this.a.inspect(t.key,{resource:r}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=i[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,r,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,r,l);for(const d of h??[])c.push([d,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:r,overrideIdentifiers:h},o)))}}async h(t,r,i,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[r];if(u)return n?u.overrides?.find(({identifiers:h})=>hi(h,n))?.value:u.value},a=await t.migrateFn(i,o);return Array.isArray(a)?a:[[t.key,a]]}};J$=__decorate([__param(0,xs),__param(1,sd)],J$);var Q$=class extends K{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new rn,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!ze&&(await this.b.getEnvironment())?.os!==1)return;er.as(ma.Configuration).registerConfiguration({...TB,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:p(4054,null)},default:[],markdownDescription:p(4055,null),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:p(4056,null),scope:2}}})}};Q$=__decorate([__param(0,S8)],Q$);var th="window.newWindowProfile",Y$=class extends K{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,r){super(),this.c=t,this.f=r,this.g(),this.B(this.c.onDidChangeProfiles(i=>this.g())),this.h(),this.j(),this.B(r.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(th)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=er.as(ma.Configuration),r={...RB,properties:{[th]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(i=>i.name),null],enumItemLabels:[...this.c.profiles.map(i=>""),p(4057,null)],description:p(4058,null),scope:1}}};this.a?t.updateConfigurations({add:[r],remove:[this.a]}):t.registerConfiguration(r),this.a=r}h(){const t=this.f.getValue(th);this.b=t?this.c.profiles.find(r=>r.name===t):void 0}j(){const t=this.f.getValue(th);if(!t)return;const r=this.b?this.c.profiles.find(i=>i.id===this.b.id):void 0;t!==r?.name&&this.f.updateValue(th,r?.name)}};Y$=__decorate([__param(0,TN),__param(1,xs)],Y$);var fY=J("editorResolverService"),FB=er.as(ma.Configuration),OB={...AB,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:p(12704,null),additionalProperties:{type:"string"}}}};FB.registerConfiguration(OB);var qb;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(qb||(qb={}));var X$;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(X$||(X$={}));function MB(e,t){if(new Set([V.extension,V.webviewPanel,V.vscodeWorkspaceTrust,V.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Re.sep)>=0?`${t.scheme}:${t.path}`:ji(t);return wa(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var UB=class gh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,r,i,s,n,o,a){this.q=i,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new zt,this.h=new Map,this.j=new P,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new P,this.onDidOpenNotebookDocument=this.m.event,this.n=new P,this.onDidCloseNotebookDocument=this.n.event,this.o=new P,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new Pi("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(Q.MainThreadNotebook),this.c=t.getProxy(Q.MainThreadNotebookDocuments),this.d=t.getProxy(Q.MainThreadNotebookEditors),this.i=r.converter,r.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,d=this.g.get(l)?.getCell(u);if(d)return d.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),gh.C(r)}getEditorById(t){const r=this.h.get(t);if(!r)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return r}getIdByEditor(t){for(const[r,i]of this.h)if(i.apiEditor===t)return r}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,r){const i=this.g.get(t);if(!i&&!r)throw new Error(`NO notebook document for '${t}'`);return i}static w(t,r){if(!r)return;const i=r.filenamePattern.map(s=>ap.from(s)).filter(s=>s!==void 0);if(r.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${r.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:r.displayName,filenamePattern:i,priority:r.exclusive?qb.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,r,i){const s=gh.a++,n=typeof i.onDidChangeCellStatusBarItems=="function"?gh.a++:void 0;this.f.set(s,i),this.b.$registerNotebookCellStatusBarItemProvider(s,n,r);let o;return n!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Te(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const r=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&bn.from(t.content)});return x.revive(r)}async openNotebookDocument(t){const r=this.g.get(t);if(r)return r.apiNotebook;const i=await this.c.$tryOpenNotebook(t),s=this.g.get(x.revive(i));return Zo(s?.apiNotebook)}async showNotebookDocument(t,r){let i;typeof r=="object"?i={position:Ut.from(r.viewColumn),preserveFocus:r.preserveFocus,selections:r.selections&&r.selections.map(Ji.from),pinned:typeof r.preview=="boolean"?!r.preview:void 0,label:typeof r.asRepl=="string"?r.asRepl:typeof r.asRepl=="object"?r.asRepl.label:void 0}:i={preserveFocus:!1,pinned:!0};const s=r?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,i),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,r,i,s){const n=this.f.get(t),o=x.revive(r),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new he,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(g=>k0.from(g,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,r,i,s,n){if(Lh(r))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:r,serializer:i,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},r,$0.from(s),gh.w(t,n)),te(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(r.buffer,i);return new zr(bn.from(n))}async $notebookToData(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(bn.to(r.value),i);return Y.wrap(n)}async $saveNotebook(t,r,i,s,n){const o=x.revive(r),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new R1(p(2759,null,this.A(o)),6);const l={metadata:h6(c.apiNotebook.metadata,g=>!(a.options?.transientDocumentMetadata??{})[g]),cells:[]};for(const g of c.apiNotebook.getCells()){const v=new Sf(g.kind,g.document.getText(),g.document.languageId,g.mime,a.options?.transientOutputs?[]:[...g.outputs],g.metadata,g.executionSummary);v.metadata=h6(g.metadata,y=>!(a.options?.transientCellMetadata??{})[y]),l.cells.push(v)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${i} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${i} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),d=await this.s.value.stat(o),f={name:h.basename(o),isFile:(d.type&Or.File)!==0,isDirectory:(d.type&Or.Directory)!==0,isSymbolicLink:(d.type&Or.SymbolicLink)!==0,mtime:d.mtime,ctime:d.ctime,size:d.size,readonly:!!((d.permissions??0)&cn.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((d.permissions??0)&cn.Locked),etag:RE({mtime:d.mtime,size:d.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),f}async $searchInNotebooks(t,r,i,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new l4;await(async(d,f,g)=>{await Promise.all(d.map(async v=>await Promise.all(v.filenamePatterns.map(y=>{const E={_reason:g._reason,folderQueries:g.folderQueries,includePattern:g.includePattern,excludePattern:g.excludePattern,maxResults:g.maxResults,type:1,filePattern:y};return this.t.doInternalFileSearchWithCustomCallback(E,f,k=>{k.forEach(I=>{a.has(I)||s.some(T=>v.isFromSettings&&!T.isFromSettings?!1:T.filenamePatterns.some(_=>MB(_,I)))||a.add(I)})}).catch(k=>{if(k.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw k})}))))})(i,n,r);const l=new zt;let u=!1;const h=Array.from(a).map(async d=>{const f=[];try{if(n.isCancellationRequested)return;if(r.maxResults&&[...l.values()].reduce((E,k)=>E+k.cellResults.length,0)>r.maxResults){u=!0;return}const g=[],v=this.g.get(d);if(v)v.apiNotebook.getCells().forEach(k=>g.push({input:k.document.getText(),outputs:k.outputs.flatMap(I=>I.items.map(D=>D.data.toString()))}));else{const E=await this.s.value.readFile(d),k=Y.fromString(E.toString()),I=await o.deserializeNotebook(k.buffer,n);if(n.isCancellationRequested)return;bn.from(I).cells.forEach(T=>g.push({input:T.source,outputs:T.outputs.flatMap(_=>_.items.map(q=>q.valueBytes.toString()))}))}if(n.isCancellationRequested)return;g.forEach((E,k)=>{const I=r.contentPattern.pattern,D=new DB(E.input,void 0,E.outputs),T=D.findInInputs(I),_=D.findInOutputs(I),q=_.flatMap(W=>G$(W.matches,W.textBuffer)).map((W,U)=>(W.webviewIndex=U,W));if(T.length>0||_.length>0){const W={index:k,contentResults:G$(T,D.inputTextBuffer),webviewResults:q};f.push(W)}});const y={resource:d,cellResults:f};l.set(d,y);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,r){const i=await this.s.value.stat(t);if(typeof r?.mtime=="number"&&typeof r.etag=="string"&&r.etag!==PL&&typeof i.mtime=="number"&&typeof i.size=="number"&&r.mtime<i.mtime&&r.etag!==RE({mtime:r.mtime,size:i.size}))throw new R1(p(2760,null),3,r)}A(t){return t.scheme===V.file?t.fsPath:t.toString()}B(t,r,i){if(this.h.has(r))throw new Error(`editor with id ALREADY EXSIST: ${r}`);const s=new Ub(r,this.d,t,i.visibleRanges.map(Ji.to),i.selections.map(Ji.to),typeof i.viewColumn=="number"?Ut.to(i.viewColumn):void 0,i.viewType);this.h.set(r,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const i of t.value.removedDocuments){const s=x.revive(i),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const i=[];for(const s of t.value.addedDocuments){const n=x.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new vB(this.c,this.q,this.r,n,s);i.push(...s.cells.map(a=>Mb.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:i}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const i of t.value.addedEditors){if(this.h.has(i.id))return;const s=x.revive(i.documentUri),n=this.g.get(s);n&&this.B(n,i.id,i)}const r=[];if(t.value.removedEditors)for(const i of t.value.removedEditors){const s=this.h.get(i);s&&(this.h.delete(i),this.k?.id===s.id&&(this.k=void 0),r.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const i=new Set;this.l.forEach(s=>i.add(s.id));for(const s of this.h.values()){const n=i.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const r=M.String.with("notebookType","A notebook type"),i=new me("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[r,new M("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>Y.wrap(n))],new ge("Notebook Data",n=>bn.to(n.value))),s=new me("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[r,new M("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new zr(bn.from(n)))],new ge("Bytes",n=>n.buffer));t.registerApiCommand(i),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},jB=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=r,this.f=i,this.a=new Hc}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,r,i)=>{const s=function(o){t.call(r,o)};return s.extension=e,this.a.event(s,void 0,i)}}async $participateInSave(e,t,r){const i=x.revive(e),s=this.c.getNotebookDocument(i);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:ip.to(t)},r,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!r.isCancellationRequested&&u&&(u instanceof oo?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),r.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=dr.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new zr(o))}},HB=class{constructor(e){this.c=e,this.a=new P,this.onDidSaveNotebookDocument=this.a.event,this.b=new P,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,r,i){const n=this.c.getNotebookDocument(x.revive(e)).acceptModelChanged(t.value,r,i);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(x.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(x.revive(e));this.a.fire(t.apiNotebook)}},Gb=class{constructor(t,r){this.c=t,this.d=r,this.a=new P,this.b=new P,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,r){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,r);const i=this.d.getEditorById(t);r.visibleRanges&&i._acceptVisibleRanges(r.visibleRanges.ranges.map(Ji.to)),r.selections&&i._acceptSelections(r.selections.selections.map(Ji.to)),r.visibleRanges&&this.b.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),r.selections&&this.a.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const r in t)this.d.getEditorById(r)._acceptViewColumn(Ut.to(t[r]))}};Gb=__decorate([__param(0,$e)],Gb);var wc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(wc||(wc={}));var gY=J("INotebookExecutionService"),BB=100,Z$;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(Z$||(Z$={}));var mY=J("INotebookKernelService"),vY=J("INotebookKernelHistoryService"),Jb=class{constructor(t,r,i,s,n){this.m=r,this.n=i,this.o=s,this.q=n,this.b=new zt,this.c=new zt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new P,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(Q.MainThreadNotebookKernels);const o=new me("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new M("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],ge.Void),a=new me("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[M.Uri],new ge("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,r,i,s,n,o){for(const T of this.j.values())if(T.controller.id===r&&Je.equals(t.identifier,T.extensionId))throw new Error(`notebook controller with id '${r}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${r}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new P,d=new P,f={id:Sg(t.identifier,r),notebookType:i,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(cp.from):[]};let g=n??l,v,y;this.a.$addKernel(a,f).catch(T=>{console.log(T),u=!0});let E=0;const k=()=>{if(u)return;const T=++E;Promise.resolve().then(()=>{T===E&&this.a.$updateKernel(a,f)})},I=new zt,D={get id(){return r},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(T){f.label=T??t.displayName??t.name,k()},get detail(){return f.detail??""},set detail(T){f.detail=T,k()},get description(){return f.description??""},set description(T){f.description=T,k()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(T){f.supportedLanguages=T,k()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(T){f.supportsExecutionOrder=T,k()},get rendererScripts(){return f.preloads?f.preloads.map(cp.to):[]},get executeHandler(){return g},set executeHandler(T){g=T??l},get interruptHandler(){return v},set interruptHandler(T){v=T,f.supportsInterrupt=!!T,k()},set variableProvider(T){L(t,"notebookVariableProvider"),y=T,f.hasVariableProvider=!!T,T?.onDidChangeVariables(_=>c.a.$variablesUpdated(_.uri)),k()},get variableProvider(){return y},createNotebookCellExecution(T){if(u)throw new Error("notebook controller is DISPOSED");if(!I.has(T.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(_=>_.toString())),new Error(`notebook controller is NOT associated to notebook: ${T.notebook.uri.toString()}`);return c._createNotebookCellExecution(T,Sg(t.identifier,this.id))},createNotebookExecution(T){if(L(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!I.has(T.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(_=>_.toString())),new Error(`notebook controller is NOT associated to notebook: ${T.uri.toString()}`);return c._createNotebookExecution(T,Sg(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),d.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(T,_){_===Pf.Hidden&&L(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,T.uri,_)},onDidReceiveMessage:d.event,postMessage(T,_){return L(t,"notebookMessaging"),c.a.$postMessage(a,_&&c.n.getIdByEditor(_),T)},asWebviewUri(T){return L(t,"notebookMessaging"),Vu(T,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:D,onDidReceiveMessage:d,onDidChangeSelection:h,associatedNotebooks:I}),D}getIdByController(t){for(const[r,i]of this.j)if(i.controller===t)return Sg(i.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,r){const i=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(i,r);const n={dispose:()=>{this.f.delete(i),s.a.$removeKernelDetectionTask(i)}};return this.f.set(i,n),n}registerKernelSourceActionProvider(t,r,i){const s=this.i++,n=typeof i.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,i),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,r);let a;return n!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,r){const i=this.h.get(t);if(i){const s=new he;return(await i.provideNotebookKernelSourceActions(r)??[]).map(o=>S0.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,r,i){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(x.revive(r));i?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),i),s.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(x.revive(r)),o=[];for(const a of i){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(x.revive(r));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of i){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),i.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,r,i,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(x.revive(i)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const d=n==="named"?Zl.Named:Zl.Indexed,f=u.provideVariables(l.apiNotebook,h,d,o,a);let g=0;for await(const v of f){if(a.isCancellationRequested)return;const y={id:this.r++,name:v.variable.name,value:v.variable.value,type:v.variable.type,interfaces:v.variable.interfaces,language:v.variable.language,expression:v.variable.expression,hasNamedChildren:v.hasNamedChildren,indexedChildrenCount:v.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[y.id]=v.variable,this.a.$receiveVariable(r,y),g++>=BB)return}}$acceptKernelMessageFromRenderer(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(r);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(t,r,i){const n=this.n.getNotebookDocument(x.revive(t)).getCell(r);if(n){const o=i?E0.to(i):Ba.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,r){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new _B(r,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===Di.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,r){const i=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new WB(r,i,this.a),o=n.onDidChangeState(()=>{n.state===Us.Resolved&&(n.dispose(),o.dispose(),this.c.delete(i.uri))});return this.c.set(i.uri,[n,o]),n.asApiObject()}};Jb=__decorate([__param(4,$e)],Jb);var Di;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Di||(Di={}));var _B=class gI extends K{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.m=r,this.n=i,this.b=gI.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=Di.Init,this.g=this.B(new rt),this.h=new VB(10,s=>this.s(s)),this.j=r.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const r=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new zr(r))}t(){if(this.f===Di.Init)throw new Error("Must call start before modifying cell output");if(this.f===Di.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let r=this.m;if(t&&(r=this.m.notebook.getCellFromApiCell(t)),!r)throw new Error("INVALID cell");return r.handle}y(t){return t.map(r=>{const i=$f.ensureUniqueMimeTypes(r.items,!0);return i===r.items?yn.from(r):yn.from({items:i,id:r.id,metadata:r.metadata})})}async z(t,r,i){const s=this.w(r),n=this.y(Oi(t));return this.r({editType:wc.Output,cellHandle:s,append:i,outputs:n})}async C(t,r,i){return t=$f.ensureUniqueMimeTypes(Oi(t),!0),this.r({editType:wc.OutputItems,items:t.map(ec.from),outputId:r.id,append:i})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(i){t.j=i,t.s([{editType:wc.ExecutionState,executionOrder:t.j}])},start(i){if(t.f===Di.Resolved||t.f===Di.Started)throw new Error("Cannot call start again");t.f=Di.Started,t.c.fire(),t.s({editType:wc.ExecutionState,runStartTime:i})},end(i,s,n){if(t.f===Di.Resolved)throw new Error("Cannot call resolve twice");t.f=Di.Resolved,t.c.fire(),t.h.flush();const o=zB(n);t.n.$completeExecution(t.b,new zr({runEndTime:s,lastRunSuccess:i,error:o}))},clearOutput(i){return t.t(),t.z([],i,!1)},appendOutput(i,s){return t.t(),t.z(i,s,!0)},replaceOutput(i,s){return t.t(),t.z(i,s,!1)},appendOutputItems(i,s){return t.t(),t.C(i,s,!0)},replaceOutputItems(i,s){return t.t(),t.C(i,s,!1)}})}};function zB(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,r=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>r(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var Us;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Us||(Us={}));var WB=class mI extends K{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.h=r,this.j=i,this.b=mI.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=Us.Init,this.g=this.B(new rt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===Us.Resolved||this.f===Us.Started)throw new Error("Cannot call start again");this.f=Us.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===Us.Resolved)throw new Error("Cannot call resolve twice");this.f=Us.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},VB=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new rn,this.b=Date.now(),lr(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Sg(e,t){return`${e.value}/${t}`}var qB=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(Q.MainThreadNotebookRenderers)}$postRendererMessage(e,t,r){const i=this.c.getEditorById(e);this.a.get(t)?.fire({editor:i.apiEditor,message:r})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(i=>i.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(i,s,n)=>this.d(t).event(i,s,n),postMessage:(i,s)=>{Ub.apiEditorsToExtHost.has(i)&&([i,s]=[s,i]);const n=s&&Ub.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,i)}}}d(e){let t=this.a.get(e);return t||(t=new P({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},GB=class{constructor(e){this.b=new Map,this.a=e.getProxy(Q.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,r){if(L(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,r),this.a.$registerProfileContentHandler(t,r.name,r.description,e.identifier.value),te(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,r,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,r,i)}async $readProfile(e,t,r){const i=this.b.get(e);if(!i)throw new Error(`Unknown handler with id: ${e}`);return i.readProfile(Pe(t)?t:x.revive(t),r)}},JB=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,r){const i=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(i,{location:y0.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(cm),this.d(i,r,!!o)}d(e,t,r){let i;r&&(i=new rt,this.c.set(e,i));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),i?.dispose()};let n;try{n=t(new K$(this.a,e),r&&i?i.token:Xe.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function QB(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var K$=class extends dw{constructor(e,t){super(r=>this.throttledReport(r)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([tA(100,(e,t)=>QB(e,t),()=>Object.create(null))],K$.prototype,"throttledReport",null);var YB=class vI{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(Q.MainThreadQuickDiff)}$provideOriginalResource(t,r,i){const s=x.revive(r),n=this.c.get(t);return n?sr(()=>n.provideOriginalResource(s,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,r,i,s){const n=vI.a++;return this.c.set(n,r),this.b.$registerQuickDiffProvider(n,Va.from(t,this.d),i,s,r.visible??!0),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function XB(e,t,r){const i=e.getProxy(Q.MainThreadQuickOpen);class s{constructor(f,g){this.e=new Map,this.f=0,this.a=f,this.b=g}showQuickPick(f,g,v,y=Xe.None){this.c=void 0;const E=Promise.resolve(g),k=++this.f,I=i.$show(k,{title:v?.title,placeHolder:v?.placeHolder,matchOnDescription:v?.matchOnDescription,matchOnDetail:v?.matchOnDetail,ignoreFocusLost:v?.ignoreFocusOut,canPickMany:v?.canPickMany},y),D={},T=I.then(()=>D);return Promise.race([T,E]).then(_=>{if(_===D)return;const q=Vt(f,"quickPickItemTooltip");return E.then(W=>{const U=[];for(let ne=0;ne<W.length;ne++){const ce=W[ne];if(typeof ce=="string")U.push({label:ce,handle:ne});else if(ce.kind===Xl.Separator)U.push({type:"separator",label:ce.label});else{ce.tooltip&&!q&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const ve=ce.iconPath?l(ce.iconPath):void 0;U.push({label:ce.label,iconPath:ve?.iconPath,iconClass:ve?.iconClass,description:ce.description,detail:ce.detail,picked:ce.picked,alwaysShow:ce.alwaysShow,tooltip:q?Ce.fromStrict(ce.tooltip):void 0,handle:ne})}}return v&&typeof v.onDidSelectItem=="function"&&(this.c=ne=>{v.onDidSelectItem(W[ne])}),i.$setItems(k,U),I.then(ne=>{if(typeof ne=="number")return W[ne];if(Array.isArray(ne))return ne.map(ce=>W[ce])})})}).then(void 0,_=>{if(!Ni(_))return i.$setError(k,_),Promise.reject(_)})}$onItemSelected(f){this.c?.(f)}showInput(f,g=Xe.None){return this.d=f?.validateInput,i.$input(f,typeof this.d=="function",g).then(void 0,v=>{if(!Ni(v))return Promise.reject(v)})}async $validateInput(f){if(!this.d)return;const g=await this.d(f);if(!g||typeof g=="string")return g;let v;switch(g.severity){case Ha.Info:v=Pt.Info;break;case Ha.Warning:v=Pt.Warning;break;case Ha.Error:v=Pt.Error;break;default:v=g.message?Pt.Error:Pt.Ignore;break}return{content:g.message,severity:v}}async showWorkspaceFolderPick(f,g=Xe.None){const v=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!v)return;const y=await this.a.getWorkspaceFolders2();if(y)return y.find(E=>E.uri.toString()===v.uri.toString())}createQuickPick(f){const g=new u(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}createInputBox(f){const g=new h(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}$onDidChangeValue(f,g){this.e.get(f)?._fireDidChangeValue(g)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeActive(g)}$onDidChangeSelection(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeSelection(g)}$onDidTriggerButton(f,g){this.e.get(f)?._fireDidTriggerButton(g)}$onDidTriggerItemButton(f,g,v){const y=this.e.get(f);y instanceof u&&y._fireDidTriggerItemButton(g,v)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,g){this.y=f,this.z=g,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new P,this.r=new P,this.s=new P,this.t=new P,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(f){this.b=f,this.A({title:f})}get step(){return this.c}set step(f){this.c=f,this.A({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.A({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.A({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.A({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.A({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.A({value:f})}get valueSelection(){return this.m}set valueSelection(f){this.m=f,this.A({valueSelection:f})}get placeholder(){return this.n}set placeholder(f){this.n=f,this.A({placeholder:f})}get buttons(){return this.o}set buttons(f){const g=Vt(this.y,"quickInputButtonLocation");!g&&f.some(v=>v.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=f.slice(),this.p.clear(),f.forEach((v,y)=>{const E=v===Yl.Back?-1:y;this.p.set(E,v)}),this.A({buttons:f.map((v,y)=>({...l(v.iconPath),tooltip:v.tooltip,handle:v===Yl.Back?-1:y,location:g?v.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(f){this.l=f,this.r.fire(f)}_fireDidTriggerButton(f){const g=this.p.get(f);g&&this.s.fire(g)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=ai(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),i.$dispose(this._id))}A(f){if(!this.w){for(const g of Object.keys(f)){const v=f[g];this.v[g]=v===void 0?null:v}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){i.$createOrUpdate(this.v),this.v={id:this._id}}}function o(d){if(d instanceof nr)return{id:d.id};const f=c(d),g=a(d);return{dark:typeof f=="string"?x.file(f):f,light:typeof g=="string"?x.file(g):g}}function a(d){return typeof d=="object"&&"light"in d?d.light:d}function c(d){return typeof d=="object"&&"dark"in d?d.dark:d}function l(d){const f=o(d);let g,v;return"id"in f?v=Jt.asClassName(f):g=f,{iconPath:g,iconClass:v}}class u extends n{constructor(f,g){super(f,g),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new P,this.M=[],this.N=new P,this.O=new P,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(f){this.C=f.slice(),this.D.clear(),this.E.clear(),f.forEach((y,E)=>{this.D.set(E,y),this.E.set(y,E)});const g=Vt(this.y,"quickPickItemTooltip"),v=[];for(let y=0;y<f.length;y++){const E=f[y];if(E.kind===Xl.Separator)v.push({type:"separator",label:E.label});else{E.tooltip&&!g&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const k=E.iconPath?l(E.iconPath):void 0;v.push({handle:y,label:E.label,iconPath:k?.iconPath,iconClass:k?.iconClass,description:E.description,detail:E.detail,picked:E.picked,alwaysShow:E.alwaysShow,tooltip:g?Ce.fromStrict(E.tooltip):void 0,buttons:E.buttons?.map((I,D)=>({...l(I.iconPath),tooltip:I.tooltip,handle:D}))})}}this.A({items:v})}get canSelectMany(){return this.F}set canSelectMany(f){this.F=f,this.A({canSelectMany:f})}get matchOnDescription(){return this.G}set matchOnDescription(f){this.G=f,this.A({matchOnDescription:f})}get matchOnDetail(){return this.H}set matchOnDetail(f){this.H=f,this.A({matchOnDetail:f})}get sortByLabel(){return this.I}set sortByLabel(f){this.I=f,this.A({sortByLabel:f})}get keepScrollPosition(){return this.J}set keepScrollPosition(f){this.J=f,this.A({keepScrollPosition:f})}get activeItems(){return this.K}set activeItems(f){this.K=f.filter(g=>this.E.has(g)),this.A({activeItems:this.K.map(g=>this.E.get(g))})}get selectedItems(){return this.M}set selectedItems(f){this.M=f.filter(g=>this.E.has(g)),this.A({selectedItems:this.M.map(g=>this.E.get(g))})}_fireDidChangeActive(f){const g=St(f.map(v=>this.D.get(v)));this.K=g,this.L.fire(g)}_fireDidChangeSelection(f){const g=St(f.map(v=>this.D.get(v)));this.M=g,this.N.fire(g)}_fireDidTriggerItemButton(f,g){const v=this.D.get(f);if(!v||!v.buttons||!v.buttons.length)return;const y=v.buttons[g];y&&this.O.fire({button:y,item:v})}}class h extends n{constructor(f,g){super(f,g),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(f){this.C=f,this.A({password:f})}get prompt(){return this.D}set prompt(f){this.D=f,this.A({prompt:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.A({validationMessage:f,severity:Pt.Error}):this.A({validationMessage:f.message,severity:f.severity??Pt.Error}):this.A({validationMessage:void 0,severity:Pt.Ignore})}}return new s(t,r)}var Qb;function eC(e){return e instanceof x}function ZB(e,t){return e.scheme===V.file&&t.scheme===V.file&&bt?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function Yb(e){if(e)return typeof e.iconPath=="string"?x.file(e.iconPath):x.isUri(e.iconPath)||Jt.isThemeIcon(e.iconPath)?e.iconPath:void 0}function bc(e){if(e){if(x.isUri(e))return e;if(Jt.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function KB(e){const t=e.references?.map(r=>({...r,icon:bc(r.icon)}));return{...e,references:t}}function Xb(e){return e?{...e,icon:bc(e.icon)}:void 0}function Zb(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const r=typeof e.iconPath=="string"?e.iconPath:x.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,i=typeof t.iconPath=="string"?t.iconPath:x.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return rg(r,i)}function e_(e,t){let r=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(r=Zb(e,t),r!==0)return r;if(e.light&&t.light)r=Zb(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(r!==0)return r;if(e.dark&&t.dark)r=Zb(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return r}function t_(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let r=0;r<e.arguments.length;r++){const i=e.arguments[r],s=t.arguments[r];if(i!==s&&!(eC(i)&&eC(s)&&ZB(i,s)))return i<s?-1:1}return 0}function tC(e,t){let r=rg(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(r!==0)return r;if(e.command&&t.command)r=t_(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(r!==0)return r;if(e.decorations&&t.decorations)r=e_(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(r!==0)return r;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)r=rg(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(r!==0)return r;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)r=rg(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return r}function r_(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function i_(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?r_(e.arguments,t.arguments):e.arguments===t.arguments)}function s_(e,t){return Fi(e,t,i_)}var n_=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return L(this.l,"scmValidation"),this.h}set validateInput(e){if(L(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return L(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,r,i,s){this.l=e,this.m=i,this.n=s,this.d="",this.f=new P,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=r}showValidationMessage(e,t){L(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},o_=class wI{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,r,i,s,n,o,a){this.s=t,this.t=r,this.u=i,this.v=s,this.w=n,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new P,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new P,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=wI.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,r){const i=this.j.get(t);return i?sr(()=>this.t.executeCommand(i.command,...i.arguments||[],r)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(tC),i=i4(this.p,t,tC).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const W=new he;h=this.t.converter.toInternal(c.command,W),this.k.set(l,W)}else this.j.set(l,c.command);const d=Vt(this.x,"scmMultiDiffEditor"),f=d?c.multiDiffEditorOriginalUri:void 0,g=d?c.multiFileDiffEditorModifiedUri:void 0,v=Yb(c.decorations),y=c.decorations&&Yb(c.decorations.light)||v,E=c.decorations&&Yb(c.decorations.dark)||v,k=[y,E],I=c.decorations&&c.decorations.tooltip||"",D=c.decorations&&!!c.decorations.strikeThrough,T=c.decorations&&!!c.decorations.faded,_=c.contextValue||"";return{rawResource:[l,u,k,I,D,T,_,h,f,g],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=i.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=i.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},Kb=class bI{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let r;Vt(this.x,"quickDiffProvider")&&(r=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:r})}get historyProvider(){return L(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){L(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new he,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const r=Xb(t?.currentHistoryItemRef),i=Xb(t?.currentHistoryItemRemoteRef),s=Xb(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,r,i,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(r=>{if(r.added.length===0&&r.modified.length===0&&r.removed.length===0)return;const i=r.added.map(o=>({...o,icon:bc(o.icon)})),s=r.modified.map(o=>({...o,icon:bc(o.icon)})),n=r.removed.map(o=>({...o,icon:bc(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:i,modified:s,removed:n,silent:r.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new he,this.o=t;const r=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:r})}get actionButton(){return L(this.x,"scmActionButton"),this.q}set actionButton(t){if(L(this.x,"scmActionButton"),M1(this.q,t))return;this.q=t,this.p.value=new he;const r=t!==void 0?{command:{...this.y.converter.toInternal(t.command,this.p.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(i=>i.map(s=>this.y.converter.toInternal(s,this.p.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:r??null})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&s_(this.t,t))return;this.s.value=new he,this.t=t;const r=(t||[]).map(i=>this.y.converter.toInternal(i,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:r})}get selected(){return this.u}constructor(t,r,i,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new os,this.m=void 0,this.n=new os,this.o=void 0,this.p=new os,this.s=new os,this.t=void 0,this.u=!1,this.v=new P,this.onDidChangeSelection=this.v.event,this.w=bI.d++,this.C=new Map,this.D=new Set,this.#e=i;const c=x.from({scheme:V.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new n_(t,r,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,r,i){const s=Vt(this.x,"scmMultiDiffEditor")&&i?.multiDiffEditorEnableViewChanges===!0,n=new o_(this.#e,this.y,this.w,t,r,s,this.x),o=je.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],r=[];for(const[i,s]of this.C){s.dispose();const n=i.onDidUpdateResourceStates(()=>{this.D.add(i),this.eventuallyUpdateResourceStates()});je.once(i.onDidDispose)(()=>{this.D.delete(i),n.dispose(),this.f.delete(i.handle),this.#e.$unregisterGroup(this.w,i.handle)}),t.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&r.push([i.handle,o]),this.f.set(i.handle,i)}this.#e.$registerGroups(this.w,t,r),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(r=>{const i=r._takeResourceStateSnapshot();i.length!==0&&t.push([r.handle,i])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([Yh(100)],Kb.prototype,"eventuallyAddResourceGroups",null),__decorate([Yh(100)],Kb.prototype,"eventuallyUpdateResourceStates",null);var ey=class{static{Qb=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,r,i,s){this.m=r,this.n=i,this.o=s,this.h=new Map,this.j=new ys,this.k=new P,this.f=t.getProxy(Q.MainThreadSCM),this.g=t.getProxy(Q.MainThreadTelemetry),r.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,r,i,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,r,i,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=Qb.d++,o=new Kb(t,this.n,this.f,this.m,r,i,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const r=this.j.get(t.identifier),i=r&&r[r.length-1];return i&&i.inputBox}$provideOriginalResource(t,r,i){const s=x.revive(r);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):sr(()=>n.quickDiffProvider.provideOriginalResource(s,i)).then(o=>o||null)}$onInputBoxValueChange(t,r){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const i=this.h.get(t);return i&&i.inputBox.$onInputBoxValueChange(r),Promise.resolve(void 0)}$executeResourceCommand(t,r,i,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,r,i);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(r);return o?o.$executeResourceCommand(i,s):Promise.resolve(void 0)}$validateInput(t,r,i){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):sr(()=>s.inputBox.validateInput(r,i)).then(n=>{if(!n)return Promise.resolve(void 0);const o=Ce.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,r,i){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(r,i)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(r,i))?.map(o=>({...o,icon:bc(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(r,i))?.map(o=>KB(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,r,i,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(r,i,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};ey=Qb=__decorate([__param(3,$e)],ey);var a_=class yI{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(Q.MainThreadShare)}async $provideShare(t,r,i){return await this.c.get(t)?.provideShare({selection:O.to(r.selection),resourceUri:x.revive(r.resourceUri)},i)??void 0}registerShareProvider(t,r){const i=yI.a++;return this.c.set(i,r),this.b.$registerShareProvider(i,Va.from(t,this.d),r.id,r.label,r.priority),{dispose:()=>{this.b.$unregisterShareProvider(i),this.c.delete(i)}}}},c_=class xI{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(Q.MainThreadSpeech)}async $createSpeechToTextSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new he,o=new rt;this.d.set(r,o);const a=await s.provideSpeechToTextSession(o.token,i?{language:i}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new he,o=new rt;this.d.set(r,o);const a=await s.provideTextToSpeechSession(o.token,i?{language:i}:void 0);a&&(this.f.set(r,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,r){this.f.get(t)?.synthesize(r)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,r){const i=this.c.get(t);if(!i)return;const s=new he,n=new rt;this.d.set(r,n);const o=await i.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(r,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,r,i){const s=xI.a++;return this.c.set(s,i),this.b.$registerProvider(s,r,{extension:t,displayName:t.value}),te(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},l_=class tm{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new Bl("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new Bl("statusBarItem.warningForeground")]])}#e;#t;constructor(t,r,i,s,n,o=pn.Left,a){if(this.i=!1,this.k="",this.q=new he,this.#e=t,this.#t=r,n&&s){this.c=PF(s.identifier,n);const c=i.get(this.c);c&&(o=c.alignLeft?pn.Left:pn.Right,a=c.priority,this.j=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this.c=String(tm.a++);this.e=s,this.f=n,this.g=o,this.h=this.u(a)}u(t){if(_r(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.m}get tooltip(){return this.l}get color(){return this.n}get backgroundColor(){return this.o}get command(){return this.r?.fromApi}get accessibilityInformation(){return this.t}set text(t){this.k=t,this.v()}set name(t){this.m=t,this.v()}set tooltip(t){this.l=t,this.v()}set color(t){this.n=t,this.v()}set backgroundColor(t){t&&!tm.b.has(t.id)&&(t=void 0),this.o=t,this.v()}set command(t){this.r?.fromApi!==t&&(this.p&&this.q.add(this.p),this.p=new he,typeof t=="string"?this.r={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.p)}:t?this.r={fromApi:t,internal:this.#t.toInternal(t,this.p)}:this.r=void 0,this.v())}set accessibilityInformation(t){this.t=t,this.v()}show(){this.j=!0,this.v()}hide(){clearTimeout(this.s),this.j=!1,this.#e.$disposeEntry(this.c)}v(){this.i||!this.j||(clearTimeout(this.s),this.s=setTimeout(()=>{this.s=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let r;this.m?r=this.m:r=p(2761,null,this.e.displayName||this.e.name);let i=this.n;this.o&&(i=tm.b.get(this.o.id));const s=Ce.fromStrict(this.l);this.#e.$setEntry(this.c,t,this.e?.identifier.value,r,this.k,s,this.r?.internal,i,this.o,this.g===pn.Left,this.h,this.t),this.q.clear()},0))}dispose(){this.hide(),this.i=!0}},u_=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",pn.Left,Number.MIN_VALUE),this.a.name=p(2762,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Te(()=>{const r=this.b.indexOf(t);r>=0&&(this.b.splice(r,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},h_=class{constructor(e,t){this.e=new Map,this.a=e.getProxy(Q.MainThreadStatusBar),this.b=t,this.c=new u_(this)}$acceptStaticEntries(e){for(const t of e)this.e.set(t.entryId,t)}createStatusBarEntry(e,t,r,i){return new l_(this.a,this.b,this.e,e,t,r,i)}setStatusBarMessage(e,t){const r=this.c.setMessage(e);let i;return typeof t=="number"?i=setTimeout(()=>r.dispose(),t):typeof t<"u"&&t.then(()=>r.dispose(),()=>r.dispose()),new Te(()=>{r.dispose(),clearTimeout(i)})}},d_=class extends K{constructor(e,t){super(),this.n=t,this.a=new P,this.b=new P,this.c=new P,this.f=new P,this.g=new P,this.h=new P,this.j=new P,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(Q.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(r=>this.j.fire(r))),this.B(this.n.onDidChangeActiveTextEditor(r=>this.h.fire(r)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(r=>r.value)}async showTextDocument(e,t,r){let i;typeof t=="number"?i={position:Ut.from(t),preserveFocus:r}:typeof t=="object"?i={position:Ut.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?O.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,i),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new zM(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const r=this.n.getEditor(e);if(!r)throw new Error("unknown text editor");if(t.options&&r._acceptOptions(t.options),t.selections){const i=t.selections.selections.map(Ei.to);r._acceptSelections(i)}if(t.visibleRanges){const i=St(t.visibleRanges.map(O.to));r._acceptVisibleRanges(i)}if(t.options&&this.b.fire({textEditor:r.value,options:{...t.options,lineNumbers:Ya.to(t.options.lineNumbers)}}),t.selections){const i=Ia.fromValue(t.selections.source),s=t.selections.selections.map(Ei.to);this.a.fire({textEditor:r.value,selections:s,kind:i})}if(t.visibleRanges){const i=St(t.visibleRanges.map(O.to));this.c.fire({textEditor:r.value,visibleRanges:i})}}$acceptEditorPositionData(e){for(const t in e){const r=this.n.getEditor(t);if(!r)throw new Error("Unknown text editor");const i=Ut.to(e[t]);r.value.viewColumn!==i&&(r._acceptViewColumn(i),this.f.fire({textEditor:r.value,viewColumn:i}))}}$acceptEditorDiffInformation(e,t){const r=this.n.getEditor(e);if(!r)throw new Error("unknown text editor");if(!t){r._acceptDiffInformation(void 0),this.g.fire({textEditor:r.value,diffInformation:void 0});return}const i=this,s=t.map(n=>{const o=x.revive(n.original),a=x.revive(n.modified),c=n.changes.map(l=>{const[u,h,d,f]=l;let g;return u===h?g=Pa.Addition:d===f?g=Pa.Deletion:g=Pa.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:d,endLineNumberExclusive:f},kind:g}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return i.n.getDocument(a)?.version!==n.documentVersion}})});r._acceptDiffInformation(s),this.g.fire({textEditor:r.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},ty=class{constructor(t){this.a=new kf(mn.Dark),this.b=new P}get activeColorTheme(){return this.a}$onColorThemeChange(t){let r;switch(t){case"light":r=mn.Light;break;case"hcDark":r=mn.HighContrast;break;case"hcLight":r=mn.HighContrastLight;break;default:r=mn.Dark}this.a=new kf(r),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};ty=__decorate([__param(0,Ae)],ty);var xY=J("IExtHostTimeline"),f_=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(Q.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(r,i)=>{if(r&&r.$mid===12)if(this.b.get(r.source)&&Je.equals(i,this.b.get(r.source)?.extension)){const s=r.uri===void 0?void 0:x.revive(r.uri);return this.c.get(r.source)?.get(rC(s))?.get(r.handle)}else return;return r}})}async $getTimeline(e,t,r,i){return this.b.get(e)?.provider.provideTimeline(x.revive(t),r,i)}registerTimelineProvider(e,t,r,i){const s=new he,n=this.d(t.id,i,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const d=n(c,l);return{...h,source:t.id,items:h.items.map(d)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},r)}d(e,t,r){return(i,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=rC(i);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,d;o.iconPath&&(a instanceof nr?d={id:a.id,color:a.color}:x.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return Mr.isMarkdownString(c.tooltip)?f=Ce.from(c.tooltip):Pe(c.tooltip)?f=c.tooltip:Mr.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=Ce.from(c.detail)):Pe(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,r):void 0,icon:u,iconDark:h,themeIcon:d,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),te(()=>{for(const i of this.c.values())i.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function rC(e){return e?.toString()}var p_={IconContribution:"base.contributions.icons"},iC;(function(e){function t(r,i){let s=r.defaults;for(;Jt.isThemeIcon(s);){const n=yc.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(iC||(iC={}));var sC;(function(e){function t(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function r(i){const s=n=>Pe(n)?n:void 0;if(i&&Array.isArray(i.src)&&i.src.every(n=>Pe(n.format)&&Pe(n.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(n=>({format:n.format,location:x.parse(n.location)}))}}e.fromJSONObject=r})(sC||(sC={}));var g_=class{constructor(){this.a=new P,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p(2411,null)},fontCharacter:{type:"string",description:p(2412,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${Jt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,r,i){const s=this.b[e];if(s){if(r&&!s.description){s.description=r,this.d.properties[e].markdownDescription=`${r} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=r),this.a.fire()}return s}const n={id:e,description:r,defaults:t,deprecationMessage:i};this.b[e]=n;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),r&&(o.markdownDescription=`${r}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(r||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const r=this.f[e];return r||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;Jt.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.b).map(s=>this.b[s]);for(const s of i.filter(n=>!!n.description).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|${Jt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(const s of i.filter(n=>!Jt.isThemeIcon(n.defaults)).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|`);return r.join(`
`)}},yc=new g_;er.add(p_.IconContribution,yc);function $g(e,t,r,i){return yc.registerIcon(e,t,r,i)}function m_(){const e=TR();for(const t in e){const r="\\"+e[t].toString(16);yc.registerIcon(t,{fontCharacter:r})}}m_();var nC="vscode://schemas/icons",oC=er.as(xd.JSONContribution);oC.registerSchema(nC,yc.getIconSchema());var aC=new hs(()=>oC.notifySchemaChanged(nC),200);yc.onDidChange(()=>{aC.isScheduled()||aC.schedule()});var EY=$g("widget-close",le.close,p(2413,null)),kY=$g("goto-previous-location",le.arrowUp,p(2414,null)),SY=$g("goto-next-location",le.arrowDown,p(2415,null)),$Y=Jt.modify(le.sync,"spin"),CY=Jt.modify(le.loading,"spin"),IY=p(4294,null),PY=$g("default-view-icon",le.window,p(4295,null)),Cg;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Cg||(Cg={}));var cC;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(cC||(cC={}));var v_=class extends K{constructor(){super(...arguments),this.c=this.B(new P),this.onDidRegister=this.c.event,this.f=this.B(new P),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,r){const i=this.get(e.id);if(i)return i;const s=e;return s.openCommandActionDescriptor=r?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},gP(this.g,t,[]).push(s),r?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const r=this.g.get(t),i=r?.indexOf(e);if(i!==-1){r?.splice(i,1),r.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(r=>r?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};er.add(Cg.ViewContainersRegistry,new v_);var Ig;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Ig||(Ig={}));function w_(e,t){const r=e.group??Ig.More,i=t.group??Ig.More;return r!==i?r.localeCompare(i):(e.order??5)-(t.order??5)}var b_=class extends K{constructor(){super(...arguments),this.c=this.B(new P),this.onViewsRegistered=this.c.event,this.f=this.B(new P),this.onViewsDeregistered=this.f.event,this.g=this.B(new P),this.onDidChangeContainer=this.g.event,this.h=this.B(new P),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new h4}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:r})=>this.r(t,r)),this.c.fire(e)}deregisterViews(e,t){const r=this.s(e,t);r.length&&this.f.fire({views:r,viewContainer:t})}moveViews(e,t){for(const r of this.m.keys())if(r!==t){const i=this.s(e,r);i.length&&(this.r(i,t),this.g.fire({views:i,from:r,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const r=(this.m.get(t)||[]).filter(i=>i.id===e)[0];if(r)return r}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),te(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const r=new Map;for(const[i,s]of t)this.n.add(e,s),r.set(i,te(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),r}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,r=>t.push(r)),t.sort(w_)}r(e,t){let r=this.m.get(t);r||(r=[],this.m.set(t,r),this.j.push(t));for(const i of e){if(this.getView(i.id)!==null)throw new Error(p(4296,null,i.id));r.push(i)}}s(e,t){const r=this.m.get(t);if(!r)return[];const i=[],s=[];for(const n of r)e.includes(n)?i.push(n):s.push(n);return i.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),i}};er.add(Cg.ViewsRegistry,new b_);var DY=J("viewDescriptorService"),lC;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(lC||(lC={}));var uC;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(uC||(uC={}));var js=class extends Error{constructor(e){super(p(4297,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},y_=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function hC(e,t){if(Pe(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let r;return Array.isArray(e.highlights)&&(r=e.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),r=r.length?r:void 0),{label:e.label,highlights:r}}}var x_=class extends K{constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=new Map,this.b=new y_;function i(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>i(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>i(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,r){const i=this.createTreeView(e,{treeDataProvider:t},r);return{dispose:()=>i.dispose()}}createTreeView(e,t,r){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const i=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,r),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:i,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return L(r,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return L(r,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){Jn(h)&&L(r,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&Cv.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,d)=>a.reveal(h,d),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const r=this.a.get(e);if(!r)return Promise.reject(new js(e));if(!t){const s=await r.getChildren();return s?[[0,...s]]:void 0}const i=[];for(let s=0;s<t.length;s++){const n=t[s],o=await r.getChildren(n);o&&i.push([s,...o])}return i}async $handleDrop(e,t,r,i,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new js(e));const l=En.toDataTransfer(r,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,i,s)}async j(e,t,r,i,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(r,e,i);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,r,i){const s=this.a.get(e);if(!s)return Promise.reject(new js(e));const n=await this.j(new Hl,s,t,i,r);if(!(!n||i.isCancellationRequested))return En.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new js(e);return t.hasResolve}$resolve(e,t,r){const i=this.a.get(e);if(!i)throw new js(e);return i.resolveTreeItem(t,r)}$setExpanded(e,t,r){const i=this.a.get(e);if(!i)throw new js(e);i.setExpanded(t,r)}$setSelectionAndFocus(e,t,r){const i=this.a.get(e);if(!i)throw new js(e);i.setSelectionAndFocus(t,r)}$setVisible(e,t){const r=this.a.get(e);if(!r){if(!t)return;throw new js(e)}r.setVisible(t)}$changeCheckboxState(e,t){const r=this.a.get(e);if(!r)throw new js(e);r.setCheckboxState(t)}m(e,t,r){const i=this.B(new E_(e,t,this.f,this.g.converter,this.h,r));return this.a.set(e,i),i}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},E_=class Yy extends K{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!yt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,r,i,s,n,o){if(super(),this.I=t,this.J=i,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new P),this.onDidExpandElement=this.u.event,this.w=this.B(new P),this.onDidCollapseElement=this.w.event,this.y=this.B(new P),this.onDidChangeSelection=this.y.event,this.z=this.B(new P),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new P),this.onDidChangeVisibility=this.C.event,this.D=this.B(new P),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new P),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new rt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=r.treeDataProvider,this.g=r.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=je.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(d=>c=d),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const d=c;return a=null,this.$(h).then(()=>d())})),u&&this.J.$setMessage(this.I,Ce.fromStrict(this.O)??"")}))}async getChildren(t){const r=t?this.getExtensionElement(t):void 0;if(t&&!r)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let i=this.X(t);return i||(i=await this.Y(r)),i?i.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,r){r=r||{select:!0,focus:!1};const i=yt(r.select)?!0:r.select,s=yt(r.focus)?!1:r.focus,n=yt(r.expand)?!1:r.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:i,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=lp.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,r){const i=this.getExtensionElement(t);i&&(r?this.u.fire(Object.freeze({element:i})):this.w.fire(Object.freeze({element:i})))}setSelectionAndFocus(t,r){const i=!Fi(this.s,t);this.s=t;const s=this.t!==r;this.t=r,i&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const r=(await Promise.all(t.map(async i=>{const s=this.getExtensionElement(i.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:i.newState?Gi.Checked:Gi.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);r.forEach(i=>{i.treeItem.checkboxState=i.newState?Gi.Checked:Gi.Unchecked}),this.D.fire({items:r.map(i=>[i.extensionItem,i.newState])})}async handleDrag(t,r,i){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,r,i),r}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,r,i){const s=r?this.getExtensionElement(r):void 0;if(!(!s&&r||!this.g?.handleDrop))return sr(()=>this.g?.handleDrop?this.g.handleDrop(s,t,i):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,r){if(!this.f.resolveTreeItem)return;const i=this.j.get(t);if(i){const s=this.m.get(i);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,i,r)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(r=>r?this.S(r).then(i=>this.W(r,i[i.length-1]).then(s=>(i.push(s),i))):Promise.resolve([]))}U(t){const r=this.m.get(t);return r?Promise.resolve(r.parent?this.j.get(r.parent.item.handle):void 0):sr(()=>this.f.getParent(t))}W(t,r){const i=this.m.get(t);return i?Promise.resolve(i):sr(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,r,!0)).then(s=>this.getChildren(r?r.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let r;if(typeof t=="string"){const i=this.getExtensionElement(t);r=i?this.m.get(i):void 0}else r=t;return r&&r.children||void 0}return this.h}async Y(t){this.rb(t);const r=new rt(this.Z.token);try{const i=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(r.token.isCancellationRequested)return;const n=St(s||[]),o=await Promise.all(St(n).map(c=>this.f.getTreeItem(c)));if(r.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,i):null);return St(a)}finally{r.dispose()}}$(t){if(t.some(i=>!i))return this.Z.dispose(!0),this.Z=new rt,this.tb(),this.J.$refresh(this.I);{const i=this.ab(t);if(i.length)return this.bb(i)}return Promise.resolve(void 0)}ab(t){const r=new Set,i=t.map(n=>this.m.get(n));for(const n of i)if(n&&!r.has(n.item.handle)){let o=n;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&r.add(n.item.handle)}const s=[];return r.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!r.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const r={};return Promise.all(t.map(i=>this.cb(i).then(s=>{s&&(r[i]=s.item)}))).then(()=>Object.keys(r).length?this.J.$refresh(this.I,r):void 0)}cb(t){const r=this.getExtensionElement(t);if(r){const i=this.m.get(r);if(i)return this.rb(r),sr(()=>this.f.getTreeItem(r)).then(s=>{if(s){const n=this.ib(r,s,i.parent);return this.pb(r,n,i,i.parent),i.dispose(),n}return null})}return Promise.resolve(null)}db(t,r,i){const s=this.ib(t,r,i);if(r.id&&this.j.has(s.item.handle))throw new Error(p(2765,null,r.id));return this.ob(t,s),this.qb(s,i),s}eb(t){return Mr.isMarkdownString(t)?Ce.from(t):t}fb(t,r){return r?{...this.L.toInternal(r,t),originalId:r.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let r,i,s;return typeof t.checkboxState=="number"?r=t.checkboxState:(r=t.checkboxState.state,i=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:r===Gi.Checked,tooltip:i,accessibilityInformation:s}}hb(t){if(!ff.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,r,i){this.hb(r);const s=this.B(new he),n=this.kb(t,r,i),o=this.lb(r);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:hC(r.label,this.N),description:r.description,resourceUri:r.resourceUri,tooltip:this.eb(r.tooltip),command:this.fb(s,r.command),contextValue:r.contextValue,icon:o,iconDark:this.mb(r)||o,themeIcon:this.jb(r),collapsibleState:yt(r.collapsibleState)?po.None:r.collapsibleState,accessibilityInformation:r.accessibilityInformation,checkbox:this.gb(r)},extensionItem:r,parent:i,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof nr?t.iconPath:void 0}kb(t,{id:r,label:i,resourceUri:s},n,o){if(r)return`${Yy.b}/${r}`;const a=hC(i,this.N),c=n?n.item.handle:Yy.a;let l=a?a.label:s?ji(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let d,f=0;do{if(d=`${c}/${f}:${l}`,o||!this.j.has(d)||u===d)break;f++}while(f<=h.length);return d}lb(t){if(t.iconPath&&!(t.iconPath instanceof nr))return typeof t.iconPath=="string"||x.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof nr)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return x.isUri(t)?t:x.file(t)}ob(t,r){this.j.set(r.item.handle,t),this.m.set(t,r)}pb(t,r,i,s){this.j.delete(r.item.handle),this.m.delete(t),r.item.handle!==i.item.handle&&this.j.delete(i.item.handle),this.ob(t,r);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===i.item.handle)[0];o&&n.splice(n.indexOf(o),1,r)}qb(t,r){r?(r.children||(r.children=[]),r.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}r.children=void 0}}else this.tb()}sb(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(r.item.handle),r.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},k_=class EI{static{this.a=new Set([V.http,V.https])}constructor(t){this.c=new Map,this.b=t.getProxy(Q.MainThreadUriOpeners)}registerExternalUriOpener(t,r,i,s){if(this.c.has(r))throw new Error(`Opener with id '${r}' already registered`);const n=s.schemes.find(o=>!EI.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(r,i),this.b.$registerUriOpener(r,s.schemes,t,s.label),te(()=>{this.c.delete(r),this.b.$unregisterUriOpener(r)})}async $canOpenUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=x.revive(r);return s.canOpenExternalUri(n,i)}async $openUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(x.revive(r.resolvedUri),{sourceUri:x.revive(r.sourceUri)},i)}},S_=class kI{static{this.a=0}constructor(t){this.c=new Kn,this.d=new Map,this.b=t.getProxy(Q.MainThreadUrls)}registerUriHandler(t,r){const i=t.identifier;if(this.c.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const s=kI.a++;return this.c.add(i),this.d.set(s,r),this.b.$registerUriHandler(s,i,t.displayName||t.name),te(()=>{this.c.delete(i),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,r){const i=this.d.get(t);if(!i)return Promise.resolve(void 0);try{i.handleUri(x.revive(r))}catch(s){pt(s)}return Promise.resolve(void 0)}async createAppUri(t){return x.revive(await this.b.$createAppUri(t))}},$_=class extends K{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,r,i){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new P),this.onDidDispose=this.#d.event,this.#h=this.B(new P),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#i=r,this.#r=i.viewType,this.#n=i.panelOptions,this.#o=i.viewColumn,this.#s=i.title,this.#l=i.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#i.dispose(),super.dispose())}get webview(){return this.c(),this.#i}get viewType(){return this.c(),this.#r}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,x.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Ut.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},C_=class SI extends K{static c(){return Ft()}constructor(t,r,i){super(),this.j=r,this.m=i,this.g=new Map,this.h=new Map,this.f=t.getProxy(Q.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,r,i,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Ut.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=mc(t),l=SI.c();this.f.$createWebviewPanel(hg(t),l,r,{title:i,panelOptions:I_(n),webviewOptions:h$(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,r,i,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const r=Object.keys(t);r.sort((i,s)=>{const n=t[i],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const i of r){const s=this.getWebviewPanel(i);if(!s)continue;const n=t[i];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Ut.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,r,i){if(this.h.has(r))throw new Error(`Serializer for '${r}' already registered`);return this.h.set(r,{serializer:i,extension:t}),this.f.$registerSerializer(r,{serializeBuffersForPostMessage:mc(t)}),new Te(()=>{this.h.delete(r),this.f.$unregisterSerializer(r)})}async $deserializeWebviewPanel(t,r,i,s){const n=this.h.get(r);if(!n)throw new Error(`No serializer found for '${r}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,i.webviewOptions,a),l=this.createNewWebviewPanel(t,r,i.title,s,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(t,r,i,s,n,o,a){const c=new $_(t,this.f,o,{viewType:r,title:i,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function I_(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var P_=class extends K{#e;#t;#r;#i;#n;#s;#a;#o;#c;constructor(e,t,r,i,s,n){super(),this.#n=!1,this.#l=this.B(new P),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new P),this.onDidDispose=this.#u.event,this.#r=r,this.#a=i,this.#e=e,this.#t=t,this.#i=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#i.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#i}get viewType(){return this.#r}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=lp.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},D_=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(Q.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,r,i){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:r,extension:e}),this.a.$registerWebviewViewProvider(hg(e),t,{retainContextWhenHidden:i?.retainContextWhenHidden,serializeBuffersForPostMessage:mc(e)}),new Te(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new P_(e,this.a,t,r,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:i},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},AY=new H("debugType",void 0,{type:"string",description:p(6106,null)}),TY=new H("debugConfigurationType",void 0,{type:"string",description:p(6107,null)}),RY=new H("debugState","inactive",{type:"string",description:p(6108,null)}),A_="debugUx",LY=new H(A_,"default",{type:"string",description:p(6109,null)}),NY=new H("hasDebugged",!1,{type:"boolean",description:p(6110,null)}),FY=new H("inDebugMode",!1,{type:"boolean",description:p(6111,null)}),OY=new H("inDebugRepl",!1,{type:"boolean",description:p(6112,null)}),MY=new H("breakpointWidgetVisible",!1,{type:"boolean",description:p(6113,null)}),UY=new H("inBreakpointWidget",!1,{type:"boolean",description:p(6114,null)}),jY=new H("breakpointsFocused",!0,{type:"boolean",description:p(6115,null)}),HY=new H("watchExpressionsFocused",!0,{type:"boolean",description:p(6116,null)}),BY=new H("watchExpressionsExist",!1,{type:"boolean",description:p(6117,null)}),_Y=new H("variablesFocused",!0,{type:"boolean",description:p(6118,null)}),zY=new H("expressionSelected",!1,{type:"boolean",description:p(6119,null)}),WY=new H("breakpointInputFocused",!1,{type:"boolean",description:p(6120,null)}),VY=new H("callStackItemType",void 0,{type:"string",description:p(6121,null)}),qY=new H("callStackSessionIsAttach",!1,{type:"boolean",description:p(6122,null)}),GY=new H("callStackItemStopped",!1,{type:"boolean",description:p(6123,null)}),JY=new H("callStackSessionHasOneThread",!1,{type:"boolean",description:p(6124,null)}),QY=new H("callStackFocused",!0,{type:"boolean",description:p(6125,null)}),YY=new H("watchItemType",void 0,{type:"string",description:p(6126,null)}),XY=new H("canViewMemory",void 0,{type:"boolean",description:p(6127,null)}),ZY=new H("breakpointItemType",void 0,{type:"string",description:p(6128,null)}),KY=new H("breakpointItemBytes",void 0,{type:"boolean",description:p(6129,null)}),eX=new H("breakpointHasModes",!1,{type:"boolean",description:p(6130,null)}),tX=new H("breakpointSupportsCondition",!1,{type:"boolean",description:p(6131,null)}),rX=new H("loadedScriptsSupported",!1,{type:"boolean",description:p(6132,null)}),iX=new H("loadedScriptsItemType",void 0,{type:"string",description:p(6133,null)}),sX=new H("focusedSessionIsAttach",!1,{type:"boolean",description:p(6134,null)}),nX=new H("focusedSessionIsNoDebug",!1,{type:"boolean",description:p(6135,null)}),oX=new H("stepBackSupported",!1,{type:"boolean",description:p(6136,null)}),aX=new H("restartFrameSupported",!1,{type:"boolean",description:p(6137,null)}),cX=new H("stackFrameSupportsRestart",!1,{type:"boolean",description:p(6138,null)}),lX=new H("jumpToCursorSupported",!1,{type:"boolean",description:p(6139,null)}),uX=new H("stepIntoTargetsSupported",!1,{type:"boolean",description:p(6140,null)}),hX=new H("breakpointsExist",!1,{type:"boolean",description:p(6141,null)}),dX=new H("debuggersAvailable",!1,{type:"boolean",description:p(6142,null)}),fX=new H("debugExtensionAvailable",!0,{type:"boolean",description:p(6143,null)}),pX=new H("debugProtocolVariableMenuContext",void 0,{type:"string",description:p(6144,null)}),gX=new H("debugSetVariableSupported",!1,{type:"boolean",description:p(6145,null)}),mX=new H("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:p(6146,null)}),vX=new H("debugSetExpressionSupported",!1,{type:"boolean",description:p(6147,null)}),wX=new H("breakWhenValueChangesSupported",!1,{type:"boolean",description:p(6148,null)}),bX=new H("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:p(6149,null)}),yX=new H("breakWhenValueIsReadSupported",!1,{type:"boolean",description:p(6150,null)}),xX=new H("terminateDebuggeeSupported",!1,{type:"boolean",description:p(6151,null)}),EX=new H("suspendDebuggeeSupported",!1,{type:"boolean",description:p(6152,null)}),kX=new H("variableEvaluateNamePresent",!1,{type:"boolean",description:p(6153,null)}),SX=new H("variableIsReadonly",!1,{type:"boolean",description:p(6154,null)}),$X=new H("variableValue",!1,{type:"string",description:p(6155,null)}),CX=new H("variableType",!1,{type:"string",description:p(6156,null)}),IX=new H("variableInterfaces",!1,{type:"array",description:p(6157,null)}),PX=new H("variableName",!1,{type:"string",description:p(6158,null)}),DX=new H("variableLanguage",!1,{type:"string",description:p(6159,null)}),AX=new H("variableExtensionId",!1,{type:"string",description:p(6160,null)}),TX=new H("exceptionWidgetVisible",!1,{type:"boolean",description:p(6161,null)}),RX=new H("multiSessionRepl",!1,{type:"boolean",description:p(6162,null)}),LX=new H("multiSessionDebug",!1,{type:"boolean",description:p(6163,null)}),NX=new H("disassembleRequestSupported",!1,{type:"boolean",description:p(6164,null)}),FX=new H("disassemblyViewFocus",!1,{type:"boolean",description:p(6165,null)}),OX=new H("languageSupportsDisassembleRequest",!1,{type:"boolean",description:p(6166,null)}),MX=new H("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:p(6167,null)}),UX={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:p(6169,null)},dC;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(dC||(dC={}));var fC;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(fC||(fC={}));var pC;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(pC||(pC={}));var Pg;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Pg||(Pg={}));var gC;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(gC||(gC={}));var jX=J("debugService"),mC;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(mC||(mC={}));var vC;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(vC||(vC={}));var wC;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(wC||(wC={}));var bC;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(bC||(bC={}));var yC;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:x.revive(t.iconPath.light),dark:x.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(yC||(yC={}));var T_=class $I{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(Q.MainThreadCodeMapper)}async $mapCode(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Array.isArray(l)?l:[l],this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(jt.from)})}},o={codeBlocks:r.codeBlocks.map(c=>({code:c.code,resource:x.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock})),conversation:r.conversation.map(c=>c.type==="request"?{type:"request",message:c.message}:{type:"response",message:c.message,result:c.result?kn.to(c.result):void 0,references:c.references?.map(Za.to)})};return await s.provideMappedEdits(o,n,i)??null}registerMappedEditsProvider(t,r){const i=$I.a++;return this.b.$registerCodeMapperProvider(i),this.c.set(i,r),{dispose:()=>this.b.$unregisterCodeMapperProvider(i)}}};function R_(e){const t=e.get(Ot),r=e.get(ca),i=e.get(Cu),s=e.get(Ns),n=e.get(Si),o=e.get(Op),a=e.get(ti),c=e.get(nl),l=e.get(Ae),u=e.get(ew),h=e.get(rw),d=e.get(oa),f=e.get($e),g=e.get(Np),v=e.get(Nu),y=e.get(pS),E=e.get(kw),k=e.get(dc),I=e.get(Cw),D=e.get(fw),T=e.get(gw);l.set(re.ExtHostFileSystemInfo,r),l.set(re.ExtHostLogLevelServiceShape,d),l.set(re.ExtHostWorkspace,n),l.set(re.ExtHostConfiguration,a),l.set(re.ExtHostExtensionService,s),l.set(re.ExtHostStorage,u),l.set(re.ExtHostTunnelService,g),l.set(re.ExtHostWindow,y),l.set(re.ExtHostSecretState,E),l.set(re.ExtHostTelemetry,o),l.set(re.ExtHostEditorTabs,k),l.set(re.ExtHostManagedSockets,I),l.set(re.ExtHostAuthentication,D),l.set(re.ExtHostChatProvider,T);const _=l.set(re.ExtHostDecorations,e.get(O8)),q=l.set(re.ExtHostDocumentsAndEditors,e.get(Po)),W=l.set(re.ExtHostCommands,e.get($i)),U=l.set(re.ExtHostTerminalService,e.get(Ls)),ne=l.set(re.ExtHostTerminalShellIntegration,e.get(sb)),ce=l.set(re.ExtHostDebugService,e.get(Zw)),ve=l.set(re.ExtHostSearch,e.get(tb)),We=l.set(re.ExtHostTask,e.get(Qw)),G=l.set(re.ExtHostOutputService,e.get(F8)),B=l.set(re.ExtHostLocalization,e.get($w)),Z=l.set(re.ExtHostUrls,new S_(l)),z=l.set(re.ExtHostDocuments,new zH(l,q)),ae=l.set(re.ExtHostDocumentContentProviders,new BH(l,q,f)),ye=l.set(re.ExtHostDocumentSaveParticipant,new _H(f,z,l.getProxy(Q.MainThreadBulkEdits))),de=l.set(re.ExtHostNotebook,new UB(l,W,q,z,i,ve,f)),et=l.set(re.ExtHostNotebookDocuments,new HB(de)),Qe=l.set(re.ExtHostNotebookEditors,new Gb(f,de)),Rt=l.set(re.ExtHostNotebookKernels,new Jb(l,t,de,W,f)),Dt=l.set(re.ExtHostNotebookRenderers,new qB(l,de)),Qt=l.set(re.ExtHostNotebookDocumentSaveParticipant,new jB(f,de,l.getProxy(Q.MainThreadBulkEdits))),at=l.set(re.ExtHostEditors,new d_(l,q)),or=l.set(re.ExtHostTreeViews,new x_(l.getProxy(Q.MainThreadTreeViews),W,f)),Vs=l.set(re.ExtHostEditorInsets,new yH(l.getProxy(Q.MainThreadEditorInsets),at,t.remote)),rs=l.set(re.ExtHostDiagnostics,new $b(l,f,r,q)),Rn=l.set(re.ExtHostLanguages,new gB(l,z,W.converter,c)),ke=l.set(re.ExtHostLanguageFeatures,new dB(l,c,z,W,rs,f,v,o)),is=l.set(re.ExtHostCodeMapper,new T_(l)),_e=l.set(re.ExtHostFileSystem,new XH(l,ke)),Ri=l.set(re.ExtHostFileSystemEventService,new aB(l,f,q)),Qr=l.set(re.ExtHostQuickOpen,XB(l,n,W)),Yr=l.set(re.ExtHostSCM,new ey(l,W,z,f)),Bo=l.set(re.ExtHostQuickDiff,new YB(l,c)),_o=l.set(re.ExtHostShare,new a_(l,c)),Ac=l.set(re.ExtHostComments,xH(l,W,z)),Tc=l.set(re.ExtHostProgress,new JB(l.getProxy(Q.MainThreadProgress))),Rc=l.set(re.ExtHostLabelService,new lB(l)),zo=l.set(re.ExtHostTheming,new ty(l)),Wo=l.set(re.ExtHostTimeline,new f_(l,W)),ar=l.set(re.ExtHostWebviews,new AH(l,t.remote,n,f,v)),ss=l.set(re.ExtHostWebviewPanels,new C_(l,ar,n)),vt=l.set(re.ExtHostCustomEditors,new OH(l,z,h,ar,ss)),ir=l.set(re.ExtHostWebviewViews,new D_(l,ar)),qs=l.set(re.ExtHostTesting,e.get(Hu)),im=l.set(re.ExtHostUriOpeners,new k_(l)),Vo=l.set(re.ExtHostProfileContentHandlers,new GB(l));l.set(re.ExtHostInteractive,new cB(l,de,q,W,f));const ns=l.set(re.ExtHostChatAgents2,new dH(l,f,W,z,T)),C=l.set(re.ExtHostChatVariables,new gH(l)),R=l.set(re.ExtHostLanguageModelTools,new pB(l)),F=l.set(re.ExtHostAiRelatedInformation,new sH(l)),ue=l.set(re.ExtHostAiEmbeddingVector,new VH(l)),be=l.set(re.ExtHostStatusBar,new h_(l,W.converter)),Bt=l.set(re.ExtHostSpeech,new c_(l)),Oe=l.set(re.ExtHostEmbeddings,new WH(l)),cr=Object.values(re);l.assertRegistered(cr);const Et=new kb(l,q),Yt=new vH(l),Dr=new Fb(l,f),wt=new HH(l);return lH.register(W),function(S,kt,pr){function j(w){return(b,$,we)=>{const Ye=w(Lt=>{try{b.call($,Lt)}catch(Lc){cm(new Error(`[ExtensionListenerError] Extension '${S.identifier.value}' FAILED to handle event: ${Lc.toString()}`,{cause:Lc})),o.onExtensionError(S.identifier,Lc)}});return we?.push(Ye),Ye}}const ee=function(){let w=!S.isUnderDevelopment;function b(){w||(f.info(`Extension '${S.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),w=!0)}return function $(we){if(Array.isArray(we))we.forEach($);else if(typeof we=="string")b();else{const Ye=we;typeof Ye.scheme>"u"&&b(),typeof Ye.exclusive=="boolean"&&L(S,"documentFiltersExclusive")}return we}}(),ct={getSession(w,b,$){return typeof $?.forceNewSession=="object"&&$.forceNewSession.learnMore&&L(S,"authLearnMore"),D.getSession(S,w,b,$)},getAccounts(w){return D.getAccounts(w)},async hasSession(w,b){return L(S,"authSession"),!!await D.getSession(S,w,b,{silent:!0})},get onDidChangeSessions(){return j(D.getExtensionScopedSessionsEvent(S.identifier.value))},registerAuthenticationProvider(w,b,$,we){return D.registerAuthenticationProvider(w,b,$,we)}},ft={registerCommand(w,b,$){return W.registerCommand(!0,w,b,$,void 0,S)},registerTextEditorCommand(w,b,$){return W.registerCommand(!0,w,(...we)=>{const Ye=at.getActiveTextEditor();if(!Ye){f.warn("Cannot execute "+w+" because there is no active text editor.");return}return Ye.edit(Lt=>{b.apply($,[Ye,Lt,...we])}).then(Lt=>{Lt||f.warn("Edits from command "+w+" were not applied.")},Lt=>{f.warn("An error occurred while running command "+w,Lt)})},void 0,void 0,S)},registerDiffInformationCommand:(w,b,$)=>(L(S,"diffCommand"),W.registerCommand(!0,w,async(...we)=>{const Ye=q.activeEditor(!0);if(!Ye){f.warn("Cannot execute "+w+" because there is no active text editor.");return}const Lt=await at.getDiffInformation(Ye.id);b.apply($,[Lt,...we])},void 0,void 0,S)),executeCommand(w,...b){return W.executeCommand(w,...b)},getCommands(w=!1){return W.getCommands(w)}},_t={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Yt.value},get shell(){return U.getDefaultShell(!1)},get onDidChangeShell(){return j(U.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return j(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return L(S,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return L(S,"telemetry"),j(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return G9(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(w,b){return q9.validateSender(w),o.instantiateLogger(S,w,b)},openExternal(w,b){return y.openUri(w,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(w){if(w.scheme===t.environment.appUriScheme)return Z.createAppUri(w);try{return await y.asExternalUri(w,{allowTunneling:!!t.remote.authority})}catch(b){if(Dm(w,V.http)||Dm(w,V.https))return w;throw b}},get remoteName(){return H1(t.remote.authority)},get remoteAuthority(){return L(S,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return j(f.onDidChangeLogLevel)},get appQuality(){return L(S,"resolvers"),t.quality},get appCommit(){return L(S,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(_t);const vh={createTestController(w,b,$){return qs.createTestController(S,w,b,$)},createTestObserver(){return L(S,"testObserver"),qs.createTestObserver()},runTests(w){return L(S,"testObserver"),qs.runTests(w)},registerTestFollowupProvider(w){return L(S,"testObserver"),qs.registerTestFollowupProvider(w)},get onDidChangeTestResults(){return L(S,"testObserver"),j(qs.onResultsChanged)},get testResults(){return L(S,"testObserver"),qs.results}},Li=t.remote.isRemote?vo.Workspace:vo.UI,Ln={getExtension(w,b){Vt(S,"extensionsAny")||(b=!1);const $=kt.mine.getExtensionDescription(w);if($)return new Tu(s,S.identifier,$,Li,!1);if(b){const we=kt.all.getExtensionDescription(w);if(we)return new Tu(s,S.identifier,we,Li,!0)}},get all(){const w=[];for(const b of kt.mine.getAllExtensionDescriptions())w.push(new Tu(s,S.identifier,b,Li,!1));return w},get allAcrossExtensionHosts(){L(S,"extensionsAny");const w=new Kn(kt.mine.getAllExtensionDescriptions().map($=>$.identifier)),b=[];for(const $ of kt.all.getAllExtensionDescriptions()){const we=!w.has($.identifier);b.push(new Tu(s,S.identifier,$,Li,we))}return b},get onDidChange(){return Vt(S,"extensionsAny")?j(je.any(kt.mine.onDidChange,kt.all.onDidChange)):j(kt.mine.onDidChange)}},II={createDiagnosticCollection(w){return rs.createDiagnosticCollection(S.identifier,w)},get onDidChangeDiagnostics(){return j(rs.onDidChangeDiagnostics)},getDiagnostics:w=>rs.getDiagnostics(w),getLanguages(){return Rn.getLanguages()},setTextDocumentLanguage(w,b){return Rn.changeLanguage(w.uri,b)},match(w,b){const $=x0.from(w);let we;return KS($)&&(we=de.notebookDocuments.find(Ye=>Ye.apiNotebook.getCells().find(Lt=>Lt.document===b))?.apiNotebook),ZS($,b.uri,b.languageId,!0,we?.uri,we?.notebookType)},registerCodeActionsProvider(w,b,$){return ke.registerCodeActionProvider(S,ee(w),b,$)},registerDocumentPasteEditProvider(w,b,$){return L(S,"documentPaste"),ke.registerDocumentPasteEditProvider(S,ee(w),b,$)},registerCodeLensProvider(w,b){return ke.registerCodeLensProvider(S,ee(w),b)},registerDefinitionProvider(w,b){return ke.registerDefinitionProvider(S,ee(w),b)},registerDeclarationProvider(w,b){return ke.registerDeclarationProvider(S,ee(w),b)},registerImplementationProvider(w,b){return ke.registerImplementationProvider(S,ee(w),b)},registerTypeDefinitionProvider(w,b){return ke.registerTypeDefinitionProvider(S,ee(w),b)},registerHoverProvider(w,b){return ke.registerHoverProvider(S,ee(w),b,S.identifier)},registerEvaluatableExpressionProvider(w,b){return ke.registerEvaluatableExpressionProvider(S,ee(w),b,S.identifier)},registerInlineValuesProvider(w,b){return ke.registerInlineValuesProvider(S,ee(w),b,S.identifier)},registerDocumentHighlightProvider(w,b){return ke.registerDocumentHighlightProvider(S,ee(w),b)},registerMultiDocumentHighlightProvider(w,b){return ke.registerMultiDocumentHighlightProvider(S,ee(w),b)},registerLinkedEditingRangeProvider(w,b){return ke.registerLinkedEditingRangeProvider(S,ee(w),b)},registerReferenceProvider(w,b){return ke.registerReferenceProvider(S,ee(w),b)},registerRenameProvider(w,b){return ke.registerRenameProvider(S,ee(w),b)},registerNewSymbolNamesProvider(w,b){return L(S,"newSymbolNamesProvider"),ke.registerNewSymbolNamesProvider(S,ee(w),b)},registerDocumentSymbolProvider(w,b,$){return ke.registerDocumentSymbolProvider(S,ee(w),b,$)},registerWorkspaceSymbolProvider(w){return ke.registerWorkspaceSymbolProvider(S,w)},registerDocumentFormattingEditProvider(w,b){return ke.registerDocumentFormattingEditProvider(S,ee(w),b)},registerDocumentRangeFormattingEditProvider(w,b){return ke.registerDocumentRangeFormattingEditProvider(S,ee(w),b)},registerOnTypeFormattingEditProvider(w,b,$,...we){return ke.registerOnTypeFormattingEditProvider(S,ee(w),b,[$].concat(we))},registerDocumentSemanticTokensProvider(w,b,$){return ke.registerDocumentSemanticTokensProvider(S,ee(w),b,$)},registerDocumentRangeSemanticTokensProvider(w,b,$){return ke.registerDocumentRangeSemanticTokensProvider(S,ee(w),b,$)},registerSignatureHelpProvider(w,b,$,...we){return typeof $=="object"?ke.registerSignatureHelpProvider(S,ee(w),b,$):ke.registerSignatureHelpProvider(S,ee(w),b,typeof $>"u"?[]:[$,...we])},registerCompletionItemProvider(w,b,...$){return ke.registerCompletionItemProvider(S,ee(w),b,$)},registerInlineCompletionItemProvider(w,b,$){return b.handleDidShowCompletionItem&&L(S,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&L(S,"inlineCompletionsAdditions"),$&&L(S,"inlineCompletionsAdditions"),ke.registerInlineCompletionsProvider(S,ee(w),b,$)},registerInlineEditProvider(w,b){return L(S,"inlineEdit"),ke.registerInlineEditProvider(S,ee(w),b)},registerDocumentLinkProvider(w,b){return ke.registerDocumentLinkProvider(S,ee(w),b)},registerColorProvider(w,b){return ke.registerColorProvider(S,ee(w),b)},registerFoldingRangeProvider(w,b){return ke.registerFoldingRangeProvider(S,ee(w),b)},registerSelectionRangeProvider(w,b){return ke.registerSelectionRangeProvider(S,w,b)},registerCallHierarchyProvider(w,b){return ke.registerCallHierarchyProvider(S,w,b)},registerTypeHierarchyProvider(w,b){return ke.registerTypeHierarchyProvider(S,w,b)},setLanguageConfiguration:(w,b)=>ke.setLanguageConfiguration(S,w,b),getTokenInformationAtPosition(w,b){return L(S,"tokenInformation"),Rn.tokenAtPosition(w,b)},registerInlayHintsProvider(w,b){return ke.registerInlayHintsProvider(S,w,b)},createLanguageStatusItem(w,b){return Rn.createLanguageStatusItem(S,w,b)},registerDocumentDropEditProvider(w,b,$){return ke.registerDocumentOnDropEditProvider(S,w,b,Vt(S,"documentPaste")?$:void 0)}},PI={get activeTextEditor(){return at.getActiveTextEditor()},get visibleTextEditors(){return at.getVisibleTextEditors()},get activeTerminal(){return U.activeTerminal},get terminals(){return U.terminals},async showTextDocument(w,b,$){x.isUri(w)&&w.scheme===V.vscodeRemote&&!w.authority&&v.report("workspace.showTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority.");const we=await(x.isUri(w)?Promise.resolve(Xy.openTextDocument(w)):Promise.resolve(w));return at.showTextDocument(we,b,$)},createTextEditorDecorationType(w){return at.createTextEditorDecorationType(S,w)},onDidChangeActiveTextEditor(w,b,$){return j(at.onDidChangeActiveTextEditor)(w,b,$)},onDidChangeVisibleTextEditors(w,b,$){return j(at.onDidChangeVisibleTextEditors)(w,b,$)},onDidChangeTextEditorSelection(w,b,$){return j(at.onDidChangeTextEditorSelection)(w,b,$)},onDidChangeTextEditorOptions(w,b,$){return j(at.onDidChangeTextEditorOptions)(w,b,$)},onDidChangeTextEditorVisibleRanges(w,b,$){return j(at.onDidChangeTextEditorVisibleRanges)(w,b,$)},onDidChangeTextEditorViewColumn(w,b,$){return j(at.onDidChangeTextEditorViewColumn)(w,b,$)},onDidChangeTextEditorDiffInformation(w,b,$){return L(S,"textEditorDiffInformation"),j(at.onDidChangeTextEditorDiffInformation)(w,b,$)},onDidCloseTerminal(w,b,$){return j(U.onDidCloseTerminal)(w,b,$)},onDidOpenTerminal(w,b,$){return j(U.onDidOpenTerminal)(w,b,$)},onDidChangeActiveTerminal(w,b,$){return j(U.onDidChangeActiveTerminal)(w,b,$)},onDidChangeTerminalDimensions(w,b,$){return L(S,"terminalDimensions"),j(U.onDidChangeTerminalDimensions)(w,b,$)},onDidChangeTerminalState(w,b,$){return j(U.onDidChangeTerminalState)(w,b,$)},onDidWriteTerminalData(w,b,$){return L(S,"terminalDataWriteEvent"),j(U.onDidWriteTerminalData)(w,b,$)},onDidExecuteTerminalCommand(w,b,$){return L(S,"terminalExecuteCommandEvent"),j(U.onDidExecuteTerminalCommand)(w,b,$)},onDidChangeTerminalShellIntegration(w,b,$){return j(ne.onDidChangeTerminalShellIntegration)(w,b,$)},onDidStartTerminalShellExecution(w,b,$){return j(ne.onDidStartTerminalShellExecution)(w,b,$)},onDidEndTerminalShellExecution(w,b,$){return j(ne.onDidEndTerminalShellExecution)(w,b,$)},get state(){return y.getState()},onDidChangeWindowState(w,b,$){return j(y.onDidChangeWindowState)(w,b,$)},showInformationMessage(w,...b){return Dr.showMessage(S,Pt.Info,w,b[0],b.slice(1))},showWarningMessage(w,...b){return Dr.showMessage(S,Pt.Warning,w,b[0],b.slice(1))},showErrorMessage(w,...b){return Dr.showMessage(S,Pt.Error,w,b[0],b.slice(1))},showQuickPick(w,b,$){return Qr.showQuickPick(S,w,b,$)},showWorkspaceFolderPick(w){return Qr.showWorkspaceFolderPick(w)},showInputBox(w,b){return Qr.showInput(w,b)},showOpenDialog(w){return wt.showOpenDialog(S,w)},showSaveDialog(w){return wt.showSaveDialog(w)},createStatusBarItem(w,b,$){let we,Ye,Lt;return typeof w=="string"?(we=w,Ye=b,Lt=$):(Ye=w,Lt=b),be.createStatusBarEntry(S,we,Ye,Lt)},setStatusBarMessage(w,b){return be.setStatusBarMessage(w,b)},withScmProgress(w){return v.report("window.withScmProgress",S,"Use 'withProgress' instead."),Tc.withProgress(S,{location:fo.SourceControl},(b,$)=>w({report(we){}}))},withProgress(w,b){return Tc.withProgress(S,w,b)},createOutputChannel(w,b){return G.createOutputChannel(w,b,S)},createWebviewPanel(w,b,$,we){return ss.createWebviewPanel(S,w,b,$,we)},createWebviewTextEditorInset(w,b,$,we){return L(S,"editorInsets"),Vs.createWebviewEditorInset(w,b,$,we,S)},createTerminal(w,b,$){return typeof w=="object"?"pty"in w?U.createExtensionTerminal(w):U.createTerminalFromOptions(w):U.createTerminal(w,b,$)},registerTerminalLinkProvider(w){return U.registerLinkProvider(w)},registerTerminalProfileProvider(w,b){return U.registerProfileProvider(S,w,b)},registerTerminalCompletionProvider(w,...b){return L(S,"terminalCompletionProvider"),U.registerTerminalCompletionProvider(S,w,...b)},registerTerminalQuickFixProvider(w,b){return L(S,"terminalQuickFixProvider"),U.registerTerminalQuickFixProvider(w,S.identifier.value,b)},registerTreeDataProvider(w,b){return or.registerTreeDataProvider(w,b,S)},createTreeView(w,b){return or.createTreeView(w,b,S)},registerWebviewPanelSerializer:(w,b)=>ss.registerWebviewPanelSerializer(S,w,b),registerCustomEditorProvider:(w,b,$={})=>vt.registerCustomEditorProvider(S,w,b,$),registerFileDecorationProvider(w){return _.registerFileDecorationProvider(w,S)},registerUriHandler(w){return Z.registerUriHandler(S,w)},createQuickPick(){return Qr.createQuickPick(S)},createInputBox(){return Qr.createInputBox(S)},get activeColorTheme(){return zo.activeColorTheme},onDidChangeActiveColorTheme(w,b,$){return j(zo.onDidChangeActiveColorTheme)(w,b,$)},registerWebviewViewProvider(w,b,$){return ir.registerWebviewViewProvider(S,w,b,$?.webviewOptions)},get activeNotebookEditor(){return de.activeNotebookEditor},onDidChangeActiveNotebookEditor(w,b,$){return j(de.onDidChangeActiveNotebookEditor)(w,b,$)},get visibleNotebookEditors(){return de.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return j(de.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(w,b,$){return j(Qe.onDidChangeNotebookEditorSelection)(w,b,$)},onDidChangeNotebookEditorVisibleRanges(w,b,$){return j(Qe.onDidChangeNotebookEditorVisibleRanges)(w,b,$)},showNotebookDocument(w,b){return de.showNotebookDocument(w,b)},registerExternalUriOpener(w,b,$){return L(S,"externalUriOpener"),im.registerExternalUriOpener(S.identifier,w,b,$)},registerProfileContentHandler(w,b){return L(S,"profileContentHandlers"),Vo.registerProfileContentHandler(S,w,b)},registerQuickDiffProvider(w,b,$,we){return L(S,"quickDiffProvider"),Bo.registerQuickDiffProvider(ee(w),b,$,we)},get tabGroups(){return k.tabGroups},registerShareProvider(w,b){return L(S,"shareProvider"),_o.registerShareProvider(ee(w),b)},get nativeHandle(){return L(S,"nativeWindowHandle"),y.nativeHandle}},Xy={get rootPath(){return v.report("workspace.rootPath",S,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(w){throw new Nn("rootPath")},getWorkspaceFolder(w){return n.getWorkspaceFolder(w)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(w){throw new Nn("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(w){throw new Nn("workspaceFile")},updateWorkspaceFolders:(w,b,...$)=>n.updateWorkspaceFolders(S,w,b||0,...$),onDidChangeWorkspaceFolders:function(w,b,$){return j(n.onDidChangeWorkspace)(w,b,$)},asRelativePath:(w,b)=>n.getRelativePath(w,b),findFiles:(w,b,$,we)=>n.findFiles(w,b,$,S.identifier,we),findFiles2:(w,b,$)=>(L(S,"findFiles2"),n.findFiles2(w,b,S.identifier,$)),findTextInFiles:(w,b,$,we)=>{L(S,"findTextInFiles");let Ye,Lt;return typeof b=="object"?(Ye=b,Lt=$):(Ye={},Lt=b,we=$),n.findTextInFiles(w,Ye||{},Lt,S.identifier,we)},findTextInFiles2:(w,b,$)=>(L(S,"findTextInFiles2"),L(S,"textSearchProvider2"),n.findTextInFiles2(w,b,S.identifier,$)),save:w=>n.save(w),saveAs:w=>n.saveAs(w),saveAll:w=>n.saveAll(w),applyEdit(w,b){return Et.applyWorkspaceEdit(w,S,b)},createFileSystemWatcher:(w,b,$,we)=>{let Ye;return b&&typeof b!="boolean"?(L(S,"createFileSystemWatcher"),Ye={...b,correlate:!0}):Ye={ignoreCreateEvents:!!b,ignoreChangeEvents:!!$,ignoreDeleteEvents:!!we,correlate:!1},Ri.createFileSystemWatcher(n,pr,S,w,Ye)},get textDocuments(){return z.getAllDocumentData().map(w=>w.document)},set textDocuments(w){throw new Nn("textDocuments")},openTextDocument(w){let b;const $=w;if(typeof w=="string")b=Promise.resolve(x.file(w));else if(x.isUri(w))b=Promise.resolve(w);else if(!$||typeof $=="object")b=z.createDocumentData($);else throw new Error("illegal argument - uriOrFileNameOrOptions");return b.then(we=>(f.trace(`openTextDocument from ${S.identifier}`),we.scheme===V.vscodeRemote&&!we.authority&&v.report("workspace.openTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority."),z.ensureDocumentData(we).then(Ye=>Ye.document)))},onDidOpenTextDocument:(w,b,$)=>j(z.onDidAddDocument)(w,b,$),onDidCloseTextDocument:(w,b,$)=>j(z.onDidRemoveDocument)(w,b,$),onDidChangeTextDocument:(w,b,$)=>j(z.onDidChangeDocument)(w,b,$),onDidSaveTextDocument:(w,b,$)=>j(z.onDidSaveDocument)(w,b,$),onWillSaveTextDocument:(w,b,$)=>j(ye.getOnWillSaveTextDocumentEvent(S))(w,b,$),get notebookDocuments(){return de.notebookDocuments.map(w=>w.apiNotebook)},async openNotebookDocument(w,b){let $;if(x.isUri(w))$=w,await de.openNotebookDocument(w);else if(typeof w=="string")$=x.revive(await de.createNotebookDocument({viewType:w,content:b}));else throw new Error("Invalid arguments");return de.getNotebookDocument($).apiNotebook},onDidSaveNotebookDocument(w,b,$){return j(et.onDidSaveNotebookDocument)(w,b,$)},onDidChangeNotebookDocument(w,b,$){return j(et.onDidChangeNotebookDocument)(w,b,$)},onWillSaveNotebookDocument(w,b,$){return j(Qt.getOnWillSaveNotebookDocumentEvent(S))(w,b,$)},get onDidOpenNotebookDocument(){return j(de.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return j(de.onDidCloseNotebookDocument)},registerNotebookSerializer(w,b,$,we){return de.registerNotebookSerializer(S,w,b,$,Vt(S,"notebookLiveShare")?we:void 0)},onDidChangeConfiguration:(w,b,$)=>j(pr.onDidChangeConfiguration)(w,b,$),getConfiguration(w,b){return b=arguments.length===1?void 0:b,pr.getConfiguration(w,b,S)},registerTextDocumentContentProvider(w,b){return ae.registerTextDocumentContentProvider(w,b)},registerTaskProvider:(w,b)=>(v.report("window.registerTaskProvider",S,"Use the corresponding function on the 'tasks' namespace instead"),We.registerTaskProvider(S,w,b)),registerFileSystemProvider(w,b,$){return d4(_e.registerFileSystemProvider(S,w,b,$),i.addFileSystemProvider(w,b,$))},get fs(){return i.value},registerFileSearchProvider:(w,b)=>(L(S,"fileSearchProvider"),ve.registerFileSearchProviderOld(w,b)),registerTextSearchProvider:(w,b)=>(L(S,"textSearchProvider"),ve.registerTextSearchProviderOld(w,b)),registerAITextSearchProvider:(w,b)=>(L(S,"aiTextSearchProvider"),L(S,"textSearchProvider2"),ve.registerAITextSearchProvider(w,b)),registerFileSearchProvider2:(w,b)=>(L(S,"fileSearchProvider2"),ve.registerFileSearchProvider(w,b)),registerTextSearchProvider2:(w,b)=>(L(S,"textSearchProvider2"),ve.registerTextSearchProvider(w,b)),registerRemoteAuthorityResolver:(w,b)=>(L(S,"resolvers"),s.registerRemoteAuthorityResolver(w,b)),registerResourceLabelFormatter:w=>(L(S,"resolvers"),Rc.$registerResourceLabelFormatter(w)),getRemoteExecServer:w=>(L(S,"resolvers"),s.getRemoteExecServer(w)),onDidCreateFiles:(w,b,$)=>j(Ri.onDidCreateFile)(w,b,$),onDidDeleteFiles:(w,b,$)=>j(Ri.onDidDeleteFile)(w,b,$),onDidRenameFiles:(w,b,$)=>j(Ri.onDidRenameFile)(w,b,$),onWillCreateFiles:(w,b,$)=>j(Ri.getOnWillCreateFileEvent(S))(w,b,$),onWillDeleteFiles:(w,b,$)=>j(Ri.getOnWillDeleteFileEvent(S))(w,b,$),onWillRenameFiles:(w,b,$)=>j(Ri.getOnWillRenameFileEvent(S))(w,b,$),openTunnel:w=>(L(S,"tunnels"),g.openTunnel(S,w).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return L(S,"tunnels"),g.getTunnels()},onDidChangeTunnels:(w,b,$)=>(L(S,"tunnels"),j(g.onDidChangeTunnels)(w,b,$)),registerPortAttributesProvider:(w,b)=>(L(S,"portsAttributes"),g.registerPortsAttributesProvider(w,b)),registerTunnelProvider:(w,b)=>(L(S,"tunnelFactory"),g.registerTunnelProvider(w,b)),registerTimelineProvider:(w,b)=>(L(S,"timeline"),Wo.registerTimelineProvider(w,b,S.identifier,W.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:w=>(L(S,"workspaceTrust"),n.requestWorkspaceTrust(w)),onDidGrantWorkspaceTrust:(w,b,$)=>j(n.onDidGrantWorkspaceTrust)(w,b,$),registerEditSessionIdentityProvider:(w,b)=>(L(S,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(w,b)),onWillCreateEditSessionIdentity:(w,b,$)=>(L(S,"editSessionIdentityProvider"),j(n.getOnWillCreateEditSessionIdentityEvent(S))(w,b,$)),registerCanonicalUriProvider:(w,b)=>(L(S,"canonicalUriProvider"),n.registerCanonicalUriProvider(w,b)),getCanonicalUri:(w,b,$)=>(L(S,"canonicalUriProvider"),n.provideCanonicalUri(w,b,$))},DI={get inputBox(){return v.report("scm.inputBox",S,"Use 'SourceControl.inputBox' instead"),Yr.getLastInputBox(S)},createSourceControl(w,b,$){return Yr.createSourceControl(S,w,b,$)}},AI={createCommentController(w,b){return Ac.createCommentController(S,w,b)}},TI={get activeDebugSession(){return ce.activeDebugSession},get activeDebugConsole(){return ce.activeDebugConsole},get breakpoints(){return ce.breakpoints},get activeStackItem(){return ce.activeStackItem},registerDebugVisualizationProvider(w,b){return L(S,"debugVisualization"),ce.registerDebugVisualizationProvider(S,w,b)},registerDebugVisualizationTreeProvider(w,b){return L(S,"debugVisualization"),ce.registerDebugVisualizationTree(S,w,b)},onDidStartDebugSession(w,b,$){return j(ce.onDidStartDebugSession)(w,b,$)},onDidTerminateDebugSession(w,b,$){return j(ce.onDidTerminateDebugSession)(w,b,$)},onDidChangeActiveDebugSession(w,b,$){return j(ce.onDidChangeActiveDebugSession)(w,b,$)},onDidReceiveDebugSessionCustomEvent(w,b,$){return j(ce.onDidReceiveDebugSessionCustomEvent)(w,b,$)},onDidChangeBreakpoints(w,b,$){return j(ce.onDidChangeBreakpoints)(w,b,$)},onDidChangeActiveStackItem(w,b,$){return j(ce.onDidChangeActiveStackItem)(w,b,$)},registerDebugConfigurationProvider(w,b,$){return ce.registerDebugConfigurationProvider(w,b,$||Pg.Initial)},registerDebugAdapterDescriptorFactory(w,b){return ce.registerDebugAdapterDescriptorFactory(S,w,b)},registerDebugAdapterTrackerFactory(w,b){return ce.registerDebugAdapterTrackerFactory(w,b)},startDebugging(w,b,$){return!$||typeof $=="object"&&"configuration"in $?ce.startDebugging(w,b,{parentSession:$}):ce.startDebugging(w,b,$||{})},stopDebugging(w){return ce.stopDebugging(w)},addBreakpoints(w){return ce.addBreakpoints(w)},removeBreakpoints(w){return ce.removeBreakpoints(w)},asDebugSourceUri(w,b){return ce.asDebugSourceUri(w,b)}},RI={registerTaskProvider:(w,b)=>We.registerTaskProvider(S,w,b),fetchTasks:w=>We.fetchTasks(w),executeTask:w=>We.executeTask(S,w),get taskExecutions(){return We.taskExecutions},onDidStartTask:(w,b,$)=>j(We.onDidStartTask)(w,b,$),onDidEndTask:(w,b,$)=>j(We.onDidEndTask)(w,b,$),onDidStartTaskProcess:(w,b,$)=>j(We.onDidStartTaskProcess)(w,b,$),onDidEndTaskProcess:(w,b,$)=>j(We.onDidEndTaskProcess)(w,b,$)},LI={createNotebookController(w,b,$,we,Ye){return Rt.createNotebookController(S,w,b,$,we,Vt(S,"notebookMessaging")?Ye:void 0)},registerNotebookCellStatusBarItemProvider:(w,b)=>de.registerNotebookCellStatusBarItemProvider(S,w,b),createRendererMessaging(w){return Dt.createRendererMessaging(S,w)},createNotebookControllerDetectionTask(w){return L(S,"notebookKernelSource"),Rt.createNotebookControllerDetectionTask(S,w)},registerKernelSourceActionProvider(w,b){return L(S,"notebookKernelSource"),Rt.registerKernelSourceActionProvider(S,w,b)},onDidChangeNotebookCellExecutionState(w,b,$){return L(S,"notebookCellExecutionState"),j(Rt.onDidChangeNotebookCellExecutionState)(w,b,$)}},NI={t(...w){if(typeof w[0]=="string"){const b=w.shift(),$=!w||typeof w[0]!="object"?w:w[0];return B.getMessage(S.identifier.value,{message:b,args:$})}return B.getMessage(S.identifier.value,w[0])},get bundle(){return B.getBundle(S.identifier.value)},get uri(){return B.getBundleUri(S.identifier.value)}},FI={transferActiveChat(w){return L(S,"interactive"),ns.transferActiveChat(w)}},OI={getRelatedInformation(w,b){return L(S,"aiRelatedInformation"),F.getRelatedInformation(S,w,b)},registerRelatedInformationProvider(w,b){return L(S,"aiRelatedInformation"),F.registerRelatedInformationProvider(S,w,b)},registerEmbeddingVectorProvider(w,b){return L(S,"aiRelatedInformation"),ue.registerEmbeddingVectorProvider(S,w,b)}},MI={registerChatResponseProvider(w,b,$){return L(S,"chatProvider"),T.registerLanguageModel(S,w,b,$)},registerChatVariableResolver(w,b,$,we,Ye,Lt,Lc,HI){return L(S,"chatVariableResolver"),C.registerVariableResolver(S,w,b,$,we,Ye,Lt,Lc,HI?.id)},registerMappedEditsProvider(w,b){return L(S,"mappedEditsProvider"),ke.registerMappedEditsProvider(S,w,b)},registerMappedEditsProvider2(w){return L(S,"mappedEditsProvider"),is.registerMappedEditsProvider(S,w)},createChatParticipant(w,b){return ns.createChatAgent(S,w,b)},createDynamicChatParticipant(w,b,$){return L(S,"chatParticipantPrivate"),ns.createDynamicChatAgent(S,w,b,$)},registerChatParticipantDetectionProvider(w){return L(S,"chatParticipantAdditions"),ns.registerChatParticipantDetectionProvider(S,w)},registerRelatedFilesProvider(w,b){return L(S,"chatEditing"),ns.registerRelatedFilesProvider(S,w,b)}},UI={selectChatModels:w=>T.selectLanguageModels(S,w??{}),onDidChangeChatModels:(w,b,$)=>T.onDidChangeProviders(w,b,$),registerChatModelProvider:(w,b,$)=>(L(S,"chatProvider"),T.registerLanguageModel(S,w,b,$)),get embeddingModels(){return L(S,"embeddings"),Oe.embeddingsModels},onDidChangeEmbeddingModels:(w,b,$)=>(L(S,"embeddings"),Oe.onDidChange(w,b,$)),registerEmbeddingsProvider(w,b){return L(S,"embeddings"),Oe.registerEmbeddingsProvider(S,w,b)},async computeEmbeddings(w,b,$){return L(S,"embeddings"),Oe.computeEmbeddings(w,b,$)},registerTool(w,b){return R.registerTool(S,w,b)},invokeTool(w,b,$){return R.invokeTool(w,b,$)},get tools(){return R.tools},fileIsIgnored(w,b){return T.fileIsIgnored(S,w,b)},registerIgnoredFileProvider(w){return T.registerIgnoredFileProvider(S,w)}},jI={registerSpeechProvider(w,b){return L(S,"speech"),Bt.registerProvider(S.identifier,w,b)}};return{version:t.version,ai:OI,authentication:ct,commands:ft,comments:AI,chat:MI,debug:TI,env:_t,extensions:Ln,interactive:FI,l10n:NI,languages:II,lm:UI,notebooks:LI,scm:DI,speech:jI,tasks:RI,tests:vh,window:PI,workspace:Xy,Breakpoint:Fa,TerminalOutputAnchor:av,ChatResultFeedbackKind:eu,ChatVariableLevel:Yv,ChatCompletionItem:QF,CallHierarchyIncomingCall:$k,CallHierarchyItem:uv,CallHierarchyOutgoingCall:Ck,CancellationError:Xt,CancellationTokenSource:rt,CandidatePortSource:Gm,CodeAction:tf,CodeActionKind:dt,CodeActionTriggerKind:Nl,CodeLens:rf,Color:Aa,ColorInformation:lf,ColorPresentation:uf,ColorThemeKind:mn,CommentMode:Rv,CommentState:Lv,CommentThreadCollapsibleState:ql,CommentThreadState:Gl,CommentThreadApplicability:Jl,CommentThreadFocus:Ql,CompletionItem:of,CompletionItemKind:pe,CompletionItemTag:Ol,CompletionList:$a,CompletionTriggerKind:Sa,ConfigurationTarget:La,CustomExecution:$v,DebugAdapterExecutable:Oa,DebugAdapterInlineImplementation:zl,DebugAdapterNamedPipeServer:_l,DebugAdapterServer:Ma,DebugConfigurationProviderTriggerKind:Pg,DebugConsoleMode:Ef,DebugVisualization:_F,DecorationRangeBehavior:uo,Diagnostic:Yd,DiagnosticRelatedInformation:Dl,DiagnosticSeverity:rr,DiagnosticTag:co,Disposable:Te,DocumentHighlight:Kd,DocumentHighlightKind:Al,MultiDocumentHighlight:ef,DocumentLink:cf,DocumentSymbol:Ll,EndOfLine:yi,EnvironmentVariableMutatorType:Ea,EvaluatableExpression:vf,InlineValueText:wf,InlineValueVariableLookup:bf,InlineValueEvaluatableExpression:yf,InlineCompletionTriggerKind:Wl,EventEmitter:P,ExtensionKind:vo,ExtensionMode:_a,ExternalUriOpenerPriority:Hv,FileChangeType:Ua,FileDecoration:Ov,FileDecoration2:Ov,FileSystemError:Mt,FileType:Or,FilePermission:cn,FoldingRange:Tv,FoldingRangeKind:Ss,FunctionBreakpoint:mo,InlineCompletionItem:mv,InlineCompletionList:vv,Hover:Xd,VerboseHover:Zd,HoverVerbosityAction:lv,IndentAction:yb,Location:qr,MarkdownString:Mr,OverviewRulerLane:ww,ParameterInformation:hv,PortAutoForwardAction:_v,Position:Ie,ProcessExecution:Ta,ProgressLocation:fo,QuickInputButtonLocation:Fv,QuickInputButtons:Yl,Range:Ee,RelativePattern:Na,Selection:ks,SelectionRange:Fl,SemanticTokens:ja,SemanticTokensBuilder:BF,SemanticTokensEdit:Rk,SemanticTokensEdits:xf,SemanticTokensLegend:Nv,ShellExecution:ho,ShellQuoting:Sv,SignatureHelp:fv,SignatureHelpTriggerKind:pv,SignatureInformation:dv,SnippetString:ao,SourceBreakpoint:go,StandardTokenType:vn,StatusBarAlignment:pn,SymbolInformation:Rl,SymbolKind:tt,SymbolTag:Tl,Task:df,TaskGroup:jl,TaskPanelKind:kv,TaskRevealKind:Ev,TaskScope:gn,TerminalLink:DF,TerminalQuickFixTerminalCommand:TF,TerminalQuickFixOpener:AF,TerminalLocation:yv,TerminalProfile:RF,TerminalExitReason:bv,TerminalShellExecutionCommandLineConfidence:hf,TerminalCompletionItem:LF,TerminalCompletionItemKind:xv,TerminalCompletionList:NF,TextDocumentSaveReason:Ca,TextEdit:fn,SnippetTextEdit:cv,TextEditorCursorStyle:di,TextEditorChangeKind:Pa,TextEditorLineNumbersStyle:xi,TextEditorRevealType:af,TextEditorSelectionChangeKind:Ia,SyntaxTokenType:Da,TextDocumentChangeReason:Ul,ThemeColor:Bl,ThemeIcon:nr,TreeItem:ff,TreeItemCheckboxState:Gi,TreeItemCollapsibleState:po,TypeHierarchyItem:zv,UIKind:Du,Uri:x,ViewColumn:Ml,WorkspaceEdit:oo,DocumentPasteTriggerKind:Pv,DocumentDropEdit:Iv,DocumentDropOrPasteEditKind:Ra,DocumentPasteEdit:MF,InlayHint:nf,InlayHintLabelPart:sf,InlayHintKind:gv,RemoteAuthorityResolverError:xa,ResolvedAuthority:IF,ManagedResolvedAuthority:Jd,SourceControlInputBoxValidationType:wv,ExtensionRuntime:Df,TimelineItem:Uv,NotebookRange:$s,NotebookCellKind:wo,NotebookCellExecutionState:Ba,NotebookCellData:Sf,NotebookData:Lk,NotebookRendererScript:Fk,NotebookCellStatusBarAlignment:Cf,NotebookEditorRevealType:If,NotebookCellOutput:$f,NotebookCellOutputItem:Nk,CellErrorStackFrame:zF,NotebookCellStatusBarItem:WF,NotebookControllerAffinity:Mv,NotebookControllerAffinity2:Pf,NotebookEdit:Qd,NotebookKernelSourceAction:VF,NotebookVariablesRequestKind:Zl,PortAttributes:GF,LinkedEditingRanges:qF,TestResultState:jv,TestRunRequest:Af,TestMessage:Tf,TestMessageStackFrame:JF,TestTag:Kl,TestRunProfileKind:za,TextSearchCompleteMessageType:Cp,DataTransfer:Hl,DataTransferItem:pf,TestCoverageCount:Rf,FileCoverage:Nf,StatementCoverage:Mk,BranchCoverage:Uk,DeclarationCoverage:jk,WorkspaceTrustState:Bv,LanguageStatusSeverity:ka,QuickPickItemKind:Xl,InputBoxValidationSeverity:Ha,TabInputText:Wv,TabInputTextDiff:Ff,TabInputTextMerge:Hk,TabInputCustom:Vv,TabInputNotebook:qv,TabInputNotebookDiff:Gv,TabInputWebview:Bk,TabInputTerminal:_k,TabInputInteractiveWindow:zk,TabInputChat:Wk,TabInputTextMultiDiff:Vk,TelemetryTrustedValue:X0,LogLevel:fe,EditSessionIdentityMatch:xb,InteractiveSessionVoteDirection:Jv,ChatCopyKind:Qv,ChatEditingSessionActionOutcome:bo,InteractiveEditorResponseFeedbackKind:Xv,DebugStackFrame:Ak,DebugThread:Tk,RelatedInformationType:r0,SpeechToTextStatus:i0,TextToSpeechStatus:s0,PartialAcceptTriggerKind:lo,KeywordRecognitionStatus:n0,ChatResponseMarkdownPart:Of,ChatResponseFileTreePart:Uf,ChatResponseAnchorPart:iu,ChatResponseProgressPart:su,ChatResponseProgressPart2:jf,ChatResponseReferencePart:Cs,ChatResponseReferencePart2:Cs,ChatResponseCodeCitationPart:_f,ChatResponseCodeblockUriPart:Bf,ChatResponseWarningPart:nu,ChatResponseTextEditPart:ou,ChatResponseMarkdownWithVulnerabilitiesPart:tu,ChatResponseCommandButtonPart:Hf,ChatResponseDetectedParticipantPart:ru,ChatResponseConfirmationPart:Mf,ChatResponseMovePart:zf,ChatResponseReferencePartStatusKind:Zv,ChatRequestTurn:qk,ChatResponseTurn:Gk,ChatLocation:Gr,ChatRequestEditorData:Jk,ChatRequestNotebookData:Qk,ChatReferenceBinaryData:Yk,LanguageModelChatMessageRole:Kr,LanguageModelChatMessage:Xk,LanguageModelToolResultPart:Kv,LanguageModelTextPart:kr,LanguageModelToolCallPart:au,LanguageModelError:Is,LanguageModelToolResult:e0,LanguageModelChatToolMode:t0,LanguageModelPromptTsxPart:Wa,NewSymbolName:jF,NewSymbolNameTag:Av,NewSymbolNameTriggerKind:Vl,InlineEdit:YF,InlineEditTriggerKind:cu,ExcludeSettingOptions:Ts,TextSearchContext2:$p,TextSearchMatch2:As,TextSearchCompleteMessageTypeNew:Cp}}}var Dg,ry=class{constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.e=i,this.f=s,this.g=n,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),xt("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();xt("code/extHost/didWaitForConfig");const r=await this.g.getExtensionPathIndex();this.register(new L_(this.c,r,this.d,t,this.i)),this.register(this.e.createInstance(iy)),this.h.remote.isRemote&&this.register(this.e.createInstance(sy,r,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const r of t.nodeModuleName)this.a.set(r,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(r=>t.alternativeModuleName(r))}};ry=__decorate([__param(2,td),__param(3,ti),__param(4,Ns),__param(5,Ot),__param(6,$e)],ry);var iy=class{static{Dg=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Dg.a.size){const r=Zs(this.c(t.environment.appRoot.fsPath)),i="[a-z0-9_.-]",s=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${r}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const r=this.b.exec(this.c(t));if(!r)return;const[,i,s,n]=r,o=Dg.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),i+o+n}c(t){return t.replace(/\\/g,"/")}};iy=Dg=__decorate([__param(0,Ot)],iy);var L_=class{constructor(e,t,r,i,s){this.c=e,this.d=t,this.e=r,this.f=i,this.g=s,this.nodeModuleName="vscode",this.a=new ys}load(e,t){const r=this.d.findSubstr(t);if(r){let i=this.a.get(r.identifier);return i||(i=this.c(r,this.e,this.f),this.a.set(r.identifier,i)),i}if(!this.b){let i="";this.d.forEach((s,n)=>i+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${i}`),this.b=this.c(DO,this.e,this.f)}return this.b}},sy=class{constructor(t,r,i){this.e=t,this.f=r,this.nodeModuleName=["open","opn"],this.d=i.getProxy(Q.MainThreadTelemetry);const s=i.getProxy(Q.MainThreadWindow);this.c=(n,o)=>{const a=x.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,r,i){const s=this.e.findSubstr(r);return s&&(this.a=s.identifier.value,this.h()),this.b=i(t),this.c}g(t,r){return this.i(),this.b(t,r)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};sy=__decorate([__param(2,Ae)],sy);import{LogLevel as Ro,createHttpPatch as xC,createProxyResolver as N_,createTlsPatch as F_,createNetPatch as O_,loadSystemCertificates as M_}from"@vscode/proxy-agent";import{createRequire as U_}from"node:module";import{parse as EC}from"url";import{spawn as j_}from"child_process";import{userInfo as H_}from"os";import*as B_ from"os";var kC=/^\d+$/,__=/^Microsoft.PowerShell_.*/,z_=/^Microsoft.PowerShellPreview_.*/,SC;(function(e){e[e.x64=0]="x64",e[e.x86=1]="x86",e[e.ARM=2]="ARM"})(SC||(SC={}));var rh;switch(process.arch){case"ia32":rh=1;break;case"arm":case"arm64":rh=2;break;default:rh=0;break}var xc;process.env.PROCESSOR_ARCHITEW6432?xc=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?2:0:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?xc=2:process.env.PROCESSOR_ARCHITECTURE==="X86"?xc=1:xc=0;var Ag=class{constructor(e,t,r){this.exePath=e,this.displayName=t,this.a=r}async exists(){return this.a===void 0&&(this.a=await mr.existsFile(this.exePath)),this.a}};function W_({useAlternateBitness:e=!1}={}){return e?rh===0?process.env["ProgramFiles(x86)"]||null:xc===0&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function Tg({useAlternateBitness:e=!1,findPreview:t=!1}={}){const r=W_({useAlternateBitness:e});if(!r)return null;const i=Ve(r,"PowerShell");if(!await mr.existsDirectory(i))return null;let s=-1,n=null;for(const c of await qe.readdir(i)){let l=-1;if(t){const h=c.indexOf("-");if(h<0)continue;const d=c.substring(0,h);if(!kC.test(d)||c.substring(h+1)!=="preview")continue;l=parseInt(d,10)}else{if(!kC.test(c))continue;l=parseInt(c,10)}if(l<=s)continue;const u=Ve(i,c,"pwsh.exe");await mr.existsFile(u)&&(n=u,s=l)}if(!n)return null;const o=r.includes("x86")?" (x86)":"",a=t?" Preview":"";return new Ag(n,`PowerShell${a}${o}`,!0)}async function $C({findPreview:e}={}){if(!process.env.LOCALAPPDATA)return null;const t=Ve(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await mr.existsDirectory(t))return null;const{pwshMsixDirRegex:r,pwshMsixName:i}=e?{pwshMsixDirRegex:z_,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:__,pwshMsixName:"PowerShell (Store)"};for(const s of await qe.readdir(t))if(r.test(s)){const n=Ve(t,s,"pwsh.exe");return new Ag(n,i)}return null}function V_(){const e=Ve(B_.homedir(),".dotnet","tools","pwsh.exe");return new Ag(e,".NET Core PowerShell Global Tool")}function q_(){const e=Ve(process.env.windir,rh===1&&xc!==1?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new Ag(e,"Windows PowerShell",!0)}async function*G_(){let e=await Tg();e&&(yield e),e=await Tg({useAlternateBitness:!0}),e&&(yield e),e=await $C(),e&&(yield e),e=V_(),e&&(yield e),e=await Tg({findPreview:!0}),e&&(yield e),e=await $C({findPreview:!0}),e&&(yield e),e=await Tg({useAlternateBitness:!0,findPreview:!0}),e&&(yield e),e=q_(),e&&(yield e)}async function*J_(){for await(const e of G_())await e.exists()&&(yield e)}async function Q_(){for await(const e of J_())return e;return null}async function Y_(e,t){return e===1?ze?Z_():wS(t):X_(e,t)}var ny=null;function X_(e,t){if(bt&&e===2||Nt&&e===3)return"/bin/bash";if(!ny){let r;if(ze)r="/bin/bash";else{if(r=t.SHELL,!r)try{r=H_().shell}catch{}r||(r="sh"),r==="/bin/false"&&(r="/bin/bash")}ny=r}return ny}var oy=null;async function Z_(){return oy||(oy=(await Q_()).exePath),oy}import"assert";var YX=Ky(e4(),1),XX={o:p(1744,null),e:p(1745,null),t:p(1746,null)},ZX={tunnel:{type:"subcommand",description:"Make the current machine accessible from vscode.dev or other machines through a secure tunnel",options:{"cli-data-dir":{type:"string",args:"dir",description:p(1747,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"},user:{type:"subcommand",options:{login:{type:"subcommand",options:{provider:{type:"string"},"access-token":{type:"string"}}}}}}},"serve-web":{type:"subcommand",description:"Run a server that displays the editor UI in browsers.",options:{"cli-data-dir":{type:"string",args:"dir",description:p(1748,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"}}},diff:{type:"boolean",cat:"o",alias:"d",args:["file","file"],description:p(1749,null)},merge:{type:"boolean",cat:"o",alias:"m",args:["path1","path2","base","result"],description:p(1750,null)},add:{type:"boolean",cat:"o",alias:"a",args:"folder",description:p(1751,null)},goto:{type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:p(1752,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:p(1753,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:p(1754,null)},wait:{type:"boolean",cat:"o",alias:"w",description:p(1755,null)},waitMarkerFilePath:{type:"string"},locale:{type:"string",cat:"o",args:"locale",description:p(1756,null)},"user-data-dir":{type:"string",cat:"o",args:"dir",description:p(1757,null)},profile:{type:"string",cat:"o",args:"profileName",description:p(1758,null)},help:{type:"boolean",cat:"o",alias:"h",description:p(1759,null)},"extensions-dir":{type:"string",deprecates:["extensionHomePath"],cat:"e",args:"dir",description:p(1760,null)},"extensions-download-dir":{type:"string"},"builtin-extensions-dir":{type:"string"},"list-extensions":{type:"boolean",cat:"e",description:p(1761,null)},"show-versions":{type:"boolean",cat:"e",description:p(1762,null)},category:{type:"string",allowEmptyValue:!0,cat:"e",description:p(1763,null),args:"category"},"install-extension":{type:"string[]",cat:"e",args:"ext-id | path",description:p(1764,null)},"pre-release":{type:"boolean",cat:"e",description:p(1765,null)},"uninstall-extension":{type:"string[]",cat:"e",args:"ext-id",description:p(1766,null)},"update-extensions":{type:"boolean",cat:"e",description:p(1767,null)},"enable-proposed-api":{type:"string[]",allowEmptyValue:!0,cat:"e",args:"ext-id",description:p(1768,null)},version:{type:"boolean",cat:"t",alias:"v",description:p(1769,null)},verbose:{type:"boolean",cat:"t",global:!0,description:p(1770,null)},log:{type:"string[]",cat:"t",args:"level",global:!0,description:p(1771,null)},status:{type:"boolean",alias:"s",cat:"t",description:p(1772,null)},"prof-startup":{type:"boolean",cat:"t",description:p(1773,null)},"prof-append-timers":{type:"string"},"prof-duration-markers":{type:"string[]"},"prof-duration-markers-file":{type:"string"},"no-cached-data":{type:"boolean"},"prof-startup-prefix":{type:"string"},"prof-v8-extensions":{type:"boolean"},"disable-extensions":{type:"boolean",deprecates:["disableExtensions"],cat:"t",description:p(1774,null)},"disable-extension":{type:"string[]",cat:"t",args:"ext-id",description:p(1775,null)},sync:{type:"string",cat:"t",description:p(1776,null),args:["on | off"]},"inspect-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugPluginHost"],args:"port",cat:"t",description:p(1777,null)},"inspect-brk-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugBrkPluginHost"],args:"port",cat:"t",description:p(1778,null)},"disable-lcd-text":{type:"boolean",cat:"t",description:p(1779,null)},"disable-gpu":{type:"boolean",cat:"t",description:p(1780,null)},"disable-chromium-sandbox":{type:"boolean",cat:"t",description:p(1781,null)},sandbox:{type:"boolean"},telemetry:{type:"boolean",cat:"t",description:p(1782,null)},remote:{type:"string",allowEmptyValue:!0},"folder-uri":{type:"string[]",cat:"o",args:"uri"},"file-uri":{type:"string[]",cat:"o",args:"uri"},"locate-extension":{type:"string[]"},extensionDevelopmentPath:{type:"string[]"},extensionDevelopmentKind:{type:"string[]"},extensionTestsPath:{type:"string"},extensionEnvironment:{type:"string"},debugId:{type:"string"},debugRenderer:{type:"boolean"},"inspect-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-brk-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-search":{type:"string",deprecates:["debugSearch"],allowEmptyValue:!0},"inspect-brk-search":{type:"string",deprecates:["debugBrkSearch"],allowEmptyValue:!0},"inspect-sharedprocess":{type:"string",allowEmptyValue:!0},"inspect-brk-sharedprocess":{type:"string",allowEmptyValue:!0},"export-default-configuration":{type:"string"},"install-source":{type:"string"},"enable-smoke-test-driver":{type:"boolean"},logExtensionHostCommunication:{type:"boolean"},"skip-release-notes":{type:"boolean"},"skip-welcome":{type:"boolean"},"disable-telemetry":{type:"boolean"},"disable-updates":{type:"boolean"},"use-inmemory-secretstorage":{type:"boolean",deprecates:["disable-keytar"]},"password-store":{type:"string"},"disable-workspace-trust":{type:"boolean"},"disable-crash-reporter":{type:"boolean"},"crash-reporter-directory":{type:"string"},"crash-reporter-id":{type:"string"},"skip-add-to-recently-opened":{type:"boolean"},"open-url":{type:"boolean"},"file-write":{type:"boolean"},"file-chmod":{type:"boolean"},"install-builtin-extension":{type:"string[]"},force:{type:"boolean"},"do-not-sync":{type:"boolean"},trace:{type:"boolean"},"trace-category-filter":{type:"string"},"trace-options":{type:"string"},"preserve-env":{type:"boolean"},"force-user-env":{type:"boolean"},"force-disable-user-env":{type:"boolean"},"open-devtools":{type:"boolean"},"disable-gpu-sandbox":{type:"boolean"},logsPath:{type:"string"},"__enable-file-policy":{type:"boolean"},editSessionId:{type:"string"},continueOn:{type:"string"},"locate-shell-integration-path":{type:"string",args:["bash","pwsh","zsh","fish"]},"enable-coi":{type:"boolean"},"no-proxy-server":{type:"boolean"},"no-sandbox":{type:"boolean",alias:"sandbox"},"proxy-server":{type:"string"},"proxy-bypass-list":{type:"string"},"proxy-pac-url":{type:"string"},"js-flags":{type:"string"},inspect:{type:"string",allowEmptyValue:!0},"inspect-brk":{type:"string",allowEmptyValue:!0},nolazy:{type:"boolean"},"force-device-scale-factor":{type:"string"},"force-renderer-accessibility":{type:"boolean"},"ignore-certificate-errors":{type:"boolean"},"allow-insecure-localhost":{type:"boolean"},"log-net-log":{type:"string"},vmodule:{type:"string"},_urls:{type:"string[]"},"disable-dev-shm-usage":{type:"boolean"},"profile-temp":{type:"boolean"},"ozone-platform":{type:"string"},"enable-tracing":{type:"string"},"trace-startup-format":{type:"string"},"trace-startup-file":{type:"string"},"trace-startup-duration":{type:"string"},_:{type:"string[]"}};function CC(e){return e.VSCODE_CLI==="1"}var ay=void 0;async function K_(e,t,r,i){return r["force-disable-user-env"]?(t.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):ze?(t.trace("resolveShellEnv(): skipped (Windows)"),{}):CC(i)&&!r["force-user-env"]?(t.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):(CC(i)?t.trace("resolveShellEnv(): running (--force-user-env)"):t.trace("resolveShellEnv(): running (macOS/Linux)"),ay||(ay=sn.withAsyncBody(async(s,n)=>{const o=new rt;let a=1e4;const c=e.getValue("application.shellEnvironmentResolutionTimeout");typeof c=="number"&&(a=fR(c,1,120)*1e3);const l=setTimeout(()=>{o.dispose(!0),n(new Error(p(2103,null)))},a);try{s(await ez(t,o.token))}catch(u){!Ni(u)&&!o.token.isCancellationRequested?n(new Error(p(2104,null,pi(u)))):s({})}finally{clearTimeout(l),o.dispose()}})),ay)}async function ez(e,t){const r=process.env.ELECTRON_RUN_AS_NODE;e.trace("getUnixShellEnvironment#runAsNode",r);const i=process.env.ELECTRON_NO_ATTACH_CONSOLE;e.trace("getUnixShellEnvironment#noAttach",i);const s=Ft().replace(/-/g,"").substr(0,12),n=new RegExp(s+"({.*})"+s),o={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1",VSCODE_RESOLVING_ENVIRONMENT:"1"};e.trace("getUnixShellEnvironment#env",o);const a=await Y_(vm,o);return e.trace("getUnixShellEnvironment#shell",a),new Promise((c,l)=>{if(t.isCancellationRequested)return l(new Xt);const u=ut(a);let h,d;const f="";/^pwsh(-preview)?$/.test(u)?(h=`& '${process.execPath}' ${f} -p '''${s}'' + JSON.stringify(process.env) + ''${s}'''`,d=["-Login","-Command"]):u==="nu"?(h=`^'${process.execPath}' ${f} -p '"${s}" + JSON.stringify(process.env) + "${s}"'`,d=["-i","-l","-c"]):u==="xonsh"?(h=`import os, json; print("${s}", json.dumps(dict(os.environ)), "${s}")`,d=["-i","-l","-c"]):(h=`'${process.execPath}' ${f} -p '"${s}" + JSON.stringify(process.env) + "${s}"'`,u==="tcsh"||u==="csh"?d=["-ic"]:d=["-i","-l","-c"]),e.trace("getUnixShellEnvironment#spawn",JSON.stringify(d),h);const g=j_(a,[...d,h],{detached:!0,stdio:["ignore","pipe","pipe"],env:o});t.onCancellationRequested(()=>(g.kill(),l(new Xt))),g.on("error",E=>{e.error("getUnixShellEnvironment#errorChildProcess",pi(E)),l(E)});const v=[];g.stdout.on("data",E=>v.push(E));const y=[];g.stderr.on("data",E=>y.push(E)),g.on("close",(E,k)=>{const I=Buffer.concat(v).toString("utf8");e.trace("getUnixShellEnvironment#raw",I);const D=Buffer.concat(y).toString("utf8");if(D.trim()&&e.trace("getUnixShellEnvironment#stderr",D),E||k)return l(new Error(p(2105,null,E,k)));const T=n.exec(I),_=T?T[1]:"{}";try{const q=JSON.parse(_);r?q.ELECTRON_RUN_AS_NODE=r:delete q.ELECTRON_RUN_AS_NODE,i?q.ELECTRON_NO_ATTACH_CONSOLE=i:delete q.ELECTRON_NO_ATTACH_CONSOLE,delete q.VSCODE_RESOLVING_ENVIRONMENT,delete q.XDG_RUNTIME_DIR,e.trace("getUnixShellEnvironment#result",q),c(q)}catch(q){e.error("getUnixShellEnvironment#errorCaught",pi(q)),l(q)}})})}import{parse as IC}from"url";function tz(e,t){return e.protocol==="http:"?t.HTTP_PROXY||t.http_proxy||null:e.protocol==="https:"&&(t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy)||null}async function rz(e,t,r={}){const i=IC(e),s=r.proxyUrl||tz(i,t);if(!s)return null;const n=IC(s);if(!/^https?:$/.test(n.protocol||""))return null;const o={host:n.hostname||"",port:(n.port?+n.port:0)||(n.protocol==="https"?443:80),auth:n.auth,rejectUnauthorized:Z4(r.strictSSL)?r.strictSSL:!0};if(i.protocol==="http:"){const{default:a}=await import("http-proxy-agent");return new a.HttpProxyAgent(s,o)}else{const{default:a}=await import("https-proxy-agent");return new a.HttpsProxyAgent(s,o)}}import{createGunzip as iz}from"zlib";var PC=class extends SN{constructor(t,r,i){super(i),this.m=t,this.n=r,this.r(),this.B(t.onDidChangeConfiguration(s=>{s.affectsConfiguration("http")&&this.r()}))}r(){const t=this.m.getValue("http");this.f=t?.proxy,this.g=!!t?.proxyStrictSSL,this.h=t?.proxyAuthorization}async request(t,r){const{f:i,g:s}=this;let n;try{n=await K_(this.m,this.b,this.n.args,process.env)}catch(c){this.j||(this.j=!0,this.b.error("resolving shell environment failed",r4(c)))}const o={...process.env,...n},a=t.agent?t.agent:await rz(t.url||"",o,{proxyUrl:i,strictSSL:s});return t.agent=a,t.strictSSL=s,this.h&&(t.headers={...t.headers||{},"Proxy-Authorization":this.h}),this.c(t,()=>AC(t,r))}async resolveProxy(t){}async lookupAuthorization(t){}async lookupKerberosAuthorization(t){try{const r=this.m.getValue("http.proxyKerberosServicePrincipal");return"Negotiate "+await DC(t,r,this.b,"RequestService#lookupKerberosAuthorization")}catch(r){this.b.debug("RequestService#lookupKerberosAuthorization Kerberos authentication failed",r);return}}async loadCertificates(){return(await import("@vscode/proxy-agent")).loadSystemCertificates({log:this.b})}};PC=__decorate([__param(0,xs),__param(1,DN),__param(2,$e)],PC);async function DC(e,t,r,i){const s=await import("kerberos"),n=s.default||s,o=new URL(e),a=t||(process.platform==="win32"?`HTTP/${o.hostname}`:`HTTP@${o.hostname}`);return r.debug(`${i} Kerberos authentication lookup`,`proxyURL:${o}`,`spn:${a}`),(await n.initializeClient(a)).step("")}async function sz(e){return(EC(e.url).protocol==="https:"?await import("https"):await import("http")).request}async function AC(e,t){return sn.withAsyncBody(async(r,i)=>{const s=EC(e.url),n=e.getRawRequest?e.getRawRequest(e):await sz(e),o={hostname:s.hostname,port:s.port?parseInt(s.port):s.protocol==="https:"?443:80,protocol:s.protocol,path:s.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:Z4(e.strictSSL)?e.strictSSL:!0};e.user&&e.password&&(o.auth=e.user+":"+e.password);const a=n(o,c=>{const l=_r(e.followRedirects)?e.followRedirects:3;if(c.statusCode&&c.statusCode>=300&&c.statusCode<400&&l>0&&c.headers.location)AC({...e,url:c.headers.location,followRedirects:l-1},t).then(r,i);else{let u=c;!e.isChromiumNetwork&&c.headers["content-encoding"]==="gzip"&&(u=c.pipe(iz())),r({res:c,stream:D2(u)})}});a.on("error",i),e.timeout&&a.setTimeout(e.timeout),e.isChromiumNetwork&&a.removeHeader("Content-Length"),e.data&&typeof e.data=="string"&&a.write(e.data),a.end(),t.onCancellationRequested(()=>{a.abort(),i(new Xt)})})}import*as Rg from"@vscode/proxy-agent";var Ec=U_(import.meta.url),TC=Ec("http"),Lg=Ec("https"),RC=Ec("tls"),LC=Ec("net"),NC=!1,FC=!1;function nz(e,t,r,i,s,n,o){const a=n.environment.useHostProxy,c=typeof a=="boolean"?a:!n.remote.isRemote,l={resolveProxy:g=>e.resolveProxy(g),lookupProxyAuthorization:dz.bind(void 0,e,i,s,t,{},{},n.remote.isRemote,c),getProxyURL:()=>t.getConfiguration("http").get("proxy"),getProxySupport:()=>t.getConfiguration("http").get("proxySupport")||"off",getNoProxyConfig:()=>t.getConfiguration("http").get("noProxy")||[],isAdditionalFetchSupportEnabled:()=>t.getConfiguration("http").get("fetchAdditionalSupport",!0),addCertificatesV1:()=>lz(t),addCertificatesV2:()=>uz(t),log:i,getLogLevel:()=>{const g=i.getLevel();switch(g){case fe.Trace:return Ro.Trace;case fe.Debug:return Ro.Debug;case fe.Info:return Ro.Info;case fe.Warning:return Ro.Warning;case fe.Error:return Ro.Error;case fe.Off:return Ro.Off;default:return v(g)}function v(y){return i.error("Unknown log level",y),Ro.Debug}},proxyResolveTelemetry:()=>{},useHostProxy:c,loadAdditionalCertificates:async()=>{const g=[];if(n.remote.isRemote&&g.push(M_({log:i})),c){i.trace("ProxyResolver#loadAdditionalCertificates: Loading certificates from main process");const v=e.loadCertificates();v.then(y=>i.trace("ProxyResolver#loadAdditionalCertificates: Loaded certificates from main process",y.length)),g.push(v)}return n.environment.extensionTestsLocationURI&&Lg.globalAgent.testCertificates?.length&&(i.trace("ProxyResolver#loadAdditionalCertificates: Loading test certificates"),g.push(Promise.resolve(Lg.globalAgent.testCertificates))),(await Promise.all(g)).flat()},env:process.env},{resolveProxyWithRequest:u,resolveProxyURL:h}=N_(l),d=Rg.default||Rg;d.resolveProxyURL=h,az(l,t,s,n,h,o);const f=cz(l,u);return hz(r,f)}var oz=["content-length","host","trailer","te","upgrade","cookie2","keep-alive","transfer-encoding","set-cookie"];function az(e,t,r,i,s,n){if(!globalThis.__vscodeOriginalFetch){const o=globalThis.fetch;globalThis.__vscodeOriginalFetch=o;const a=Rg.createFetchPatch(e,o,s);globalThis.__vscodePatchedFetch=a;let c=!1;i.remote.isRemote||(c=t.getConfiguration("http").get("electronFetch",FC),n.add(t.onDidChangeConfiguration(l=>{l.affectsConfiguration("http.electronFetch")&&(c=t.getConfiguration("http").get("electronFetch",FC))}))),globalThis.fetch=async function(u,h){function d(T){return h&&T in h?h[T]:typeof u=="object"&&"cache"in u?u[T]:void 0}const f=typeof u=="string"?u:"cache"in u?u.url:u.toString(),g=f.startsWith("data:");g&&kc(r,"data");const v=f.startsWith("blob:");v&&kc(r,"blob");const y=d("redirect")==="manual";y&&kc(r,"manualRedirect");const E=d("integrity");if(E&&kc(r,"integrity"),!c||g||v||y||E){const T=await a(u,h);return OC(r,T,f),T}if(h?.headers){const T=new Headers(h.headers);for(const _ of oz)T.delete(_);h={...h,headers:T}}const k=u instanceof URL?u.toString():u,D=await Ec("electron").net.fetch(k,h);return OC(r,D,f),D}}}function OC(e,t,r){const i=t.url;Object.defineProperty(t,"url",{get(){return kc(e,"url"),i||r}});const s=t.type;Object.defineProperty(t,"type",{get(){return kc(e,"typeProperty"),s!=="default"?s:"basic"}})}var MC={url:0,typeProperty:0,data:0,blob:0,integrity:0,manualRedirect:0},Ng;function kc(e,t){MC[t]++||(Ng&&clearTimeout(Ng),Ng=setTimeout(()=>{e.$publicLog2("fetchFeatureUse",MC)},1e4),Ng.unref())}function cz(e,t){function r(i,s){const n=i.default||i;return n.__vscodeOriginal=Object.assign({},n),Object.assign(n,s)}return{http:r(TC,xC(e,TC,t)),https:r(Lg,xC(e,Lg,t)),net:r(LC,O_(e,LC)),tls:r(RC,F_(e,RC))}}function lz(e){const t=e.getConfiguration("http");return!t.get("experimental.systemCertificatesV2",NC)&&!!t.get("systemCertificates")}function uz(e){const t=e.getConfiguration("http");return!!t.get("experimental.systemCertificatesV2",NC)&&!!t.get("systemCertificates")}var UC=new Map;function hz(e,t){return e.getExtensionPathIndex().then(r=>{const i=Ec("module"),s=i._load;i._load=function(o,a,c){if(o==="net")return t.net;if(o==="tls")return t.tls;if(o!=="http"&&o!=="https"&&o!=="undici")return s.apply(this,arguments);const l=r.findSubstr(x.file(a.filename));let u=UC.get(l);if(u||UC.set(l,u={}),!u[o])if(o==="undici"){const h=s.apply(this,arguments);Rg.patchUndici(h),u[o]=h}else{const h=t[o];u[o]={...h}}return u[o]}})}async function dz(e,t,r,i,s,n,o,a,c,l,u){const h=s[c];l&&(s[c]=l),t.trace("ProxyResolver#lookupProxyAuthorization callback",`proxyURL:${c}`,`proxyAuthenticate:${l}`,`proxyAuthenticateCache:${h}`);const d=l||h,f=Array.isArray(d)?d:typeof d=="string"?[d]:[];if(fz(r,f,o),f.some(v=>/^(Negotiate|Kerberos)( |$)/i.test(v))&&!u.kerberosRequested){u.kerberosRequested=!0;try{const v=i.getConfiguration("http").get("proxyKerberosServicePrincipal");return"Negotiate "+await DC(c,v,t,"ProxyResolver#lookupProxyAuthorization")}catch(v){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication failed",v)}if(o&&a){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup on host",`proxyURL:${c}`);const v=await e.lookupKerberosAuthorization(c);if(v)return"Negotiate "+v}}const g=f.find(v=>/^Basic( |$)/i.test(v));if(g)try{const v=n[c];if(v)if(u.basicAuthCacheUsed)t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication deleting cached credentials",`proxyURL:${c}`),delete n[c];else return t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication using cached credentials",`proxyURL:${c}`),u.basicAuthCacheUsed=!0,v;u.basicAuthAttempt=(u.basicAuthAttempt||0)+1;const y=/ realm="([^"]+)"/i.exec(g)?.[1];t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication lookup",`proxyURL:${c}`,`realm:${y}`);const E=new URL(c),k={scheme:"basic",host:E.hostname,port:Number(E.port),realm:y||"",isProxy:!0,attempt:u.basicAuthAttempt},I=await e.lookupAuthorization(k);if(I){t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received credentials",`proxyURL:${c}`,`realm:${y}`);const D="Basic "+Buffer.from(`${I.username}:${I.password}`).toString("base64");return n[c]=D,D}else t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received no credentials",`proxyURL:${c}`,`realm:${y}`)}catch(v){t.error("ProxyResolver#lookupProxyAuthorization Basic authentication failed",v)}}var jC=!1;function fz(e,t,r){jC||!t.length||(jC=!0,e.$publicLog2("proxyAuthenticationRequest",{authenticationType:t.map(i=>i.split(" ")[0]).join(","),extensionHostType:r?"remote":"local"}))}import{tmpdir as pz}from"os";var cy=class extends K{constructor(t,r){super();const i=t.getProxy(Q.MainThreadDownloadService);r.registerCommand(!1,"_workbench.downloadResource",async s=>{const n=x.file(Ve(pz(),Ft()));return await i.$download(s,n),n})}};cy=__decorate([__param(0,Ae),__param(1,$i)],cy);import*as gz from"http";import*as HC from"fs";var mz=class{constructor(e,t,r){this.b=e,this.c=t,this.f=r,this.a=gz.createServer((i,s)=>this.h(i,s)),this.g().catch(i=>(t.error(i),""))}get ipcHandlePath(){return this.f}async g(){try{this.a.listen(this.ipcHandlePath),this.a.on("error",e=>this.c.error(e))}catch{this.c.error("Could not start open from terminal server.")}return this.f}h(e,t){const r=(s,n)=>{t.writeHead(s,{"content-type":"application/json"}),t.end(JSON.stringify(n||null),o=>o&&this.c.error(o))},i=[];e.setEncoding("utf8"),e.on("data",s=>i.push(s)),e.on("end",async()=>{try{const s=JSON.parse(i.join(""));let n;switch(s.type){case"open":n=await this.i(s);break;case"openExternal":n=await this.j(s);break;case"status":n=await this.l(s);break;case"extensionManagement":n=await this.k(s);break;default:r(404,`Unknown message type: ${s.type}`);break}r(200,n)}catch(s){const n=s instanceof Error?s.message:JSON.stringify(s);r(500,n),this.c.error("Error while processing pipe request",s)}})}async i(e){const{fileURIs:t,folderURIs:r,forceNewWindow:i,diffMode:s,mergeMode:n,addMode:o,forceReuseWindow:a,gotoLineMode:c,waitMarkerFilePath:l,remoteAuthority:u}=e,h=[];if(Array.isArray(r))for(const v of r)try{h.push({folderUri:x.parse(v)})}catch{}if(Array.isArray(t))for(const v of t)try{xR(v)?h.push({workspaceUri:x.parse(v)}):h.push({fileUri:x.parse(v)})}catch{}const d=l?x.file(l):void 0,g={forceNewWindow:i,diffMode:s,mergeMode:n,addMode:o,gotoLineMode:c,forceReuseWindow:a,preferNewWindow:!a&&!d&&!o,waitMarkerFileURI:d,remoteAuthority:u};this.b.executeCommand("_remoteCLI.windowOpen",h,g)}async j(e){for(const t of e.uris){const r=x.parse(t),i=r.scheme==="file"?r:t;await this.b.executeCommand("_remoteCLI.openExternal",i)}}async k(e){const t=i=>i?.map(s=>/\.vsix$/i.test(s)?x.parse(s):s),r={list:e.list,install:t(e.install),uninstall:t(e.uninstall),force:e.force};return await this.b.executeCommand("_remoteCLI.manageExtensions",r)}async l(e){return await this.b.executeCommand("_remoteCLI.getSystemStatus")}dispose(){this.a.close(),this.f&&process.platform!=="win32"&&HC.existsSync(this.f)&&HC.unlinkSync(this.f)}},ly=class extends mz{constructor(t,r){super(t,r,EA())}};ly=__decorate([__param(0,$i),__param(1,$e)],ly);var uy=class{constructor(t,r){this.a=t.getProxy(Q.MainThreadConsole),this.b=r.consoleForward.includeStack,this.c=r.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,r){const i=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){i.e(t,r,s,arguments)}})}e(t,r,i,s){this.a.$logExtensionHostMessage({type:"__$console",severity:r,arguments:wz(s,this.b)}),this.c&&this.f(t,i,s)}};uy=__decorate([__param(0,Ae),__param(1,Ot)],uy);var vz=1e5;function wz(e,t){const r=[];if(e.length)for(let i=0;i<e.length;i++){let s=e[i];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}r.push(s)}if(t){const i=new Error().stack;i&&r.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=SA(r);return i.length>vz?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}var bz=1024*1024,hy=class extends uy{constructor(t,r){super(t,r),this.g=!1,this.j("stderr","error"),this.j("stdout","log")}f(t,r,i){const s=t==="error"||t==="warn"?process.stderr:process.stdout;this.g=!0,s.write(`
START_NATIVE_LOG
`),r.apply(console,i),s.write(`
END_NATIVE_LOG
`),this.g=!1}j(t,r){const i=process[t],s=i.write;let n="";Object.defineProperty(i,"write",{set:()=>{},get:()=>(o,a,c)=>{if(!this.g){n+=o.toString(a);const l=n.length>bz?n.length:n.lastIndexOf(`
`);l!==-1&&(console[r](n.slice(0,l)),n=n.slice(l+1))}s.call(i,o,a,c)}})}};hy=__decorate([__param(0,Ae),__param(1,Ot)],hy);import{promises as Lo}from"fs";async function yz(e,t,r,i,s,n){let o;try{await xz(e,t,r,i,s,n)}catch(a){o=a}finally{o&&s.errorTransformer&&(o=s.errorTransformer(o)),typeof o<"u"&&r.error(o),r.end()}}async function xz(e,t,r,i,s,n){dy(n);const o=await e.open(t,{create:!1});try{dy(n);let a=0,c=0,l=s&&typeof s.length=="number"?s.length:void 0,u=Y.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),h=s&&typeof s.position=="number"?s.position:0,d=0;do c=await e.read(o,h,u.buffer,d,u.byteLength-d),h+=c,d+=c,a+=c,typeof l=="number"&&(l-=c),d===u.byteLength&&(await r.write(i(u)),u=Y.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),d=0);while(c>0&&(typeof l!="number"||l>0)&&dy(n)&&Ez(a,s));if(d>0){let f=d;typeof l=="number"&&(f=Math.min(d,l)),r.write(i(u.slice(0,f)))}}catch(a){throw $L(a)}finally{await e.close(o)}}function dy(e){if(e.isCancellationRequested)throw Fc();return!0}function Ez(e,t){if(typeof t?.limits?.size=="number"&&e>t.limits.size)throw bs(p(1943,null),oe.FileTooLarge);return!0}var kz=class extends K{constructor(e,t){super(),this.a=e,this.b=t,this.c=this.B(new P),this.onDidChangeFile=this.c.event,this.g=this.B(new P),this.onDidWatchError=this.g.event,this.j=[],this.m=this.B(new Hh(0)),this.y=[],this.z=this.B(new Hh(0))}watch(e,t){return t.recursive||this.b?.watcher?.forceUniversal?this.n(e,t):this.C(e,t)}n(e,t){const r=this.r(e,t),i=s4(this.j,r);return this.s(),te(()=>{i(),this.s()})}r(e,t){const r={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:t.recursive,filter:t.filter,correlationId:t.correlationId};if(ZH(r)){const i=this.b?.watcher?.recursive?.usePolling;i===!0?r.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3:Array.isArray(i)&&i.includes(r.path)&&(r.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3)}return r}s(){this.m.trigger(()=>this.t()).catch(e=>pt(e))}t(){return this.h||(this.h=this.B(this.u(e=>this.c.fire(b$(e)),e=>this.H(e),this.a.getLevel()===fe.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.h?.setVerboseLogging(this.a.getLevel()===fe.Trace)}))),this.h.watch(this.j)}C(e,t){const r={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:!1,filter:t.filter,correlationId:t.correlationId},i=s4(this.y,r);return this.D(),te(()=>{i(),this.D()})}D(){this.z.trigger(()=>this.F()).catch(e=>pt(e))}F(){return this.w||(this.w=this.B(this.G(e=>this.c.fire(b$(e)),e=>this.H(e),this.a.getLevel()===fe.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.w?.setVerboseLogging(this.a.getLevel()===fe.Trace)}))),this.w.watch(this.y)}H(e){e.type==="error"&&this.g.fire(e.message),this.I(e)}I(e){this.a[e.type](e.message)}J(e){return ls(e.fsPath)}L(e){const t=this.J(e);return UD(t)}};import{fork as Sz}from"child_process";function $z(e){const t=e;return t&&typeof t.type=="string"&&typeof t.severity=="string"}function Cz(e){const t=[];let r;try{const i=JSON.parse(e.arguments),s=i[i.length-1];s&&s.__$stack&&(i.pop(),r=s.__$stack),t.push(...i)}catch{t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:r}}function Iz(e){if(!e)return e;const t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Pz(e,t){const{args:r,stack:i}=Cz(e),s=typeof r[0]=="string"&&r.length===1;let n=Iz(i);n&&(n=`(${n.trim()})`);let o=[];if(typeof r[0]=="string"?n&&s?o=[`%c[${t}] %c${r[0]} %c${n}`,Sc("blue"),Sc(""),Sc("grey")]:o=[`%c[${t}] %c${r[0]}`,Sc("blue"),Sc(""),...r.slice(1)]:o=[`%c[${t}]%`,Sc("blue"),...r],n&&!s&&o.push(n),typeof console[e.severity]!="function")throw new Error("Unknown console method");console[e.severity].apply(console,o)}function Sc(e){return`color: ${e}`}var Dz=class{constructor(e,t){this.i=e,this.j=t,this.c=new Set,this.g=new Map,this.h=new P,this.onDidProcessExit=this.h.event;const r=t&&t.timeout?t.timeout:6e4;this.b=new E5(r),this.d=null,this.f=null}getChannel(e){const t=this;return{call(r,i,s){return t.k(e,r,i,s)},listen(r,i){return t.l(e,r,i)}}}k(e,t,r,i=Xe.None){if(!this.b)return Promise.reject(new Error("disposed"));if(i.isCancellationRequested)return Promise.reject(Fc());this.b.cancel();const s=this.n(e),n=us(c=>s.call(t,r,c)),o=i.onCancellationRequested(()=>n.cancel()),a=te(()=>n.cancel());return this.c.add(a),n.finally(()=>{o.dispose(),this.c.delete(a),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),n}l(e,t,r){if(!this.b)return je.None;this.b.cancel();let i;const s=new P({onWillAddFirstListener:()=>{i=this.n(e).listen(t,r)(s.fire,s),this.c.add(i)},onDidRemoveLastListener:()=>{this.c.delete(i),i.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return s.event}get m(){if(!this.f){const e=this.j&&this.j.args?this.j.args:[],t=Object.create(null);t.env={...it(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(t.env={...t.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(t.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(t.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(t.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),t.execArgv===void 0&&(t.execArgv=process.execArgv.filter(u=>!/^--inspect(-brk)?=/.test(u)).filter(u=>!u.startsWith("--vscode-"))),qU(t.env),this.d=Sz(this.i,e,t);const r=new P,s=je.fromNodeEventEmitter(this.d,"message",u=>u)(u=>{if($z(u)){Pz(u,`IPC Library: ${this.j.serverName}`);return}r.fire(Y.wrap(Buffer.from(u,"base64")))}),n=this.j.useQueue?GU(this.d):this.d,o=u=>this.d&&this.d.connected&&n.send(u.buffer.toString("base64")),a=r.event,c={send:o,onMessage:a};this.f=new X5(c);const l=()=>this.o();process.once("exit",l),this.d.on("error",u=>console.warn('IPC "'+this.j.serverName+'" errored with '+u)),this.d.on("exit",(u,h)=>{process.removeListener("exit",l),s.dispose(),this.c.forEach(d=>ai(d)),this.c.clear(),u!==0&&h!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+u+" and signal "+h),this.b?.cancel(),this.o(),this.h.fire({code:u,signal:h})})}return this.f}n(e){let t=this.g.get(e);return t||(t=this.m.getChannel(e),this.g.set(e,t)),t}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}},Az=class extends eB{constructor(e,t,r){super(e,t,r),this.s()}r(e){const t=e.add(new Dz(f5.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_ESM_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(t.onDidProcessExit(({code:r,signal:i})=>this.t(`terminated by itself with code ${r}, signal: ${i} (ETERM)`))),_m.toService(cA(t.getChannel("watcher")))}};import{watchFile as Tz,unwatchFile as Rz}from"fs";var Lz=class extends K{constructor(){super(),this.a=this.B(new P),this.onDidChangeFile=this.a.event,this.b=this.B(new P),this.onDidLogMessage=this.b.event,this.c=this.B(new P),this.f=this.c.event,this.g=new Map,this.h=new Map,this.j=this.B(new kh),this.m=new Set,this.n=this.B(new Hh(this.y())),this.r=5007,this.s=new rn,this.R=!1,this.B(this.f(e=>this.z({id:this.u(e),correlationId:this.t(e)?e.correlationId:void 0,path:e.path})))}t(e){return v$(e)}u(e){return this.t(e)?e.correlationId:gs(e)}async watch(e){this.s.isSettled||this.s.complete(),this.s=new rn;try{this.g.clear(),this.h.clear();for(const t of e)this.t(t)?this.g.set(t.correlationId,t):this.h.set(this.u(t),t);for(const[t]of this.j)!this.h.has(t)&&!this.g.has(t)&&(this.j.deleteAndDispose(t),this.m.delete(t));return await this.w(!1)}finally{this.s.complete()}}w(e){const t=[];for(const[r,i]of[...this.h,...this.g])this.j.has(r)||t.push(i);return this.n.trigger(()=>this.N(t),e?this.y():0).catch(r=>pt(r))}y(){return 800}isSuspended(e){const t=this.u(e);return this.m.has(t)?"polling":this.j.has(t)}async z(e){if(this.j.has(e.id))return;const t=new he;this.j.set(e.id,t),await this.s.p,!t.isDisposed&&(this.D(e,t),this.w(!0))}C(e){this.j.deleteAndDispose(e.id),this.m.delete(e.id),this.w(!1)}D(e,t){this.F(e,t)?(this.P(`reusing an existing recursive watcher to monitor ${e.path}`),this.m.delete(e.id)):(this.G(e,t),this.m.add(e.id))}F(e,t){const r=this.O?.subscribe(e.path,(i,s)=>{t.isDisposed||(i?this.D(e,t):s?.type===1&&this.H(e))});return r?(t.add(r),!0):!1}G(e,t){let r=!1;const i=(s,n)=>{if(t.isDisposed)return;const o=this.I(s),a=this.I(n),c=r;r=o,!o&&(a||c)&&this.H(e)};this.P(`starting fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{Tz(e.path,{persistent:!1,interval:this.r},i)}catch(s){this.Q(`fs.watchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}t.add(te(()=>{this.P(`stopping fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{Rz(e.path,i)}catch(s){this.Q(`fs.unwatchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}}))}H(e){this.P(`detected ${e.path} exists again, resuming watcher (correlationId: ${e.correlationId})`);const t={resource:x.file(e.path),type:1,cId:e.correlationId};this.a.fire([t]),this.J(t,e),this.C(e)}I(e){return e.ctimeMs===0&&e.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(e,t){if(this.R){const r=` >> normalized ${e.type===1?"[ADDED]":e.type===2?"[DELETED]":"[CHANGED]"} ${e.resource.fsPath}`;this.L(r,t)}}L(e,t){this.R&&this.P(`${e}${typeof t.correlationId=="number"?` <${t.correlationId}> `:""}`)}M(e){return`${e.path} (excludes: ${e.excludes.length>0?e.excludes:"<none>"}, includes: ${e.includes&&e.includes.length>0?JSON.stringify(e.includes):"<all>"}, filter: ${sB(e.filter)}, correlationId: ${typeof e.correlationId=="number"?e.correlationId:"<none>"})`}async setVerboseLogging(e){this.R=e}};import{watch as Nz,promises as Fz}from"fs";var Oz=class rm extends K{static{this.a=100}static{this.b=75}get isReusingRecursiveWatcher(){return this.n}get failed(){return this.r}constructor(t,r,i,s,n,o){super(),this.s=t,this.t=r,this.u=i,this.w=s,this.y=n,this.z=o,this.c=this.B(new f2({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},a=>this.u(a))),this.f=this.B(new d2(a=>this.M(a),rm.b)),this.g=x$(this.s.path,this.s.excludes),this.h=this.s.includes?x$(this.s.path,this.s.includes):void 0,this.j=v$(this.s)?this.s.filter:void 0,this.m=new rt,this.ready=this.C(),this.n=!1,this.r=!1}async C(){try{const t=await this.F(this.s);if(this.m.token.isCancellationRequested)return;const r=await Fz.stat(t);if(this.m.token.isCancellationRequested)return;this.B(await this.G(t,r.isDirectory()))}catch(t){t.code!=="ENOENT"?this.O(t):this.Q(`ignoring a path for watching who's stat info failed to resolve: ${this.s.path} (error: ${t})`),this.D()}}D(){this.r=!0,this.w?.()}async F(t){let r=t.path;try{r=await qe.realpath(t.path),t.path===r&&(r=await jm(t.path,this.m.token)??t.path),t.path!==r&&this.Q(`correcting a path to watch that seems to be a symbolic link or wrong casing (original: ${t.path}, real: ${r})`)}catch{}return r}async G(t,r){const i=new he;return this.H(t,r,i)?(this.Q(`reusing an existing recursive watcher for ${this.s.path}`),this.n=!0):(this.n=!1,await this.I(t,r,i)),i}H(t,r,i){if(r)return!1;const s=x.file(this.s.path),n=this.t?.subscribe(this.s.path,async(o,a)=>{if(!i.isDisposed)if(o){const c=await this.G(t,r);i.isDisposed?c.dispose():i.add(c)}else a&&(typeof a.cId=="number"||typeof this.s.correlationId=="number")&&this.L({resource:s,type:a.type,cId:this.s.correlationId},!0)});return n?(i.add(n),!0):!1}async I(t,r,i){if(Nt&&Bn(t,"/Volumes/",!0)){this.O(`Refusing to watch ${t} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`);return}const s=new rt(this.m.token);i.add(te(()=>s.dispose(!0)));const n=new he;i.add(n);try{const o=x.file(this.s.path),a=ut(t),c=Nz(t);n.add(te(()=>{c.removeAllListeners(),c.close()})),this.Q(`Started watching: '${t}'`);const l=new Set;if(r)try{for(const h of await qe.readdir(t))l.add(h)}catch(h){this.O(h)}if(s.token.isCancellationRequested)return;const u=new Map;n.add(te(()=>{for(const[,h]of u)h.dispose();u.clear()})),c.on("error",(h,d)=>{s.token.isCancellationRequested||(this.O(`Failed to watch ${t} for changes using fs.watch() (${h}, ${d})`),this.D())}),c.on("change",(h,d)=>{if(s.token.isCancellationRequested)return;this.z&&this.R(`[raw] ["${h}"] ${d}`);let f="";if(d&&(f=d.toString(),Nt&&(f=Jh(f))),!(!f||h!=="change"&&h!=="rename"))if(r)if(h==="rename"){u.get(f)?.dispose();const g=setTimeout(async()=>{if(u.delete(f),f===a&&!await qe.exists(t)){this.J(o);return}if(s.token.isCancellationRequested)return;const v=await this.N(Ve(t,f));if(s.token.isCancellationRequested)return;let y;v?l.has(f)?y=0:(y=1,l.add(f)):(l.delete(f),y=2),this.L({resource:Ct(o,f),type:y,cId:this.s.correlationId})},rm.a);u.set(f,te(()=>clearTimeout(g)))}else{let g;l.has(f)?g=0:(g=1,l.add(f)),this.L({resource:Ct(o,f),type:g,cId:this.s.correlationId})}else if(h==="rename"||f!==a){const g=setTimeout(async()=>{const v=await qe.exists(t);s.token.isCancellationRequested||(v?(this.L({resource:o,type:0,cId:this.s.correlationId},!0),n.add(await this.G(t,!1))):this.J(o))},rm.a);n.clear(),n.add(te(()=>clearTimeout(g)))}else this.L({resource:o,type:0,cId:this.s.correlationId},!0)})}catch(o){s.token.isCancellationRequested||this.O(`Failed to watch ${t} for changes using fs.watch() (${o.toString()})`),this.D()}}J(t){this.P("Watcher shutdown because watched path got deleted"),this.L({resource:t,type:2,cId:this.s.correlationId},!0),this.f.flush(),this.D()}L(t,r=!1){this.m.token.isCancellationRequested||(this.z&&this.R(`${t.type===1?"[ADDED]":t.type===2?"[DELETED]":"[CHANGED]"} ${t.resource.fsPath}`),!r&&this.g.some(i=>i(t.resource.fsPath))?this.z&&this.R(` >> ignored (excluded) ${t.resource.fsPath}`):!r&&this.h&&this.h.length>0&&!this.h.some(i=>i(t.resource.fsPath))?this.z&&this.R(` >> ignored (not included) ${t.resource.fsPath}`):this.f.work(t))}M(t){const r=tB(t),i=[];for(const n of r){if(iB(n,this.j)){this.z&&this.R(` >> ignored (filtered) ${n.resource.fsPath}`);continue}i.push(n)}if(i.length===0)return;if(this.z)for(const n of i)this.R(` >> normalized ${n.type===1?"[ADDED]":n.type===2?"[DELETED]":"[CHANGED]"} ${n.resource.fsPath}`);this.c.work(i)?this.c.pending>0&&this.Q(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${i[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.P(`started ignoring events due to too many file change events at once (incoming: ${i.length}, most recent change: ${i[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}async N(t){if(bt)return qe.exists(t);try{const r=ut(t);return(await qe.readdir(gr(t))).some(s=>s===r)}catch(r){return this.Q(r),!1}}setVerboseLogging(t){this.z=t}O(t){this.m.token.isCancellationRequested||this.y?.({type:"error",message:`[File Watcher (node.js)] ${t}`})}P(t){this.m.token.isCancellationRequested||this.y?.({type:"warn",message:`[File Watcher (node.js)] ${t}`})}Q(t){!this.m.token.isCancellationRequested&&this.z&&this.y?.({type:"trace",message:`[File Watcher (node.js)] ${t}`})}R(t){!this.m.token.isCancellationRequested&&this.z&&this.Q(`${t}${typeof this.s.correlationId=="number"?` <${this.s.correlationId}> `:""}`)}dispose(){this.m.dispose(!0),super.dispose()}},Mz=class extends Lz{constructor(e){super(),this.O=e,this.onDidError=je.None,this.watchers=new Set}async N(e){e=this.Z(e);const t=[],r=new Set(Array.from(this.watchers));for(const i of e){const s=this.W(i);s&&L7(s.request.excludes,i.excludes)&&L7(s.request.includes,i.includes)?r.delete(s):t.push(i)}t.length&&this.P(`Request to start watching: ${t.map(i=>this.M(i)).join(",")}`),r.size&&this.P(`Request to stop watching: ${Array.from(r).map(i=>this.M(i.request)).join(",")}`);for(const i of r)this.Y(i);for(const i of t)this.X(i)}W(e){for(const t of this.watchers)if(typeof e.correlationId=="number"||typeof t.request.correlationId=="number"){if(t.request.correlationId===e.correlationId)return t}else if(Cm(t.request.path,e.path,!bt))return t}X(e){const t=new Oz(e,this.O,i=>this.a.fire(i),()=>this.c.fire(e),i=>this.b.fire(i),this.R),r={request:e,instance:t};this.watchers.add(r)}async stop(){await super.stop();for(const e of this.watchers)this.Y(e)}Y(e){this.P("stopping file watcher",e),this.watchers.delete(e),e.instance.dispose()}Z(e){const t=new Map;for(const r of e){const i=bt?r.path:r.path.toLowerCase();let s=t.get(r.correlationId);s||(s=new Map,t.set(r.correlationId,s)),s.has(i)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(r)}`),s.set(i,r)}return Array.from(t.values()).map(r=>Array.from(r.values())).flat()}async setVerboseLogging(e){super.setVerboseLogging(e);for(const t of this.watchers)t.instance.setVerboseLogging(e)}P(e,t){this.R&&this.b.fire({type:"trace",message:this.bb(e,t)})}Q(e){this.b.fire({type:"warn",message:this.bb(e)})}bb(e,t){return t?`[File Watcher (node.js)] ${e} (${this.M(t.request)})`:`[File Watcher (node.js)] ${e}`}},Uz=class extends KH{constructor(e,t,r){super(e,t,r),this.s()}r(e){return e.add(new Mz(void 0))}},jz=class mh extends kz{static{this.M=!1}constructor(t,r){super(t,r),this.onDidChangeCapabilities=je.None,this.Q=new zt(i=>Am.getComparisonKey(i)),this.Y=new Map,this.Z=new Map,this.$=new Map}get capabilities(){return this.N||(this.N=253982,bt&&(this.N|=1024)),this.N}async stat(t){try{const{stat:r,symbolicLink:i}=await mr.stat(this.J(t));return{type:this.P(r,i),ctime:r.birthtime.getTime(),mtime:r.mtime.getTime(),size:r.size,permissions:r.mode&128?void 0:cn.Locked}}catch(r){throw this.ib(r)}}async O(t){try{return await this.stat(t)}catch{return}}async readdir(t){try{const r=await qe.readdir(this.J(t),{withFileTypes:!0}),i=[];return await Promise.all(r.map(async s=>{try{let n;s.isSymbolicLink()?n=(await this.stat(Ct(t,s.name))).type:n=this.P(s),i.push([s.name,n])}catch(n){this.a.trace(n)}})),i}catch(r){throw this.ib(r)}}P(t,r){let i;return r?.dangling?i=Or.Unknown:t.isFile()?i=Or.File:t.isDirectory()?i=Or.Directory:i=Or.Unknown,r&&(i|=Or.SymbolicLink),i}async R(t){const r=this.J(t);this.S(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${r})`);let i;for(;i=this.Q.get(t);)this.S(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${r})`),await i.wait();const s=new Xr;return this.Q.set(t,s),this.S(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${r})`),te(()=>{this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${r})`),this.Q.get(t)===s&&(this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${r})`),this.Q.delete(t)),this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${r})`),s.open()})}async readFile(t,r){let i;try{r?.atomic&&(this.S(`[Disk FileSystemProvider]: atomic read operation started (${this.J(t)})`),i=await this.R(t));const s=this.J(t);return await Lo.readFile(s)}catch(s){throw this.ib(s)}finally{i?.dispose()}}S(t){mh.M&&this.a.trace(t)}readFileStream(t,r,i){const s=A5(n=>Y.concat(n.map(o=>Y.wrap(o))).buffer);return yz(this,t,s,n=>n.buffer,{...r,bufferSize:256*1024},i),s}async writeFile(t,r,i){return i?.atomic!==!1&&i?.atomic?.postfix&&await this.U(t)?this.W(t,Ct(jh(t),`${ji(t)}${i.atomic.postfix}`),r,i):this.X(t,r,i)}async U(t){try{const r=this.J(t),{symbolicLink:i}=await mr.stat(r);if(i)return!1}catch{}return!0}async W(t,r,i,s){const n=new he;try{n.add(await this.R(t)),n.add(await this.R(r)),await this.X(r,i,s,!0);try{await this.rename(r,t,{overwrite:!0})}catch(o){try{await this.delete(r,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{n.dispose()}}async X(t,r,i,s){let n;try{const o=this.J(t);if(!i.create||!i.overwrite){if(await qe.exists(o)){if(!i.overwrite)throw bs(p(1946,null),oe.FileExists)}else if(!i.create)throw bs(p(1947,null),oe.FileNotFound)}n=await this.open(t,{create:!0,unlock:i.unlock},s),await this.write(n,0,r,0,r.byteLength)}catch(o){throw await this.jb(t,o)}finally{typeof n=="number"&&await this.close(n)}}static{this.ab=!0}static configureFlushOnWrite(t){mh.ab=t}async open(t,r,i){const s=this.J(t);let n;da(r)&&!i&&(n=await this.R(t));let o;try{if(da(r)&&r.unlock)try{const{stat:a}=await mr.stat(s);a.mode&128||await Lo.chmod(s,a.mode|128)}catch(a){a.code!=="ENOENT"&&this.a.trace(a)}if(ze&&da(r))try{o=await qe.open(s,"r+"),await qe.ftruncate(o,0)}catch(a){if(a.code!=="ENOENT"&&this.a.trace(a),typeof o=="number"){try{await qe.close(o)}catch(c){this.a.trace(c)}o=void 0}}typeof o!="number"&&(o=await qe.open(s,da(r)?"w":"r"))}catch(a){throw n?.dispose(),da(r)?await this.jb(t,a):this.ib(a)}if(this.Y.set(o,0),da(r)&&this.$.set(o,t),n){const a=this.Z.get(o);this.S(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${s})`),this.Z.set(o,n),a&&(this.S(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${s})`),a.dispose())}return o}async close(t){const r=this.Z.get(t);try{if(this.Y.delete(t),this.$.delete(t)&&mh.ab)try{await qe.fdatasync(t)}catch(i){mh.configureFlushOnWrite(!1),this.a.error(i)}return await qe.close(t)}catch(i){throw this.ib(i)}finally{r&&(this.Z.get(t)===r&&(this.S(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.Z.delete(t)),this.S(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),r.dispose())}}async read(t,r,i,s,n){const o=this.bb(t,r);let a=null;try{a=(await qe.read(t,i,s,n,o)).bytesRead}catch(c){throw this.ib(c)}finally{this.cb(t,o,a)}return a}bb(t,r){return r===this.Y.get(t)?null:r}cb(t,r,i){const s=this.Y.get(t);typeof s=="number"&&(typeof r=="number"||(typeof i=="number"?this.Y.set(t,s+i):this.Y.delete(t)))}async write(t,r,i,s,n){return m2(()=>this.db(t,r,i,s,n),100,3)}async db(t,r,i,s,n){const o=this.bb(t,r);let a=null;try{a=(await qe.write(t,i,s,n,o)).bytesWritten}catch(c){throw await this.jb(this.$.get(t),c)}finally{this.cb(t,o,a)}return a}async mkdir(t){try{await Lo.mkdir(this.J(t))}catch(r){throw this.ib(r)}}async delete(t,r){try{const i=this.J(t);if(r.recursive){let s;r?.atomic!==!1&&r.atomic.postfix&&(s=Ve(gr(i),`${ut(i)}${r.atomic.postfix}`)),await qe.rm(i,_n.MOVE,s)}else try{await Lo.unlink(i)}catch(s){if(s.code==="EPERM"||s.code==="EISDIR"){let n=!1;try{const{stat:o,symbolicLink:a}=await mr.stat(i);n=o.isDirectory()&&!a}catch{}if(n)await Lo.rmdir(i);else throw s}else throw s}}catch(i){throw this.ib(i)}}async rename(t,r,i){const s=this.J(t),n=this.J(r);if(s!==n)try{await this.eb(t,r,"move",i.overwrite),await qe.rename(s,n)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(1948,null,ut(s),ut(gr(n)),o.toString()))),this.ib(o)}}async copy(t,r,i){const s=this.J(t),n=this.J(r);if(s!==n)try{await this.eb(t,r,"copy",i.overwrite),await qe.copy(s,n,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(1949,null,ut(s),ut(gr(n)),o.toString()))),this.ib(o)}}async eb(t,r,i,s){const n=this.J(t),o=this.J(r);let a=!1;if(!!(this.capabilities&1024)||(a=Cm(n,o,!0)),a){if(i==="copy")throw bs(p(1950,null),oe.FileExists);if(i==="move")return}const l=await this.O(t);if(!l)throw bs(p(1951,null),oe.FileNotFound);const u=await this.O(r);if(u){if(!s)throw bs(p(1952,null),oe.FileExists);l.type&Or.File&&u.type&Or.File||await this.delete(r,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(t,r){return this.fb(t,r,!1)}async fb(t,r,i){const s=this.J(t),n=this.J(r),o=!!(this.capabilities&1024);if(Cm(s,n,!o))return;const a=new he;try{a.add(await this.R(t)),a.add(await this.R(r)),i&&await Lo.mkdir(gr(n),{recursive:!0}),await Lo.copyFile(s,n)}catch(c){if(c.code==="ENOENT"&&!i)return this.fb(t,r,!0);throw this.ib(c)}finally{a.dispose()}}u(t,r,i){return new Az(s=>t(s),s=>r(s),i)}G(t,r,i){return new Uz(s=>t(s),s=>r(s),i)}ib(t){if(t instanceof gd)return t;let r=t,i;switch(t.code){case"ENOENT":i=oe.FileNotFound;break;case"EISDIR":i=oe.FileIsADirectory;break;case"ENOTDIR":i=oe.FileNotADirectory;break;case"EEXIST":i=oe.FileExists;break;case"EPERM":case"EACCES":i=oe.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":r=`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,i=oe.Unknown;break;default:i=oe.Unknown}return bs(r,i)}async jb(t,r){let i=this.ib(r);if(t&&i.code===oe.NoPermissions)try{const{stat:s}=await mr.stat(this.J(t));s.mode&128||(i=bs(r,oe.FileWriteLocked))}catch(s){this.a.trace(s)}return i}},fy=class{constructor(t,r){t.addFileSystemProvider(V.file,new Hz(r),{isCaseSensitive:bt})}};fy=__decorate([__param(0,Cu),__param(1,$e)],fy);var Hz=class{constructor(e){this.b=e,this.a=new jz(this.b)}async stat(e){const t=await this.a.stat(e);return{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===cn.Readonly?1:void 0}}readDirectory(e){return this.a.readdir(e)}createDirectory(e){return this.a.mkdir(e)}readFile(e){return this.a.readFile(e)}writeFile(e,t,r){return this.a.writeFile(e,t,{...r,unlock:!1,atomic:!1})}delete(e,t){return this.a.delete(e,{...t,useTrash:!1,atomic:!1})}rename(e,t,r){return this.a.rename(e,t,r)}copy(e,t,r){return this.a.copy(e,t,r)}get onDidChangeFile(){throw new Error("Method not implemented.")}watch(e,t){throw new Error("Method not implemented.")}};import{createRequire as Bz}from"node:module";var BC=Bz(import.meta.url),_z=class extends ry{j(){const e=this,t=BC("module"),r=t._load;t._load=function(a,c,l){return a=n(a),e.a.has(a)?e.a.get(a).load(a,x.file(eA(c.filename)),u=>r.apply(this,[u,c,l])):r.apply(this,arguments)};const i=t._resolveLookupPaths;t._resolveLookupPaths=(o,a)=>i.call(this,n(o),a);const s=t._resolveFilename;t._resolveFilename=function(a,c,l,u){return a==="vsda"&&Array.isArray(u?.paths)&&u.paths.length===0&&(u.paths=t._nodeModulePaths(import.meta.dirname)),s.call(this,a,c,l,u)};const n=o=>{for(const a of e.b){const c=a(o);if(c){o=c;break}}return o}}},zz=class extends Dw{constructor(){super(...arguments),this.extensionRuntime=Df.Node}async vb(){this.h.createInstance(hy);const e=this.h.invokeFunction(R_);if(this.h.createInstance(cy),this.f.remote.isRemote&&this.f.remote.authority){const i=this.h.createInstance(ly);process.env.VSCODE_IPC_HOOK_CLI=i.ipcHandlePath}this.h.createInstance(fy),await this.h.createInstance(_z,e,{mine:this.J,all:this.L}).install(),xt("code/extHost/didInitAPI");const r=await this.m.getConfigProvider();await nz(this.j,r,this,this.s,this.z,this.f,this.q),xt("code/extHost/didInitProxyResolver")}wb(e){return e.main}async xb(e,t,r){if(t.scheme!==V.file)throw new Error(`Cannot load URI: '${t}', must be of file-scheme`);let i=null;r.codeLoadingStart(),this.s.trace(`ExtensionService#loadCommonJSModule ${t.toString(!0)}`),this.s.flush();const s=e?.identifier.value;e&&await this.w.initializeLocalizedMessages(e);try{s&&xt(`code/extHost/willLoadExtensionCode/${s}`),i=BC(t.fsPath)}finally{s&&xt(`code/extHost/didLoadExtensionCode/${s}`),r.codeLoadingStop()}return i}async $setRemoteEnvironment(e){if(this.f.remote.isRemote)for(const t in e){const r=e[t];r===null?delete process.env[t]:process.env[t]=r}}};import*as ih from"fs";import{exec as _C}from"child_process";var Wz=(e,t,r)=>{const i=new Uint8Array(16);for(let o=0;o<16;o++)i[o]=Math.round(Math.random()*256);const s=qh(Y.wrap(i));return[`GET ws://localhost${e}?${t}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${s}`].join(`\r
`)+`\r
\r
`},zC=Y.fromString(`\r
\r
`);async function Vz(e,t,r,i,s){e.write(Y.fromString(Wz(t,r,i)));const n=new he;try{return await new Promise((o,a)=>{let c;n.add(e.onData(l=>{c?c=Y.concat([c,l],c.byteLength+l.byteLength):c=l;const u=c.indexOf(zC);if(u===-1)return;o(e),e.pauseData();const h=c.slice(u+zC.byteLength);h.byteLength&&s.onData.fire(h)})),n.add(e.onClose(l=>a(l??new Error("socket closed")))),n.add(e.onEnd(()=>a(new Error("socket ended"))))})}catch(o){throw e.dispose(),o}finally{n.dispose()}}var qz=class extends K{constructor(e,t){super(),this.g=e,this.a=this.B(new Bc),this.onData=(...r)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...r)),this.b=this.B(new P),this.onDidDispose=this.b.event,this.f=!1,this.B(t.onData),this.B(t.onData.event(r=>this.a.fire(r))),this.onClose=this.B(t.onClose).event,this.onEnd=this.B(t.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(e,t){Xh.traceSocketEvent(this,this.g,e,t)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}},Gz="signService",sh=J(Gz);import*as Jz from"net";import*as Qz from"os";import*as Yz from"net";var WC={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function Xz(e,t,r,i="127.0.0.1"){let s=!1,n,o=1;const a=Yz.createServer({pauseOnConnect:!0});function c(l,u){s||(s=!0,a.removeAllListeners(),a.close(),n&&clearTimeout(n),u(l))}return new Promise(l=>{n=setTimeout(()=>{c(0,l)},r),a.on("listening",()=>{c(e,l)}),a.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&o<t?(e++,o++,a.listen(e,i)):c(0,l)}),a.on("close",()=>{c(0,l)}),a.listen(e,i)})}var Zz=30*1e3,VC;(function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel"})(VC||(VC={}));function py(e){switch(e){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function qC(e){const t=new rt;return setTimeout(()=>t.cancel(),e),t.token}function Kz(e,t){if(e.isCancellationRequested||t.isCancellationRequested)return Xe.Cancelled;const r=new rt;return e.onCancellationRequested(()=>r.cancel()),t.onCancellationRequested(()=>r.cancel()),r.token}var gy=class{get didTimeout(){return this.c==="timedout"}constructor(e){this.c="pending",this.d=new he,{promise:this.promise,resolve:this.f,reject:this.g}=x5(),e.isCancellationRequested?this.h():this.d.add(e.onCancellationRequested(()=>this.h()))}registerDisposable(e){this.c==="pending"?this.d.add(e):e.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(e))}reject(e){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(e))}};function eW(e,t){const r=new gy(t);return r.registerDisposable(e.onControlMessage(i=>{const s=JSON.parse(i.toString()),n=uW(s);n?r.reject(n):r.resolve(s)})),r.promise}function tW(e,t,r,i,s,n,o,a){const c=new gy(a),l=Ar.create(!1);return e.info(`Creating a socket (${o})...`),xt(`code/willCreateSocket/${n}`),t.connect(r,i,s,o).then(u=>{c.didTimeout?(xt(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already.`),u?.dispose()):(xt(`code/didCreateSocketOK/${n}`),e.info(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`),c.resolve(u))},u=>{xt(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms.`),e.error(u),c.reject(u)}),c.promise}function my(e,t){const r=new gy(t);return e.then(i=>{r.didTimeout||r.resolve(i)},i=>{r.didTimeout||r.reject(i)}),r.promise}async function rW(e,t,r,i){const s=XC(e,t);e.logService.trace(`${s} 1/6. invoking socketFactory.connect().`);let n;try{n=await tW(e.logService,e.remoteSocketFactoryService,e.connectTo,h5.getServerRootPath(),`reconnectionToken=${e.reconnectionToken}&reconnection=${e.reconnectionProtocol?"true":"false"}`,py(t),`renderer-${py(t)}-${e.reconnectionToken}`,i)}catch(u){throw e.logService.error(`${s} socketFactory.connect() failed or timed out. Error:`),e.logService.error(u),u}e.logService.trace(`${s} 2/6. socketFactory.connect() was successful.`);let o,a;e.reconnectionProtocol?(e.reconnectionProtocol.beginAcceptReconnection(n,null),o=e.reconnectionProtocol,a=!1):(o=new Wm({socket:n}),a=!0),e.logService.trace(`${s} 3/6. sending AuthRequest control message.`);const c=await my(e.signService.createNewMessage(Ft()),i),l={type:"auth",auth:e.connectionToken||"00000000000000000000",data:c.data};o.sendControl(Y.fromString(JSON.stringify(l)));try{const u=await eW(o,Kz(i,qC(1e4)));if(u.type!=="sign"||typeof u.data!="string"){const g=new Error("Unexpected handshake message");throw g.code="VSCODE_CONNECTION_ERROR",g}if(e.logService.trace(`${s} 4/6. received SignRequest control message.`),!await my(e.signService.validate(c,u.signedData),i)){const g=new Error("Refused to connect to unsupported server");throw g.code="VSCODE_CONNECTION_ERROR",g}const d=await my(e.signService.sign(u.data),i),f={type:"connectionType",commit:e.commit,signedData:d,desiredConnectionType:t};return r&&(f.args=r),e.logService.trace(`${s} 5/6. sending ConnectionTypeRequest control message.`),o.sendControl(Y.fromString(JSON.stringify(f))),{protocol:o,ownsProtocol:a}}catch(u){throw u&&u.code==="ETIMEDOUT"&&(e.logService.error(`${s} the handshake timed out. Error:`),e.logService.error(u)),u&&u.code==="VSCODE_CONNECTION_ERROR"&&(e.logService.error(`${s} received error control message when negotiating connection. Error:`),e.logService.error(u)),a&&YC(o),u}}async function iW(e,t,r){const i=Date.now(),s=XC(e,3),{protocol:n}=await rW(e,3,t,r);return e.logService.trace(`${s} 6/6. handshake finished, connection is up and running after ${fW(i)}!`),n}async function GC(e,t,r){const{connectTo:i,connectionToken:s}=await e.addressProvider.getAddress();return{commit:e.commit,quality:e.quality,connectTo:i,connectionToken:s,reconnectionToken:t,reconnectionProtocol:r,remoteSocketFactoryService:e.remoteSocketFactoryService,signService:e.signService,logService:e.logService}}async function sW(e,t,r){const i=await GC(e,Ft(),null);return await iW(i,{host:t,port:r},Xe.None)}function nW(e){return us(t=>new Promise((r,i)=>{const s=setTimeout(r,e*1e3);t.onCancellationRequested(()=>{clearTimeout(s),r()})}))}var JC;(function(e){e[e.ConnectionLost=0]="ConnectionLost",e[e.ReconnectionWait=1]="ReconnectionWait",e[e.ReconnectionRunning=2]="ReconnectionRunning",e[e.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",e[e.ConnectionGain=4]="ConnectionGain"})(JC||(JC={}));var oW=class{constructor(e,t){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.type=0}},aW=class{constructor(e,t,r,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=r,this.c=i,this.type=1}skipWait(){this.c.cancel()}},cW=class{constructor(e,t,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.type=2}},QC=class{constructor(e,t,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.type=4}},lW=class{constructor(e,t,r,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.handled=i,this.type=3}},pZ=class Ws extends K{static triggerPermanentFailure(t,r,i){this._permanentFailure=!0,this.f=t,this.g=r,this.h=i,this.j.forEach(s=>s.D(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.y())}static debugPauseSocketWriting(){this.j.forEach(t=>t.F())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||Ws._permanentFailure}constructor(t,r,i,s,n){super(),this.t=t,this.u=r,this.reconnectionToken=i,this.protocol=s,this.w=n,this.m=this.B(new P),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.m.fire(new QC(this.reconnectionToken,0,0)),this.B(s.onSocketClose(o=>{const a=Fg(this.t,this.reconnectionToken,!0);o?o.type===0?(this.u.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),o.error&&this.u.logService.error(o.error)):(this.u.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`),o.event&&this.u.logService.error(o.event)):this.u.logService.info(`${a} received socket close event.`),this.y()})),this.B(s.onSocketTimeout(o=>{const a=Fg(this.t,this.reconnectionToken,!0);this.u.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),this.y()})),Ws.j.push(this),this.B(te(()=>{const o=Ws.j.indexOf(this);o>=0&&Ws.j.splice(o,1)})),this.n&&this.D(Ws.f,Ws.g,Ws.h)}dispose(){super.dispose(),this.s=!0}async y(){if(!this.r)try{this.r=!0,await this.z()}finally{this.r=!1}}async z(){if(this.n||this.s)return;const t=Fg(this.t,this.reconnectionToken,!0);this.u.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`),this.m.fire(new oW(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const r=[0,5,5,10,10,10,10,10,30];let i=-1;do{i++;const s=i<r.length?r[i]:r[r.length-1];try{if(s>0){const o=nW(s);this.m.fire(new aW(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s,o)),this.u.logService.info(`${t} waiting for ${s} seconds before reconnecting...`);try{await o}catch{}}if(this.n){this.u.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new cW(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),i+1)),this.u.logService.info(`${t} resolving connection...`);const n=await GC(this.u,this.reconnectionToken,this.protocol);this.u.logService.info(`${t} connecting to ${n.connectTo}...`),await this.G(n,qC(Zz)),this.u.logService.info(`${t} reconnected!`),this.m.fire(new QC(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),i+1));break}catch(n){if(n.code==="VSCODE_CONNECTION_ERROR"){this.u.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}if(i>360){this.u.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}if(K1.isTemporarilyNotAvailable(n)){this.u.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if((n.code==="ETIMEDOUT"||n.code==="ENETUNREACH"||n.code==="ECONNREFUSED"||n.code==="ECONNRESET")&&n.syscall==="connect"){this.u.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(Ni(n)){this.u.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(n instanceof K1){this.u.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,K1.isHandled(n));break}this.u.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}}while(!this.n&&!this.s)}C(t,r,i){this.w?Ws.triggerPermanentFailure(t,r,i):this.D(t,r,i)}D(t,r,i){this.m.fire(new lW(this.reconnectionToken,t,r,i)),YC(this.protocol)}F(){this.protocol.pauseSocketWriting()}};function YC(e){try{e.acceptDisconnect();const t=e.getSocket();e.dispose(),t.dispose()}catch(t){pt(t)}}function uW(e){if(e&&e.type==="error"){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}function hW(e,t){for(;e.length<t;)e+=" ";return e}function dW(e,t){return`[remote-connection][${hW(py(e),13)}][${t.substr(0,5)}\u2026]`}function Fg(e,t,r){return`${dW(e,t)}[${r?"reconnect":"initial"}]`}function XC(e,t){return`${Fg(t,e.reconnectionToken,!!e.reconnectionProtocol)}[${e.connectTo}]`}function fW(e){return`${Date.now()-e} ms`}var vy=J("remoteSocketFactoryService");async function pW(e,t,r,i,s){let n;for(let o=3;o&&(n?.dispose(),n=await new ZC(e,t,r,i,s).waitForReady(),!(s&&WC[s]||!WC[n.tunnelLocalPort]));o--);return n}var ZC=class extends K{constructor(e,t,r,i,s){super(),this.m=t,this.n=s,this.privacy=Yi.Private,this.j=new Map,this.a=e,this.b=Jz.createServer(),this.c=new Xr,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=n=>this.r(n),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=i,this.tunnelRemoteHost=r}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(t=>{t()})}async waitForReady(){const e=this.n??this.tunnelRemotePort,t=Rs(this.m)?"0.0.0.0":"127.0.0.1";let r=await Xz(e,2,1e3,t),i=null;return this.b.listen(r,this.m),await this.c.wait(),i=this.b.address(),i||(r=0,this.b.listen(r,this.m),await this.c.wait(),i=this.b.address()),this.tunnelLocalPort=i.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${i.port}`,this}async r(e){e.pause();const t=Co(this.tunnelRemoteHost)||Rs(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,r=await sW(this.a,t,this.tunnelRemotePort),i=r.getSocket(),s=r.readEntireBuffer();r.dispose(),s.byteLength>0&&e.write(s.buffer),e.on("end",()=>{e.localAddress&&this.j.delete(e.localAddress),i.end()}),e.on("close",()=>i.end()),e.on("error",()=>{e.localAddress&&this.j.delete(e.localAddress),i instanceof Xc?i.socket.destroy():i.end()}),i instanceof Xc?this.t(e,i):this.s(e,i),e.localAddress&&this.j.set(e.localAddress,()=>{e.end(),i.end()})}s(e,t){t.onClose(()=>e.destroy()),t.onEnd(()=>e.end()),t.onData(r=>e.write(r.buffer)),e.on("data",r=>t.write(Y.wrap(r))),e.resume()}t(e,t){const r=t.socket;r.on("end",()=>e.end()),r.on("close",()=>e.end()),r.on("error",()=>{e.destroy()}),r.pipe(e),e.pipe(r)}},wy=class extends sw{constructor(t,r,i,s,n){super(r,n),this.H=t,this.I=i,this.J=s}isPortPrivileged(t){return MO(t,this.t,vm,Qz.release())}F(t,r,i,s,n,o,a,c){const l=this.D(r,i);if(l)return++l.refcount,l.value;if(FO(t))return this.G(t,r,i,n,o,a,c);{this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${r}:${i} on local port ${n}.`);const u={commit:this.J.commit,quality:this.J.quality,addressProvider:t,remoteSocketFactoryService:this.H,signService:this.I,logService:this.r,ipcLogger:null},h=pW(u,s,r,i,n);return this.r.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.z(r,i,h),h}}};wy=__decorate([__param(0,vy),__param(1,$e),__param(2,sh),__param(3,bd),__param(4,xs)],wy);var by=class extends wy{constructor(t,r,i,s,n){super(t,r,i,s,n)}};by=__decorate([__param(0,vy),__param(1,$e),__param(2,sh),__param(3,bd),__param(4,xs)],by);var KC=class extends K{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.f=i,this.g=s,this.h=n,this.a=new Map}async openTunnel(t,r,i,s,n,o,a,c,l){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${i}:${s} on local port ${o}.`),!this.a.has(t)){const u=new by(this.b,this.c,this.g,this.f,this.h);this.B(u),this.a.set(t,u),u.onTunnelClosed(async()=>{(await u.tunnels).length===0&&(u.dispose(),this.a.delete(t))})}return this.a.get(t).openTunnel(r,i,s,n,o,a,c,l)}};KC=__decorate([__param(0,vy),__param(1,$e),__param(2,bd),__param(3,sh),__param(4,xs)],KC);var gW=J("dialogService"),e3;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(e3||(e3={}));var wZ=J("fileDialogService"),t3;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(t3||(t3={}));var mW=10*1e3,Og="remote.tunnels.toRestore",yy="remote.tunnels.toRestoreExpiration",vW=1e3*60*60*24*14,r3="onTunnel",bZ=new H("forwardedPortsViewEnabled",!1,p(13095,null)),wW=new H("forwardedPortsViewOnlyEnabled",!1,p(13096,null));function i3(e){const t=e.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(t)return{host:t[1]?.substring(0,t[1].length-1)||"localhost",port:Number(t[2])}}var nh;(function(e){e.Other="Other",e.User="User",e.AutoForwardEnd="AutoForwardEnd"})(nh||(nh={}));var Hs;(function(e){e[e.User=0]="User",e[e.Auto=1]="Auto",e[e.Extension=2]="Extension"})(Hs||(Hs={}));var xy={source:Hs.User,description:p(13097,null)},yZ={source:Hs.Auto,description:p(13098,null)};function s3(e,t,r){const i=e.get(jr(t,r));if(i)return i;if(Co(t))for(const s of Iu){const n=jr(s,r);if(e.has(n))return e.get(n)}else if(Rs(t))for(const s of Lp){const n=jr(s,r);if(e.has(n))return e.get(n)}}function Ir(e,t,r){const i=s3(e,t,r);if(i)return i;const s=Rs(t)?"localhost":Co(t)?"0.0.0.0":void 0;if(s)return s3(e,s,r)}function jr(e,t){return e+":"+t}var Dn;(function(e){e.Notify="notify",e.OpenBrowser="openBrowser",e.OpenBrowserOnce="openBrowserOnce",e.OpenPreview="openPreview",e.Silent="silent",e.Ignore="ignore"})(Dn||(Dn={}));function bW(e){return e&&"host"in e&&typeof e.host=="string"&&"port"in e&&typeof e.port=="number"&&(!("detail"in e)||typeof e.detail=="string")&&(!("pid"in e)||typeof e.pid=="string")}var n3=class Ti extends K{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(t){super(),this.r=t,this.j=[],this.n=new P,this.onDidChangeAttributes=this.n.event,this.B(t.onDidChangeConfiguration(r=>{(r.affectsConfiguration(Ti.c)||r.affectsConfiguration(Ti.f))&&this.s()})),this.s()}s(){this.j=this.y(),this.n.fire()}getAttributes(t,r,i){let s=this.w(t,r,i,this.j,0);const n={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;s>=0;){const o=this.j[s];o.key===t?(n.onAutoForward=o.onAutoForward??n.onAutoForward,n.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:n.elevateIfNeeded,n.label=o.label??n.label,n.requireLocalPort=o.requireLocalPort,n.protocol=o.protocol):(n.onAutoForward=n.onAutoForward??o.onAutoForward,n.elevateIfNeeded=n.elevateIfNeeded!==void 0?n.elevateIfNeeded:o.elevateIfNeeded,n.label=n.label??o.label,n.requireLocalPort=n.requireLocalPort!==void 0?n.requireLocalPort:void 0,n.protocol=n.protocol??o.protocol),s=this.w(t,r,i,this.j,s+1)}return n.onAutoForward!==void 0||n.elevateIfNeeded!==void 0||n.label!==void 0||n.requireLocalPort!==void 0||n.protocol!==void 0?n:this.C()}t(t){return t.start!==void 0&&t.end!==void 0}u(t){return t.host!==void 0&&t.port!==void 0&&Pe(t.host)&&_r(t.port)}w(t,r,i,s,n){if(n>=s.length)return-1;const o=!Co(r)&&!Rs(r),c=s.slice(n).findIndex(l=>_r(l.key)?o?!1:l.key===t:this.t(l.key)?o?!1:t>=l.key.start&&t<=l.key.end:this.u(l.key)?t===l.key.port&&r===l.key.host:i?l.key.test(i):!1);return c>=0?c+n:-1}y(){const t=this.r.getValue(Ti.c);if(!t||!mt(t))return[];const r=[];for(const s in t){if(s===void 0)continue;const n=t[s];let o;if(Number(s))o=Number(s);else if(Pe(s))if(Ti.g.test(s)){const a=s.match(Ti.g);o={start:Number(a[1]),end:Number(a[2])}}else if(Ti.h.test(s)){const a=s.match(Ti.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(s)}catch{}a&&(o=a)}o&&r.push({key:o,elevateIfNeeded:n.elevateIfNeeded,onAutoForward:n.onAutoForward,label:n.label,requireLocalPort:n.requireLocalPort,protocol:n.protocol})}const i=this.r.getValue(Ti.f);return i&&(this.m={elevateIfNeeded:i.elevateIfNeeded,label:i.label,onAutoForward:i.onAutoForward,requireLocalPort:i.requireLocalPort,protocol:i.protocol}),this.z(r)}z(t){function r(i,s){return _r(i.key)?i.key:s.t(i.key)?i.key.start:s.u(i.key)?i.key.port:Number.MAX_VALUE}return t.sort((i,s)=>r(i,this)-r(s,this))}C(){return this.m}static providedActionToAction(t){switch(t){case Cn.Notify:return Dn.Notify;case Cn.OpenBrowser:return Dn.OpenBrowser;case Cn.OpenBrowserOnce:return Dn.OpenBrowserOnce;case Cn.OpenPreview:return Dn.OpenPreview;case Cn.Silent:return Dn.Silent;case Cn.Ignore:return Dn.Ignore;default:return}}async addAttributes(t,r,i){const n=this.r.inspect(Ti.c).userRemoteValue;let o;!n||!mt(n)?o={}:o=it(n),o[`${t}`]||(o[`${t}`]={});for(const a in r)o[`${t}`][a]=r[a];return this.r.updateValue(Ti.c,o,i)}},Ey=class extends K{constructor(t,r,i,s,n,o,a,c,l,u){super(),this.H=t,this.I=r,this.J=i,this.L=s,this.M=n,this.N=o,this.O=a,this.P=c,this.Q=l,this.R=u,this.c=new Map,this.g=new P,this.onForwardPort=this.g.event,this.h=new P,this.onClosePort=this.h.event,this.j=new P,this.onPortName=this.j.event,this.n=new P,this.onCandidatesChanged=this.n.event,this.t=new P,this.onEnvironmentTunnelsSet=this.t.event,this.u=!1,this.w=void 0,this.z=!1,this.C=new P,this.D=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new n3(i),this.s=this.bb(),this.B(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const d=await this.getAttributes(h.map(f=>({port:f.tunnelRemotePort,host:f.tunnelRemoteHost})));for(const f of h)if(f.localAddress){const g=jr(f.tunnelRemoteHost,f.tunnelRemotePort),v=Ir(this.m??new Map,f.tunnelRemoteHost,f.tunnelRemotePort);this.forwarded.set(g,{remotePort:f.tunnelRemotePort,remoteHost:f.tunnelRemoteHost,localAddress:f.localAddress,protocol:d?.get(f.tunnelRemotePort)?.protocol??ri.Http,localUri:await this.Y(f.localAddress,d?.get(f.tunnelRemotePort)),localPort:f.tunnelLocalPort,name:d?.get(f.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:f.privacy,source:xy}),this.f.set(g,f)}}),this.detected=new Map,this.B(this.H.onTunnelOpened(async h=>{const d=jr(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Ir(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Ir(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Ir(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const f=Ir(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),g=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(d,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:g?.protocol??ri.Http,localUri:await this.Y(h.localAddress,g),localPort:h.tunnelLocalPort,name:g?.label,closeable:!0,runningProcess:f?.detail,hasRunningProcess:!!f,pid:f?.pid,privacy:h.privacy,source:xy})}await this.db(),this.W(!0),this.f.set(d,h),this.g.fire(this.forwarded.get(d))})),this.B(this.H.onTunnelClosed(h=>this.X(h,nh.Other))),this.W(!1)}S(){return this.Q.extensions.find(t=>t.activationEvents?.includes(r3))?(this.R.createKey(wW.key,!0),!0):!1}W(t){if(this.U||(t&&(this.U=!0),this.L.remoteAuthority!==void 0&&!t)||this.S())return;const i=this.B(this.Q.onDidRegisterExtensions(()=>{this.S()&&i.dispose()}))}async X(t,r){const i=jr(t.host,t.port);this.forwarded.has(i)&&(this.forwarded.delete(i),await this.db(),this.h.fire(t))}Y(t,r){if(t.startsWith("http"))return x.parse(t);const i=r?.protocol??"http";return x.parse(`${i}://${t}`)}async Z(t){const r=this.N.getWorkspace(),i=r.configuration?gs(r.configuration.path):r.folders.length>0?gs(r.folders[0].uri.path):void 0;if(i===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.L.remoteAuthority}.${i}`}async $(){return this.Z(Og)}async ab(){return this.Z(yy)}async bb(){const t=this.I.get(Og,1);if(t)return this.I.remove(Og,1),await this.db(),t;const r=await this.$();if(r)return this.I.get(r,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const t=await this.s;if(t&&t!==this.y){const r=JSON.parse(t)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${r.map(i=>i.remotePort).join(", ")}`);for(const i of r){const s=Ir(this.detected,i.remoteHost,i.remotePort);i.source.source!==Hs.Extension&&!s||i.source.source===Hs.Extension&&s?await this.gb({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,elevateIfNeeded:!0,source:i.source}):i.source.source===Hs.Extension&&!s&&this.D.set(jr(i.remoteHost,i.remotePort),i)}}}if(this.z=!0,this.C.fire(),!this.w){const t=await this.$();this.w=this.B(new he),this.w.add(this.I.onDidChangeValue(0,void 0,this.w)(async r=>{r.key===t&&(this.s=Promise.resolve(this.I.get(t,0)),await this.restoreForwarded())}))}}cb(){const t=this.I.keys(0,0).filter(r=>r.startsWith(yy));for(const r of t){const i=this.I.getNumber(r,0);if(i&&i<Date.now()){this.s=Promise.resolve(void 0);const s=r.replace(yy,Og);this.I.remove(r,0),this.I.remove(s,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const t=Array.from(this.forwarded.values()),r=t.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let i;t.length>0&&(i=JSON.stringify(r));const s=await this.$(),n=await this.ab();!i&&s&&n?(this.I.remove(s,0),this.I.remove(n,0)):i!==this.y&&s&&n&&(this.I.store(s,i,0,0),this.I.store(n,Date.now()+vW,0,0)),this.y=i}}async fb(t,r,i){if(!t.tunnelLocalPort||!i?.requireLocalPort||t.tunnelLocalPort===r)return;const s=new Date;if(this.eb.getTime()+mW>s.getTime())return;this.eb=s;const n=p(13099,null,r,t.tunnelRemotePort,t.tunnelLocalPort);return this.P.info(n)}async forward(t,r){return!this.z&&this.L.remoteAuthority&&await je.toPromise(this.C.event),this.gb(t,r)}async gb(t,r){await this.Q.activateByEvent(r3);const i=Ir(this.forwarded,t.remote.host,t.remote.port);r=r??(r!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);const s=t.local!==void 0?t.local:t.remote.port;let n;if(i)return this.ib(i,t,r);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,c=jr(t.remote.host,t.remote.port);this.c.set(c,!0),t=this.hb(c,t);const l=await this.H.openTunnel(a,t.remote.host,t.remote.port,void 0,s,t.elevateIfNeeded?t.elevateIfNeeded:r?.elevateIfNeeded,t.privacy,r?.protocol);if(typeof l=="string")n=l;else if(l&&l.localAddress){const u=Ir(this.m??new Map,t.remote.host,t.remote.port),h=l.protocol?l.protocol===ri.Https?ri.Https:ri.Http:r?.protocol??ri.Http,d={remoteHost:l.tunnelRemoteHost,remotePort:l.tunnelRemotePort,localPort:l.tunnelLocalPort,name:r?.label??t.name,closeable:!0,localAddress:l.localAddress,protocol:h,localUri:await this.Y(l.localAddress,r),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:t.source??xy,privacy:l.privacy};return this.forwarded.set(c,d),this.f.set(c,l),this.c.delete(c),await this.db(),await this.fb(l,s,r),this.g.fire(d),l}this.c.delete(c)}return n}hb(t,r){const i=this.D.has(t)?this.D:this.F.has(t)?this.F:void 0;if(i){const s=i.get(t);i.delete(t),s&&(r.name=s.name??r.name,r.local=("local"in s?s.local:"localPort"in s?s.localPort:void 0)??r.local,r.privacy=r.privacy)}return r}async ib(t,r,i){const s=i?.label??r.name;let n;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(n||(n={}));let o=n.None;switch(s!==t.name&&(t.name=s,o=n.Fire),(i?.protocol||t.protocol!==ri.Http)&&i?.protocol!==t.protocol&&(r.source=t.source,o=n.Reopen),r.privacy&&t.privacy!==r.privacy&&(o=n.Reopen),o){case n.Fire:{this.g.fire();break}case n.Reopen:await this.close(t.remoteHost,t.remotePort,nh.User),await this.gb(r,i)}return Ir(this.f,r.remote.host,r.remote.port)}async name(t,r,i){const s=Ir(this.forwarded,t,r),n=jr(t,r);if(s){s.name=i,await this.db(),this.j.fire({host:t,port:r});return}else this.detected.has(n)&&(this.detected.get(n).name=i,this.j.fire({host:t,port:r}))}async close(t,r,i){const s=jr(t,r),n=this.forwarded.get(s);return i===nh.AutoForwardEnd&&n&&n.source.source===Hs.Auto&&this.F.set(s,{local:n.localPort,name:n.name,privacy:n.privacy}),await this.H.closeTunnel(t,r),this.X({host:t,port:r},i)}address(t,r){const i=jr(t,r);return(this.forwarded.get(i)||this.detected.get(i))?.localAddress}get environmentTunnelsSet(){return this.u}addEnvironmentTunnels(t){if(t)for(const r of t){const i=Ir(this.m??new Map,r.remoteAddress.host,r.remoteAddress.port),s=typeof r.localAddress=="string"?r.localAddress:jr(r.localAddress.host,r.localAddress.port);this.detected.set(jr(r.remoteAddress.host,r.remoteAddress.port),{remoteHost:r.remoteAddress.host,remotePort:r.remoteAddress.port,localAddress:s,protocol:ri.Http,localUri:this.Y(s),closeable:!1,runningProcess:i?.detail,hasRunningProcess:!!i,pid:i?.pid,privacy:Yi.ConstantPrivate,source:{source:Hs.Extension,description:p(13100,null)}}),this.H.setEnvironmentTunnel(r.remoteAddress.host,r.remoteAddress.port,s,Yi.ConstantPrivate,ri.Http)}this.u=!0,this.t.fire(),this.g.fire()}setCandidateFilter(t){this.r=t}async setCandidates(t){let r=t;this.r&&(r=await this.r(t));const i=this.jb(r);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(i.values()).map(s=>s.port).join(", ")}`),this.n.fire(i)}jb(t){const r=this.m??new Map,i=new Map;return this.m=i,t.forEach(s=>{const n=jr(s.host,s.port);i.set(n,{host:s.host,port:s.port,detail:s.detail,pid:s.pid}),r.has(n)&&r.delete(n);const o=Ir(this.forwarded,s.host,s.port);o&&(o.runningProcess=s.detail,o.hasRunningProcess=!0,o.pid=s.pid)}),r.forEach((s,n)=>{const o=i3(n);if(!o)return;const a=Ir(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const c=Ir(this.detected,o.host,o.port);c&&(c.runningProcess=void 0,c.hasRunningProcess=!1,c.pid=void 0)}),r}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const t=Array.from(this.forwarded.values()),r=await this.getAttributes(t.map(i=>({port:i.remotePort,host:i.remoteHost})),!1);if(r)for(const i of t){const s=r.get(i.remotePort);(s?.protocol||i.protocol!==ri.Http)&&s?.protocol!==i.protocol&&await this.gb({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,source:i.source},s),s&&s.label&&s.label!==i.name&&await this.name(i.remoteHost,i.remotePort,s.label)}}async getAttributes(t,r=!0){const i=new Map,s=new Map;t.forEach(l=>{const u=Ir(this.m??new Map,Iu[0],l.port)??l;if(u){i.set(l.port,u);const h=bW(u)?u.pid:void 0;s.has(h)||s.set(h,[]),s.get(h)?.push(l.port)}});const n=new Map;if(t.forEach(l=>{const u=this.configPortsAttributes.getAttributes(l.port,l.host,i.get(l.port)?.detail);u&&n.set(l.port,u)}),this.G.length===0||!r)return n.size>0?n:void 0;const o=await Promise.all(this.G.flatMap(l=>Array.from(s.entries()).map(u=>{const h=u[1],d=i.get(h[0]);return l.providePortAttributes(h,d?.pid,d?.detail,Xe.None)}))),a=new Map;if(o.forEach(l=>l.forEach(u=>{u&&a.set(u.port,u)})),!n&&!a)return;const c=new Map;return t.forEach(l=>{const u=n.get(l.port),h=a.get(l.port);c.set(l.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??n3.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),c}addAttributesProvider(t){this.G.push(t)}};__decorate([Yh(1e3)],Ey.prototype,"db",null),Ey=__decorate([__param(0,NO),__param(1,v7),__param(2,xs),__param(3,k8),__param(4,SF),__param(5,sd),__param(6,$e),__param(7,gW),__param(8,AO),__param(9,ax)],Ey);function yW(e){const t=e.trim().split(`
`),r=[];return t.forEach(s=>{const n=/\/proc\/(\d+)\/fd\/\d+ -> socket:\[(\d+)\]/.exec(s);n&&n.length>=3&&r.push({pid:parseInt(n[1],10),socket:parseInt(n[2],10)})}),r.reduce((s,n)=>(s[n.socket]=n,s),{})}function xW(...e){const t=[].concat(...e.map(kW));return[...new Map(t.filter(r=>r.st==="0A").map(r=>{const i=r.local_address.split(":");return{socket:parseInt(r.inode,10),ip:EW(i[0]),port:parseInt(i[1],16)}}).map(r=>[r.ip+":"+r.port,r])).values()]}function EW(e){let t="";if(e.length===8)for(let r=e.length-2;r>=0;r-=2)t+=parseInt(e.substr(r,2),16),r!==0&&(t+=".");else for(let r=0;r<e.length;r+=8){const i=e.substring(r,r+8);let s="";for(let n=8;n>=2;n-=2)s+=i.substring(n-2,n),(n===6||n===2)&&(s=parseInt(s,16).toString(16),t+=`${s}`,s="",r+n!==e.length-6&&(t+=":"))}return t}function kW(e){const t=e.trim().split(`
`),r=t.shift().trim().split(/\s+/).filter(s=>s!=="rx_queue"&&s!=="tm->when");return t.map(s=>s.trim().split(/\s+/).reduce((n,o,a)=>(n[r[a]||a]=o,n),{}))}function SW(e){return e.length>500?!1:!!e.match(/.*\.vscode-server-[a-zA-Z]+\/bin.*/)||e.indexOf("out/server-main.js")!==-1||e.indexOf("_productName=VSCode")!==-1}function $W(e){const t=e.trim().split(`
`),r=[];return t.forEach(i=>{const s=/^\d+\s+\D+\s+root\s+(\d+)\s+(\d+).+\d+\:\d+\:\d+\s+(.+)$/.exec(i);s&&s.length>=4&&r.push({pid:parseInt(s[1],10),ppid:parseInt(s[2]),cmd:s[3]})}),r}async function CW(e,t,r){const i=r.reduce((n,o)=>(n[o.pid]=o,n),{}),s=[];return e.forEach(({socket:n,ip:o,port:a})=>{const c=t[n]?t[n].pid:void 0,l=c?i[c]?.cmd:void 0;c&&l&&!SW(l)&&s.push({host:o,port:a,detail:l,pid:c})}),s}function IW(e,t,r){const i=new Map,s=$W(t);for(const n of e){const o=r.get(n.port);if(o){i.set(n.port,o);continue}const a=s.find(c=>c.cmd.includes(`${n.port}`));if(a){let c=a,l;do l=s.find(u=>u.ppid===c.pid),l&&(c=l);while(l);i.set(n.port,{host:n.ip,port:n.port,pid:c.pid,detail:c.cmd,ppid:c.ppid})}else i.set(n.port,{host:n.ip,port:n.port,ppid:Number.MAX_VALUE})}return i}var ky=class extends Fp{constructor(t,r,i,s){super(t,r,i),this.D=r,this.F=s,this.y=void 0,this.z=new Map,this.C=!1,bt&&r.remote.isRemote&&r.remote.authority&&(this.a.$setRemoteTunnelService(process.pid),this.H())}async $registerCandidateFinder(t){if(t&&this.C)return;this.C=t;let r;this.y&&(r=this.y,await this.a.$onFoundNewCandidates(this.y));const i=new gR;let s=0;for(;this.C;){const n=new Date().getTime(),o=(await this.I()).filter(l=>Co(l.host)||Rs(l.host));this.s.trace(`ForwardedPorts: (ExtHostTunnelService) found candidate ports ${o.map(l=>l.port).join(", ")}`);const a=new Date().getTime()-n;this.s.trace(`ForwardedPorts: (ExtHostTunnelService) candidate port scan took ${a} ms.`),s++>3&&i.update(a),(!r||JSON.stringify(r)!==JSON.stringify(o))&&(r=o,await this.a.$onFoundNewCandidates(r));const c=this.G(i.value);this.s.trace(`ForwardedPorts: (ExtHostTunnelService) next candidate port scan in ${c} ms.`),await new Promise(l=>setTimeout(()=>l(),c))}}G(t){return Math.max(t*20,2e3)}async H(){this.y=await this.I(),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) Initial candidates found: ${this.y.map(t=>t.port).join(", ")}`)}async I(){let t="",r="";try{t=await ih.promises.readFile("/proc/net/tcp","utf8"),r=await ih.promises.readFile("/proc/net/tcp6","utf8")}catch{}const i=xW(t,r),s=await new Promise(d=>{_C("ls -l /proc/[0-9]*/fd/[0-9]* | grep socket:",(f,g,v)=>{d(g)})}),n=yW(s),o=await qe.readdir("/proc"),a=[];for(const d of o)try{const f=Number(d),g=Ct(x.file("/proc"),d);if((await ih.promises.stat(g.fsPath)).isDirectory()&&!isNaN(f)){const y=await ih.promises.readlink(Ct(g,"cwd").fsPath),E=await ih.promises.readFile(Ct(g,"cmdline").fsPath,"utf8");a.push({pid:f,cwd:y,cmd:E})}}catch{}const c=[],l=i.filter(d=>{const f=n[d.socket];return f||c.push(d),f}),u=CW(l,n,a);let h;if(this.s.trace(`ForwardedPorts: (ExtHostTunnelService) number of possible root ports ${c.length}`),c.length>0){const d=await new Promise(f=>{_C("ps -F -A -l | grep root",(g,v,y)=>{f(v)})});this.z=IW(c,d,this.z),h=Array.from(this.z.values()),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) heuristic ports ${h.map(f=>f.port).join(", ")}`)}return u.then(d=>h?d.concat(h):d)}w(t){return async r=>{const i=new ZC({commit:this.D.commit,quality:this.D.quality,logService:this.s,ipcLogger:null,remoteSocketFactoryService:{_serviceBrand:void 0,async connect(n,o,a,c){const l=await t.makeConnection();return PW.connect(l,o,a,c)},register(){throw new Error("not implemented")}},addressProvider:{getAddress(){return Promise.resolve({connectTo:new bk(0),connectionToken:t.connectionToken})}},signService:this.F},"localhost",r.remoteAddress.host||"localhost",r.remoteAddress.port,r.localAddressPort);await i.waitForReady();const s=new P;return{localAddress:i3(i.localAddress)??i.localAddress,remoteAddress:{port:i.tunnelRemotePort,host:i.tunnelRemoteHost},onDidDispose:s.event,dispose:()=>{i.dispose(),s.fire(),s.dispose()}}}}};ky=__decorate([__param(0,Ae),__param(1,Ot),__param(2,$e),__param(3,sh)],ky);var PW=class CI extends qz{static connect(t,r,i,s){const n=new he,o={onClose:n.add(new P),onData:n.add(new P),onEnd:n.add(new P)};n.add(t.onDidReceiveMessage(c=>o.onData.fire(Y.wrap(c)))),n.add(t.onDidEnd(()=>o.onEnd.fire())),n.add(t.onDidClose(c=>o.onClose.fire({type:0,error:c,hadError:!!c})));const a=new CI(t,s,o);return a.B(n),Vz(a,r,i,s,o)}constructor(t,r,i){super(r,i),this.n=t}write(t){this.n.send(t.buffer)}h(){this.n.end()}async drain(){await this.n.drain?.()}};import*as No from"fs";var DW=class extends iw{constructor(){super(...arguments),this.i=null}async g(e){const t=await super.g(e);if(t.scheme!==V.file)return t;if(this.b.skipWorkspaceStorageLock)return this.d.info(`Skipping acquiring lock for ${t.fsPath}.`),t;const r=t.fsPath;let i=0;do{let s;i===0?s=r:s=/[/\\]$/.test(r)?`${r.substr(0,r.length-1)}-${i}`:`${r}-${i}`,await AW(s);const n=Ve(s,"vscode.lock"),o=await a3(this.d,n,!1);if(o)return this.i=o,process.on("exit",()=>{o.dispose()}),x.file(s);i++}while(i<10);return t}onWillDeactivateAll(){this.i?.setWillRelease(6e3)}};async function AW(e){try{await No.promises.stat(e);return}catch{}try{await No.promises.mkdir(e,{recursive:!0})}catch{}}var TW=1e3,o3=10*60*1e3,RW=class extends K{constructor(e,t){super(),this.b=e,this.c=t,this.a=this.B(new $5),this.a.cancelAndSet(async()=>{const r=await Sy(e,t);(!r||r.pid!==process.pid)&&(e.info(`Lock '${t}': The lock was lost unexpectedly.`),this.a.cancel());try{await No.promises.utimes(t,new Date,new Date)}catch(i){e.error(i),e.info(`Lock '${t}': Could not update mtime.`)}},TW)}dispose(){super.dispose();try{No.unlinkSync(this.c)}catch{}}async setWillRelease(e){this.b.info(`Lock '${this.c}': Marking the lockfile as scheduled to be released in ${e} ms.`);try{const t={pid:process.pid,willReleaseAt:Date.now()+e};await qe.writeFile(this.c,JSON.stringify(t),{flag:"w"})}catch(t){this.b.error(t)}}};async function a3(e,t,r){try{const s={pid:process.pid,willReleaseAt:0};await qe.writeFile(t,JSON.stringify(s),{flag:"wx"})}catch(s){e.error(s)}const i=await Sy(e,t);return!i||i.pid!==process.pid?r?(e.info(`Lock '${t}': Could not acquire lock, giving up.`),null):(e.info(`Lock '${t}': Could not acquire lock, checking if the file is stale.`),NW(e,t)):(e.info(`Lock '${t}': Lock acquired.`),new RW(e,t))}async function Sy(e,t){let r;try{r=await No.promises.readFile(t)}catch(i){return e.error(i),null}try{return JSON.parse(String(r))}catch(i){return e.error(i),null}}async function $y(e,t){let r;try{r=await No.promises.stat(t)}catch(i){return e.error(i),0}return r.mtime.getTime()}function LW(e){try{return process.kill(e,0),!0}catch{return!1}}async function NW(e,t){const r=await Sy(e,t);if(!r)return e.info(`Lock '${t}': Could not read pid of lock holder.`),oh(e,t);if(r.willReleaseAt){let a=r.willReleaseAt-Date.now();if(a<5e3){for(a>0?e.info(`Lock '${t}': The lockfile is scheduled to be released in ${a} ms.`):e.info(`Lock '${t}': The lockfile is scheduled to have been released.`);a>0;){if(await lr(Math.min(100,a)),await $y(e,t)===0)return oh(e,t);a=r.willReleaseAt-Date.now()}return oh(e,t)}}if(!LW(r.pid))return e.info(`Lock '${t}': The pid ${r.pid} appears to be gone.`),oh(e,t);const i=await $y(e,t),s=Date.now()-i;if(s<=o3)return e.info(`Lock '${t}': The lock does not look stale, elapsed: ${s} ms, giving up.`),null;e.info(`Lock '${t}': The lock looks stale, waiting for 2s.`),await lr(2e3);const n=await $y(e,t),o=Date.now()-n;return o<=o3?(e.info(`Lock '${t}': The lock does not look stale, elapsed: ${o} ms, giving up.`),null):(e.info(`Lock '${t}': The lock looks stale even after waiting for 2s.`),oh(e,t))}async function oh(e,t){e.info(`Lock '${t}': Deleting a stale lock.`);try{await No.promises.unlink(t)}catch{}return a3(e,t,!0)}var Bs;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"})(Bs||(Bs={}));async function FW(e,t,r,i,s){try{const n=await import("@vscode/spdlog");n.setFlushOn(Bs.Trace);const o=await n.createAsyncRotatingLogger(e,t,r,i);return s?o.clearFormatters():o.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),o}catch(n){console.error(n)}return null}function c3(e,t,r){switch(t){case fe.Trace:e.trace(r);break;case fe.Debug:e.debug(r);break;case fe.Info:e.info(r);break;case fe.Warning:e.warn(r);break;case fe.Error:e.error(r);break;case fe.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function l3(e,t){switch(t){case fe.Trace:e.setLevel(Bs.Trace);break;case fe.Debug:e.setLevel(Bs.Debug);break;case fe.Info:e.setLevel(Bs.Info);break;case fe.Warning:e.setLevel(Bs.Warning);break;case fe.Error:e.setLevel(Bs.Error);break;case fe.Off:e.setLevel(Bs.Off);break;default:throw new Error(`Invalid log level ${t}`)}}var OW=class extends c1{constructor(e,t,r,i,s){super(),this.n=[],this.setLevel(s),this.r=this.t(e,t,r,i),this.B(this.onDidChangeLogLevel(n=>{this.s&&l3(this.s,n)}))}async t(e,t,r,i){const s=r?6:1,n=30/s*LE.MB,o=await FW(e,t,n,s,i);if(o){this.s=o,l3(this.s,this.getLevel());for(const{level:a,message:c}of this.n)c3(this.s,a,c);this.n=[]}}m(e,t){this.s?c3(this.s,e,t):this.getLevel()<=e&&this.n.push({level:e,message:t})}flush(){this.s?this.w():this.r.then(()=>this.w())}dispose(){this.s?this.y():this.r.then(()=>this.y()),super.dispose()}w(){this.s&&this.s.flush()}y(){this.s&&(this.s.drop(),this.s=void 0)}},MW=class extends eg{s(e,t,r){return e.scheme===V.file?new OW(r?.name||Ft(),e.fsPath,!r?.donotRotate,!!r?.donotUseFormatters,t):super.s(e,t,r)}registerLogger(e){super.registerLogger(e),this.r.$registerLogger(e)}deregisterLogger(e){super.deregisterLogger(e),this.r.$deregisterLogger(e)}};import{homedir as UW}from"os";var jW=class extends Yp{m(){return UW()}},HW=class extends K{constructor(e,t=[]){super(),this.a=new tR([e,...t]),this.B(e.onDidChangeLogLevel(r=>this.setLevel(r)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Cy=class extends HW{constructor(t,r,i){const s=i.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=i.remote.isRemote?p(2756,null):p(t?2757:2758,null);super(r.createLogger(s,{name:n}))}};Cy=__decorate([__param(1,oa),__param(2,Ot)],Cy),Le(Ns,zz,0),Le(oa,MW,1),Le($e,new vs(Cy,[!1],!0)),Le(sh,xS,1),Le(rw,DW,0),Le(Zw,db,0),Le(tb,bb,0),Le(Qw,ab,0),Le(Ls,ob,0),Le(Np,ky,0),Le(fc,jW,0);import{createRequire as BW}from"node:module";var u3=BW(import.meta.url);(function(){for(let t=0;t<process.execArgv.length;t++)process.execArgv[t]==="--inspect-port=0"&&(process.execArgv.splice(t,1),t--)})();var Mg=(0,YI.default)(process.argv.slice(2),{boolean:["transformURIs","skipWorkspaceStorageLock"],string:["useHostProxy"]});(function(){const e=u3("module"),t=e._load;e._load=function(r){if(r==="natives")throw new Error('Either the extension or an NPM dependency is using the [unsupported "natives" node module](https://go.microsoft.com/fwlink/?linkid=871887).');return t.apply(this,arguments)}})();var Ug=process.exit.bind(process),_W=process.on.bind(process);function zW(e){process.exit=function(t){if(e)Ug(t);else{const r=new Error("An extension called process.exit() and this was prevented.");console.warn(r.stack)}},process.crash=function(){const t=new Error("An extension called process.crash() and this was prevented.");console.warn(t.stack)},process.env.ELECTRON_RUN_AS_NODE="1",process.on=function(t,r){t==="uncaughtException"&&(r=function(){try{return r.call(void 0,arguments)}catch{}}),_W(t,r)}}var Zi=function(e){Ug()};function WW(){const e=RM(process.env);if(e.type===3)return new Promise((t,r)=>{const i=s=>{const n=s[0],o=new Vn;n.on("message",a=>o.fire(Y.wrap(a.data))),n.on("close",()=>{Zi("renderer closed the MessagePort")}),n.start(),t({onMessage:o.event,send:a=>n.postMessage(a.buffer)})};process.parentPort.on("message",s=>i(s.ports))});if(e.type===2)return new Promise((t,r)=>{let i=null;const s=setTimeout(()=>{Zi("VSCODE_EXTHOST_IPC_SOCKET timeout")},6e4),n=108e5,o=3e5,a=new C5(()=>Zi("renderer disconnected for too long (1)"),n),c=new C5(()=>Zi("renderer disconnected for too long (2)"),o);process.on("message",(u,h)=>{if(u&&u.type==="VSCODE_EXTHOST_IPC_SOCKET"){h.setNoDelay(!0);const d=Y.wrap(Buffer.from(u.initialDataChunk,"base64"));let f;if(u.skipWebSocketFrames)f=new Xc(h,"extHost-socket");else{const g=Y.wrap(Buffer.from(u.inflateBytes,"base64"));f=new mA(new Xc(h,"extHost-socket"),u.permessageDeflate,g,!1)}i?(a.cancel(),c.cancel(),i.beginAcceptReconnection(f,d),i.endAcceptReconnection(),i.sendResume()):(clearTimeout(s),i=new Wm({socket:f,initialChunk:d}),i.sendResume(),i.onDidDispose(()=>Zi("renderer disconnected")),t(i),i.onSocketClose(()=>{a.schedule()}))}if(u&&u.type==="VSCODE_EXTHOST_IPC_REDUCE_GRACE_TIME"){if(c.isScheduled())return;a.isScheduled()&&c.schedule()}});const l={type:"VSCODE_EXTHOST_IPC_READY"};process.send?.(l)});{const t=e.pipeName;return new Promise((r,i)=>{const s=XI.createConnection(t,()=>{s.removeListener("error",i);const n=new Wm({socket:new Xc(s,"extHost-renderer")});n.sendResume(),r(n)});s.once("error",i),s.on("close",()=>{Zi("renderer closed the socket")})})}}async function VW(){const e=await WW();return new class{constructor(){this.a=new Vn,this.onMessage=this.a.event,this.b=!1,this.d=e.onMessage(t=>{qO(t,2)?(this.b=!0,this.d.dispose(),Zi("received terminate message from renderer")):this.a.fire(t)})}send(t){this.b||e.send(t)}async drain(){if(e.drain)return e.drain()}}}function qW(e){return new Promise(t=>{const r=e.onMessage(i=>{r.dispose();const s=JSON.parse(i.toString()),n=s.commit,o=$T.commit;if(n&&o&&n!==o&&Ug(55),s.parentPid){let a=0;setInterval(function(){try{process.kill(s.parentPid,0),a=0}catch(l){l&&l.code==="EPERM"?(a++,a>=3&&Zi(`parent process ${s.parentPid} does not exist anymore (3 x EPERM): ${l.message} (code: ${l.code}) (errno: ${l.errno})`)):Zi(`parent process ${s.parentPid} does not exist anymore: ${l.message} (code: ${l.code}) (errno: ${l.errno})`)}},1e3);let c;try{c=u3("native-watchdog"),c.start(s.parentPid)}catch(l){pt(l)}}e.send(W9(0)),t({protocol:e,initData:s})});e.send(W9(1))})}async function GW(){const e=[];process.on("unhandledRejection",(a,c)=>{e.push(c),setTimeout(()=>{const l=e.indexOf(c);l>=0&&c.catch(u=>{e.splice(l,1),Ni(u)||(console.warn(`rejected promise not handled within 1 second: ${u}`),u&&u.stack&&console.warn(`stack trace: ${u.stack}`),a&&pt(a))})},1e3)}),process.on("rejectionHandled",a=>{const c=e.indexOf(a);c>=0&&e.splice(c,1)}),process.on("uncaughtException",function(a){eP(a)||pt(a)}),xt("code/extHost/willConnectToRenderer");const t=await VW();xt("code/extHost/didConnectToRenderer");const r=await qW(t);xt("code/extHost/didWaitForInitData");const{initData:i}=r;zW(!!i.environment.extensionTestsLocationURI),i.environment.useHostProxy=Mg.useHostProxy!==void 0?Mg.useHostProxy!=="false":void 0,i.environment.skipWorkspaceStorageLock=X(Mg.skipWorkspaceStorageLock,!1);const s=new class{constructor(){this.pid=process.pid}exit(c){Ug(c)}fsExists(c){return qe.exists(c)}fsRealpath(c){return K2(c)}};let n=null;i.remote.authority&&Mg.transformURIs&&(n=AM(i.remote.authority));const o=new PM(r.protocol,i,s,n);Zi=a=>o.terminate(a)}GW().catch(e=>console.log(e));

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/cd4ee3b1c348a13bafd8f9ad8060705f6d4b9cba/core/vs/workbench/api/node/extensionHostProcess.js.map
