/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={8197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Environment:()=>n});var n=function(){function e(e){if(this.validateAuthority=!0,!e||"object"!=typeof e)throw new Error("'parameters' is a required parameter and must be of type 'object'.");["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"].forEach((function(t){if(!e[t]||"string"!=typeof e[t].valueOf())throw new Error('Please provide "'+t+'" for the environment and it must be of type "string".')})),this.name=e.name,this.portalUrl=e.portalUrl,this.managementEndpointUrl=e.managementEndpointUrl,this.resourceManagerEndpointUrl=e.resourceManagerEndpointUrl,this.activeDirectoryEndpointUrl=e.activeDirectoryEndpointUrl,this.activeDirectoryResourceId=e.activeDirectoryResourceId,this.activeDirectoryGraphApiVersion&&(this.activeDirectoryGraphApiVersion=e.activeDirectoryGraphApiVersion),this.activeDirectoryGraphResourceId&&(this.activeDirectoryGraphResourceId=e.activeDirectoryGraphResourceId),this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix&&(this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix=e.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix),this.azureDataLakeStoreFileSystemEndpointSuffix&&(this.azureDataLakeStoreFileSystemEndpointSuffix=e.azureDataLakeStoreFileSystemEndpointSuffix),this.batchResourceId&&(this.batchResourceId=e.batchResourceId),this.galleryEndpointUrl&&(this.galleryEndpointUrl=e.galleryEndpointUrl),this.keyVaultDnsSuffix&&(this.keyVaultDnsSuffix=e.keyVaultDnsSuffix),this.publishingProfileUrl&&(this.publishingProfileUrl=e.publishingProfileUrl),this.sqlManagementEndpointUrl&&(this.sqlManagementEndpointUrl=e.sqlManagementEndpointUrl),this.sqlServerHostnameSuffix&&(this.sqlServerHostnameSuffix=e.sqlServerHostnameSuffix),this.storageEndpointSuffix&&(this.storageEndpointSuffix=e.storageEndpointSuffix)}return e.add=function(t){var r={},n=new e(t);r[t.name]=n,Object.assign(e,r)},e.get=function(t){if(!t)throw new TypeError("name cannot be null or undefined and must be of type string.");return e[t]},e.AzureCloud={name:"AzureCloud",portalUrl:"https://portal.azure.com",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net",validateAuthority:!0},e.ChinaCloud={name:"AzureChinaCloud",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",batchResourceId:"https://batch.chinacloudapi.cn/",storageEndpointSuffix:"core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.USGovernment={name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.GermanCloud={name:"AzureGermanCloud",portalUrl:"https://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e}()},670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>m,BaseTelemetryPlugin:()=>D.s,DiagnosticLogger:()=>u.wq,EventLatency:()=>w,EventPersistence:()=>A,EventPropertyType:()=>C,EventsDiscardedReason:()=>U.x,FullVersionString:()=>f.xE,InternalAppInsightsCore:()=>l._,LoggingSeverity:()=>N,MinChannelPriorty:()=>M,NotificationManager:()=>x.h,PerfEvent:()=>s.Q6,PerfManager:()=>s.NS,ProcessTelemetryContext:()=>L.W0,TraceLevel:()=>I,Undefined:()=>Z.bA,ValueKind:()=>y,ValueSanitizer:()=>O,Version:()=>f.Rx,_InternalLogMessage:()=>u.WD,__getRegisteredEvents:()=>q.El,_logInternalMessage:()=>u.Oc,_throwInternal:()=>u.ZP,_warnToConsole:()=>u.OG,addEventHandler:()=>q.So,addEventListeners:()=>q.lQ,addPageHideEventListener:()=>q.Fc,addPageShowEventListener:()=>q.oS,addPageUnloadEventListener:()=>q.ee,areCookiesSupported:()=>ee.gi,arrForEach:()=>P.I,arrIndexOf:()=>b.r,arrMap:()=>$.W,arrReduce:()=>V.K,attachEvent:()=>q.Q3,blockDynamicConversion:()=>ie.V9,cookieAvailable:()=>ee.gi,createCookieMgr:()=>ee.xN,createDynamicConfig:()=>a.e,createEnumStyle:()=>v.H,createGuid:()=>f.gj,createProcessTelemetryContext:()=>L.i8,createTraceParent:()=>ne.wk,createUniqueNamespace:()=>te.Z,createUnloadHandlerContainer:()=>re.P,dateNow:()=>G.f,detachEvent:()=>q.Ym,disallowsSameSiteNone:()=>ee.It,doPerf:()=>s.r2,dumpObj:()=>c.m,eventOff:()=>q.ML,eventOn:()=>q.mB,extend:()=>f.X$,findW3cTraceParent:()=>ne.ef,forceDynamicConversion:()=>ie.Hf,formatTraceParent:()=>ne.L0,generateW3CId:()=>W.cL,getCommonSchemaMetaData:()=>f.Go,getConsole:()=>X.U5,getCookieValue:()=>f.UM,getCrypto:()=>X.MY,getDocument:()=>J.YE,getDynamicConfigHandler:()=>ie.QA,getExceptionName:()=>H.lL,getFieldValueType:()=>f.cq,getGlobal:()=>J.mS,getGlobalInst:()=>J.zS,getHistory:()=>J.JK,getIEVersion:()=>X.L0,getISOString:()=>H._u,getJSON:()=>X.hm,getLocation:()=>X.g$,getMsCrypto:()=>X.iN,getNavigator:()=>J.w3,getPerformance:()=>Y.FJ,getSetValue:()=>H.c2,getTenantId:()=>f.EO,getTime:()=>f.WB,getWindow:()=>J.zk,hasDocument:()=>J.Wt,hasHistory:()=>J.tw,hasJSON:()=>X.Z,hasNavigator:()=>J.w9,hasOwnProperty:()=>F.v,hasWindow:()=>J.Vd,isArray:()=>S.cy,isArrayValid:()=>f.wJ,isBeaconsSupported:()=>X.Uf,isBoolean:()=>S.Lm,isChromium:()=>f.F2,isDate:()=>S.$P,isDocumentObjectAvailable:()=>f.g8,isError:()=>S.bJ,isFetchSupported:()=>X.R7,isFunction:()=>S.Tn,isGreaterThanZero:()=>f.ei,isIE:()=>X.lT,isLatency:()=>f.Hh,isNotTruthy:()=>S.wo,isNullOrUndefined:()=>S.hX,isNumber:()=>S.Et,isObject:()=>S.Gv,isReactNative:()=>X.lV,isSampledFlag:()=>ne.N7,isString:()=>S.Kg,isTruthy:()=>S.zz,isTypeof:()=>S.Ed,isUint8ArrayAvailable:()=>f.h3,isUndefined:()=>S.b0,isValidSpanId:()=>ne.wN,isValidTraceId:()=>ne.hX,isValidTraceParent:()=>ne.mJ,isValueAssigned:()=>f.yD,isValueKind:()=>f.m0,isWindowObjectAvailable:()=>f.P$,isXhrSupported:()=>X.xk,mergeEvtNamespace:()=>q.Hm,newGuid:()=>W.aq,newId:()=>Q.Si,normalizeJsName:()=>H.cH,objDefineAccessors:()=>K.r,objForEachKey:()=>E.z,objFreeze:()=>d.N6,objKeys:()=>d.cG,objSeal:()=>d.js,onConfigChange:()=>a.a,openXhr:()=>f.H$,optimizeObject:()=>H.hW,parseTraceParent:()=>ne.ZI,perfNow:()=>Y.UU,proxyAssign:()=>H.qz,proxyFunctionAs:()=>H.RF,proxyFunctions:()=>H.o$,random32:()=>Q.VN,randomValue:()=>Q.Z1,removeEventHandler:()=>q.zh,removeEventListeners:()=>q.Wg,removePageHideEventListener:()=>q.sq,removePageShowEventListener:()=>q.vF,removePageUnloadEventListener:()=>q.Ds,safeGetCookieMgr:()=>ee.um,safeGetLogger:()=>u.y0,sanitizeProperty:()=>f.TC,setEnableEnvMocks:()=>X.cU,setProcessTelemetryTimings:()=>f.u9,setValue:()=>H.KY,strContains:()=>H.Ju,strEndsWith:()=>B.C,strFunction:()=>Z.hW,strObject:()=>Z._1,strPrototype:()=>Z.vR,strStartsWith:()=>j.t,strTrim:()=>z.EH,strUndefined:()=>Z.bA,throwError:()=>o.$8,toISOString:()=>H._u,useXDomainRequest:()=>X.PV});var n=r(659),i=r(8279),o=r(3517),s=r(8156),a=r(9622),c=r(8693),u=r(3775),l=r(9379),d=r(1324),h=r(937),f=r(4822),p=r(1739),g=(0,d.ZH)({endpointUrl:h.S,propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,o.$8)("Invalid property storage override passed."),!0}}}),m=function(e){function t(){var r=e.call(this)||this;return(0,i.A)(t,r,(function(e,t){e[p.mE]=function(r,n,i,o){(0,s.r2)(e,(function(){return"AppInsightsCore.initialize"}),(function(){try{t[p.mE]((0,a.e)(r,g,i||e[p.Uw],!1).cfg,n,i,o)}catch(t){var s=e[p.Uw],l=(0,c.m)(t);-1!==l[p.Sj]("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,u.ZP)(s,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}}),(function(){return{config:r,extensions:n,logger:i,notificationManager:o}}))},e.track=function(r){(0,s.r2)(e,(function(){return"AppInsightsCore.track"}),(function(){var n=r;if(n){n[p.dg]=n[p.dg]||{},n[p.dg].trackStart=(0,f.WB)(),(0,f.Hh)(n.latency)||(n.latency=1);var i=n.ext=n.ext||{};i.sdk=i.sdk||{},i.sdk.ver=f.xE;var o=n.baseData=n.baseData||{};o[h._0]=o[h._0]||{};var s=o[h._0];s[h.hj]=s[h.hj]||e.pluginVersionString||h.m5}t.track(n)}),(function(){return{item:r}}),!r.sync)},e[p.h4]=function(e){return t[p.h4](e||"InternalLog")}})),r}return(0,n.qU)(t,e),t.__ieDyn=1,t}(l._),v=r(4282),y=(0,v.H)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),w=(0,v.H)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),C=(0,v.H)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),A=(0,v.H)({Normal:1,Critical:2}),I=(0,v.H)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),S=r(6668),E=r(9018),_=r(4016),T=r(1742),b=r(6832),k=(0,T.b2)("includes",_.wM,(function(e,t,r){return-1!==(0,b.r)(e,t,r)})),P=r(5439),R=r(4657),O=function(){function e(e){var t=this,r={},n=[],i=[];function o(e,t){var o,s=r[e];if(s&&(o=s[t]),!o&&null!==o){if((0,S.Kg)(e)&&(0,S.Kg)(t))if(i[p.oI]>0){for(var a=0;a<i[p.oI];a++)if(i[a][p.hF](e,t)){o={canHandle:!0,fieldHandler:i[a]};break}}else 0===n[p.oI]&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,a=0;a<n[p.oI];a++)if(n[a][p.hF](e,t)){o={canHandle:!0,handler:n[a],fieldHandler:null};break}s||(s=r[e]={}),s[t]=o}return o}function s(e,t,r,n,i,o){if(e.handler)return e.handler.property(t,r,i,o);if(!(0,S.hX)(i[p.QV])){if(!(4096&~n&&(0,f.m0)(i[p.QV])))return null;i[p.pF]=i[p.pF].toString()}return c(e.fieldHandler,t,r,n,i)}function a(e,t,r){return(0,f.yD)(r)?{value:r}:null}function c(e,r,n,i,o){if(o&&e){var s=e.getSanitizer(r,n,i,o[p.QV],o.propertyType);if(s)if(4===i){var u={},l=o[p.pF];(0,E.z)(l,(function(t,i){var o=r+"."+n;if((0,f.yD)(i)){var s=a(0,0,i);(s=c(e,o,t,(0,f.cq)(i),s))&&(u[t]=s[p.pF])}})),o[p.pF]=u}else{var d={path:r,name:n,type:i,prop:o,sanitizer:t};o=s.call(t,d)}}return o}e&&i.push(e),t.clearCache=function(){r={}},t.addSanitizer=function(e){e&&(k(n,e)||n.push(e),r={})},t.addFieldSanitizer=function(e){e&&(k(i,e)||i.push(e),r={})},t[p.Rl]=function(e){if(e){var t=(0,b.r)(n,e);-1!==t&&(n.splice(t,1),r={}),(0,P.I)(n,(function(t){t&&t[p.Rl]&&t[p.Rl](e)}))}},t[p.Mr]=function(e){if(e){var t=(0,b.r)(i,e);-1!==t&&(i.splice(t,1),r={}),(0,P.I)(n,(function(t){t&&t[p.Mr]&&t[p.Mr](e)}))}},t.isEmpty=function(){return(0,R.R)(n)+(0,R.R)(i)===0},t[p.hF]=function(e,t){var r=o(e,t);return!!r&&r[p.nw]},t[p.pF]=function(e,t,r,n){var i=o(e,t);if(i&&i[p.nw]){if(!i||!i[p.nw])return null;if(i.handler)return i.handler[p.pF](e,t,r,n);if(!(0,S.Kg)(t)||(0,S.hX)(r)||r===h.m5)return null;var c=null,u=(0,f.cq)(r);if(8192&~u)1!==u&&2!==u&&3!==u&&4096&~u?4===u&&(c=a(0,0,n?JSON.stringify(r):r)):c=a(0,0,r);else{var l=-8193&u;if(c=r,!(0,f.yD)(c[p.pF])||1!==l&&2!==l&&3!==l&&4096&~l)return null}if(c)return s(i,e,t,u,c,n)}return null},t.property=function(e,t,r,n){var i=o(e,t);if(!i||!i[p.nw])return null;if(!(0,S.Kg)(t)||(0,S.hX)(r)||!(0,f.yD)(r[p.pF]))return null;var a=(0,f.cq)(r[p.pF]);return 0===a?null:s(i,e,t,a,r,n)}}return e.getFieldType=f.cq,e}(),M=100,N=(0,v.H)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),x=r(1356),D=r(8257),L=r(2317),U=r(3662),F=r(3266),q=r(6149),H=r(3673),j=r(7931),B=r(2494),z=r(8993),$=r(4335),V=r(1011),K=r(6336),G=r(225),W=r(9882),Y=r(558),Q=r(6535),J=r(3076),X=r(7292),Z=r(5664),ee=r(5034),te=r(4276),re=r(836),ne=r(1864),ie=r(9147)},937:(e,t,r)=>{"use strict";r.d(t,{S:()=>i,_0:()=>s,hj:()=>o,m5:()=>n});var n="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",s="properties"},4822:(e,t,r)=>{"use strict";r.d(t,{EO:()=>b,F2:()=>H,Go:()=>O,H$:()=>j,Hh:()=>P,P$:()=>_,Rx:()=>m,TC:()=>R,UM:()=>M,WB:()=>D,X$:()=>x,cq:()=>q,ei:()=>B,g8:()=>E,gj:()=>N,h3:()=>k,m0:()=>L,u9:()=>F,wJ:()=>U,xE:()=>v,yD:()=>T});var n,i=r(3076),o=r(6668),s=r(7292),a=r(9882),c=r(9018),u=r(5439),l=r(558),d=r(5664),h=r(5881),f=r(3178),p=r(937),g=r(1739),m="4.0.3",v="1DS-Web-JS-"+m,y=d.Wy.hasOwnProperty,w="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",C="withCredentials",A="timeout",I=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n),S=null,E=(0,i.Wt)(),_=(0,i.Vd)();function T(e){return!(e===p.m5||(0,o.hX)(e))}function b(e){if(e){var t=(0,h.H)(e,"-");if(t>-1)return(0,f.ZW)(e,t)}return p.m5}function k(){return null===S&&(S=!(0,o.b0)(Uint8Array)&&!function(){var e=(0,i.w3)();if(!(0,o.b0)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[g.Sj]("safari")>=0||t[g.Sj]("firefox")>=0)&&t[g.Sj]("chrome")<0)return!0}return!1}()&&!(0,s.lV)()),S}function P(e){return!!(e&&(0,o.Et)(e)&&e>=1&&e<=4)}function R(e,t,r){if(!t&&!T(t)||"string"!=typeof e)return null;var n=typeof t;if("string"===n||"number"===n||"boolean"===n||(0,o.cy)(t))t={value:t};else if("object"!==n||y.call(t,"value")){if((0,o.hX)(t[g.pF])||t[g.pF]===p.m5||!(0,o.Kg)(t[g.pF])&&!(0,o.Et)(t[g.pF])&&!(0,o.Lm)(t[g.pF])&&!(0,o.cy)(t[g.pF]))return null}else t={value:r?JSON.stringify(t):t};if((0,o.cy)(t[g.pF])&&!U(t[g.pF]))return null;if(!(0,o.hX)(t[g.QV])){if((0,o.cy)(t[g.pF])||!L(t[g.QV]))return null;t[g.pF]=t[g.pF].toString()}return t}function O(e,t,r){var n=-1;if(!(0,o.b0)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(r))-1===n&&(n=0),n|=r;else{var i=I[q(e)]||-1;-1!==n&&-1!==i?n|=i:6===i&&(n=i)}return n}function M(e,t,r){var n;return void 0===r&&(r=!0),e&&(n=e.get(t),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||p.m5}function N(e){void 0===e&&(e="D");var t=(0,a.aq)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,p.m5)),t}function x(e,t,r,n,i){var s={},a=!1,l=0,d=arguments[g.oI],h=arguments;for((0,o.Lm)(h[0])&&(a=h[0],l++);l<d;l++)e=h[l],(0,c.z)(e,(function(e,t){a&&t&&(0,o.Gv)(t)?(0,o.cy)(t)?(s[e]=s[e]||[],(0,u.I)(t,(function(t,r){t&&(0,o.Gv)(t)?s[e][r]=x(!0,s[e][r],t):s[e][r]=t}))):s[e]=x(!0,s[e],t):s[e]=t}));return s}var D=l.UU;function L(e){return 0===e||e>0&&e<=13||32===e}function U(e){return e[g.oI]>0}function F(e,t){var r=e;r[g.dg]=r[g.dg]||{},r[g.dg][g.Jg]=r[g.dg][g.Jg]||{},r[g.dg][g.Jg][t]=D()}function q(e){var t=0;if(null!=e){var r=typeof e;"string"===r?t=1:"number"===r?t=2:"boolean"===r?t=3:r===d._1&&(t=4,(0,o.cy)(e)?(t=4096,e[g.oI]>0&&(t|=q(e[0]))):y.call(e,"value")&&(t=8192|q(e[g.pF])))}return t}function H(){return!!(0,i.zS)("chrome")}function j(e,t,r,n,i,o){function s(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return n&&s(a,w,n),r&&s(a,C,r),a.open(e,t,!i),r&&s(a,C,r),!i&&o&&s(a,A,o),a}function B(e){return e>0}},1739:(e,t,r)=>{"use strict";r.d(t,{Jg:()=>d,Mr:()=>p,QV:()=>u,Rl:()=>f,Sj:()=>o,Uw:()=>i,dg:()=>s,h4:()=>a,hF:()=>h,mE:()=>n,nw:()=>g,oI:()=>l,pF:()=>c});var n="initialize",i="logger",o="indexOf",s="timings",a="pollInternalLogs",c="value",u="kind",l="length",d="processTelemetryStart",h="handleField",f="rmSanitizer",p="rmFieldSanitizer",g="canHandle"},8916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BE_PROFILE:()=>o,NRT_PROFILE:()=>i,PostChannel:()=>Dt,RT_PROFILE:()=>n});var n="REAL_TIME",i="NEAR_REAL_TIME",o="BEST_EFFORT",s=r(659),a=r(8279),c=r(4822),u=r(6668),l=r(8156),d=r(6149),h=r(4276),f=r(9622),p=r(2317),g=r(3076),m=r(3673),v=r(3662),y=r(5439),w=r(9018),C=r(3775),A=r(8257),I=r(636),S=r(1324),E="",_="POST",T="drop",b="requeue",k="application/x-json-stream",P="cache-control",R="content-type",O="kill-duration",M="time-delta-millis",N="client-version",x="client-id",D="time-delta-to-apply-millis",L="upload-time",U="apikey",F="AuthMsaDeviceTicket",q="AuthXToken",H="msfpc",j="trace",B="user",z="allowRequestSending",$="firstRequestSent",V="shouldAddClockSkewHeaders",K="getClockSkewHeaderValue",G="setClockSkew",W="length",Y="concat",Q="iKey",J="count",X="events",Z="push",ee="split",te="splice",re="toLowerCase",ne="hdrs",ie="useHdrs",oe="initialize",se="setTimeoutOverride",ae="clearTimeoutOverride",ce="overrideEndpointUrl",ue="avoidOptions",le="enableCompoundKey",de="disableXhrSync",he="disableFetchKeepAlive",fe="useSendBeacon",pe="alwaysUseXhrOverride",ge="urlString",me="timeout",ve="ontimeout",ye="data",we="_sendReason",Ce="headers",Ae="getResponseHeader",Ie="getAllResponseHeaders",Se="_thePayload",Ee="batches",_e="sendType",Te="canSendRequest",be="sendQueuedRequests",ke="isCompletelyIdle",Pe="setUnloading",Re="sendSynchronousBatch",Oe="_transport",Me="getWParam",Ne="isBeacon",xe="timings",De="isTeardown",Le="isSync",Ue="sendPOST",Fe="setKillSwitchTenants",qe="_backOffTransmission",He="identifier",je="eventsLimitInMem",Be="autoFlushEventsLimit",ze="sendAttempt",$e="latency",Ve="baseData",Ke="sync";function Ge(e){var t=(e.ext||{}).intweb;return t&&(0,c.yD)(t[H])?t[H]:null}function We(e){for(var t=null,r=0;null===t&&r<e[W];r++)t=Ge(e[r]);return t}var Ye=function(){function e(t,r){var n=r?[][Y](r):[],i=this,o=We(n);i[Q]=function(){return t},i.Msfpc=function(){return o||E},i[J]=function(){return n[W]},i[X]=function(){return n},i.addEvent=function(e){return!!e&&(n[Z](e),o||(o=Ge(e)),!0)},i[ee]=function(r,i){var s;if(r<n[W]){var a=n[W]-r;(0,u.hX)(i)||(a=i<a?i:a),s=n[te](r,a),o=We(n)}return new e(t,s)}}return e.create=function(t,r){return new e(t,r)},e}(),Qe=r(3266),Je=r(7292),Xe=r(8993),Ze=r(8693),et=r(225),tt=r(5664),rt=r(1187),nt=function(){function e(){var t=!0,r=!0,n=!0,i="use-collector-delta",o=!1;(0,a.A)(e,this,(function(e){e[z]=function(){return t},e[$]=function(){n&&(n=!1,o||(t=!1))},e[V]=function(){return r},e[K]=function(){return i},e[G]=function(e){o||(e?(i=e,r=!0,o=!0):r=!1,t=!0)}}))}return e.__ieDyn=1,e}(),it=function(){function e(){var t={};(0,a.A)(e,this,(function(e){e[Fe]=function(e,r){if(e&&r)try{var n=(s=e[ee](","),a=[],s&&(0,y.I)(s,(function(e){a[Z]((0,Xe.EH)(e))})),a);if("this-request-only"===r)return n;for(var i=1e3*parseInt(r,10),o=0;o<n[W];++o)t[n[o]]=(0,et.f)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var r=t,n=(0,Xe.EH)(e);return void 0!==r[n]&&r[n]>(0,et.f)()||(delete r[n],!1)}}))}return e.__ieDyn=1,e}();function ot(e){var t,r=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*r,Math.min(t,6e5)}var st=r(6832),at=r(7931),ct=r(3178),ut=2e6,lt=Math.min(ut,65e3),dt="metadata",ht="f",ft=/\./,pt=function(){function e(t,r,n,i){var o="data",s="baseData",d=!!i,h=!0,f=r,p={};(0,a.A)(e,this,(function(e){function r(e,t,i,o,s,a,l){(0,w.z)(e,(function(e,h){var g=null;if(h||(0,c.yD)(h)){var m=i,v=e,y=s,w=t;if(d&&!o&&ft.test(e)){var C=e.split("."),A=C.length;if(A>1){y&&(y=y.slice());for(var I=0;I<A-1;I++){var S=C[I];w=w[S]=w[S]||{},m+="."+S,y&&y.push(S)}v=C[A-1]}}var E=o&&function(e,t){var r=p[e];return void 0===r&&(e.length>=7&&(r=(0,at.t)(e,"ext.metadata")||(0,at.t)(e,"ext.web")),p[e]=r),r}(m);if(g=!E&&f&&f.handleField(m,v)?f.value(m,v,h,n):(0,c.TC)(v,h,n)){var _=g.value;if(w[v]=_,a&&a(y,v,g),l&&"object"==typeof _&&!(0,u.cy)(_)){var T=y;T&&(T=T.slice()).push(v),r(h,_,m+"."+v,o,T,a,l)}}}}))}e.createPayload=function(e,t,r,n,i,o){return{apiKeys:[],payloadBlob:E,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:r,isBeacon:n,sendType:o,sendReason:i}},e.appendPayload=function(r,n,i){var o=r&&n&&!r.overflow;return o&&(0,l.r2)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=n.events(),o=r.payloadBlob,s=r.numEvents,a=!1,c=[],u=[],l=r.isBeacon,d=l?65e3:3984588,h=l?lt:ut,f=0,p=0;f<t.length;){var g=t[f];if(g){if(s>=i){r.overflow=n.split(f);break}var m=e.getEventBlob(g);if(m&&m.length<=h){var v=m.length;if(o.length+v>d){r.overflow=n.split(f);break}o&&(o+="\n"),o+=m,++p>20&&((0,ct.hK)(o,0,1),p=0),a=!0,s++}else m?c.push(g):u.push(g),t.splice(f,1),f--}f++}if(c.length>0&&r.sizeExceed.push(Ye.create(n.iKey(),c)),u.length>0&&r.failedEvts.push(Ye.create(n.iKey(),u)),a){r.batches.push(n),r.payloadBlob=o,r.numEvents=s;var y=n.iKey();-1===(0,st.r)(r.apiKeys,y)&&r.apiKeys.push(y)}}),(function(){return{payload:r,theBatch:{iKey:n.iKey(),evts:n.events()},max:i}})),o},e.getEventBlob=function(e){try{return(0,l.r2)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.EO)(e.iKey);var n={},i=e.ext;i&&(t.ext=n,(0,w.z)(i,(function(e,t){r(t,n[e]={},"ext."+e,!0,null,null,!0)})));var a=t[o]={};a.baseType=e.baseType;var u=a[s]={};return r(e.baseData,u,s,!1,[s],(function(e,t,r){gt(n,e,t,r)}),h),r(e.data,a,o,!1,[],(function(e,t,r){gt(n,e,t,r)}),h),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function gt(e,t,r,n){if(n&&e){var i=(0,c.Go)(n.value,n.kind,n.propertyType);if(i>-1){var o=e[dt];o||(o=e[dt]={f:{}});var s=o[ht];if(s||(s=o[ht]={}),t)for(var a=0;a<t.length;a++){var l=t[a];s[l]||(s[l]={f:{}});var d=s[l][ht];d||(d=s[l][ht]={}),s=d}s=s[r]={},(0,u.cy)(n.value)?s.a={t:i}:s.t=i}}}var mt,vt=r(1636);function yt(e,t){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return(0,vt.vK)([e,t],r,n,i)}}}var wt="sendAttempt",Ct="&NoResponseBody=true",At="?cors=true&"+R[re]()+"="+k,It=((mt={})[1]=b,mt[100]=b,mt[200]="sent",mt[8004]=T,mt[8003]=T,mt),St={},Et={};function _t(e,t,r){St[e]=t,!1!==r&&(Et[t]=e)}function Tt(e){try{return e.responseText}catch(e){}return E}function bt(e,t){var r=!1;if(e&&t){var n=(0,S.cG)(e);if(n&&n[W]>0)for(var i=t[re](),o=0;o<n[W];o++){var s=n[o];if(s&&(0,Qe.v)(t,s)&&s[re]()===i){r=!0;break}}}return r}function kt(e,t,r,n){t&&r&&r[W]>0&&(n&&St[t]?(e[ne][St[t]]=r,e[ie]=!0):e.url+="&"+t+"="+r)}function Pt(e,t){return t&&((0,u.Et)(t)?e=[t][Y](e):(0,u.cy)(t)&&(e=t[Y](e))),e}_t(F,F,!1),_t(N,N),_t(x,"Client-Id"),_t(U,U),_t(D,D),_t(L,L),_t(q,q);var Rt=function(){function e(t,r,n,i){var o,s,d,h,p,m,v,A,I,b,F,q,j,B,He,je=new it,Be=!1,ze=new nt,$e=!1,Ve=0,Ke=!0,Ge=[],We={},Ye=[],Qe=null,st=!1,at=!1,ct=!1,ut=[],lt=[];(0,a.A)(e,this,(function(e){!function(){var e;o=null,je=new it,Be=!1,ze=new nt,$e=!1,Ve=0,s=null,d=null,h=null,p=null,Ke=!0,Ge=[],We={},Ye=[],Qe=null,st=!1,m=null,at=!1,ct=!1,v=e,A=e,I=e,b=e,F=e,ut=[],q=e,j=e,lt=[],B=!1,He=yt()}();var a=!0;function dt(e,t){for(var r=0,n=null,i=0;null==n&&i<e[W];)1===(r=e[i])?(0,Je.PV)()?n=ht:(0,Je.xk)()&&(n=gt):2===r&&(0,Je.R7)(t)&&(!t||t&&!I)?n=ft:$e&&3===r&&(0,Je.Uf)()&&(n=vt),i++;return n?{_transport:r,_isSync:t,sendPOST:n}:null}function ht(e,t,r){var n=new XDomainRequest;n.open(_,e[ge]),e[me]&&(n[me]=e[me]),n.onload=function(){var e=Tt(n);mt(t,200,{},e),Ft(e)},n.onerror=function(){mt(t,400,{})},n[ve]=function(){mt(t,500,{})},n.onprogress=function(){},r?n.send(e[ye]):He.set((function(){n.send(e[ye])}),0)}function ft(e,t,r){var n,i=e[ge],o=!1,s=!1,c=((n={body:e[ye],method:_}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,n);r&&(c.keepalive=!0,2===e[we]&&(o=!0,F&&(i+=Ct))),a&&(c.credentials="include"),e.headers&&(0,S.cG)(e.headers)[W]>0&&(c[Ce]=e[Ce]),fetch(i,c).then((function(e){var r={},n=E,i=e[Ce];i&&i.forEach((function(e,t){r[t]=e})),e.body&&e.text().then((function(e){n=e})),s||(s=!0,mt(t,e.status,r,n),Ft(n))})).catch((function(e){s||(s=!0,mt(t,0,{}))})),o&&!s&&(s=!0,mt(t,200,{})),!s&&e[me]>0&&He.set((function(){s||(s=!0,mt(t,500,{}))}),e[me])}function gt(e,t,r){var n=e[ge];function i(e,t,r){if(!e[r]&&t&&t[Ae]){var n=t[Ae](r);n&&(e[r]=(0,Xe.EH)(n))}return e}function o(e,r){mt(t,e.status,function(e){var t={};return e[Ie]?t=function(e){var t={};if((0,u.Kg)(e)){var r=(0,Xe.EH)(e)[ee](/[\r\n]+/);(0,y.I)(r,(function(e){if(e){var r=e.indexOf(": ");if(-1!==r){var n=(0,Xe.EH)(e.substring(0,r))[re](),i=(0,Xe.EH)(e.substring(r+1));t[n]=i}else t[(0,Xe.EH)(e)]=1}}))}return t}(e[Ie]()):(t=i(t,e,M),t=i(t,e,O),t=i(t,e,"kill-duration-seconds")),t}(e),r)}r&&e[de]&&(r=!1);var s=(0,c.H$)(_,n,a,!0,r,e[me]);(0,w.z)(e[Ce],(function(e,t){s.setRequestHeader(e,t)})),s.onload=function(){var e=Tt(s);o(s,e),Ft(e)},s.onerror=function(){o(s)},s[ve]=function(){o(s)},s.send(e[ye])}function mt(e,t,r,n){try{e(t,r,n)}catch(e){(0,C.ZP)(d,2,518,(0,Ze.m)(e))}}function vt(e,t,r){var n=200,i=e[Se],o=e[ge]+(F?Ct:E);try{var s=(0,g.w3)();if(!s.sendBeacon(o,e[ye]))if(i){var a=[];(0,y.I)(i[Ee],(function(e){if(a&&e&&e[J]()>0){for(var t=e[X](),r=0;r<t[W];r++)if(!s.sendBeacon(o,Qe.getEventBlob(t[r]))){a[Z](e[ee](r));break}}else a[Z](e[ee](0))})),qt(a,8003,i[_e],!0)}else n=0}catch(e){(0,C.OG)(d,"Failed to send telemetry using sendBeacon API. Ex:"+(0,Ze.m)(e)),n=0}finally{mt(t,n,{},E)}}function St(e){return 2===e||3===e}function _t(e){return at&&St(e)&&(e=2),e}function Rt(){return!Be&&Ve<r}function Ot(){var e=Ye;return Ye=[],e}function Mt(e,t,r){var n=!1;return e&&e[W]>0&&!Be&&h[t]&&Qe&&(n=0!==t||Rt()&&(r>0||ze[z]())),n}function Nt(e){var t={};return e&&(0,y.I)(e,(function(e,r){t[r]={iKey:e[Q](),evts:e[X]()}})),t}function xt(e,r,n,i,o){if(e&&0!==e[W])if(Be)qt(e,1,i);else{i=_t(i);try{var s=e,a=0!==i;(0,l.r2)(p,(function(){return"HttpManager:_sendBatches"}),(function(s){s&&(e=e.slice(0));for(var u=[],l=null,d=(0,c.WB)(),f=h[i]||(a?h[1]:h[0]),p=f&&f[Oe],g=b&&(at||St(i)||3===p||f._isSync&&2===p);Mt(e,i,r);){var m=e.shift();m&&m[J]()>0&&(je.isTenantKilled(m[Q]())?u[Z](m):(l=l||Qe.createPayload(r,n,a,g,o,i),Qe.appendPayload(l,m,t)?null!==l.overflow&&(e=[l.overflow][Y](e),l.overflow=null,Lt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),l=null):(Lt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),e=[m][Y](e),l=null)))}l&&Lt(l,d,(0,c.WB)(),o),e[W]>0&&(Ye=e[Y](Ye)),qt(u,8004,i)}),(function(){return{batches:Nt(s),retryCount:r,isTeardown:n,isSynchronous:a,sendReason:o,useSendBeacon:St(i),sendType:i}}),!a)}catch(e){(0,C.ZP)(d,2,48,"Unexpected Exception sending batch: "+(0,Ze.m)(e))}}}function Dt(e,t,r){e[t]=e[t]||{},e[t][s.identifier]=r}function Lt(t,r,i,a){if(t&&t.payloadBlob&&t.payloadBlob[W]>0){var u=!!q,f=h[t.sendType];!St(t[_e])&&t[Ne]&&2===t.sendReason&&(f=h[2]||h[3]||f);var g=ct;(t.isBeacon||3===f[Oe])&&(g=!1);var m=function(e,t){var r={url:o,hdrs:{},useHdrs:!1};t?(r[ne]=(0,c.X$)(r[ne],We),r.useHdrs=(0,S.cG)(r.hdrs)[W]>0):(0,w.z)(We,(function(e,t){Et[e]?kt(r,Et[e],t,!1):(r[ne][e]=t,r[ie]=!0)})),kt(r,x,"NO_AUTH",t),kt(r,N,c.xE,t);var n=E;(0,y.I)(e.apiKeys,(function(e){n[W]>0&&(n+=","),n+=e})),kt(r,U,n,t),kt(r,L,(0,et.f)().toString(),t);var i=function(e){for(var t=0;t<e.batches[W];t++){var r=e[Ee][t].Msfpc();if(r)return encodeURIComponent(r)}return E}(e);if((0,c.yD)(i)&&(r.url+="&ext.intweb.msfpc="+i),ze[V]()&&kt(r,D,ze[K](),t),p[Me]){var s=p[Me]();s>=0&&(r.url+="&w="+s)}for(var a=0;a<Ge[W];a++)r.url+="&"+Ge[a].name+"="+Ge[a].value;return r}(t,g);g=g||m[ie];var _=(0,c.WB)();(0,l.r2)(p,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var o=0;o<t.batches[W];o++)for(var h=t[Ee][o][X](),w=0;w<h[W];w++){var S=h[w];if(st){var E=S[xe]=S[xe]||{};Dt(E,"sendEventStart",_),Dt(E,"serializationStart",r),Dt(E,"serializationCompleted",i)}S[wt]>0?S[wt]++:S[wt]=1}qt(t[Ee],1e3+(a||0),t[_e],!0);var T={data:t.payloadBlob,urlString:m.url,headers:m[ne],_thePayload:t,_sendReason:a,timeout:v,disableXhrSync:A,disableFetchKeepAlive:I};g&&(bt(T[Ce],P)||(T[Ce][P]="no-cache, no-store"),bt(T[Ce],R)||(T[Ce][R]=k));var b=null;f&&(b=function(r){ze[$]();var i=function(r,i){!function(t,r,i,o){var a,u=9e3,l=null,d=!1,h=!1;try{var f=!0;if(typeof t!==tt.bA){if(r){ze[G](r[M]);var p=r[O]||r["kill-duration-seconds"];(0,y.I)(je[Fe](r["kill-tokens"],p),(function(e){(0,y.I)(i[Ee],(function(t){if(t[Q]()===e){l=l||[];var r=t[ee](0);i.numEvents-=r[J](),l[Z](r)}}))}))}if(200==t||204==t)return void(u=200);((a=t)>=300&&a<500&&408!=a&&429!=a||501==a||505==a||i.numEvents<=0)&&(f=!1),u=9e3+t%1e3}if(f){u=100;var g=i.retryCnt;0===i[_e]&&(g<n?(d=!0,Ut((function(){0===i[_e]&&Ve--,xt(i[Ee],g+1,i[De],at?2:i[_e],5)}),at,ot(g))):(h=!0,at&&(u=8001)))}}finally{d||(ze[G](),function(t,r,n,i){try{i&&s[qe](),200===r&&(i||t[Le]||s._clearBackOff(),function(e){if(st){var t=(0,c.WB)();(0,y.I)(e,(function(e){e&&e[J]()>0&&function(e,t){st&&(0,y.I)(e,(function(e){Dt(e[xe]=e[xe]||{},"sendEventCompleted",t)}))}(e[X](),t)}))}}(t[Ee])),qt(t[Ee],r,t[_e],!0)}finally{0===t[_e]&&(Ve--,5!==n&&e.sendQueuedRequests(t[_e],n))}}(i,u,o,h)),qt(l,8004,i[_e])}}(r,i,t,a)},o=t[De]||t[Le];try{f[Ue](r,i,o),j&&j(T,r,o,t[Ne])}catch(e){(0,C.OG)(d,"Unexpected exception sending payload. Ex:"+(0,Ze.m)(e)),mt(i,0,{})}}),(0,l.r2)(p,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(b)if(0===t[_e]&&Ve++,u&&!t.isBeacon&&3!==f[Oe]){var e={data:T[ye],urlString:T[ge],headers:(0,c.X$)({},T[Ce]),timeout:T[me],disableXhrSync:T[de],disableFetchKeepAlive:T[he]},r=!1;(0,l.r2)(p,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{q(e,(function(e){r=!0,Ke||e[Se]||(e[Se]=e[Se]||T[Se],e[we]=e[we]||T[we]),b(e)}),t.isSync||t[De])}catch(e){r||b(T)}}))}else b(T)}))}),(function(){return{thePayload:t,serializationStart:r,serializationCompleted:i,sendReason:a}}),t[Le])}t.sizeExceed&&t.sizeExceed[W]>0&&qt(t.sizeExceed,8003,t[_e]),t.failedEvts&&t.failedEvts[W]>0&&qt(t.failedEvts,8002,t[_e])}function Ut(e,t,r){t?e():He.set(e,r)}function Ft(e){var t=lt;try{for(var r=0;r<t[W];r++)try{t[r](e)}catch(e){(0,C.ZP)(d,1,519,"Response handler failed: "+e)}if(e){var n=JSON.parse(e);(0,c.yD)(n.webResult)&&(0,c.yD)(n.webResult[H])&&m.set("MSFPC",n.webResult[H],31536e3)}}catch(e){}}function qt(e,t,r,n){if(e&&e[W]>0&&i){var o=i[(a=t,u=It[a],(0,c.yD)(u)||(u="oth",a>=9e3&&a<=9999?u="rspFail":a>=8e3&&a<=8999?u=T:a>=1e3&&a<=1999&&(u="send")),u)];if(o){var s=0!==r;(0,l.r2)(p,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){Ut((function(){try{o.call(i,e,t,s,r)}catch(e){(0,C.ZP)(d,1,74,"send request notification failed: "+e)}}),n||s,0)}),(function(){return{batches:Nt(e),reason:t,isSync:s,sendSync:n,sendType:r}}),!s)}}var a,u}e[oe]=function(e,t,r){B||(p=t,m=t.getCookieMgr(),d=(s=r).diagLog(),(0,rt.Y)(ut,(0,f.a)(e,(function(e){var t,n=e.cfg,i=e.cfg.extensionConfig[r.identifier];He=yt(i[se],i[ae]),(0,c.yD)(n.anonCookieName)?function(e,t,r){for(var n=0;n<e[W];n++)if(e[n].name===t)return void(e[n].value=r);e[Z]({name:t,value:r})}(Ge,"anoncknm",n.anonCookieName):function(e,t){for(var r=0;r<e[W];r++)if("anoncknm"===e[r].name)return void e[te](r,1)}(Ge),q=i.payloadPreprocessor,j=i.payloadListener;var s=i.httpXHROverride,l=i[ce]?i[ce]:n.endpointUrl;o=l+At,ct=!!(0,u.b0)(i[ue])||!i[ue],st=!i.disableEventTimings;var f=i.valueSanitizer,g=i.stringifyObjects,m=!!n[le];(0,u.b0)(i[le])||(m=!!i[le]),v=i.xhrTimeout,A=!!i[de],I=!!i[he],F=!1!==i.addNoResponse,$e=!(0,Je.lV)(),Qe=new pt(p,f,g,m),(0,u.hX)(i[fe])||($e=!!i[fe]);var y=s,w=i[pe]?s:null,S=i[pe]?s:null,E=[3,2];if(!s){Ke=!1;var _=(0,Je.g$)();_&&_.protocol&&"file:"===_.protocol[re]()&&(a=!1);var T=[];(0,Je.lV)()?(T=[2,1],E=[2,1,3]):T=[1,2,3],(s=dt(T=Pt(T,i.transports),!1))||(0,C.OG)(d,"No available transport to send events"),y=dt(T,!0)}w||(w=dt(E=Pt(E,i.unloadTransports),!0)),b=!Ke&&($e&&(0,Je.Uf)()||!I&&(0,Je.R7)(!0)),(t={})[0]=s,t[1]=y||dt([1,2,3],!0),t[2]=w||y||dt([1],!0),t[3]=S||dt([2,3],!0)||y||dt([1],!0),h=t}))),B=!0)},e.addResponseHandler=function(e){return lt[Z](e),{rm:function(){var t=lt.indexOf(e);t>=0&&lt[te](t,1)}}},e._getDbgPlgTargets=function(){return[h[0],je,Qe,h]},e.addHeader=function(e,t){We[e]=t},e[Te]=function(){return Rt()&&ze[z]()},e[be]=function(e,t){(0,u.b0)(e)&&(e=0),at&&(e=_t(e),t=2),Mt(Ye,e,0)&&xt(Ot(),0,!1,e,t||0)},e[ke]=function(){return!Be&&0===Ve&&0===Ye[W]},e[Pe]=function(e){at=e},e.addBatch=function(e){if(e&&e[J]()>0){if(je.isTenantKilled(e[Q]()))return!1;Ye[Z](e)}return!0},e.teardown=function(){Ye[W]>0&&xt(Ot(),0,!0,2,2),(0,y.I)(ut,(function(e){e&&e.rm&&e.rm()})),ut=[]},e.pause=function(){Be=!0},e.resume=function(){Be=!1,e[be](0,4)},e[Re]=function(e,t,r){e&&e[J]()>0&&((0,u.hX)(t)&&(t=1),at&&(t=_t(t),r=2),xt([e],0,!1,t,r||0))}}))}return e.__ieDyn=1,e}(),Ot=1e4,Mt="eventsDiscarded",Nt=void 0,xt=(0,S.ZH)({eventsLimitInMem:{isVal:c.ei,v:Ot},immediateEventLimit:{isVal:c.ei,v:500},autoFlushEventsLimit:{isVal:c.ei,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e[Ue]},v:Nt},overrideInstrumentationKey:Nt,overrideEndpointUrl:Nt,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Nt,clearTimeoutOverride:Nt,payloadPreprocessor:Nt,payloadListener:Nt,disableEventTimings:Nt,valueSanitizer:Nt,stringifyObjects:Nt,enableCompoundKey:Nt,disableOptimizeObj:!1,transports:Nt,unloadTransports:Nt,useSendBeacon:Nt,disableFetchKeepAlive:Nt,avoidOptions:!1,xhrTimeout:Nt,disableXhrSync:Nt,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:u.Et,v:6},maxUnloadEventRetryAttempts:{isVal:u.Et,v:2},addNoResponse:Nt}),Dt=function(e){function t(){var r,s=e.call(this)||this;s.identifier="PostChannel",s.priority=1011,s.version="4.0.3";var u,A,S,E,_,T,b,k,P,R,O,M,N,x,D,L,U,q,H,z,$,V,K,G,re,ne=!1,ie=[],ce=!1,ue=0,le=0,de={},he=n;return(0,a.A)(t,s,(function(e,t){function s(){(0,d.Ds)(null,q),(0,d.sq)(null,q),(0,d.vF)(null,q)}function a(e){"beforeunload"!==(e||(0,g.zk)().event).type&&(D=!0,k[Pe](D)),Ie(2,2)}function fe(e){D=!1,k[Pe](D)}function pe(e,t){if(e[ze]||(e[ze]=0),e[$e]||(e[$e]=1),e.ext&&e.ext[j]&&delete e.ext[j],e.ext&&e.ext[B]&&e.ext[B].id&&delete e.ext[B].id,x&&(e.ext=(0,m.hW)(e.ext),e[Ve]&&(e[Ve]=(0,m.hW)(e[Ve])),e[ye]&&(e[ye]=(0,m.hW)(e[ye]))),e[Ke])if(T||ce)e[$e]=3,e[Ke]=!1;else if(k)return x&&(e=(0,m.hW)(e)),void k[Re](Ye.create(e[Q],[e]),!0===e[Ke]?1:e[Ke],3);var r=e[$e],n=le,i=S;4===r&&(n=ue,i=A);var o=!1;if(n<i)o=!Oe(e,t);else{var s=1,a=20;4===r&&(s=4,a=1),o=!0,function(e,t,r,n){for(;r<=t;){var i=Se(e,t,!0);if(i&&i[J]()>0){var o=i[ee](0,n),s=o[J]();if(s>0)return 4===r?ue-=s:le-=s,Qe(Mt,[o],v.x.QueueFull),!0}r++}return Ne(),!1}(e[Q],e[$e],s,a)&&(o=!Oe(e,t))}o&&We(Mt,[e],v.x.QueueFull)}function ge(e,t,r){var n=xe(e,t,r);return k[be](t,r),n}function me(){return le>0}function ve(){if(M>=0&&xe(M,0,N)&&k[be](0,N),ue>0&&!_&&!ce){var e=de[he][2];e>=0&&(_=Ce((function(){_=null,ge(4,0,1),ve()}),e))}var t=de[he][1];!E&&!u&&t>=0&&!ce&&(me()?E=Ce((function(){E=null,ge(0===b?3:1,0,1),b++,b%=2,ve()}),t):b=0)}function we(){r=null,ne=!1,ie=[],u=null,ce=!1,ue=0,A=500,le=0,S=Ot,de={},he=n,E=null,_=null,T=0,b=0,P={},R=0,K=!1,O=0,M=-1,N=null,x=!0,D=!1,L=6,U=2,q=null,G=null,re=!1,H=yt(),k=new Rt(500,2,1,{requeue:Fe,send:Je,sent:Xe,drop:Ze,rspFail:et,oth:tt}),Ue(),P[4]={batches:[],iKeyMap:{}},P[3]={batches:[],iKeyMap:{}},P[2]={batches:[],iKeyMap:{}},P[1]={batches:[],iKeyMap:{}},rt()}function Ce(e,t){0===t&&T&&(t=1);var r=1e3;return T&&(r=ot(T-1)),H.set(e,t*r)}function Ae(){return null!==E&&(E.cancel(),E=null,b=0,!0)}function Ie(e,t){Ae(),u&&(u.cancel(),u=null),ce||ge(1,e,t)}function Se(e,t,r){var n=P[t];n||(n=P[t=1]);var i=n.iKeyMap[e];return!i&&r&&(i=Ye.create(e),n.batches[Z](i),n.iKeyMap[e]=i),i}function _e(t,r){k[Te]()&&!T&&(R>0&&le>R&&(r=!0),r&&null==u&&e.flush(t,(function(){}),20))}function Oe(e,t){x&&(e=(0,m.hW)(e));var r=e[$e],n=Se(e[Q],r,!0);return!!n.addEvent(e)&&(4!==r?(le++,t&&0===e[ze]&&_e(!e.sync,O>0&&n[J]()>=O)):ue++,!0)}function Ne(){for(var e=0,t=0,r=function(r){var n=P[r];n&&n[Ee]&&(0,y.I)(n[Ee],(function(n){4===r?e+=n[J]():t+=n[J]()}))},n=1;n<=4;n++)r(n);le=t,ue=e}function xe(t,r,n){var i=!1,o=0===r;return!o||k[Te]()?(0,l.r2)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],r=4;r>=t;){var n=P[r];n&&n.batches&&n.batches[W]>0&&((0,y.I)(n[Ee],(function(t){k.addBatch(t)?i=i||t&&t[J]()>0:e=e[Y](t[X]()),4===r?ue-=t[J]():le-=t[J]()})),n[Ee]=[],n.iKeyMap={}),r--}e[W]>0&&We(Mt,e,v.x.KillSwitch),i&&M>=t&&(M=-1,N=0)}),(function(){return{latency:t,sendType:r,sendReason:n}}),!o):(M=M>=0?Math.min(M,t):t,N=Math.max(N,n)),i}function De(e,t){ge(1,0,t),Ne(),Le((function(){e&&e(),ie[W]>0?u=Ce((function(){u=null,De(ie.shift(),t)}),0):(u=null,ve())}))}function Le(e){k[ke]()?e():u=Ce((function(){u=null,Le(e)}),.25)}function Ue(){(de={})[n]=[2,1,0],de[i]=[6,3,0],de[o]=[18,9,0]}function Fe(t,r){var n=[],i=L;D&&(i=U),(0,y.I)(t,(function(t){t&&t[J]()>0&&(0,y.I)(t[X](),(function(t){t&&(t[Ke]&&(t[$e]=4,t[Ke]=!1),t[ze]<i?((0,c.u9)(t,e[He]),pe(t,!1)):n[Z](t))}))})),n[W]>0&&We(Mt,n,v.x.NonRetryableStatus),D&&Ie(2,2)}function Ge(t,r){var n=V||{},i=n[t];if(i)try{i.apply(n,r)}catch(r){(0,C.ZP)(e.diagLog(),1,74,t+" notification failed: "+r)}}function We(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[W]>0&&Ge(e,[t][Y](r))}function Qe(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[W]>0&&(0,y.I)(t,(function(t){t&&t[J]()>0&&Ge(e,[t.events()][Y](r))}))}function Je(e,t,r){e&&e[W]>0&&Ge("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==r])}function Xe(e,t){Qe("eventsSent",e,t),ve()}function Ze(e,t){Qe(Mt,e,t>=8e3&&t<=8999?t-8e3:v.x.Unknown)}function et(e){Qe(Mt,e,v.x.NonRetryableStatus),ve()}function tt(e,t){Qe(Mt,e,v.x.Unknown),ve()}function rt(){O=$?0:Math.max(1500,S/6)}we(),e._getDbgPlgTargets=function(){return[k,r]},e[oe]=function(n,i,o){(0,l.r2)(i,(function(){return"PostChannel:initialize"}),(function(){t[oe](n,i,o),V=i.getNotifyMgr();try{q=(0,d.Hm)((0,h.Z)(e[He]),i.evtNamespace&&i.evtNamespace()),e._addHook((0,f.a)(n,(function(t){var n=t.cfg,o=(0,p.i8)(null,n,i);r=o.getExtCfg(e[He],xt),H=yt(r[se],r[ae]),x=!r.disableOptimizeObj&&(0,c.F2)(),z=r.ignoreMc1Ms0CookieProcessing,function(e){var t=e[Me];e[Me]=function(){var r=0;return z&&(r|=2),r|t.call(e)}}(i),S=r[je],A=r.immediateEventLimit,R=r[Be],L=r.maxEventRetryAttempts,U=r.maxUnloadEventRetryAttempts,$=r.disableAutoBatchFlushLimit,rt(),G=r.overrideInstrumentationKey,re=!!r.disableTelemetry,K&&s();var u=n.disablePageUnloadEvents||[];K=(0,d.ee)(a,u,q),K=(0,d.Fc)(a,u,q)||K,K=(0,d.oS)(fe,n.disablePageShowEvents,q)||K}))),k[oe](n,e.core,e)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{theConfig:n,core:i,extensions:o}}))},e.processTelemetry=function(t,r){(0,c.u9)(t,e[He]),r=r||e._getTelCtx(r);var n=t;re||ne||(G&&(n[Q]=G),pe(n,!0),D?Ie(2,2):ve()),e.processNext(n,r)},e._doTeardown=function(e,t){Ie(2,2),ne=!0,k.teardown(),s(),we()},e.setEventQueueLimits=function(e,t){r[je]=S=(0,c.ei)(e)?e:Ot,r[Be]=R=(0,c.ei)(t)?t:0,rt();var n=le>e;if(!n&&O>0)for(var i=1;!n&&i<=3;i++){var o=P[i];o&&o[Ee]&&(0,y.I)(o[Ee],(function(e){e&&e[J]()>=O&&(n=!0)}))}_e(!0,n)},e.pause=function(){Ae(),ce=!0,k.pause()},e.resume=function(){ce=!1,k.resume(),ve()},e._loadTransmitProfiles=function(e){Ae(),Ue(),he=n,ve(),(0,w.z)(e,(function(e,t){var r=t[W];if(r>=2){var n=r>2?t[2]:0;if(t[te](0,r-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}n>=0&&t[1]>=0&&n>t[1]&&(n=t[1]),t[Z](n),de[e]=t}}))},e.flush=function(e,t,r){var n;if(void 0===e&&(e=!0),!ce)if(r=r||1,e)t||(n=(0,I.Qo)((function(e){t=e}))),null==u?(Ae(),xe(1,0,r),u=Ce((function(){u=null,De(t,r)}),0)):ie[Z](t);else{var i=Ae();ge(1,1,r),t&&t(),i&&ve()}return n},e.setMsaAuthTicket=function(e){k.addHeader(F,e)},e.hasEvents=me,e._setTransmitProfile=function(e){he!==e&&void 0!==de[e]&&(Ae(),he=e,ve())},(0,m.o$)(e,(function(){return k}),["addResponseHandler"]),e[qe]=function(){T<4&&(T++,Ae(),ve())},e._clearBackOff=function(){T&&(T=0,Ae(),ve())}})),s}return(0,s.qU)(t,e),t.__ieDyn=1,t}(A.s)},4484:(e,t,r)=>{"use strict";r.d(t,{F:()=>d,H:()=>l});var n=r(1011),i=r(1324),o=r(2494),s=r(5025),a=r(5130),c=";",u="=";function l(e){if(!e)return{};var t=e[a.sY](c),r=(0,n.K)(t,(function(e,t){var r=t[a.sY](u);if(2===r[a.oI]){var n=r[0][a.OL](),i=r[1];e[n]=i}return e}),{});if((0,i.cG)(r)[a.oI]>0){if(r.endpointsuffix){var l=r.location?r.location+".":"";r[a.zV]=r[a.zV]||"https://"+l+"dc."+r.endpointsuffix}r[a.zV]=r[a.zV]||s._G,(0,o.C)(r[a.zV],"/")&&(r[a.zV]=r[a.zV].slice(0,-1))}return r}var d={parse:l}},5025:(e,t,r)=>{"use strict";r.d(t,{R2:()=>u,_G:()=>a,jp:()=>o,ks:()=>l,tU:()=>i,wc:()=>c,xF:()=>n,ym:()=>s});var n="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i="sampleRate",o="ProcessLegacy",s="http.method",a="https://dc.services.visualstudio.com",c="/v2/track",u="not_specified",l="iKey"},7374:(e,t,r)=>{"use strict";r.d(t,{e:()=>i,u:()=>o});var n=r(4282),i=(0,n.H)({LocalStorage:0,SessionStorage:1}),o=(0,n.H)({AI:0,AI_AND_W3C:1,W3C:2})},87:(e,t,r)=>{"use strict";r.d(t,{Dt:()=>a,Y8:()=>u,bb:()=>c,vv:()=>l});var n=r(5439),i=r(6668),o=r(5130),s="";function a(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[o.OL]()}function c(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=s+e%1e3,r=s+Math.floor(e/1e3)%60,n=s+Math.floor(e/6e4)%60,i=s+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[o.oI]?"00"+t:2===t[o.oI]?"0"+t:t,r=r[o.oI]<2?"0"+r:r,n=n[o.oI]<2?"0"+n:n,i=i[o.oI]<2?"0"+i:i,(a>0?a+".":s)+i+":"+n+":"+r+"."+t}function u(e,t){var r=null;return(0,n.I)(e,(function(e){if(e.identifier===t)return r=e,-1})),r}function l(e,t,r,n,o){return!o&&(0,i.Kg)(e)&&("Script error."===e||"Script error"===e)}},8596:(e,t,r)=>{"use strict";r.d(t,{o:()=>p});var n=r(659),i=r(3673);function o(e){var t="ai."+e+".";return function(e){return t+e}}var s=o("application"),a=o("device"),c=o("location"),u=o("operation"),l=o("session"),d=o("user"),h=o("cloud"),f=o("internal"),p=function(e){function t(){return e.call(this)||this}return(0,n.qU)(t,e),t}((0,i.SZ)({applicationVersion:s("ver"),applicationBuild:s("build"),applicationTypeId:s("typeId"),applicationId:s("applicationId"),applicationLayer:s("layer"),deviceId:a("id"),deviceIp:a("ip"),deviceLanguage:a("language"),deviceLocale:a("locale"),deviceModel:a("model"),deviceFriendlyName:a("friendlyName"),deviceNetwork:a("network"),deviceNetworkName:a("networkName"),deviceOEMName:a("oemName"),deviceOS:a("os"),deviceOSVersion:a("osVersion"),deviceRoleInstance:a("roleInstance"),deviceRoleName:a("roleName"),deviceScreenResolution:a("screenResolution"),deviceType:a("type"),deviceMachineName:a("machineName"),deviceVMName:a("vmName"),deviceBrowser:a("browser"),deviceBrowserVersion:a("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:l("id"),sessionIsFirst:l("isFirst"),sessionIsNew:l("isNew"),userAccountAcquisitionDate:d("accountAcquisitionDate"),userAccountId:d("accountId"),userAgent:d("userAgent"),userId:d("id"),userStoreRegion:d("storeRegion"),userAuthUserId:d("authUserId"),userAnonymousUserAcquisitionDate:d("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:d("authUserAcquisitionDate"),cloudName:h("name"),cloudRole:h("role"),cloudRoleVer:h("roleVer"),cloudRoleInstance:h("roleInstance"),cloudEnvironment:h("environment"),cloudLocation:h("location"),cloudDeploymentUnit:h("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},9762:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var n=(0,r(4282).H)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},1575:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,O:()=>o});var n=r(8596),i={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},o=new n.o},2910:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var n=(0,r(4282).o)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},4658:(e,t,r)=>{"use strict";r.d(t,{AN:()=>E,BW:()=>C,Dt:()=>b,Nu:()=>v,Se:()=>A,T9:()=>_,_M:()=>I,iw:()=>w,tm:()=>S,v7:()=>k,vH:()=>T,vh:()=>y});var n=r(6668),i=r(3076),o=r(3775),s=r(3673),a=r(8693),c=r(9018),u=r(7374),l=r(5130),d=void 0,h=void 0,f="";function p(){return C()?g(u.e.LocalStorage):null}function g(e){try{if((0,n.hX)((0,i.mS)()))return null;var t=(new Date)[l.xE](),r=(0,i.zS)(e===u.e.LocalStorage?"localStorage":"sessionStorage"),o=f+t;r.setItem(o,t);var s=r.getItem(o)!==t;if(r[l.AZ](o),!s)return r}catch(e){}return null}function m(){return E()?g(u.e.SessionStorage):null}function v(){d=!1,h=!1}function y(e){f=e||""}function w(){d=C(!0),h=E(!0)}function C(e){return(e||void 0===d)&&(d=!!g(u.e.LocalStorage)),d}function A(e,t){var r=p();if(null!==r)try{return r.getItem(t)}catch(t){d=!1,(0,o.ZP)(e,2,1,"Browser failed read of local storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return null}function I(e,t,r){var n=p();if(null!==n)try{return n.setItem(t,r),!0}catch(t){d=!1,(0,o.ZP)(e,2,3,"Browser failed write to local storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}function S(e,t){var r=p();if(null!==r)try{return r[l.AZ](t),!0}catch(t){d=!1,(0,o.ZP)(e,2,5,"Browser failed removal of local storage item. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}function E(e){return(e||void 0===h)&&(h=!!g(u.e.SessionStorage)),h}function _(){var e=[];return E()&&(0,c.z)((0,i.zS)("sessionStorage"),(function(t){e.push(t)})),e}function T(e,t){var r=m();if(null!==r)try{return r.getItem(t)}catch(t){h=!1,(0,o.ZP)(e,2,2,"Browser failed read of session storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return null}function b(e,t,r){var n=m();if(null!==n)try{return n.setItem(t,r),!0}catch(t){h=!1,(0,o.ZP)(e,2,4,"Browser failed write to session storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}function k(e,t){var r=m();if(null!==r)try{return r[l.AZ](t),!0}catch(t){h=!1,(0,o.ZP)(e,2,6,"Browser failed removal of session storage item. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}},7358:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var n=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},7975:(e,t,r)=>{"use strict";r.d(t,{HQ:()=>w,Rr:()=>f,Vj:()=>y,Vk:()=>g,Vt:()=>m,_T:()=>C,lq:()=>h,pJ:()=>p,qW:()=>A,xP:()=>v,zx:()=>d});var n=r(8993),i=r(3775),o=r(9018),s=r(6668),a=r(7292),c=r(3178),u=r(5977),l=r(5130);function d(e,t,r){var n=t[l.oI],i=h(e,t);if(i[l.oI]!==n){for(var o=0,s=i;void 0!==r[s];)o++,s=(0,c.P0)(i,0,147)+A(o);i=s}return i}function h(e,t){var r;return t&&(t=(0,n.EH)((0,u.o)(t)))[l.oI]>150&&(r=(0,c.P0)(t,0,150),(0,i.ZP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),r||t}function f(e,t,r){var o;return void 0===r&&(r=1024),t&&(r=r||1024,(t=(0,n.EH)((0,u.o)(t)))[l.oI]>r&&(o=(0,c.P0)(t,0,r),(0,i.ZP)(e,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:t},!0))),o||t}function p(e,t){return C(e,t,2048,66)}function g(e,t){var r;return t&&t[l.oI]>32768&&(r=(0,c.P0)(t,0,32768),(0,i.ZP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),r||t}function m(e,t){var r;if(t){var n=""+t;n[l.oI]>32768&&(r=(0,c.P0)(n,0,32768),(0,i.ZP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return r||t}function v(e,t){if(t){var r={};(0,o.z)(t,(function(t,n){if((0,s.Gv)(n)&&(0,a.Z)())try{n=(0,a.hm)()[l.Jj](n)}catch(t){(0,i.ZP)(e,2,49,"custom property is not valid",{exception:t},!0)}n=f(e,n,8192),t=d(e,t,r),r[t]=n})),t=r}return t}function y(e,t){if(t){var r={};(0,o.z)(t,(function(t,n){t=d(e,t,r),r[t]=n})),t=r}return t}function w(e,t){return t?C(e,t,128,69)[l.xE]():t}function C(e,t,r,o){var s;return t&&(t=(0,n.EH)((0,u.o)(t)))[l.oI]>r&&(s=(0,c.P0)(t,0,r),(0,i.ZP)(e,2,o,"input is too long, it has been truncated to "+r+" characters.",{data:t},!0)),s||t}function A(e){var t="00"+e;return(0,c.hK)(t,t[l.oI]-3)}},1062:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});var n=r(3673),i=r(5025),o=r(5130),s=r(7975),a=function(e,t,r){var a=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[o.RS]=(0,s.Rr)(e,r)||i.R2,c.data=t,c.time=(0,n._u)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===a.sampleRate?4:1},tags:1,data:1}}},3072:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r(5025),i=r(5130),o=r(7975),s=function(){function e(e,t,r,s){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var a=this;a.ver=2,a[i.RS]=(0,o.Rr)(e,t)||n.R2,a[i.$y]=(0,o.xP)(e,r),a[i.XA]=(0,o.Vj)(e,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},5397:(e,t,r)=>{"use strict";r.d(t,{WJ:()=>T});var n=r(659),i=r(6668),o=r(5439),s=r(4335),a=r(8993),c=r(5881),u=r(3076),l=r(5025),d=r(5130),h=r(7975),f="error",p="stack",g="stackDetails",m="errorSrc",v="message",y="description";function w(e,t){var r=e;return r&&!(0,i.Kg)(r)&&(JSON&&JSON[d.Jj]?(r=JSON[d.Jj](e),!t||r&&"{}"!==r||(r=(0,i.Tn)(e[d.xE])?e[d.xE]():""+e)):r=e+" - (Missing JSON.stringify)"),r||""}function C(e,t){var r=e;return e&&(r&&!(0,i.Kg)(r)&&(r=e[v]||e[y]||r),r&&!(0,i.Kg)(r)&&(r=w(r,!0)),e.filename&&(r=r+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,c.H)(r||"",t)&&(r=t+": "+r),r||""}function A(e){return e&&e.src&&(0,i.Kg)(e.src)&&e.obj&&(0,i.cy)(e.obj)}function I(e){var t=e||"";(0,i.Kg)(t)||(t=(0,i.Kg)(t[p])?t[p]:""+t);var r=t[d.sY]("\n");return{src:t,obj:r}}function S(e){var t=null;if(e)try{if(e[p])t=I(e[p]);else if(e[f]&&e[f][p])t=I(e[f][p]);else if(e.exception&&e.exception[p])t=I(e.exception[p]);else if(A(e))t=e;else if(A(e[g]))t=e[g];else if((0,u.zk)()&&(0,u.zk)().opera&&e[v])t=function(e){for(var t=[],r=e[d.sY]("\n"),n=0;n<r[d.oI];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),t.push(i)}return{src:e,obj:t}}(e[d.pM]);else if(e.reason&&e.reason[p])t=I(e.reason[p]);else if((0,i.Kg)(e))t=I(e);else{var r=e[v]||e[y]||"";(0,i.Kg)(e[m])&&(r&&(r+="\n"),r+=" from "+e[m]),r&&(t=I(r))}}catch(e){t=I(e)}return t||{src:"",obj:null}}function E(e){var t="";if(e&&!(t=e.typeName||e[d.RS]||""))try{var r=/function (.{1,200})\(/.exec(e.constructor[d.xE]());t=r&&r[d.oI]>1?r[1]:""}catch(e){}return t}function _(e){if(e)try{if(!(0,i.Kg)(e)){var t=E(e),r=w(e,!1);return r&&"{}"!==r||(e[f]&&(t=E(e=e[f])),r=w(e,!0)),0!==(0,c.H)(r,t)&&"String"!==t?t+":"+r:r}}catch(e){}return""+(e||"")}var T=function(){function e(e,t,r,n,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,function(e){try{if((0,i.Gv)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(a[d.OK]=t[d.OK]||[],a[d.$y]=t[d.$y],a[d.XA]=t[d.XA],t[d.Ur]&&(a[d.Ur]=t[d.Ur]),t.id&&(a.id=t.id),t[d.Fq]&&(a[d.Fq]=t[d.Fq]),(0,i.hX)(t[d.r1])||(a[d.r1]=t[d.r1])):(r||(r={}),a[d.OK]=[new b(e,t,r)],a[d.$y]=(0,h.xP)(e,r),a[d.XA]=(0,h.Vj)(e,n),o&&(a[d.Ur]=o),s&&(a.id=s))}return e.CreateAutoException=function(e,t,r,n,i,o,s,a){var c,u=E(i||o||e);return(c={})[d.pM]=C(e,u),c.url=t,c.lineNumber=r,c.columnNumber=n,c.error=_(i||o||e),c.evt=_(o||e),c[d.qg]=u,c.stackDetails=S(s||i||o),c.errorSrc=a,c},e.CreateFromInterface=function(t,r,i,o){var a=r[d.OK]&&(0,s.W)(r[d.OK],(function(e){return b[d.vu](t,e)}));return new e(t,(0,n.Im)((0,n.Im)({},r),{exceptions:a}),i,o)},e.prototype.toInterface=function(){var e,t=this,r=t.exceptions,n=t.properties,i=t.measurements,o=t.severityLevel,a=t.problemGroup,c=t.id,u=t.isManual,l=r instanceof Array&&(0,s.W)(r,(function(e){return e.toInterface()}))||void 0;return(e={ver:"4.0"})[d.OK]=l,e.severityLevel=o,e.properties=n,e.measurements=i,e.problemGroup=a,e.id=c,e.isManual=u,e},e.CreateSimpleException=function(e,t,r,n,i,o){var s;return{exceptions:[(s={},s[d.lW]=!0,s.message=e,s.stack=i,s.typeName=t,s)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=_,e}(),b=function(){function e(e,t,r){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var n=this;if(function(e){try{if((0,i.Gv)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))n[d.qg]=t[d.qg],n[d.pM]=t[d.pM],n[p]=t[p],n[d.on]=t[d.on]||[],n[d.lW]=t[d.lW];else{var a=t,c=a&&a.evt;(0,i.bJ)(a)||(a=a[f]||c||a),n[d.qg]=(0,h.Rr)(e,E(a))||l.R2,n[d.pM]=(0,h.Vk)(e,C(t||a,n[d.qg]))||l.R2;var u=t[g]||S(t);n[d.on]=function(e){var t,r=e.obj;if(r&&r[d.oI]>0){t=[];var n=0,i=0;if((0,o.I)(r,(function(e){var r=e[d.xE]();if(k.regex.test(r)){var o=new k(r,n++);i+=o[d.J$],t.push(o)}})),i>32768)for(var s=0,a=t[d.oI]-1,c=0,u=s,l=a;s<a;){if((c+=t[s][d.J$]+t[a][d.J$])>32768){var h=l-u+1;t.splice(u,h);break}u=s,l=a,s++,a--}}return t}(u),(0,i.cy)(n[d.on])&&(0,s.W)(n[d.on],(function(t){t[d.QE]=(0,h.Rr)(e,t[d.QE]),t[d.IE]=(0,h.Rr)(e,t[d.IE])})),n[p]=(0,h.Vt)(e,function(e){var t="";return e&&(e.obj?(0,o.I)(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(u)),n.hasFullStack=(0,i.cy)(n.parsedStack)&&n.parsedStack[d.oI]>0,r&&(r[d.qg]=r[d.qg]||n[d.qg])}}return e.prototype.toInterface=function(){var e,t=this,r=t[d.on]instanceof Array&&(0,s.W)(t[d.on],(function(e){return e.toInterface()}));return(e={id:t.id,outerId:t.outerId,typeName:t[d.qg],message:t[d.pM],hasFullStack:t[d.lW],stack:t[p]})[d.on]=r||void 0,e},e.CreateFromInterface=function(t,r){var i=r[d.on]instanceof Array&&(0,s.W)(r[d.on],(function(e){return k[d.vu](e)}))||r[d.on];return new e(t,(0,n.Im)((0,n.Im)({},r),{parsedStack:i}))},e}(),k=function(){function e(t,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[d.J$]=0,"string"==typeof t){var i=t;n[d.Av]=r,n[d.lx]="<no_method>",n[d.QE]=(0,a.EH)(i),n[d.IE]="",n[d.h_]=0;var o=i.match(e.regex);o&&o[d.oI]>=5&&(n[d.lx]=(0,a.EH)(o[2])||n[d.lx],n[d.IE]=(0,a.EH)(o[4]),n[d.h_]=parseInt(o[5])||0)}else n[d.Av]=t[d.Av],n[d.lx]=t[d.lx],n[d.QE]=t[d.QE],n[d.IE]=t[d.IE],n[d.h_]=t[d.h_],n[d.J$]=0;n.sizeInBytes+=n.method[d.oI],n.sizeInBytes+=n.fileName[d.oI],n.sizeInBytes+=n.assembly[d.oI],n[d.J$]+=e.baseSize,n.sizeInBytes+=n.level.toString()[d.oI],n.sizeInBytes+=n.line.toString()[d.oI]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[d.Av],method:e[d.lx],assembly:e[d.QE],fileName:e[d.IE],line:e[d.h_]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},5014:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var n=r(5025),i=r(5130),o=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},s=r(7975),a=function(){function e(e,t,r,a,c,u,l,d,h){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var p=new o;p[i.F2]=a>0?a:void 0,p.max=isNaN(u)||null===u?void 0:u,p.min=isNaN(c)||null===c?void 0:c,p[i.RS]=(0,s.Rr)(e,t)||n.R2,p.value=r,p.stdDev=isNaN(l)||null===l?void 0:l,f.metrics=[p],f[i.$y]=(0,s.xP)(e,d),f[i.XA]=(0,s.Vj)(e,h)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},1448:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var n=r(5025),i=r(87),o=r(5130),s=r(7975),a=function(){function e(e,t,r,a,c,u,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=(0,s.HQ)(e,l),d.url=(0,s.pJ)(e,r),d[o.RS]=(0,s.Rr)(e,t)||n.R2,isNaN(a)||(d[o.qd]=(0,i.bb)(a)),d[o.$y]=(0,s.xP)(e,c),d[o.XA]=(0,s.Vj)(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},4164:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});var n=r(5025),i=r(5130),o=r(7975),s=function(){function e(e,t,r,s,a,c,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=(0,o.pJ)(e,r),l[i.RS]=(0,o.Rr)(e,t)||n.R2,l[i.$y]=(0,o.xP)(e,a),l[i.XA]=(0,o.Vj)(e,c),u&&(l.domProcessing=u.domProcessing,l[i.qd]=u[i.qd],l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l[i.fd]=u[i.fd],l.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},1365:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(87),i=r(2318),o=r(5130),s=r(7975),a=function(){function e(e,t,r,a,c,u,l,d,h,f,p,g){void 0===h&&(h="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var m=this;m.ver=2,m.id=t,m[o.qd]=(0,n.bb)(c),m.success=u,m.resultCode=l+"",m.type=(0,s.Rr)(e,h);var v=(0,i._U)(e,r,d,a);m.data=(0,s.pJ)(e,a)||v.data,m.target=(0,s.Rr)(e,v.target),f&&(m.target="".concat(m.target," | ").concat(f)),m[o.RS]=(0,s.Rr)(e,v[o.RS]),m[o.$y]=(0,s.xP)(e,p),m[o.XA]=(0,s.Vj)(e,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},2445:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});var n=r(5025),i=r(5130),o=r(7975),s=function(){function e(e,t,r,s,a){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||n.R2,c[i.pM]=(0,o.Vk)(e,t),c[i.$y]=(0,o.xP)(e,s),c[i.XA]=(0,o.Vj)(e,a),r&&(c[i.Ur]=r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},9354:(e,t,r)=>{"use strict";r.d(t,{Gz:()=>d,M0:()=>p,PS:()=>f,cM:()=>u,k6:()=>h,wX:()=>l});var n=r(3076),i=r(6668),o=r(5130),s=(0,n.YE)()||{},a=0,c=[null,null,null,null,null];function u(e){var t=a,r=c,n=r[t];return s.createElement?r[t]||(n=r[t]=s.createElement("a")):n={host:f(e,!0)},n.href=e,++t>=r[o.oI]&&(t=0),a=t,n}function l(e){var t,r=u(e);return r&&(t=r.href),t}function d(e){var t,r=u(e);return r&&(t=r[o.Ue]),t}function h(e,t){return e?e.toUpperCase()+" "+t:t}function f(e,t){var r=p(e,t)||"";if(r){var n=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=n&&n[o.oI]>3&&(0,i.Kg)(n[2])&&n[2][o.oI]>0)return n[2]+(n[3]||"")}return r}function p(e,t){var r=null;if(e){var n=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=n&&n[o.oI]>2&&(0,i.Kg)(n[2])&&n[2][o.oI]>0&&(r=n[2]||"",t&&n[o.oI]>2)){var s=(n[1]||"")[o.OL](),a=n[3]||"";("http"===s&&":80"===a||"https"===s&&":443"===a)&&(a=""),r+=a}}return r}},2318:(e,t,r)=>{"use strict";r.d(t,{Ft:()=>T,Qu:()=>v,Rs:()=>C,Wt:()=>y,_U:()=>S,jj:()=>_,lt:()=>E,mD:()=>I,mp:()=>w,pg:()=>A});var n=r(6832),i=r(5439),o=r(558),s=r(225),a=r(6668),c=r(1864),u=r(5881),l=r(5025),d=r(2910),h=r(7975),f=r(9354),p=r(5130),g=[l._G+l.wc,"https://breeze.aimon.applicationinsights.io"+l.wc,"https://dc-int.services.visualstudio.com"+l.wc],m="cid-v1:";function v(e){return-1!==(0,n.r)(g,e[p.OL]())}function y(e){m=e}function w(){return m}function C(e,t,r){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[p.Ol])for(var n=0;n<e.correlationHeaderExcludePatterns[p.oI];n++)if(e[p.Ol][n].test(t))return!1;var o=(0,f.cM)(t).host[p.OL]();if(!o||-1===(0,u.H)(o,":443")&&-1===(0,u.H)(o,":80")||(o=((0,f.M0)(t,!0)||"")[p.OL]()),(!e||!e.enableCorsCorrelation)&&o&&o!==r)return!1;var s,a=e&&e.correlationHeaderDomains;if(a&&((0,i.I)(a,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||t.test(o)})),!s))return!1;var c=e&&e.correlationHeaderExcludedDomains;if(!c||0===c[p.oI])return!0;for(n=0;n<c[p.oI];n++)if(new RegExp(c[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&o[p.oI]>0}function A(e){if(e){var t=I(e,d.a[1]);if(t&&t!==m)return t}}function I(e,t){if(e)for(var r=e[p.sY](","),n=0;n<r[p.oI];++n){var i=r[n][p.sY]("=");if(2===i[p.oI]&&i[0]===t)return i[1]}}function S(e,t,r,n){var i,o=n,s=n;if(t&&t[p.oI]>0){var a=(0,f.cM)(t);if(i=a.host,!o)if(null!=a[p.Ue]){var c=0===a.pathname[p.oI]?"/":a[p.Ue];"/"!==c.charAt(0)&&(c="/"+c),s=a[p.Ue],o=(0,h.Rr)(e,r?r+" "+c:c)}else o=(0,h.Rr)(e,t)}else i=n,o=n;return{target:i,name:o,data:s}}function E(){var e=(0,o.FJ)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,s.f)()}function _(e,t){var r=null;return 0===e||0===t||(0,a.hX)(e)||(0,a.hX)(t)||(r=t-e),r}function T(e,t){var r=e||{};return{getName:function(){return r[p.RS]},setName:function(e){t&&t.setName(e),r[p.RS]=e},getTraceId:function(){return r.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,c.hX)(e)&&(r.traceID=e)},getSpanId:function(){return r.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,c.wN)(e)&&(r.parentID=e)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),r.traceFlags=e}}}},5130:(e,t,r)=>{"use strict";r.d(t,{$e:()=>v,$y:()=>E,AZ:()=>c,Av:()=>D,C9:()=>m,Cx:()=>f,F2:()=>d,Fq:()=>P,IE:()=>N,J$:()=>T,Jj:()=>y,Jm:()=>h,OK:()=>I,OL:()=>o,Ol:()=>C,QE:()=>M,RS:()=>u,Ue:()=>w,Ur:()=>k,XA:()=>_,fd:()=>q,h_:()=>U,i9:()=>g,lW:()=>x,lx:()=>L,oI:()=>i,on:()=>S,pM:()=>l,qd:()=>F,qg:()=>b,r1:()=>R,sY:()=>n,up:()=>A,vu:()=>O,xE:()=>a,zV:()=>s,zw:()=>p});var n="split",i="length",o="toLowerCase",s="ingestionendpoint",a="toString",c="removeItem",u="name",l="message",d="count",h="preTriggerDate",f="disabled",p="interval",g="daysOfMonth",m="date",v="getUTCDate",y="stringify",w="pathname",C="correlationHeaderExcludePatterns",A="extensionConfig",I="exceptions",S="parsedStack",E="properties",_="measurements",T="sizeInBytes",b="typeName",k="severityLevel",P="problemGroup",R="isManual",O="CreateFromInterface",M="assembly",N="fileName",x="hasFullStack",D="level",L="method",U="line",F="duration",q="receivedResponse"},740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnalyticsPluginIdentifier:()=>V,BreezeChannelIdentifier:()=>$,ConfigurationManager:()=>P,ConnectionStringParser:()=>m.F,ContextTagKeys:()=>R.o,CtxTagKeys:()=>D.O,DEFAULT_BREEZE_ENDPOINT:()=>y._G,DEFAULT_BREEZE_PATH:()=>y.wc,Data:()=>b.B,DisabledPropertyName:()=>y.xF,DistributedTracingModes:()=>L.u,Envelope:()=>w.L,Event:()=>C.J,Exception:()=>A.WJ,Extensions:()=>D.F,HttpMethod:()=>y.ym,Metric:()=>I.J,PageView:()=>S.h,PageViewPerformance:()=>T.H,ProcessLegacy:()=>y.jp,PropertiesPluginIdentifier:()=>z,RemoteDependencyData:()=>E.A,RequestHeaders:()=>v.a,SampleRate:()=>y.tU,SeverityLevel:()=>k.O,TelemetryItemCreator:()=>x,ThrottleMgr:()=>g,Trace:()=>_.C,correlationIdCanIncludeCorrelationHeader:()=>n.Rs,correlationIdGetCorrelationContext:()=>n.pg,correlationIdGetCorrelationContextValue:()=>n.mD,correlationIdGetPrefix:()=>n.mp,correlationIdSetPrefix:()=>n.Wt,createDistributedTraceContextFromTrace:()=>n.Ft,createDomEvent:()=>j,createTelemetryItem:()=>N,createTraceParent:()=>q.wk,dataSanitizeException:()=>O.Vt,dataSanitizeId:()=>O.HQ,dataSanitizeInput:()=>O._T,dataSanitizeKey:()=>O.lq,dataSanitizeKeyAndAddUniqueness:()=>O.zx,dataSanitizeMeasurements:()=>O.Vj,dataSanitizeMessage:()=>O.Vk,dataSanitizeProperties:()=>O.xP,dataSanitizeString:()=>O.Rr,dataSanitizeUrl:()=>O.pJ,dateTimeUtilsDuration:()=>n.jj,dateTimeUtilsNow:()=>n.lt,dsPadNumber:()=>O.qW,findW3cTraceParent:()=>q.ef,formatTraceParent:()=>q.L0,getExtensionByName:()=>U.Y8,isBeaconApiSupported:()=>F.Uf,isCrossOriginError:()=>U.vv,isInternalApplicationInsightsEndpoint:()=>n.Qu,isSampledFlag:()=>q.N7,isValidSpanId:()=>q.wN,isValidTraceId:()=>q.hX,isValidTraceParent:()=>q.mJ,msToTimeSpan:()=>U.bb,parseConnectionString:()=>m.H,parseTraceParent:()=>q.ZI,strNotSpecified:()=>y.R2,stringToBoolOrDefault:()=>U.Dt,urlGetAbsoluteUrl:()=>B.wX,urlGetCompleteUrl:()=>B.k6,urlGetPathName:()=>B.Gz,urlParseFullHost:()=>B.M0,urlParseHost:()=>B.PS,urlParseUrl:()=>B.cM,utlCanUseLocalStorage:()=>f.BW,utlCanUseSessionStorage:()=>f.AN,utlDisableStorage:()=>f.Nu,utlEnableStorage:()=>f.iw,utlGetLocalStorage:()=>f.Se,utlGetSessionStorage:()=>f.vH,utlGetSessionStorageKeys:()=>f.T9,utlRemoveSessionStorage:()=>f.v7,utlRemoveStorage:()=>f.tm,utlSetLocalStorage:()=>f._M,utlSetSessionStorage:()=>f.Dt,utlSetStoragePrefix:()=>f.vh});var n=r(2318),i=r(6668),o=r(3775),s=r(3673),a=r(9622),c=r(6832),u=r(8993),l=r(6535),d=r(5439),h=r(9018),f=r(4658),p=r(5130),g=function(e,t){var r,n,g,m,v,y,w,C=this,A=!1,I=!1;function S(e,t,i,o){if(A){var s=function(e){try{var t=E(e);return(0,l.Z1)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!s)return;var a=E(e),c=M(e),u=T(a,r,c),d=!1,h=0,f=N(e);try{u&&!f?(h=Math.min(a.limit.maxSendNumber,c[p.F2]+1),c[p.F2]=0,d=!0,v[e]=!0,c[p.Jm]=new Date):(v[e]=u,c[p.F2]+=1);var g=b(e);P(n,g,c);for(var m=0;m<h;m++)O(e,n,t,i)}catch(e){}return{isThrottled:d,throttleNum:h}}return o&&x(e).push({msgID:e,message:t,severity:i}),null}function E(e){return g[e]||g[109]}function _(e,t){var r,n,o,s,a;try{var c=t||{},u={};u[p.Cx]=!!c[p.Cx];var l=c[p.zw]||{};I=(null==l?void 0:l.daysOfMonth)&&(null==l?void 0:l.daysOfMonth[p.oI])>0,u[p.zw]=(s=null===(o=(o=l)||{})||void 0===o?void 0:o.monthInterval,a=null==o?void 0:o.dayInterval,(0,i.hX)(s)&&(0,i.hX)(a)&&(o.monthInterval=3,I||(o[p.i9]=[28],I=!0)),o={monthInterval:null==o?void 0:o.monthInterval,dayInterval:null==o?void 0:o.dayInterval,daysOfMonth:null==o?void 0:o.daysOfMonth});var d={samplingRate:(null===(r=c.limit)||void 0===r?void 0:r.samplingRate)||100,maxSendNumber:(null===(n=c.limit)||void 0===n?void 0:n.maxSendNumber)||1};u.limit=d,g[e]=u}catch(e){}}function T(e,t,r){if(e&&!e[p.Cx]&&t&&(0,s.Gh)(r)){var n=k(),i=r[p.C9],o=e[p.zw],a=1;if(null==o?void 0:o.monthInterval){var u=12*(n.getUTCFullYear()-i.getUTCFullYear())+n.getUTCMonth()-i.getUTCMonth();a=R(o.monthInterval,0,u)}var l=1;if(I)l=(0,c.r)(o[p.i9],n[p.$e]());else if(null==o?void 0:o.dayInterval){var d=Math.floor((n.getTime()-i.getTime())/864e5);l=R(o.dayInterval,0,d)}return a>=0&&l>=0}return!1}function b(e,t){var r=(0,s.Gh)(t)?t:"";return e?"appInsightsThrottle"+r+"-"+e:null}function k(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function P(e,t,r){try{return(0,f._M)(e,t,(0,u.EH)(JSON[p.Jj](r)))}catch(e){}return!1}function R(e,t,r){return e<=0?1:r>=t&&(r-t)%e==0?Math.floor((r-t)/e)+1:-1}function O(e,t,r,n){(0,o.ZP)(t,n||1,e,r)}function M(e){try{var t=m[e];if(!t){var r=b(e,y);t=function(e,t,r){try{var n={date:k(),count:0};if(e){var i=JSON.parse(e);return{date:k(i[p.C9])||n[p.C9],count:i[p.F2]||n[p.F2],preTriggerDate:i.preTriggerDate?k(i[p.Jm]):void 0}}return P(t,r,n),n}catch(e){}return null}((0,f.Se)(n,r),n,r),m[e]=t}return m[e]}catch(e){}return null}function N(e){var t=v[e];if((0,i.hX)(t)){t=!1;var r=M(e);r&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[p.$e]()===t[p.$e]()}}catch(e){}return!1}(r[p.Jm])),v[e]=t}return v[e]}function x(e){return w=w||{},(0,i.hX)(w[e])&&(w[e]=[]),w[e]}n=(0,o.y0)(e),v={},m={},w={},g={},_(109),y=(0,s.Gh)(t)?t:"",e.addUnloadHook((0,a.a)(e.config,(function(e){var t=e.cfg;r=(0,f.BW)();var n=t.throttleMgrCfg||{};(0,h.z)(n,(function(e,t){_(parseInt(e),t)}))}))),C._getDbgPlgTargets=function(){return[w]},C.getConfig=function(){return g},C.canThrottle=function(e){var t=M(e);return T(E(e),r,t)},C.isTriggered=function(e){return N(e)},C.isReady=function(){return A},C.flush=function(e){try{var t=x(e);if(t&&t[p.oI]>0){var r=t.slice(0);return w[e]=[],(0,d.I)(r,(function(e){S(e.msgID,e[p.pM],e.severity,!1)})),!0}}catch(e){}return!1},C.flushAll=function(){try{if(w){var e=!0;return(0,h.z)(w,(function(t){var r=C.flush(parseInt(t));e=e&&r})),e}}catch(e){}return!1},C.onReadyState=function(e,t){return void 0===t&&(t=!0),(A=!!(0,i.hX)(e)||e)&&t?C.flushAll():null},C.sendMessage=function(e,t,r){return S(e,t,r,!0)}},m=r(4484),v=r(2910),y=r(5025),w=r(1062),C=r(3072),A=r(5397),I=r(5014),S=r(1448),E=r(1365),_=r(2445),T=r(4164),b=r(7358),k=r(9762),P=function(){function e(){}return e.getConfig=function(e,t,r,n){var o;return void 0===n&&(n=!1),o=r&&e[p.up]&&e[p.up][r]&&!(0,i.hX)(e[p.up][r][t])?e[p.up][r][t]:e[t],(0,i.hX)(o)?n:o},e}(),R=r(8596),O=r(7975),M=r(3517);function N(e,t,r,n,o,a){var c;r=(0,O.Rr)(n,r)||y.R2,((0,i.hX)(e)||(0,i.hX)(t)||(0,i.hX)(r))&&(0,M.$8)("Input doesn't contain all required fields");var u="";e[y.ks]&&(u=e[y.ks],delete e[y.ks]);var l=((c={})[p.RS]=r,c.time=(0,s._u)(new Date),c.iKey=u,c.ext=a||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,i.hX)(o)||(0,h.z)(o,(function(e,t){l.data[e]=t})),l}var x=function(){function e(){}return e.create=N,e}(),D=r(1575),L=r(7374),U=r(87),F=r(7292),q=r(1864),H=r(3076);function j(e){var t=null;if((0,i.Tn)(Event))t=new Event(e);else{var r=(0,H.YE)();r&&r.createEvent&&(t=r.createEvent("Event")).initEvent(e,!0,!0)}return t}var B=r(9354),z="AppInsightsPropertiesPlugin",$="AppInsightsChannelPlugin",V="ApplicationInsightsAnalytics"},2475:(e,t,r)=>{"use strict";r.d(t,{DD:()=>u,Lx:()=>c,NU:()=>a});var n=r(6668),i=r(5977),o=r(6182);function s(e,t,r){return!e&&(0,n.hX)(e)?t:(0,n.Lm)(e)?e:"true"===(0,i.o)(e)[o.OL]()}function a(e){return{mrg:!0,v:e}}function c(e,t,r){return{fb:r,isVal:e,v:t}}function u(e,t){return{fb:t,set:s,v:!!e}}},991:(e,t,r)=>{"use strict";r.d(t,{q:()=>h});var n=r(6668),i=r(9452),o=r(5977),s=r(7460),a=r(9018),c=r(6182);function u(e){return e&&(0,n.Gv)(e)&&(e.isVal||e.fb||(0,i.K)(e,"v")||(0,i.K)(e,"mrg")||(0,i.K)(e,"ref")||e.set)}function l(e,t,r){var i,s=r.dfVal||n.O9;if(t&&r.fb){var a=r.fb;(0,n.cy)(a)||(a=[a]);for(var u=0;u<a[c.oI];u++){var l=a[u],d=t[l];if(s(d)?i=d:e&&(s(d=e.cfg[l])&&(i=d),e.set(e.cfg,(0,o.o)(l),d)),s(i))break}}return!s(i)&&s(r.v)&&(i=r.v),i}function d(e,t,r){var i,o=r;return r&&u(r)&&(o=l(e,t,r)),o&&(u(o)&&(o=d(e,t,o)),(0,n.cy)(o)?(i=[])[c.oI]=o[c.oI]:(0,s.Q)(o)&&(i={}),i&&((0,a.z)(o,(function(r,n){n&&u(n)&&(n=d(e,t,n)),i[r]=n})),o=i)),o}function h(e,t,r,i){var o,f,p,g,m,v,y,w,C=i;u(C)?(o=C.isVal,f=C.set,v=C[c.XW],y=C[c.JQ],g=C.mrg,!(m=C.ref)&&(0,n.b0)(m)&&(m=!!g),p=l(e,t,C)):p=i,y&&e[c.JQ](t,r);var A=!0,I=t[r];!I&&(0,n.hX)(I)||(w=I,A=!1,o&&w!==p&&!o(w)&&(w=p,A=!0),f&&(A=(w=f(w,p,t))===p)),A?w=p?d(e,t,p):p:((0,s.Q)(w)||(0,n.cy)(p))&&g&&p&&((0,s.Q)(p)||(0,n.cy)(p))&&(0,a.z)(p,(function(t,r){h(e,w,t,r)})),e.set(t,r,w),m&&e.ref(t,r),v&&e[c.XW](t,r)}},9622:(e,t,r)=>{"use strict";r.d(t,{e:()=>F,a:()=>q});var n=r(6668),i=r(9018),o=r(6336),s=r(8693),a=r(4276),c=r(6492),u=r(6182),l=r(991),d=r(5439),h=r(695),f=r(6832),p=r(9147),g=["push","pop","shift","unshift","splice"],m=function(e,t,r,n){e&&e[u.ih](3,108,"".concat(r," [").concat(t,"] failed - ")+(0,s.m)(n))};function v(e,t){var r=(0,h.k)(e,t);return r&&r.get}function y(e,t,r,n){if(t){var a=v(t,r);a&&a[e.prop]?t[r]=n:function(e,t,r,n){var a={n:r,h:[],trk:function(t){t&&t.fn&&(-1===(0,f.r)(a.h,t)&&a.h[u.y5](t),e.trk(t,a))},clr:function(e){var t=(0,f.r)(a.h,e);-1!==t&&a.h[u.Ic](t,1)}},l=!0,d=!1;function h(){l&&(d=d||(0,p.hF)(h,e,n),n&&!n[p.nM]&&d&&(n=C(e,n,r,"Converting")),l=!1);var t=e.act;return t&&a.trk(t),n}h[e.prop]={chng:function(){e.add(a)}},(0,o.vF)(t,a.n,{g:h,s:function(o){if(n!==o){h[e.ro]&&!e.upd&&(0,p.If)("["+r+"] is read-only:"+(0,s.m)(t)),l&&(d=d||(0,p.hF)(h,e,n),l=!1);var f=d&&h[e.rf];if(d)if(f){(0,i.z)(n,(function(e){n[e]=o?o[e]:c.HP}));try{(0,i.z)(o,(function(t,r){y(e,n,t,r)})),o=n}catch(t){m((e.hdlr||{})[u.Uw],r,"Assigning",t),d=!1}}else n&&n[p.nM]&&(0,i.z)(n,(function(t){var r=v(n,t);if(r){var i=r[e.prop];i&&i.chng()}}));if(o!==n){var g=o&&(0,p.hF)(h,e,o);!f&&g&&(o=C(e,o,r,"Converting")),n=o,d=g}e.add(a)}}})}(e,t,r,n)}return t}function w(e,t,r,n){if(t){var i=v(t,r),o=i&&!!i[e.prop],s=n&&n[0],a=n&&n[1],c=n&&n[2];if(!o){if(c)try{(0,p.V9)(t)}catch(t){m((e.hdlr||{})[u.Uw],r,"Blocking",t)}try{y(e,t,r,t[r]),i=v(t,r)}catch(t){m((e.hdlr||{})[u.Uw],r,"State",t)}}s&&(i[e.rf]=s),a&&(i[e.ro]=a),c&&(i[e.blkVal]=!0)}return t}function C(e,t,r,s){try{(0,i.z)(t,(function(r,n){y(e,t,r,n)})),t[p.nM]||((0,o.Ux)(t,p.nM,{get:function(){return e[u.K0]}}),function(e,t,r){(0,n.cy)(t)&&(0,d.I)(g,(function(n){var i=t[n];t[n]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=i[u.y9](this,n);return C(e,t,r,"Patching"),s}}))}(e,t,r))}catch(t){m((e.hdlr||{})[u.Uw],r,s,t)}return t}var A,I=r(7403),S=r(1636),E=r(755),_=r(655),T=r(4016),b=r(411),k=r(1324),P=r(2871);function R(e,t){return(T.s6.setPrototypeOf||function(e,t){!A&&(A=(0,P.nR)((function(){var e;return(e={})[T.r5]=[],e instanceof Array}))),A.v?e[T.r5]=t:(0,i.z)(t,(function(t,r){return e[t]=r}))})(e,t)}var O,M=function(e,t,r){function n(){this.constructor=t,x(this,e)}return x(t,e),(t=R(t,r))[T.Fs]=r===T.M_?(0,b.s)(r):(n[T.Fs]=r[T.Fs],new n),t},N=function(e,t){try{t&&(e[T.o_]=t)}catch(e){}},x=function(e,t){try{(0,o.vF)(e,T.o_,{v:t,c:!0,e:!1})}catch(e){}};var D="[[ai_",L="]]";function U(e){var t,r,n=(0,I.jj)(D+"get"+e.uid+L),i=(0,I.jj)(D+"ro"+e.uid+L),o=(0,I.jj)(D+"rf"+e.uid+L),a=(0,I.jj)(D+"blkVal"+e.uid+L),c=(0,I.jj)(D+"dtl"+e.uid+L),l=null,h=null;function p(t,n){var i=r.act;try{r.act=t,t&&t[c]&&((0,d.I)(t[c],(function(e){e.clr(t)})),t[c]=[]),n({cfg:e.cfg,set:e.set.bind(e),setDf:e[u.h0].bind(e),ref:e.ref.bind(e),rdOnly:e[u.XW].bind(e)})}catch(t){var o=e[u.Uw];throw o&&o[u.ih](1,107,(0,s.m)(t)),t}finally{r.act=i||null}}function g(){if(l){var e=l;l=null,h&&h[u._w](),h=null;var t=[];if((0,d.I)(e,(function(e){if(e&&(e[c]&&((0,d.I)(e[c],(function(t){t.clr(e)})),e[c]=null),e.fn))try{p(e,e.fn)}catch(e){t[u.y5](e)}})),l)try{g()}catch(e){t[u.y5](e)}t[u.oI]>0&&function(e,t){var r,n,i,o,a,c;O||(r="AggregationError",n=function(e,t){t[u.oI]>1&&(e.errors=t[1])},o=i||Error,a=o[T.Fs][T.o_],c=Error.captureStackTrace,O=M(r,(function(){var e=this;try{N(o,r);var t=(0,_.p)(o,e,(0,E.K)(arguments))||e;if(t!==e){var i=(0,k.rL)(e);i!==(0,k.rL)(t)&&R(t,i)}return c&&c(t,e[T.BB]),n&&n(t,arguments),t}finally{N(o,a)}}),o));var l="Watcher error(s): ";throw(0,d.I)(t,(function(e,t){l+="\n".concat(t," > ").concat((0,s.m)(e))})),new O(l,t||[])}(0,t)}}return(t={prop:n,ro:i,rf:o})[u.JQ]=a,t[u.K0]=e,t.add=function(e){if(e&&e.h[u.oI]>0){l||(l=[]),h||(h=(0,S.dR)((function(){h=null,g()}),0));for(var t=0;t<e.h[u.oI];t++){var r=e.h[t];r&&-1===(0,f.r)(l,r)&&l[u.y5](r)}}},t[u.zs]=g,t.use=p,t.trk=function(e,t){if(e){var r=e[c]=e[c]||[];-1===(0,f.r)(r,t)&&r[u.y5](t)}},r=t}function F(e,t,r,s){var c=function(e,t,r){var s,c=(0,p.QA)(t);if(c)return c;var d,h=(0,a.Z)("dyncfg",!0),f=t&&!1!==r?t:(0,p.Dy)(t),g=((s={uid:null,cfg:f})[u.Uw]=e,s[u.zs]=function(){d[u.zs]()},s.set=function(t,r,n){try{t=y(d,t,r,n)}catch(t){m(e,r,"Setting value",t)}return t[r]},s[u.h0]=function(e,t){return t&&(0,i.z)(t,(function(t,r){(0,l.q)(g,e,t,r)})),e},s[u.x6]=function(e){return function(e,t){var r={fn:t,rm:function(){r.fn=null,e=null,t=null}};return e.use(r,t),r}(d,e)},s.ref=function(e,t){var r;return w(d,e,t,(r={},r[0]=!0,r))[t]},s[u.XW]=function(e,t){var r;return w(d,e,t,(r={},r[1]=!0,r))[t]},s[u.JQ]=function(e,t){var r;return w(d,e,t,(r={},r[2]=!0,r))[t]},s._block=function(e,t){d.use(null,(function(r){var i=d.upd;try{(0,n.b0)(t)||(d.upd=t),e(r)}finally{d.upd=i}}))},s);return(0,o.vF)(g,"uid",{c:!1,e:!1,w:!1,v:h}),C(d=U(g),f,"config","Creating"),g}(r,e||{},s);return t&&c[u.h0](c.cfg,t),c}function q(e,t,r){var n=e[p.nM]||e;return!n.cfg||n.cfg!==e&&n.cfg[p.nM]!==n?(function(e,t){e?(e[u.on](t),e[u.ih](2,108,t)):(0,p.If)(t)}(r,c.xW+(0,s.m)(e)),F(e,null,r)[u.x6](t)):n[u.x6](t)}},9147:(e,t,r)=>{"use strict";r.d(t,{Dy:()=>h,Hf:()=>g,If:()=>v,QA:()=>f,V9:()=>p,hF:()=>m,nM:()=>u});var n=r(7403),i=r(6668),o=r(7460),s=r(9018),a=r(3517),c=r(6182),u=(0,n.eC)("[[ai_dynCfg_1]]"),l=(0,n.eC)("[[ai_blkDynCfg_1]]"),d=(0,n.eC)("[[ai_frcDynCfg_1]]");function h(e){var t;return e&&((0,i.cy)(e)?(t=[])[c.oI]=e[c.oI]:(0,o.Q)(e)&&(t={}),t)?((0,s.z)(e,(function(e,r){t[e]=h(r)})),t):e}function f(e){if(e){var t=e[u]||e;if(t.cfg&&(t.cfg===e||t.cfg[u]===t))return t}return null}function p(e){if(e&&((0,o.Q)(e)||(0,i.cy)(e)))try{e[l]=!0}catch(e){}return e}function g(e){if(e)try{e[d]=!0}catch(e){}return e}function m(e,t,r){var n=!1;return r&&!e[t.blkVal]&&((n=r[d])||r[l]||(n=(0,o.Q)(r)||(0,i.cy)(r))),n}function v(e){(0,a.zk)("InvalidAccess:"+e)}},4282:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,o:()=>o});var n=r(5659),i=n.WS,o=n.fn},3662:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var n=(0,r(4282).H)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},9379:(e,t,r)=>{"use strict";r.d(t,{_:()=>X});var n=r(659),i=r(8279),o=r(636),s=r(1324),a=r(5439),c=r(6668),u=r(3517),l=r(9018),d=r(7460),h=r(1636),f=r(755),p=r(5683),g=r(4016),m=r(6336),v=function(e){return e.value&&A(e),!0},y=[function(e){var t=e.value;if((0,c.cy)(t)){var r=e.result=[];return r.length=t.length,e.copyTo(r,t),!0}return!1},A,function(e){return e.type===g.H3},function(e){var t=e.value;return!!(0,c.$P)(t)&&(e.result=new Date(t.getTime()),!0)}];function w(e,t,r,n){var i=r.handler,o=r.path?n?r.path.concat(n):r.path:[],s={handler:r.handler,src:r.src,path:o},u=typeof t,l=!1,h=!1;t&&u===g.qv?l=(0,d.Q)(t):h=t===g.M_||(0,c.Cb)(u);var f={type:u,isPrim:h,isPlain:l,value:t,result:t,path:o,origin:r.src,copy:function(t,n){return w(e,t,n?s:r,n)},copyTo:function(t,r){return C(e,t,r,s)}};return f.isPrim?i&&(0,p.n)(i,r,f)?f.result:t:function(e,t,n,o){var s;return(0,a.I)(e,(function(e){if(e.k===t)return s=e,-1})),s||(s={k:t,v:t},e.push(s),function(e){(0,m.vF)(f,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,n=i;!(0,p.n)(n||(t<y.length?y[t++]:v),r,f);)n=g.M_}(s)),s.v}(e,t)}function C(e,t,r,n){if(!(0,c.hX)(r))for(var i in r)t[i]=w(e,r[i],n,i);return t}function A(e){var t=e.value;if(t&&e.isPlain){var r=e.result={};return e.copyTo(r,t),!0}return!1}function I(e,t,r,n,i,o,s){return function(e,t){return(0,a.I)(t,(function(t){!function(e,t,r){C([],e,t,{handler:void 0,src:t,path:[]})}(e,t)})),e}(w([],c=e,{handler:undefined,src:c})||{},(0,f.K)(arguments));var c}var S,E=r(9452),_=r(3076),T=r(1187),b=r(6832),k=r(9622),P=r(6182),R=r(4013),O=r(5034),M=r(4276),N=r(7867),x=r(3775),D=r(3673),L=r(6492),U=r(1356),F=r(8156),q=r(2317),H=r(380),j=r(8693),B=function(e){function t(){var r,n,o=e.call(this)||this;function s(){r=0,n=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,s(),(0,i.A)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,r){var n={id:t,fn:r};return(0,T.Y)(e,n),{remove:function(){(0,a.I)(e,(function(t,r){if(t.id===n.id)return e[P.Ic](r,1),-1}))}}}(n,r++,e)},e[L.qT]=function(t,r){(function(e,t,r){for(var n=!1,i=e[P.oI],o=0;o<i;++o){var s=e[o];if(s)try{if(!1===s.fn[P.y9](null,[t])){n=!0;break}}catch(e){(0,x.ZP)(r,2,64,"Telemetry initializer failed: "+(0,D.lL)(e),{exception:(0,j.m)(e)},!0)}}return!n})(n,t,r?r[P.e4]():e[P.e4]())&&e[P.$5](t,r)},e[P.tn]=function(){s()}})),o}return(0,n.qU)(t,e),t.__ieDyn=1,t}(r(8257).s),z=r(836),$=r(8969),V="Plugins must provide initialize method",K="SDK is still unloading...",G=(0,s.ZH)(((S={cookieCfg:{}})[L.jy]={rdOnly:!0,ref:!0,v:[]},S[L.LZ]={rdOnly:!0,ref:!0,v:[]},S[L.Bw]={ref:!0,v:{}},S[L.Yd]=L.HP,S.loggingLevelConsole=0,S.diagnosticLogInterval=L.HP,S));function W(e,t){return new F.NS(t)}function Y(e,t){var r=!1;return(0,a.I)(t,(function(t){if(t===e)return r=!0,-1})),r}function Q(e,t,r,n){r&&(0,l.z)(r,(function(r,i){n&&(0,d.Q)(i)&&(0,d.Q)(t[r])&&Q(e,t[r],i,n),n&&(0,d.Q)(i)&&(0,d.Q)(t[r])?Q(e,t[r],i,n):e.set(t,r,i)}))}function J(e,t){var r=null,n=-1;return(0,a.I)(e,(function(e,i){if(e.w===t)return r=e,n=i,-1})),{i:n,l:r}}var X=function(){function e(){var t,r,d,f,p,g,v,y,w,C,A,S,j,X,Z,ee,te,re,ne,ie,oe,se,ae,ce,ue,le,de,he;(0,i.A)(e,this,(function(e){function i(e){return le&&le[P.XM]||he||(e||d&&d.queue[P.oI]>0)&&(de||(de=!0,_e(t[P.x6]((function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var r=!1;le&&(r=le[P.XM],le[P._w]()),(le=(0,h.AH)(Ce,t)).unref(),le[P.XM]=r})))),le[P.XM]=!0),le}function fe(){var e={};ce=[];var t=function(t){t&&(0,a.I)(t,(function(t){if(t[P.Ju]&&t[P.s]&&!e[t.identifier]){var r=t[P.Ju]+"="+t[P.s];ce[P.y5](r),e[t.identifier]=t}}))};t(S),A&&(0,a.I)(A,(function(e){t(e)})),t(C)}function pe(){r=!1,(t=(0,k.e)({},G,e[P.Uw])).cfg[P.Bl]=1,(0,m.vF)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,m.vF)(e,"pluginVersionStringArr",{g:function(){return ce||fe(),ce}}),(0,m.vF)(e,"pluginVersionString",{g:function(){return ue||(ce||fe(),ue=ce.join(";")),ue||L.m5}}),(0,m.vF)(e,"logger",{g:function(){return d||(d=new x.wq(t.cfg),t[P.Uw]=d),d},s:function(e){t[P.Uw]=e,d!==e&&((0,R.K)(d,!1),d=e)}}),e[P.Uw]=new x.wq(t.cfg),ae=[];var n=e.config[L.jy]||[];n.splice(0,n[P.oI]),(0,T.Y)(n,ae),X=new B,f=[],(0,R.K)(p,!1),p=null,g=null,v=null,(0,R.K)(y,!1),y=null,w=null,C=[],A=null,S=null,j=!1,Z=null,ee=(0,M.Z)("AIBaseCore",!0),te=(0,z.P)(),ie=null,oe=null,re=(0,$.w)(),se=[],ue=null,ce=null,he=!1}function ge(){var r=(0,q.i8)(ye(),t.cfg,e);return r[P.by](i),r}function me(t){var r=function(e,t,r){var n,i=[],o=[],s={};return(0,a.I)(r,(function(t){((0,c.hX)(t)||(0,c.hX)(t[P.mE]))&&(0,u.$8)(V);var r=t[L.Vo],n=t[P.Ju];t&&r&&((0,c.hX)(s[r])?s[r]=n:(0,x.OG)(e,"Two extensions have same priority #"+r+" - "+s[r]+", "+n)),!r||r<500?i[P.y5](t):o[P.y5](t)})),(n={})[L.eT]=i,n[L.LZ]=o,n}(e[P.Uw],0,C);w=null,ue=null,ce=null,S=(A||[])[0]||[],S=(0,H.Xc)((0,T.Y)(S,r[L.LZ]));var n=(0,T.Y)((0,H.Xc)(r[L.eT]),S);ae=(0,s.N6)(n);var i=e.config[L.jy]||[];i.splice(0,i[P.oI]),(0,T.Y)(i,ae);var o=ge();S&&S[P.oI]>0&&(0,H.pI)(o[P.$o](S),n),(0,H.pI)(o,n),t&&Ie(t)}function ve(e){var t=null,r=null,n=[];return(0,a.I)(ae,(function(t){if(t[P.Ju]===e&&t!==X)return r=t,-1;t.getChannel&&n[P.y5](t)})),!r&&n[P.oI]>0&&(0,a.I)(n,(function(t){if(!(r=t.getChannel(e)))return-1})),r&&(t={plugin:r,setEnabled:function(e){(0,H.Cr)(r)[L.Hr]=!e},isEnabled:function(){var e=(0,H.Cr)(r);return!e[P.Ik]&&!e[L.Hr]},remove:function(e,t){var n;void 0===e&&(e=!0);var i=[r],o=((n={reason:1})[P.tI]=e,n);we(i,o,(function(e){e&&me({reason:32,removed:i}),t&&t(e)}))}}),t}function ye(){if(!w){var r=(ae||[]).slice();-1===(0,b.r)(r,X)&&r[P.y5](X),w=(0,q.PV)((0,H.Xc)(r),t.cfg,e)}return w}function we(r,n,o){if(r&&r[P.oI]>0){var s=(0,q.PV)(r,t.cfg,e),c=(0,q.tS)(s,e);c[P.by]((function(){var e=!1,t=[];(0,a.I)(C,(function(n,i){Y(n,r)?e=!0:t[P.y5](n)})),C=t,ue=null,ce=null;var n=[];A&&((0,a.I)(A,(function(t,i){var o=[];(0,a.I)(t,(function(t){Y(t,r)?e=!0:o[P.y5](t)})),n[P.y5](o)})),A=n),o&&o(e),i()})),c[P.$5](n)}else o(!1)}function Ce(){if(d&&d.queue){var t=d.queue.slice(0);d.queue[P.oI]=0,(0,a.I)(t,(function(t){var r,n=((r={})[P.RS]=Z||"InternalMessageId: "+t[P.JR],r.iKey=oe,r[P.fA]=(0,D._u)(new Date),r.baseType=x.WD.dataType,r.baseData={message:t[P.pM]},r);e.track(n)}))}}function Ae(e,t,r,n){var i=1,o=!1,s=null;function a(){i--,o&&0===i&&(s&&s[P._w](),s=null,t&&t(o),t=null)}return n=n||5e3,S&&S[P.oI]>0&&ge()[P.$o](S).iterate((function(t){if(t.flush){i++;var o=!1;t.flush(e,(function(){o=!0,a()}),r)||o||(e&&null==s?s=(0,h.dR)((function(){s=null,a()}),n):a())}})),o=!0,a(),!0}function Ie(t){var r=(0,q.nU)(ye(),e);r[P.by](i),e._updateHook&&!0===e._updateHook(r,t)||r[P.$5](t)}function Se(t){var r=e[P.Uw];r?((0,x.ZP)(r,2,73,t),i()):(0,u.$8)(t)}function Ee(t){var r=e[P.RF]();r&&r[L.Yp]([t],2)}function _e(e){re.add(e)}pe(),e._getDbgPlgTargets=function(){return[ae]},e[P.tZ]=function(){return r},e[P.mE]=function(i,o,s,h){j&&(0,u.$8)(K),e[P.tZ]()&&(0,u.$8)("Core cannot be initialized more than once"),i=(t=(0,k.e)(i,G,s||e[P.Uw],!1)).cfg,_e(t[P.x6]((function(e){oe=e.cfg.instrumentationKey;var t=e.ref(e.cfg,L.Bw);(0,l.z)(t,(function(r){e.ref(t,r)})),(0,c.hX)(oe)&&(0,u.$8)("Please provide instrumentation key")}))),!(p=h)&&e[P.RF](),_e(t[P.x6]((function(e){var t=e.cfg.disableDbgExt;!0===t&&ne&&(p[P.TP](ne),ne=null),p&&!ne&&!0!==t&&(ne=(0,N.M)(e.cfg),p[P.vR](ne))}))),_e(t[P.x6]((function(e){var t=e.cfg.enablePerfMgr;!t&&v&&(v=null),t&&(0,D.c2)(e.cfg,L.Yd,W)}))),e[P.Uw]=s;var f=i[L.jy];if((C=[])[P.y5].apply(C,(0,n.vz)((0,n.vz)([],o,!1),f,!1)),A=i[L.LZ],me(null),S&&0!==S[P.oI]||(0,u.$8)("No "+L.LZ+" available"),A&&A[P.oI]>1){var g=e[P.AP]("TeeChannelController");g&&g.plugin||(0,x.ZP)(d,1,28,"TeeChannel required")}!function(e,t,r){(0,a.I)(t,(function(t){var n=(0,k.a)(e,t.w,r);delete t.w,t.rm=function(){n.rm()}}))}(i,se,d),se=null,r=!0,e.releaseQueue(),e[P.h4]()},e.getChannels=function(){var e=[];return S&&(0,a.I)(S,(function(t){e[P.y5](t)})),(0,s.N6)(e)},e.track=function(t){(0,F.r2)(e[L.kI](),(function(){return"AppInsightsCore:track"}),(function(){null===t&&(Ee(t),(0,u.$8)("Invalid telemetry item")),!t[P.RS]&&(0,c.hX)(t[P.RS])&&(Ee(t),(0,u.$8)("telemetry name required")),t.iKey=t.iKey||oe,t[P.fA]=t[P.fA]||(0,D._u)(new Date),t.ver=t.ver||"4.0",!j&&e[P.tZ]()?ge()[P.$5](t):f[P.y5](t)}),(function(){return{item:t}}),!t.sync)},e[P.ps]=ge,e[P.RF]=function(){return p||(p=new U.h(t.cfg),e._notificationManager=p),p},e[P.vR]=function(t){e[P.RF]()[P.vR](t)},e[P.TP]=function(e){p&&p[P.TP](e)},e.getCookieMgr=function(){return y||(y=(0,O.xN)(t.cfg,e[P.Uw])),y},e.setCookieMgr=function(e){y!==e&&((0,R.K)(y,!1),y=e)},e[L.kI]=function(){return g||v||_e(t[P.x6]((function(t){if(t.cfg.enablePerfMgr){var r=t.cfg[L.Yd];(0,c.Tn)(r)&&(v=r(e,e[P.RF]()))}}))),g||v||(0,F.Z4)()},e.setPerfMgr=function(e){g=e},e.eventCnt=function(){return f[P.oI]},e.releaseQueue=function(){if(r&&f[P.oI]>0){var e=f;f=[],(0,a.I)(e,(function(e){ge()[P.$5](e)}))}},e[P.h4]=function(e){return Z=e||null,he=!1,le&&le[P._w](),i(!0)},e[P.Di]=function(){he=!0,le&&le[P._w](),Ce()},(0,D.o$)(e,(function(){return X}),["addTelemetryInitializer"]),e[P.M5]=function(t,n,i){var s;void 0===t&&(t=!0),r||(0,u.$8)("SDK is not initialized"),j&&(0,u.$8)(K);var a,c=((s={reason:50})[P.tI]=t,s.flushComplete=!1,s);t&&!n&&(a=(0,o.Qo)((function(e){n=e})));var l=(0,q.tS)(ye(),e);function h(t){c.flushComplete=t,j=!0,te.run(l,c),e[P.Di](),l[P.$5](c)}return l[P.by]((function(){re.run(e[P.Uw]),(0,R.k)([y,p,d],t,(function(){pe(),n&&n(c)}))}),e),Ce(),Ae(t,h,6,i)||h(!1),a},e[P.AP]=ve,e.addPlugin=function(e,t,r,n){if(!e)return n&&n(!1),void Se(V);var i=ve(e[P.Ju]);if(i&&!t)return n&&n(!1),void Se("Plugin ["+e[P.Ju]+"] is already loaded!");var o={reason:16};function s(t){C[P.y5](e),o.added=[e],me(o),n&&n(!0)}if(i){var a=[i.plugin];we(a,{reason:2,isAsync:!!r},(function(e){e?(o.removed=a,o.reason|=32,s()):n&&n(!1)}))}else s()},e.updateCfg=function(r,n){var i;if(void 0===n&&(n=!0),e[P.tZ]()){i={reason:1,cfg:t.cfg,oldCfg:I({},t.cfg),newConfig:I({},r),merge:n},r=i.newConfig;var o=t.cfg;r[L.jy]=o[L.jy],r[L.LZ]=o[L.LZ]}t._block((function(e){var t=e.cfg;Q(e,t,r,n),n||(0,l.z)(t,(function(n){(0,E.K)(r,n)||e.set(t,n,L.HP)})),e[P.h0](t,G)}),!0),t[P.zs](),i&&Ie(i)},e.evtNamespace=function(){return ee},e.flush=Ae,e.getTraceCtx=function(e){return ie||(ie=(0,H.u7)()),ie},e.setTraceCtx=function(e){ie=e||null},e.addUnloadHook=_e,(0,D.RF)(e,"addUnloadCb",(function(){return te}),"add"),e.onCfgChange=function(n){var i,o,s,a;return r?i=(0,k.a)(t.cfg,n,e[P.Uw]):((a=J(o=se,s=n).l)||(a={w:s,rm:function(){var e=J(o,s);-1!==e.i&&o[P.Ic](e.i,1)}},o[P.y5](a)),i=a),{rm:function(){i.rm()}}},e.getWParam=function(){return(0,_.Wt)()||t.cfg.enableWParam?0:-1}}))}return e.__ieDyn=1,e}()},4013:(e,t,r)=>{"use strict";r.d(t,{K:()=>c,k:()=>u});var n=r(636),i=r(4292),o=r(4657),s=r(755),a=r(6182);function c(e,t){if(e&&e[a.M5])return e[a.M5](t)}function u(e,t,r){var a;return r||(a=(0,n.Qo)((function(e){r=e}))),e&&(0,o.R)(e)>0?(0,i.Dv)(c(e[0],t),(function(){u((0,s.K)(e,1),t,r)})):r(),a}},8257:(e,t,r)=>{"use strict";r.d(t,{s:()=>v});var n,i=r(8279),o=r(6336),s=r(6668),a=r(9622),c=r(6182),u=r(3775),l=r(3673),d=r(6492),h=r(2317),f=r(836),p=r(8969),g="getPlugin",m=((n={})[d.Bw]={isVal:l.Gh,v:{}},n),v=function(){function e(){var t,r,n,v,y,w=this;function C(e){void 0===e&&(e=null);var t=e;if(!t){var i=r||(0,h.i8)(null,{},w[d.eT]);t=n&&n[g]?i[c.$o](null,n[g]):i[c.$o](null,n)}return t}function A(e,t,i){(0,a.e)(e,m,(0,u.y0)(t)),!i&&t&&(i=t[c.ps]()[c.uR]());var o=n;n&&n[g]&&(o=n[g]()),w[d.eT]=t,r=(0,h.i8)(i,e,t,o)}function I(){t=!1,w[d.eT]=null,r=null,n=null,y=(0,p.w)(),v=(0,f.P)()}I(),(0,i.A)(e,w,(function(e){e[c.mE]=function(e,r,n,i){A(e,r,i),t=!0},e[c.Ik]=function(t,r){var i,o=e[d.eT];if(o&&(!t||o===t[d.eT]())){var s,a=!1,u=t||(0,h.tS)(null,o,n&&n[g]?n[g]():n),l=r||((i={reason:0})[c.tI]=!1,i);return e[c.tn]&&!0===e[c.tn](u,l,f)?s=!0:f(),s}function f(){a||(a=!0,v.run(u,r),y.run(u[c.e4]()),!0===s&&u[c.$5](l),I())}},e[c.HC]=function(t,r){var i=e[d.eT];if(i&&(!t||i===t[d.eT]())){var o,s=!1,a=t||(0,h.nU)(null,i,n&&n[g]?n[g]():n),u=r||{reason:0};return e._doUpdate&&!0===e._doUpdate(a,u,l)?o=!0:l(),o}function l(){s||(s=!0,A(a.getCfg(),a.core(),a[c.uR]()))}},(0,l.RF)(e,"_addUnloadCb",(function(){return v}),"add"),(0,l.RF)(e,"_addHook",(function(){return y}),"add"),(0,o.vF)(e,"_unloadHooks",{g:function(){return y}})})),w[c.e4]=function(e){return C(e)[c.e4]()},w[c.tZ]=function(){return t},w.setInitialized=function(e){t=e},w[c.YH]=function(e){n=e},w[c.$5]=function(e,t){t?t[c.$5](e):n&&(0,s.Tn)(n[d.qT])&&n[d.qT](e,null)},w._getTelCtx=C}return e.__ieDyn=1,e}()},5034:(e,t,r)=>{"use strict";r.d(t,{It:()=>Q,gi:()=>$,um:()=>B,xN:()=>z});var n,i,o,s=r(2871),a=r(3076),c=r(6668),u=r(6832),l=r(8993),d=r(5881),h=r(3178),f=r(225),p=r(8693),g=r(5439),m=r(9018),v=r(2494),y=r(2475),w=r(9622),C=r(6182),A=r(3775),I=r(7292),S=r(3673),E=r(6492),_="toGMTString",T="toUTCString",b="cookie",k="expires",P="isCookieUseDisabled",R="disableCookiesUsage",O="_ckMgr",M=null,N=null,x=null,D={},L={},U=((n={cookieCfg:(0,y.NU)((i={},i[E.Fk]={fb:"cookieDomain",dfVal:S.Gh},i.path={fb:"cookiePath",dfVal:S.Gh},i.enabled=E.HP,i.ignoreCookies=E.HP,i.blockedCookies=E.HP,i)),cookieDomain:E.HP,cookiePath:E.HP})[R]=E.HP,n);function F(){!o&&(o=(0,s.nR)((function(){return(0,a.YE)()})))}function q(e){return!e||e.isEnabled()}function H(e,t){return!!(t&&e&&(0,c.cy)(e.ignoreCookies))&&-1!==(0,u.r)(e.ignoreCookies,t)}function j(e,t){var r=t[C.XM];if((0,c.hX)(r)){var n=void 0;(0,c.b0)(e[P])||(n=!e[P]),(0,c.b0)(e[R])||(n=!e[R]),r=n}return r}function B(e,t){var r;if(e)r=e.getCookieMgr();else if(t){var n=t.cookieCfg;r=n&&n[O]?n[O]:z(t)}return r||(r=function(e,t){var r=z[O]||L[O];return r||(r=z[O]=z(e,t),L[O]=r),r}(t,(e||{})[C.Uw])),r}function z(e,t){var r,n,i,o,s,p,g,m,v;e=(0,w.e)(e||L,null,t).cfg,s=(0,w.a)(e,(function(t){t[C.h0](t.cfg,U),n=t.ref(t.cfg,"cookieCfg"),i=n[E.QW]||"/",o=n[E.Fk],p=!1!==j(e,n),g=n.getCookie||W,m=n.setCookie||Y,v=n.delCookie||Y}),t);var y=((r={isEnabled:function(){var r=!1!==j(e,n)&&p&&$(t),i=L[O];return r&&i&&y!==i&&(r=q(i)),r},setEnabled:function(e){p=!1!==e,n[C.XM]=e},set:function(e,t,r,s,p){var g=!1;if(q(y)&&!function(e,t){return!!(t&&e&&(0,c.cy)(e.blockedCookies)&&-1!==(0,u.r)(e.blockedCookies,t))||H(e,t)}(n,e)){var v={},w=(0,l.EH)(t||E.m5),A=(0,d.H)(w,";");if(-1!==A&&(w=(0,l.EH)((0,h.ZW)(t,A)),v=V((0,h.P0)(t,A+1))),(0,S.KY)(v,E.Fk,s||o,c.zz,c.b0),!(0,c.hX)(r)){var b=(0,I.lT)();if((0,c.b0)(v[k])){var P=(0,f.f)()+1e3*r;if(P>0){var R=new Date;R.setTime(P),(0,S.KY)(v,k,K(R,b?_:T)||K(R,b?_:T)||E.m5,c.zz)}}b||(0,S.KY)(v,"max-age",E.m5+r,null,c.b0)}var O=(0,I.g$)();O&&"https:"===O.protocol&&((0,S.KY)(v,"secure",null,null,c.b0),null===N&&(N=!Q(((0,a.w3)()||{})[C.tX])),N&&(0,S.KY)(v,"SameSite","None",null,c.b0)),(0,S.KY)(v,E.QW,p||i,null,c.b0),m(e,G(w,v)),g=!0}return g},get:function(e){var t=E.m5;return q(y)&&!H(n,e)&&(t=g(e)),t},del:function(e,t){var r=!1;return q(y)&&(r=y.purge(e,t)),r},purge:function(e,r){var n,i=!1;if($(t)){var o=((n={})[E.QW]=r||"/",n[k]="Thu, 01 Jan 1970 00:00:01 GMT",n);(0,I.lT)()||(o["max-age"]="0"),v(e,G(E.m5,o)),i=!0}return i}})[C.M5]=function(e){s&&s.rm(),s=null},r);return y[O]=y,y}function $(e){if(null===M){M=!1,!o&&F();try{var t=o.v||{};M=void 0!==t[b]}catch(t){(0,A.ZP)(e,2,68,"Cannot access document.cookie - "+(0,S.lL)(t),{exception:(0,p.m)(t)})}}return M}function V(e){var t={};if(e&&e[C.oI]){var r=(0,l.EH)(e)[C.sY](";");(0,g.I)(r,(function(e){if(e=(0,l.EH)(e||E.m5)){var r=(0,d.H)(e,"=");-1===r?t[e]=null:t[(0,l.EH)((0,h.ZW)(e,r))]=(0,l.EH)((0,h.P0)(e,r+1))}}))}return t}function K(e,t){return(0,c.Tn)(e[t])?e[t]():null}function G(e,t){var r=e||E.m5;return(0,m.z)(t,(function(e,t){r+="; "+e+((0,c.hX)(t)?E.m5:"="+t)})),r}function W(e){var t=E.m5;if(!o&&F(),o.v){var r=o.v[b]||E.m5;x!==r&&(D=V(r),x=r),t=(0,l.EH)(D[e]||E.m5)}return t}function Y(e,t){!o&&F(),o.v&&(o.v[b]=e+"="+t)}function Q(e){return!(!(0,c.Kg)(e)||!(0,S.Ju)(e,"CPU iPhone OS 12")&&!(0,S.Ju)(e,"iPad; CPU OS 12")&&!((0,S.Ju)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,S.Ju)(e,"Version/")&&(0,S.Ju)(e,"Safari"))&&(!(0,S.Ju)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,v.C)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,S.Ju)(e,"Chrome/5")&&!(0,S.Ju)(e,"Chrome/6")&&(!(0,S.Ju)(e,"UnrealEngine")||(0,S.Ju)(e,"Chrome"))&&!(0,S.Ju)(e,"UCBrowser/12")&&!(0,S.Ju)(e,"UCBrowser/11"))}},9882:(e,t,r)=>{"use strict";r.d(t,{aq:()=>s,cL:()=>a});var n=r(3178),i=r(6492),o=r(6535);function s(){var e=a();return(0,n.P0)(e,0,8)+"-"+(0,n.P0)(e,8,12)+"-"+(0,n.P0)(e,12,16)+"-"+(0,n.P0)(e,16,20)+"-"+(0,n.P0)(e,20)}function a(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=i.m5,s=0;s<4;s++)r+=t[15&(e=(0,o.VN)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var a=t[8+(3&(0,o.VN)())|0];return(0,n.hK)(r,0,8)+(0,n.hK)(r,9,4)+"4"+(0,n.hK)(r,13,3)+a+(0,n.hK)(r,16,3)+(0,n.hK)(r,19,12)}},4276:(e,t,r)=>{"use strict";r.d(t,{T:()=>f,Z:()=>h});var n=r(6336),i=r(6182),o=r(3673),s=r(6492),a=r(6535),c="3.0.4",u="."+(0,a.Si)(6),l=0;function d(e){return 1===e[i.re]||9===e[i.re]||!+e[i.re]}function h(e,t){return void 0===t&&(t=!1),(0,o.cH)(e+l+++(t?"."+c:s.m5)+u)}function f(e){var t={id:h("_aiData-"+(e||s.m5)+"."+c),accept:function(e){return d(e)},get:function(e,r,i,s){var a=e[t.id];return a?a[(0,o.cH)(r)]:(s&&(a=function(e,t){var r=t[e.id];if(!r){r={};try{d(t)&&(0,n.vF)(t,e.id,{e:!1,v:r})}catch(e){}}return r}(t,e),a[(0,o.cH)(r)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},7867:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,M:()=>d});var n,i=r(3076),o=r(6182),s=r(6492),a=[s.fc,s.Yp,s.dI,s.l0],c=null;function u(e,t){return function(){var r=arguments,n=l(t);if(n){var i=n.listener;i&&i[e]&&i[e][o.y9](i,r)}}}function l(e){var t,r=c;return r||!0===e.disableDbgExt||(r=c||((t=(0,i.zS)("Microsoft"))&&(c=t.ApplicationInsights),c)),r?r.ChromeDbgExt:null}function d(e){if(!n){n={};for(var t=0;t<a[o.oI];t++)n[a[t]]=u(a[t],e)}return n}},3775:(e,t,r)=>{"use strict";r.d(t,{OG:()=>I,Oc:()=>S,WD:()=>v,ZP:()=>A,wq:()=>w,y0:()=>y});var n,i=r(8279),o=r(6668),s=r(8693),a=r(9622),c=r(6182),u=r(7867),l=r(7292),d=r(6492),h="warnToConsole",f={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},p=((n={})[0]=null,n[1]="errorToConsole",n[2]=h,n[3]="debugToConsole",n);function g(e){return e?'"'+e[c.W7](/\"/g,d.m5)+'"':d.m5}function m(e,t){var r=(0,l.U5)();if(r){var n="log";r[e]&&(n=e),(0,o.Tn)(r[n])&&r[n](t)}}var v=function(){function e(e,t,r,n){void 0===r&&(r=!1);var i=this;i[c.JR]=e,i[c.pM]=(r?"AI: ":"AI (Internal): ")+e;var o=d.m5;(0,l.Z)()&&(o=(0,l.hm)().stringify(n));var s=(t?" message:"+g(t):d.m5)+(n?" props:"+g(o):d.m5);i[c.pM]+=s}return e.dataType="MessageData",e}();function y(e,t){return(e||{})[c.Uw]||new w(t)}var w=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var r,n,l,d,g,y=0,w={};(0,i.A)(e,this,(function(e){function i(t,r){if(!(y>=l)){var i=!0,o="AITR_"+r[c.JR];if(w[o]?i=!1:w[o]=!0,i&&(t<=n&&(e.queue[c.y5](r),y++,C(1===t?"error":"warn",r)),y===l)){var s="Internal events throttle limit per PageView reached for this app.",a=new v(23,s,!1);e.queue[c.y5](a),1===t?e.errorToConsole(s):e[c.on](s)}}}function C(e,r){var n=(0,u.$)(t||{});n&&n[c.e4]&&n[c.e4](e,r)}g=function(t){return(0,a.a)((0,a.e)(t,f,e).cfg,(function(e){var t=e.cfg;r=t[c.Bl],n=t.loggingLevelTelemetry,l=t.maxMessageLimit,d=t.enableDebug}))}(t||{}),e.consoleLoggingLevel=function(){return r},e[c.ih]=function(t,n,a,u,l){void 0===l&&(l=!1);var f=new v(n,a,l,u);if(d)throw(0,s.m)(f);var g=p[t]||h;if((0,o.b0)(f[c.pM]))C("throw"+(1===t?"Critical":"Warning"),f);else{if(l){var m=+f[c.JR];!w[m]&&r>=t&&(e[g](f[c.pM]),w[m]=!0)}else r>=t&&e[g](f[c.pM]);i(t,f)}},e.debugToConsole=function(e){m("debug",e),C("warning",e)},e[c.on]=function(e){m("warn",e),C("warning",e)},e.errorToConsole=function(e){m("error",e),C("error",e)},e.resetInternalMessageCount=function(){y=0,w={}},e[c.sx]=i,e[c.M5]=function(e){g&&g.rm(),g=null}}))}return e.__ieDyn=1,e}();function C(e){return e||new w}function A(e,t,r,n,i,o){void 0===o&&(o=!1),C(e)[c.ih](t,r,n,i,o)}function I(e,t){C(e)[c.on](t)}function S(e,t,r){C(e)[c.sx](t,r)}},7292:(e,t,r)=>{"use strict";r.d(t,{$Z:()=>j,Iu:()=>B,L0:()=>D,MY:()=>O,PV:()=>F,R7:()=>U,U5:()=>k,Uf:()=>L,Z:()=>P,cU:()=>T,g$:()=>b,hm:()=>R,iN:()=>M,lT:()=>x,lV:()=>N,xk:()=>q});var n=r(5664),i=r(6668),o=r(3076),s=r(558),a=r(6182),c=r(3673),u=r(6492),l="documentMode",d="location",h="console",f="JSON",p="crypto",g="msCrypto",m="ReactNative",v="msie",y="trident/",w="XMLHttpRequest",C=null,A=null,I=!1,S=null,E=null;function _(e,t){var r=!1;if(e){try{if(!(r=t in e)){var o=e[n.vR];o&&(r=t in o)}}catch(e){}if(!r)try{var s=new e;r=!(0,i.b0)(s[t])}catch(e){}}return r}function T(e){I=e}function b(e){if(e&&I){var t=(0,o.zS)("__mockLocation");if(t)return t}return typeof location===n._1&&location?location:(0,o.zS)(d)}function k(){return typeof console!==n.bA?console:(0,o.zS)(h)}function P(){return Boolean(typeof JSON===n._1&&JSON||null!==(0,o.zS)(f))}function R(){return P()?JSON||(0,o.zS)(f):null}function O(){return(0,o.zS)(p)}function M(){return(0,o.zS)(g)}function N(){var e=(0,o.w3)();return!(!e||!e.product)&&e.product===m}function x(){var e=(0,o.w3)();if(e&&(e[a.tX]!==A||null===C)){var t=((A=e[a.tX])||u.m5)[a.OL]();C=(0,c.Ju)(t,v)||(0,c.Ju)(t,y)}return C}function D(e){if(void 0===e&&(e=null),!e){var t=(0,o.w3)()||{};e=t?(t.userAgent||u.m5)[a.OL]():u.m5}var r=(e||u.m5)[a.OL]();if((0,c.Ju)(r,v)){var n=(0,o.YE)()||{};return Math.max(parseInt(r[a.sY](v)[1]),n[l]||0)}if((0,c.Ju)(r,y)){var i=parseInt(r[a.sY](y)[1]);if(i)return i+4}return null}function L(e){return null!==E&&!1!==e||(E=(0,o.w9)()&&Boolean((0,o.w3)().sendBeacon)),E}function U(e){var t=!1;try{t=!!(0,o.zS)("fetch");var r=(0,o.zS)("Request");t&&e&&r&&(t=_(r,"keepalive"))}catch(e){}return t}function F(){return null===S&&(S=typeof XDomainRequest!==n.bA)&&q()&&(S=S&&!_((0,o.zS)(w),"withCredentials")),S}function q(){var e=!1;try{e=!!(0,o.zS)(w)}catch(e){}return e}function H(e,t){if(e)for(var r=0;r<e[a.oI];r++){var n=e[r];if(n[a.RS]&&n[a.RS]===t)return n}return{}}function j(e){var t=(0,o.YE)();return t&&e?H(t.querySelectorAll("meta"),e).content:null}function B(e){var t,r=(0,s.FJ)();if(r){var n=r.getEntriesByType("navigation")||[];t=H((n[a.oI]>0?n[0]:{}).serverTiming,e).description}return t}},6149:(e,t,r)=>{"use strict";r.d(t,{Ds:()=>G,El:()=>M,Fc:()=>W,Hm:()=>L,ML:()=>F,Q3:()=>q,So:()=>j,Wg:()=>V,Ym:()=>H,ee:()=>K,lQ:()=>$,mB:()=>U,oS:()=>Q,sq:()=>Y,vF:()=>J,zh:()=>B});var n=r(6668),i=r(5439),o=r(9018),s=r(1324),a=r(3076),c=r(6832),u=r(6182),l=r(4276),d=r(6492),h="on",f="attachEvent",p="addEventListener",g="detachEvent",m="removeEventListener",v="events",y="visibilitychange",w="pagehide",C="pageshow",A="unload",I="beforeunload",S=(0,l.Z)("aiEvtPageHide"),E=(0,l.Z)("aiEvtPageShow"),_=/\.[\.]+/g,T=/[\.]+$/,b=1,k=(0,l.T)("events"),P=/^([^.]*)(?:\.(.+)|)/;function R(e){return e&&e[u.W7]?e[u.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,d.m5):e}function O(e,t){var r;if(t){var o=d.m5;(0,n.cy)(t)?(o=d.m5,(0,i.I)(t,(function(e){(e=R(e))&&("."!==e[0]&&(e="."+e),o+=e)}))):o=R(t),o&&("."!==o[0]&&(o="."+o),e=(e||d.m5)+o)}var s=P.exec(e||d.m5)||[];return(r={})[u.QM]=s[1],r.ns=(s[2]||d.m5).replace(_,".").replace(T,d.m5)[u.sY](".").sort().join("."),r}function M(e,t,r){var n=[],s=k.get(e,v,{},!1),a=O(t,r);return(0,o.z)(s,(function(e,t){(0,i.I)(t,(function(e){var t;a[u.QM]&&a[u.QM]!==e.evtName[u.QM]||a.ns&&a.ns!=a.ns||n[u.y5](((t={})[u.RS]=e.evtName[u.QM]+(e.evtName.ns?"."+e.evtName.ns:d.m5),t.handler=e[u.Yo],t))}))})),n}function N(e,t,r){void 0===r&&(r=!0);var n=k.get(e,v,{},r),i=n[t];return i||(i=n[t]=[]),i}function x(e,t,r,n){e&&t&&t[u.QM]&&(e[m]?e[m](t[u.QM],r,n):e[g]&&e[g](h+t[u.QM],r))}function D(e,t,r,n){for(var i=t[u.oI];i--;){var o=t[i];o&&(r.ns&&r.ns!==o.evtName.ns||n&&!n(o)||(x(e,o.evtName,o[u.Yo],o.capture),t[u.Ic](i,1)))}}function L(e,t){return t?O("xx",(0,n.cy)(t)?[e].concat(t):[e,t]).ns[u.sY]("."):e}function U(e,t,r,n,i){var o;void 0===i&&(i=!1);var s=!1;if(e)try{var a=O(t,n);if(s=function(e,t,r,n){var i=!1;return e&&t&&t[u.QM]&&r&&(e[p]?(e[p](t[u.QM],r,n),i=!0):e[f]&&(e[f](h+t[u.QM],r),i=!0)),i}(e,a,r,i),s&&k.accept(e)){var c=((o={guid:b++,evtName:a})[u.Yo]=r,o.capture=i,o);N(e,a.type)[u.y5](c)}}catch(e){}return s}function F(e,t,r,n,i){if(void 0===i&&(i=!1),e)try{var a=O(t,n),c=!1;!function(e,t,r){if(t[u.QM])D(e,N(e,t[u.QM]),t,r);else{var n=k.get(e,v,{});(0,o.z)(n,(function(n,i){D(e,i,t,r)})),0===(0,s.cG)(n)[u.oI]&&k.kill(e,v)}}(e,a,(function(e){return!((!a.ns||r)&&e[u.Yo]!==r||(c=!0,0))})),c||x(e,a,r,i)}catch(e){}}function q(e,t,r,n){return void 0===n&&(n=!1),U(e,t,r,null,n)}function H(e,t,r,n){void 0===n&&(n=!1),F(e,t,r,null,n)}function j(e,t,r){var n=!1,i=(0,a.zk)();i&&(n=U(i,e,t,r),n=U(i.body,e,t,r)||n);var o=(0,a.YE)();return o&&(n=U(o,e,t,r)||n),n}function B(e,t,r){var n=(0,a.zk)();n&&(F(n,e,t,r),F(n.body,e,t,r));var i=(0,a.YE)();i&&F(i,e,t,r)}function z(e,t,r,n){var o=!1;return t&&e&&e[u.oI]>0&&(0,i.I)(e,(function(e){e&&(r&&-1!==(0,c.r)(r,e)||(o=j(e,t,n)||o))})),o}function $(e,t,r,i){var o=!1;return t&&e&&(0,n.cy)(e)&&!(o=z(e,t,r,i))&&r&&r[u.oI]>0&&(o=z(e,t,null,i)),o}function V(e,t,r){e&&(0,n.cy)(e)&&(0,i.I)(e,(function(e){e&&B(e,t,r)}))}function K(e,t,r){return $([I,A,w],e,t,r)}function G(e,t){V([I,A,w],e,t)}function W(e,t,r){var n=L(S,r),i=z([w],e,t,n);return t&&-1!==(0,c.r)(t,y)||(i=z([y],(function(t){var r=(0,a.YE)();e&&r&&"hidden"===r.visibilityState&&e(t)}),t,n)||i),!i&&t&&(i=W(e,null,r)),i}function Y(e,t){var r=L(S,t);V([w],e,r),V([y],null,r)}function Q(e,t,r){var n=L(E,r),i=z([C],e,t,n);return!(i=z([y],(function(t){var r=(0,a.YE)();e&&r&&"visible"===r.visibilityState&&e(t)}),t,n)||i)&&t&&(i=Q(e,null,r)),i}function J(e,t){var r=L(E,t);V([C],e,r),V([y],null,r)}},3673:(e,t,r)=>{"use strict";r.d(t,{CP:()=>R,Gh:()=>v,Ju:()=>w,KY:()=>I,RF:()=>T,SZ:()=>k,_u:()=>C,c2:()=>S,cH:()=>y,hW:()=>P,lL:()=>A,o$:()=>b,qz:()=>_});var n=r(1324),i=r(5664),o=r(6668),s=r(5881),a=r(9452),c=r(6336),u=r(5439),l=r(9018),d=r(7460),h=r(6182),f=r(6492),p=/-([a-z])/g,g=/([^\w\d_$])/g,m=/^(\d+[\w\d_$])/;function v(e){return!(0,o.hX)(e)}function y(e){var t=e;return t&&(0,o.Kg)(t)&&(t=(t=(t=t[h.W7](p,(function(e,t){return t.toUpperCase()})))[h.W7](g,"_"))[h.W7](m,(function(e,t){return"_"+t}))),t}function w(e,t){return!(!e||!t)&&-1!==(0,s.H)(e,t)}function C(e){return e&&e.toISOString()||""}function A(e){return(0,o.bJ)(e)?e[h.RS]:f.m5}function I(e,t,r,n,i){var o=r;return e&&((o=e[t])===r||i&&!i(o)||n&&!n(r)||(o=r,e[t]=o)),o}function S(e,t,r){var n;return e?!(n=e[t])&&(0,o.hX)(n)&&(n=(0,o.b0)(r)?{}:r,e[t]=n):n=(0,o.b0)(r)?{}:r,n}function E(e,t){var r=null,n=null;return(0,o.Tn)(e)?r=e:n=e,function(){var e=arguments;if(r&&(n=r()),n)return n[t][h.y9](n,e)}}function _(e,t,r){if(e&&t&&(0,o.Gv)(e)&&(0,o.Gv)(t)){var n=function(n){if((0,o.Kg)(n)){var i=t[n];(0,o.Tn)(i)?r&&!r(n,!0,t,e)||(e[n]=E(t,n)):r&&!r(n,!1,t,e)||((0,a.K)(e,n)&&delete e[n],(0,c.vF)(e,n,{g:function(){return t[n]},s:function(e){t[n]=e}}))}};for(var i in t)n(i)}return e}function T(e,t,r,n,i){e&&t&&r&&(!1!==i||(0,o.b0)(e[t]))&&(e[t]=E(r,n))}function b(e,t,r,n){return e&&t&&(0,o.Gv)(e)&&(0,o.cy)(r)&&(0,u.I)(r,(function(r){(0,o.Kg)(r)&&T(e,r,t,r,n)})),e}function k(e){return function(){var t=this;e&&(0,l.z)(e,(function(e,r){t[e]=r}))}}function P(e){return e&&n.vE&&(e=(0,i.s6)((0,n.vE)({},e))),e}function R(e,t,r,n,i,s){var c=arguments,u=c[0]||{},l=c[h.oI],f=!1,p=1;for(l>0&&(0,o.Lm)(u)&&(f=u,u=c[p]||{},p++),(0,o.Gv)(u)||(u={});p<l;p++){var g=c[p],m=(0,o.cy)(g),v=(0,o.Gv)(g);for(var y in g)if(m&&y in g||v&&(0,a.K)(g,y)){var w=g[y],C=void 0;if(f&&w&&((C=(0,o.cy)(w))||(0,d.Q)(w))){var A=u[y];C?(0,o.cy)(A)||(A=[]):(0,d.Q)(A)||(A={}),w=R(f,A,w)}void 0!==w&&(u[y]=w)}}return u}Object.getPrototypeOf},6492:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>u,Fk:()=>y,HP:()=>n,Hr:()=>c,LZ:()=>o,QW:()=>w,Vo:()=>h,Yd:()=>a,Yp:()=>p,dI:()=>g,eT:()=>s,fc:()=>f,jy:()=>l,kI:()=>v,l0:()=>m,m5:()=>i,qT:()=>d,xW:()=>C});var n=void 0,i="",o="channels",s="core",a="createPerfMgr",c="disabled",u="extensionConfig",l="extensions",d="processTelemetry",h="priority",f="eventsSent",p="eventsDiscarded",g="eventsSendRequest",m="perfEvent",v="getPerfMgr",y="domain",w="path",C="Not dynamic - "},1356:(e,t,r)=>{"use strict";r.d(t,{h:()=>g});var n=r(8279),i=r(636),o=r(4292),s=r(5439),a=r(1636),c=r(6336),u=r(6832),l=r(9622),d=r(6182),h=r(6492),f={perfEvtsSendAll:!1};function p(e,t,r,n){(0,s.I)(e,(function(e){if(e&&e[t])if(r)(0,a.dR)((function(){return n(e)}),0);else try{n(e)}catch(e){}}))}var g=function(){function e(t){var r,s;this.listeners=[];var g=[],m=(0,l.e)(t,f);s=m[d.x6]((function(e){r=!!e.cfg.perfEvtsSendAll})),(0,n.A)(e,this,(function(e){(0,c.vF)(e,"listeners",{g:function(){return g}}),e[d.vR]=function(e){g[d.y5](e)},e[d.TP]=function(e){for(var t=(0,u.r)(g,e);t>-1;)g[d.Ic](t,1),t=(0,u.r)(g,e)},e[h.fc]=function(e){p(g,h.fc,!0,(function(t){t[h.fc](e)}))},e[h.Yp]=function(e,t){p(g,h.Yp,!0,(function(r){r[h.Yp](e,t)}))},e[h.dI]=function(e,t){p(g,h.dI,t,(function(r){r[h.dI](e,t)}))},e[h.l0]=function(e){e&&(!r&&e[d.Zu]()||p(g,h.l0,!1,(function(t){e[d.tI]?(0,a.dR)((function(){return t[h.l0](e)}),0):t[h.l0](e)})))},e[d.M5]=function(e){var t,r=function(){s&&s.rm(),s=null,g=[]};if(p(g,"unload",!1,(function(r){var n=r[d.M5](e);n&&(t||(t=[]),t[d.y5](n))})),t)return(0,i.Qo)((function(e){return(0,o.Dv)((0,i.Xf)(t),(function(){r(),e()}))}));r()}}))}return e.__ieDyn=1,e}()},8156:(e,t,r)=>{"use strict";r.d(t,{NS:()=>p,Q6:()=>f,Z4:()=>v,r2:()=>m});var n=r(8279),i=r(225),o=r(6668),s=r(6336),a=r(6182),c=r(6492),u="ctx",l="ParentContextKey",d="ChildrenContextKey",h=null,f=function(){function e(t,r,n){var c,h=this;h.start=(0,i.f)(),h[a.RS]=t,h[a.tI]=n,h[a.Zu]=function(){return!1},(0,o.Tn)(r)&&(0,s.vF)(h,"payload",{g:function(){return!c&&(0,o.Tn)(r)&&(c=r(),r=null),c}}),h[a.O_]=function(t){return t?t===e[l]||t===e[d]?h[t]:(h[u]||{})[t]:null},h[a.e_]=function(t,r){t&&(t===e[l]?(h[t]||(h[a.Zu]=function(){return!0}),h[t]=r):t===e[d]?h[t]=r:(h[u]=h[u]||{})[t]=r)},h[a.Ru]=function(){var t=0,r=h[a.O_](e[d]);if((0,o.cy)(r))for(var n=0;n<r[a.oI];n++){var s=r[n];s&&(t+=s[a.fA])}h[a.fA]=(0,i.f)()-h.start,h.exTime=h[a.fA]-t,h[a.Ru]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,n.A)(e,this,(function(e){e.create=function(e,t,r){return new f(e,t,r)},e.fire=function(e){e&&(e[a.Ru](),t&&(0,o.Tn)(t[c.l0])&&t[c.l0](e))},e[a.e_]=function(t,r){t&&((e[u]=e[u]||{})[t]=r)},e[a.O_]=function(t){return(e[u]||{})[t]}}))}return e.__ieDyn=1,e}(),g="CoreUtils.doPerf";function m(e,t,r,n,i){if(e){var o=e;if(o[c.kI]&&(o=o[c.kI]()),o){var s=void 0,u=o[a.O_](g);try{if(s=o.create(t(),n,i)){if(u&&s[a.e_]&&(s[a.e_](f[l],u),u[a.O_]&&u[a.e_])){var h=u[a.O_](f[d]);h||(h=[],u[a.e_](f[d],h)),h[a.y5](s)}return o[a.e_](g,s),r(s)}}catch(e){s&&s[a.e_]&&s[a.e_]("exception",e)}finally{s&&o.fire(s),o[a.e_](g,u)}}}return r()}function v(){return h}},2317:(e,t,r)=>{"use strict";r.d(t,{PV:()=>E,W0:()=>_,i8:()=>A,nU:()=>S,tS:()=>I});var n=r(6668),i=r(5439),o=r(8693),s=r(9018),a=r(1324),c=r(991),u=r(9622),l=r(6182),d=r(3775),h=r(3673),f=r(6492),p=r(8156),g=r(380),m="TelemetryPluginChain",v="_hasRun",y="_getTelCtx",w=0;function C(e,t,r,a){var h=null,p=[];t||(t=(0,u.e)({},null,r[l.Uw])),null!==a&&(h=a?function(e,t,r){for(;e;){if(e[l.AP]()===r)return e;e=e[l.uR]()}return E([r],t.config||{},t)}(e,r,a):e);var g={_next:function(){var e=h;if(h=e?e[l.uR]():null,!e){var t=p;t&&t[l.oI]>0&&((0,i.I)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,d.ZP)(r[l.Uw],2,73,"Unexpected Exception during onComplete - "+(0,o.m)(e))}})),p=[])}return e},ctx:{core:function(){return r},diagLog:function(){return(0,d.y0)(r,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,r){var i=m(e,!0);return r&&(0,s.z)(r,(function(e,r){if((0,n.hX)(i[e])){var o=t.cfg[e];!o&&(0,n.hX)(o)||(i[e]=o)}(0,c.q)(t,i,e,r)})),t[l.h0](i,r)},getConfig:function(e,r,i){void 0===i&&(i=!1);var o,s=m(e,!1),a=t.cfg;return!s||!s[r]&&(0,n.hX)(s[r])?!a[r]&&(0,n.hX)(a[r])||(o=a[r]):o=s[r],o||!(0,n.hX)(o)?o:i},hasNext:function(){return!!h},getNext:function(){return h},setNext:function(e){h=e},iterate:function(e){for(var t;t=g._next();){var r=t[l.AP]();r&&e(r)}},onComplete:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e&&p[l.y5]({func:e,self:(0,n.b0)(t)?g.ctx:t,args:r})}}};function m(e,r){var n=null,i=t.cfg;if(i&&e){var o=i[f.Bw];!o&&r&&(o={}),i[f.Bw]=o,(o=t.ref(i,f.Bw))&&(!(n=o[e])&&r&&(n={}),o[e]=n,n=t.ref(o,e))}return n}return g}function A(e,t,r,i){var o=(0,u.e)(t),s=C(e,o,r,i),a=s.ctx;return a[l.$5]=function(e){var t=s._next();return t&&t[f.qT](e,a),!t},a[l.$o]=function(e,t){return void 0===e&&(e=null),(0,n.cy)(e)&&(e=E(e,o.cfg,r,t)),A(e||a[l.uR](),o.cfg,r,t)},a}function I(e,t,r){var i=(0,u.e)(t.config),o=C(e,i,t,r),s=o.ctx;return s[l.$5]=function(e){var t=o._next();return t&&t[l.M5](s,e),!t},s[l.$o]=function(e,r){return void 0===e&&(e=null),(0,n.cy)(e)&&(e=E(e,i.cfg,t,r)),I(e||s[l.uR](),t,r)},s}function S(e,t,r){var i=(0,u.e)(t.config),o=C(e,i,t,r).ctx;return o[l.$5]=function(e){return o.iterate((function(t){(0,n.Tn)(t[l.HC])&&t[l.HC](o,e)}))},o[l.$o]=function(e,r){return void 0===e&&(e=null),(0,n.cy)(e)&&(e=E(e,i.cfg,t,r)),S(e||o[l.uR](),t,r)},o}function E(e,t,r,s){var c=null,u=!s;if((0,n.cy)(e)&&e[l.oI]>0){var h=null;(0,i.I)(e,(function(e){if(u||s!==e||(u=!0),u&&e&&(0,n.Tn)(e[f.qT])){var i=function(e,t,r){var i,s=null,c=(0,n.Tn)(e[f.qT]),u=(0,n.Tn)(e[l.YH]),h={getPlugin:function(){return e},getNext:function(){return s},processTelemetry:function(i,o){C(o=o||function(){var i;return e&&(0,n.Tn)(e[y])&&(i=e[y]()),i||(i=A(h,t,r)),i}(),(function(t){if(!e||!c)return!1;var r=(0,g.Cr)(e);return!r[l.Ik]&&!r[f.Hr]&&(u&&e[l.YH](s),e[f.qT](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||o[l.$5](i)},unload:function(t,r){C(t,(function(){var n=!1;if(e){var i=(0,g.Cr)(e),o=e[f.eT]||i[f.eT];!e||o&&o!==t.core()||i[l.Ik]||(i[f.eT]=null,i[l.Ik]=!0,i[l.tZ]=!1,e[l.Ik]&&!0===e[l.Ik](t,r)&&(n=!0))}return n}),"unload",(function(){}),r[l.tI])||t[l.$5](r)},update:function(t,r){C(t,(function(){var n=!1;if(e){var i=(0,g.Cr)(e),o=e[f.eT]||i[f.eT];!e||o&&o!==t.core()||i[l.Ik]||e[l.HC]&&!0===e[l.HC](t,r)&&(n=!0)}return n}),"update",(function(){}),!1)||t[l.$5](r)},_id:i=e?e[l.Ju]+"-"+e[f.Vo]+"-"+w++:"Unknown-0-"+w++,_setNext:function(e){s=e}};function C(t,r,n,a,c){var u=!1,h=e?e[l.Ju]:m,g=t[v];return g||(g=t[v]={}),t.setNext(s),e&&(0,p.r2)(t[f.eT](),(function(){return h+":"+n}),(function(){g[i]=!0;try{var e=s?s._id:f.m5;e&&(g[e]=!1),u=r(t)}catch(e){var a=!s||g[s._id];a&&(u=!0),s&&a||(0,d.ZP)(t[l.e4](),1,73,"Plugin ["+h+"] failed during "+n+" - "+(0,o.m)(e)+", run flags: "+(0,o.m)(g))}}),a,c),u}return(0,a.N6)(h)}(e,t,r);c||(c=i),h&&h._setNext(i),h=i}}))}return s&&!c?E([s],t,r):c}var _=function(e,t,r,n){var i=A(e,t,r,n);(0,h.o$)(this,i,(0,a.cG)(i))}},6535:(e,t,r)=>{"use strict";r.d(t,{Si:()=>v,VN:()=>m,Z1:()=>g});var n=r(225),i=r(6182),o=r(7292),s=r(6492),a=4294967296,c=4294967295,u=123456789,l=987654321,d=!1,h=u,f=l;function p(){try{var e=2147483647&(0,n.f)();(t=(Math.random()*a^e)+e)<0&&(t>>>=0),h=u+t&c,f=l-t&c,d=!0}catch(e){}var t}function g(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,r=(0,o.MY)()||(0,o.iN)();return r&&r.getRandomValues&&(t=r.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,o.lT)()&&(d||p(),t=function(e){var t=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(h=18e3*(65535&h)+(h>>16)&c))>>>0&c;return t>>>=0}()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function v(e){void 0===e&&(e=22);for(var t=m()>>>0,r=0,n=s.m5;n[i.oI]<e;)r++,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===r&&(t=(m()<<2&4294967295|3&t)>>>0,r=0);return n}},380:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>u,Xc:()=>d,pI:()=>l,u7:()=>h});var n=r(5439),i=r(6182),o=r(4276),s=r(6492),a=r(1864),c=(0,o.T)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var r,o=[],a=null,c=e[i.uR]();c;){var l=c[i.AP]();if(l){a&&a[i.YH]&&l[s.qT]&&a[i.YH](l);var d=!!(r=u(l))[i.tZ];l[i.tZ]&&(d=l[i.tZ]()),d||o[i.y5](l),a=l,c=c[i.uR]()}}(0,n.I)(o,(function(n){var o=e[s.eT]();n[i.mE](e.getCfg(),o,t,e[i.uR]()),r=u(n),n[s.eT]||r[s.eT]||(r[s.eT]=o),r[i.tZ]=!0,delete r[i.Ik]}))}function d(e){return e.sort((function(e,t){var r=0;if(t){var n=t[s.qT];e[s.qT]?r=n?e[s.Vo]-t[s.Vo]:1:n&&(r=-1)}else r=e?1:-1;return r}))}function h(e){var t={};return{getName:function(){return t[i.RS]},setName:function(r){e&&e.setName(r),t[i.RS]=r},getTraceId:function(){return t[i.P5]},setTraceId:function(r){e&&e.setTraceId(r),(0,a.hX)(r)&&(t[i.P5]=r)},getSpanId:function(){return t[i.wi]},setSpanId:function(r){e&&e.setSpanId(r),(0,a.wN)(r)&&(t[i.wi]=r)},getTraceFlags:function(){return t[i.Rr]},setTraceFlags:function(r){e&&e.setTraceFlags(r),t[i.Rr]=r}}}},836:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(5439),i=r(8693),o=r(6182),s=r(3775);function a(){var e=[];return{add:function(t){t&&e[o.y5](t)},run:function(t,r){(0,n.I)(e,(function(e){try{e(t,r)}catch(e){(0,s.ZP)(t[o.e4](),2,73,"Unexpected error calling unload handler - "+(0,i.m)(e))}})),e=[]}}}},8969:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var n=r(5439),i=r(8693),o=r(1187),s=r(3775);function a(){var e=[];return{run:function(t){var r=e;e=[],(0,n.I)(r,(function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,s.ZP)(t,2,73,"Unloading:"+(0,i.m)(e))}}))},add:function(t){t&&(0,o.Y)(e,t)}}}},1864:(e,t,r)=>{"use strict";r.d(t,{L0:()=>_,N7:()=>E,ZI:()=>C,ef:()=>T,hX:()=>A,mJ:()=>S,wN:()=>I,wk:()=>w});var n=r(3178),i=r(6668),o=r(8993),s=r(6182),a=r(9882),c=r(7292),u=r(6492),l=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,d="00",h="ff",f="00000000000000000000000000000000",p="0000000000000000",g=1;function m(e,t,r){return!(!e||e[s.oI]!==t||e===r||!e.match(/^[\da-f]*$/i))}function v(e,t,r){return m(e,t)?e:r}function y(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[s.oI]<2;)t="0"+t;return t}function w(e,t,r,i){var o;return(o={})[s.s]=m(i,2,h)?i:d,o[s.P5]=A(e)?e:(0,a.cL)(),o[s.wi]=I(t)?t:(0,n.ZW)((0,a.cL)(),16),o.traceFlags=r>=0&&r<=255?r:1,o}function C(e,t){var r;if(!e)return null;if((0,i.cy)(e)&&(e=e[0]||""),!e||!(0,i.Kg)(e)||e[s.oI]>8192)return null;if(-1!==e.indexOf(",")){var n=e[s.sY](",");e=n[t>0&&n[s.oI]>t?t:0]}var a=l.exec((0,o.EH)(e));return a&&a[1]!==h&&a[2]!==f&&a[3]!==p?((r={version:(a[1]||u.m5)[s.OL](),traceId:(a[2]||u.m5)[s.OL](),spanId:(a[3]||u.m5)[s.OL]()})[s.Rr]=parseInt(a[4],16),r):null}function A(e){return m(e,32,f)}function I(e){return m(e,16,p)}function S(e){return!!(e&&m(e[s.s],2,h)&&m(e[s.P5],32,f)&&m(e[s.wi],16,p)&&m(y(e[s.Rr]),2))}function E(e){return!!S(e)&&(e[s.Rr]&g)===g}function _(e){if(e){var t=y(e[s.Rr]);m(t,2)||(t="01");var r=e[s.s]||d;return"00"!==r&&"ff"!==r&&(r=d),"".concat(r.toLowerCase(),"-").concat(v(e.traceId,32,f).toLowerCase(),"-").concat(v(e.spanId,16,p).toLowerCase(),"-").concat(t.toLowerCase())}return""}function T(e){var t="traceparent",r=C((0,c.$Z)(t),e);return r||(r=C((0,c.Iu)(t),e)),r}},6182:(e,t,r)=>{"use strict";r.d(t,{$5:()=>_,$o:()=>L,AP:()=>A,Bl:()=>D,Di:()=>O,HC:()=>z,Ic:()=>g,Ik:()=>U,JQ:()=>i,JR:()=>F,Ju:()=>w,K0:()=>m,M5:()=>M,OL:()=>n,O_:()=>ee,P5:()=>ne,QM:()=>J,RF:()=>b,RS:()=>S,Rr:()=>oe,Ru:()=>re,TP:()=>P,Uw:()=>h,W7:()=>Y,XM:()=>R,XW:()=>s,YH:()=>V,Yo:()=>X,Zu:()=>Z,_w:()=>v,by:()=>N,e4:()=>j,e_:()=>te,fA:()=>E,h0:()=>l,h4:()=>I,ih:()=>u,mE:()=>y,oI:()=>o,on:()=>c,pM:()=>q,ps:()=>T,re:()=>W,s:()=>x,sY:()=>G,sx:()=>Q,tI:()=>H,tX:()=>K,tZ:()=>C,tn:()=>B,uR:()=>$,vR:()=>k,wi:()=>ie,x6:()=>d,y5:()=>p,y9:()=>f,zs:()=>a});var n="toLowerCase",i="blkVal",o="length",s="rdOnly",a="notify",c="warnToConsole",u="throwInternal",l="setDf",d="watch",h="logger",f="apply",p="push",g="splice",m="hdlr",v="cancel",y="initialize",w="identifier",C="isInitialized",A="getPlugin",I="pollInternalLogs",S="name",E="time",_="processNext",T="getProcessTelContext",b="getNotifyMgr",k="addNotificationListener",P="removeNotificationListener",R="enabled",O="stopPollingInternalLogs",M="unload",N="onComplete",x="version",D="loggingLevelConsole",L="createNew",U="teardown",F="messageId",q="message",H="isAsync",j="diagLog",B="_doTeardown",z="update",$="getNext",V="setNextPlugin",K="userAgent",G="split",W="nodeType",Y="replace",Q="logInternalMessage",J="type",X="handler",Z="isChildEvt",ee="getCtx",te="setCtx",re="complete",ne="traceId",ie="spanId",oe="traceFlags"},5664:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>c,_1:()=>i,bA:()=>o,hW:()=>n,s6:()=>a,vR:()=>s});var n="function",i="object",o="undefined",s="prototype",a=Object,c=a[s]},659:(e,t,r)=>{"use strict";r.d(t,{Im:()=>u,qU:()=>d,vz:()=>h});var n=r(3076),i=r(1324),o=r(3517),s=r(411),a=r(5664),c=(((0,n.mS)()||{}).Symbol,((0,n.mS)()||{}).Reflect,"hasOwnProperty"),u=i.vE||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])a.Wy[c].call(t,i)&&(e[i]=t[i]);return e},l=function(e,t){return l=a.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t[c](r)&&(e[r]=t[r])},l(e,t)};function d(e,t){function r(){this.constructor=e}typeof t!==a.hW&&null!==t&&(0,o.zk)("Class extends value "+String(t)+" is not a constructor or null"),l(e,t),e[a.vR]=null===t?(0,s.s)(t):(r[a.vR]=t[a.vR],new r)}function h(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}},1380:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>vt._,ApplicationInsights:()=>St,Sender:()=>gt,SeverityLevel:()=>At.O,arrForEach:()=>_.I,isNullOrUndefined:()=>k.hX,proxyFunctions:()=>w.o$,throwError:()=>yt.$8});var n=r(8279),i=r(659),o=r(5025),s=r(3072),a=r(2445),c=r(1448),u=r(4164),l=r(5397),d=r(5014),h=r(1365),f=r(740),p=r(4658),g=r(2318),m=r(2910),v=r(2475),y=r(3775),w=r(3673),C=r(8693),A=r(6149),I=r(4276),S=r(9622),E=r(2317),_=r(5439),T=r(7292),b=r(4013),k=r(6668),P=r(3076),R=r(1324),O=r(225),M=r(8257),N=r(636),x=r(4292),D=r(6336),L=r(1636),U=r(1575),F=r(7975),q=r(1062),H=r(7358),j=r(9018),B="duration",z="tags",$="deviceType",V="data",K="name",G="traceID",W="length",Y="stringify",Q="measurements",J="dataType",X="envelopeType",Z="toString",ee="onLine",te="isOnline",re="_get",ne="enqueue",ie="count",oe="eventsLimitInMem",se="push",ae="emitLineDelimitedJson",ce="clear",ue="batchPayloads",le="createNew",de="markAsSent",he="clearSent",fe="bufferOverride",pe="BUFFER_KEY",ge="SENT_BUFFER_KEY",me="MAX_BUFFER_SIZE",ve="sendPOST",ye="triggerSend",we="diagLog",Ce="_sender",Ae="customHeaders",Ie="maxBatchSizeInBytes",Se="onunloadDisableBeacon",Ee="isBeaconApiDisabled",_e="alwaysUseXhrOverride",Te="enableSessionStorageBuffer",be="_buffer",ke="onunloadDisableFetch",Pe="instrumentationKey",Re="convertUndefined",Oe="maxBatchInterval",Me="baseType",Ne="sampleRate",xe="_onError",De="_onPartialSuccess",Le="_onSuccess",Ue="itemsAccepted",Fe="oriPayload",qe="setRequestHeader",He="eventsSendRequest",je="getSamplingScore",Be="baseType",ze="baseData",$e="properties",Ve="true";function Ke(e,t,r){return(0,w.KY)(e,t,r,k.zz)}function Ge(e,t,r){(0,k.hX)(e)||(0,j.z)(e,(function(e,n){(0,k.Et)(n)?r[e]=n:(0,k.Kg)(n)?t[e]=n:(0,T.Z)()&&(t[e]=(0,T.hm)()[Y](n))}))}function We(e,t){(0,k.hX)(e)||(0,j.z)(e,(function(r,n){e[r]=n||t}))}function Ye(e,t,r,n){var s=new q.L(e,n,t);Ke(s,"sampleRate",r[o.tU]),(r[ze]||{}).startTime&&(s.time=(0,w._u)(r[ze].startTime)),s.iKey=r.iKey;var a=r.iKey.replace(/-/g,"");return s[K]=s[K].replace("{0}",a),function(e,t,r){var n=r[z]=r[z]||{},o=t.ext=t.ext||{},s=t[z]=t[z]||[],a=o.user;a&&(Ke(n,U.O.userAuthUserId,a.authId),Ke(n,U.O.userId,a.id||a.localId));var c=o.app;c&&Ke(n,U.O.sessionId,c.sesId);var u=o.device;u&&(Ke(n,U.O.deviceId,u.id||u.localId),Ke(n,U.O[$],u.deviceClass),Ke(n,U.O.deviceIp,u.ip),Ke(n,U.O.deviceModel,u.model),Ke(n,U.O[$],u[$]));var l=t.ext.web;if(l){Ke(n,U.O.deviceLanguage,l.browserLang),Ke(n,U.O.deviceBrowserVersion,l.browserVer),Ke(n,U.O.deviceBrowser,l.browser);var d=r[V]=r[V]||{},h=d[ze]=d[ze]||{},f=h[$e]=h[$e]||{};Ke(f,"domain",l.domain),Ke(f,"isManual",l.isManual?Ve:null),Ke(f,"screenRes",l.screenRes),Ke(f,"userConsent",l.userConsent?Ve:null)}var p=o.os;p&&Ke(n,U.O.deviceOS,p[K]);var g=o.trace;g&&(Ke(n,U.O.operationParentId,g.parentID),Ke(n,U.O.operationName,(0,F.Rr)(e,g[K])),Ke(n,U.O.operationId,g[G]));for(var m={},v=s[W]-1;v>=0;v--){var y=s[v];(0,j.z)(y,(function(e,t){m[e]=t})),s.splice(v,1)}(0,j.z)(s,(function(e,t){m[e]=t}));var C=(0,i.Im)((0,i.Im)({},n),m);C[U.O.internalSdkVersion]||(C[U.O.internalSdkVersion]=(0,F.Rr)(e,"javascript:".concat(Je.Version),64)),r[z]=(0,w.hW)(C)}(e,r,s),r[z]=r[z]||[],(0,w.hW)(s)}function Qe(e,t){(0,k.hX)(t[ze])&&(0,y.ZP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Je={Version:"3.0.4"};function Xe(e,t,r){Qe(e,t);var n={},i={};t[Be]!==s.J[J]&&(n.baseTypeSource=t[Be]),t[Be]===s.J[J]?(n=t[ze][$e]||{},i=t[ze][Q]||{}):t[ze]&&Ge(t[ze],n,i),Ge(t[V],n,i),(0,k.hX)(r)||We(n,r);var o=t[ze][K],a=new s.J(e,o,n,i),c=new H.B(s.J[J],a);return Ye(e,s.J[X],t,c)}function Ze(e,t){(0,A.ML)(e,null,null,t)}var et,tt,rt=r(6832),nt=function(){function e(t,r){var i=[],o=!1;this[re]=function(){return i},this._set=function(e){return i=e},(0,n.A)(e,this,(function(e){e[ne]=function(n){e[ie]()>=r[oe]?o||((0,y.ZP)(t,2,105,"Maximum in-memory buffer size reached: "+e[ie](),!0),o=!0):i[se](n)},e[ie]=function(){return i[W]},e.size=function(){for(var e=i[W],t=0;t<i[W];t++)e+=i[t][W];return r[ae]||(e+=2),e},e[ce]=function(){i=[],o=!1},e.getItems=function(){return i.slice(0)},e[ue]=function(e){return e&&e[W]>0?r[ae]?e.join("\n"):"["+e.join(",")+"]":null},e[le]=function(e,r,n){var o=i.slice(0);e=e||t,r=r||{};var s=n?new ot(e,r):new it(e,r);return(0,_.I)(o,(function(e){s[ne](e)})),s}}))}return e.__ieDyn=1,e}(),it=function(e){function t(r,i){var o=e.call(this,r,i)||this;return(0,n.A)(t,o,(function(e,t){e[de]=function(e){t[ce]()},e[he]=function(e){}})),o}return(0,i.qU)(t,e),t.__ieDyn=1,t}(nt),ot=function(e){function t(r,i){var o=e.call(this,r,i)||this,s=!1,a=null==i?void 0:i.namePrefix,c=i[fe]||{getItem:p.vH,setItem:p.Dt},u=c.getItem,l=c.setItem;return(0,n.A)(t,o,(function(e,n){var i=h(t[pe]),o=h(t[ge]),c=e._set(i.concat(o));function d(e,t){var r=[];return(0,_.I)(t,(function(t){(0,k.Tn)(t)||-1!==(0,rt.r)(e,t)||r[se](t)})),r}function h(e){var t=e;try{var n=u(r,t=a?a+"_"+t:t);if(n){var i=(0,T.hm)().parse(n);if((0,k.Kg)(i)&&(i=(0,T.hm)().parse(i)),i&&(0,k.cy)(i))return i}}catch(e){(0,y.ZP)(r,1,42," storage key: "+t+", "+(0,w.lL)(e),{exception:(0,C.m)(e)})}return[]}function f(e,t){var n=e;try{n=a?a+"_"+n:n;var i=JSON[Y](t);l(r,n,i)}catch(e){l(r,n,JSON[Y]([])),(0,y.ZP)(r,2,41," storage key: "+n+", "+(0,w.lL)(e)+". Buffer cleared",{exception:(0,C.m)(e)})}}c[W]>t[me]&&(c[W]=t[me]),f(t[ge],[]),f(t[pe],c),e[ne]=function(i){e[ie]()>=t[me]?s||((0,y.ZP)(r,2,67,"Maximum buffer size reached: "+e[ie](),!0),s=!0):(n[ne](i),f(t.BUFFER_KEY,e[re]()))},e[ce]=function(){n[ce](),f(t.BUFFER_KEY,e[re]()),f(t[ge],[]),s=!1},e[de]=function(n){f(t[pe],e._set(d(n,e[re]())));var i=h(t[ge]);i instanceof Array&&n instanceof Array&&((i=i.concat(n))[W]>t[me]&&((0,y.ZP)(r,1,67,"Sent buffer reached its maximum size: "+i[W],!0),i[W]=t[me]),f(t[ge],i))},e[he]=function(e){var r=h(t[ge]);r=d(e,r),f(t[ge],r)},e[le]=function(n,i,o){o=!!o;var s=e[re]().slice(0),a=h(t[ge]).slice(0);n=n||r,i=i||{},e[ce]();var c=o?new t(n,i):new it(n,i);return(0,_.I)(s,(function(e){c[ne](e)})),o&&c[de](a),c}})),o}return(0,i.qU)(t,e),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}(nt),st=function(){function e(t){(0,n.A)(e,this,(function(e){function r(e,o){var s="__aiCircularRefCheck",a={};if(!e)return(0,y.ZP)(t,1,48,"cannot serialize object because it is null or undefined",{name:o},!0),a;if(e[s])return(0,y.ZP)(t,2,50,"Circular reference detected while serializing object",{name:o},!0),a;if(!e.aiDataContract){if("measurements"===o)a=i(e,"number",o);else if("properties"===o)a=i(e,"string",o);else if("tags"===o)a=i(e,"string",o);else if((0,k.cy)(e))a=n(e,o);else{(0,y.ZP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{(0,T.hm)()[Y](e),a=e}catch(e){(0,y.ZP)(t,1,48,e&&(0,k.Tn)(e[Z])?e[Z]():"Error serializing object",null,!0)}}return a}return e[s]=!0,(0,j.z)(e.aiDataContract,(function(i,s){var c=(0,k.Tn)(s)?1&s():1&s,u=(0,k.Tn)(s)?4&s():4&s,l=2&s,d=void 0!==e[i],h=(0,k.Gv)(e[i])&&null!==e[i];if(!c||d||l){if(!u){var f;void 0!==(f=h?l?n(e[i],i):r(e[i],i):e[i])&&(a[i]=f)}}else(0,y.ZP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[s],a}function n(e,n){var i;if(e)if((0,k.cy)(e)){i=[];for(var o=0;o<e[W];o++){var s=r(e[o],n+"["+o+"]");i[se](s)}}else(0,y.ZP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:n},!0);return i}function i(e,r,n){var i;return e&&(i={},(0,j.z)(e,(function(e,o){if("string"===r)void 0===o?i[e]="undefined":null===o?i[e]="null":o[Z]?i[e]=o[Z]():i[e]="invalid field: toString() is not defined.";else if("number"===r)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var s=parseFloat(o);isNaN(s)?i[e]="NaN":i[e]=s}else i[e]="invalid field: "+n+" is of unknown type.",(0,y.ZP)(t,1,i[e],null,!0)}))),i}e.serialize=function(e){var n=r(e,"root");try{return(0,T.hm)()[Y](n)}catch(e){(0,y.ZP)(t,1,48,e&&(0,k.Tn)(e[Z])?e[Z]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),at=r(8596),ct=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[W]<8;)e=e.concat(e);for(var t=5381,r=0;r<e[W];++r)t=(t<<5)+t+e.charCodeAt(r),t|=0;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),ut=function(){var e=new ct,t=new at.o;this[je]=function(r){return r[z]&&r[z][t.userId]?e.getHashCodeScore(r[z][t.userId]):r.ext&&r.ext.user&&r.ext.user.id?e.getHashCodeScore(r.ext.user.id):r[z]&&r[z][t.operationId]?e.getHashCodeScore(r[z][t.operationId]):r.ext&&r.ext.telemetryTrace&&r.ext.telemetryTrace[G]?e.getHashCodeScore(r.ext.telemetryTrace[G]):100*Math.random()}},lt=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var r=t||(0,y.y0)(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Ne]=e,this.samplingScoreGenerator=new ut}return e.prototype.isSampledIn=function(e){var t=this[Ne];return null==t||t>=100||e.baseType===d.J[J]||this.samplingScoreGenerator[je](e)<t},e}(),dt=void 0;function ht(e){try{return e.responseText}catch(e){}return null}var ft=(0,R.ZH)(((et={endpointUrl:(0,v.Lx)(k.zz,o._G+o.wc)})[ae]=(0,v.DD)(),et[Oe]=15e3,et[Ie]=102400,et.disableTelemetry=(0,v.DD)(),et[Te]=(0,v.DD)(!0),et.isRetryDisabled=(0,v.DD)(),et[Ee]=(0,v.DD)(!0),et.disableXhr=(0,v.DD)(),et[ke]=(0,v.DD)(),et[Se]=(0,v.DD)(),et[Pe]=dt,et.namePrefix=dt,et.samplingPercentage=(0,v.Lx)((function(e){return!isNaN(e)&&e>0&&e<=100}),100),et[Ae]=dt,et[Re]=dt,et[oe]=1e4,et[fe]=!1,et.httpXHROverride={isVal:function(e){return e&&e[ve]},v:dt},et[_e]=(0,v.DD)(),et)),pt=((tt={})[s.J.dataType]=Xe,tt[a.C.dataType]=function(e,t,r){Qe(e,t);var n=t[ze].message,i=t[ze].severityLevel,o=t[ze][$e]||{},s=t[ze][Q]||{};Ge(t[V],o,s),(0,k.hX)(r)||We(o,r);var c=new a.C(e,n,i,o,s),u=new H.B(a.C[J],c);return Ye(e,a.C[X],t,u)},tt[c.h.dataType]=function(e,t,r){var n;Qe(e,t);var i=t[ze];(0,k.hX)(i)||(0,k.hX)(i[$e])||(0,k.hX)(i[$e][B])?(0,k.hX)(t[V])||(0,k.hX)(t[V][B])||(n=t[V][B],delete t[V][B]):(n=i[$e][B],delete i[$e][B]);var o,s=t[ze];((t.ext||{}).trace||{})[G]&&(o=t.ext.trace[G]);var a=s.id||o,u=s[K],l=s.uri,d=s[$e]||{},h=s[Q]||{};if((0,k.hX)(s.refUri)||(d.refUri=s.refUri),(0,k.hX)(s.pageType)||(d.pageType=s.pageType),(0,k.hX)(s.isLoggedIn)||(d.isLoggedIn=s.isLoggedIn[Z]()),!(0,k.hX)(s[$e])){var f=s[$e];(0,j.z)(f,(function(e,t){d[e]=t}))}Ge(t[V],d,h),(0,k.hX)(r)||We(d,r);var p=new c.h(e,u,l,n,d,h,a),g=new H.B(c.h[J],p);return Ye(e,c.h[X],t,g)},tt[u.H.dataType]=function(e,t,r){Qe(e,t);var n=t[ze],i=n[K],o=n.uri||n.url,s=n[$e]||{},a=n[Q]||{};Ge(t[V],s,a),(0,k.hX)(r)||We(s,r);var c=new u.H(e,i,o,void 0,s,a,n),l=new H.B(u.H[J],c);return Ye(e,u.H[X],t,l)},tt[l.WJ.dataType]=function(e,t,r){Qe(e,t);var n=t[ze][Q]||{},i=t[ze][$e]||{};Ge(t[V],i,n),(0,k.hX)(r)||We(i,r);var o=t[ze],s=l.WJ.CreateFromInterface(e,o,i,n),a=new H.B(l.WJ[J],s);return Ye(e,l.WJ[X],t,a)},tt[d.J.dataType]=function(e,t,r){Qe(e,t);var n=t[ze],i=n[$e]||{},o=n[Q]||{};Ge(t[V],i,o),(0,k.hX)(r)||We(i,r);var s=new d.J(e,n[K],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new H.B(d.J[J],s);return Ye(e,d.J[X],t,a)},tt[h.A.dataType]=function(e,t,r){Qe(e,t);var n=t[ze][Q]||{},i=t[ze][$e]||{};Ge(t[V],i,n),(0,k.hX)(r)||We(i,r);var s=t[ze];if((0,k.hX)(s))return(0,y.OG)(e,"Invalid input for dependency data"),null;var a=s[$e]&&s[$e][o.ym]?s[$e][o.ym]:"GET",c=new h.A(e,s.id,s.target,s[K],s[B],s.success,s.responseCode,a,s.type,s.correlationContext,i,n),u=new H.B(h.A[J],c);return Ye(e,h.A[X],t,u)},tt),gt=function(e){function t(){var r,i,s,a,c,u,l,d=e.call(this)||this;d.priority=1001,d.identifier=f.BreezeChannelIdentifier;var h,v,M,U,F,q,H,j,B,$,K,G,Y,Q,J,X,Z,re,oe,ae,pe,ge=0;return(0,n.A)(t,d,(function(e,n){function f(e,t){for(var r,n=null,i=null,o=0;null==i&&o<e[W];)n=e[o],oe||1!==n?2===n&&(0,T.R7)(t)?i=ze:(0,T.Uf)()&&3===n&&(i=Qe):(0,T.PV)()?i=pt:(0,T.xk)()&&(i=Je),o++;return i?((r={})[ve]=i,r):null}function me(t,r,n,i){200===r&&t&&e._onSuccess(t,t[W]),i&&e[xe](t,i)}function je(t,r,n){var i=Be(r),o=t&&t[ve];return o&&i?(e._buffer[de](r),o(i,(function(e,t,n){return me(r,e,0,n)}),!n)):null}function Be(t){var r;if((0,k.cy)(t)&&t[W]>0){var n=e._buffer[ue](t);return(r={})[V]=n,r.urlString=U,r.headers=l,r.disableXhrSync=oe,r.disableFetchKeepAlive=!ae,r[Fe]=t,r}return null}function ze(e,t,r){return et(e,t,!1)}function $e(t){var r=t?t[W]:0;return e[be].size()+r>q&&(v&&!v[te]()||e[ye](!0,null,10),!0)}function Ve(t,n,i,o,s,a){var c=null;if(e._appId||(c=tt(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!Ke(i))return void e[xe](n,s);!G&&ct(t)?(rt(n),(0,y.ZP)(e[we](),2,40,". Response code "+t+". Will retry to send "+n[W]+" items.")):e[xe](n,s)}else v&&!v[te]()?G||(rt(n,10),(0,y.ZP)(e[we](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!v.isOnline(),". Will retry to send ").concat(n.length," items."))):(Ke(i),206===t?(c||(c=tt(a)),c&&!G?e[De](n,c):e[xe](n,s)):(r=0,e[Le](n,o)))}function Ke(e){return!(u>=10||(0,k.hX)(e)||""===e||e===U||(U=e,++u,0))}function Ge(e,t,r,n){try{e(t,r,n)}catch(e){}}function We(e,t){h?h(e,!1):Qe(Be(e),(function(t,r,n){return me(e,t,0,n)}))}function Ye(e,t){var r=(0,P.w3)(),n=U,i=new Blob([e],{type:"text/plain;charset=UTF-8"}),o=r.sendBeacon(n,i);return o&&t(200,{},e),o}function Qe(t,r,n){var i=t,o=i&&i[V];if((0,k.Kg)(o)&&o[W]>0&&!Ye(o,r)){var s=[];if(i[Fe][W]>0)for(var a=0;a<o[W];a++){var c=t[a];Ye(e._buffer[ue](c),r)||s[se](c)}s[W]>0&&(pe&&pe(s,!0),(0,y.ZP)(e[we](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Je(t,r,n){var i,s,a,c=t,u=new XMLHttpRequest,d=U;try{u[o.xF]=!0}catch(e){}return u.open("POST",d,!n),u[qe]("Content-type","application/json"),(0,g.Qu)(d)&&u[qe](m.a[6],m.a[7]),(0,_.I)((0,R.cG)(l),(function(e){u[qe](e,l[e])})),u.onreadystatechange=function(){var t=c[Fe];e._xhrReadyStateChange(u,t,t[W]),4===u.readyState&&s&&s(!0)},u.onerror=function(e){Ge(r,400,{},ut(u)),a&&a(e)},!n&&Z&&(i=(0,N.Qo)((function(e,t){s=e,a=t}))),u.send(t[V]),i}function Xe(t,r){var n=function(e,r,n){return me(t,e,0,n)};if((0,k.cy)(t)){for(var i=t[W],o=0;o<t[W];o++)i+=t[o][W];var s=Be(t);ge+i<=65e3?et(s,n,!0):(0,T.Uf)()?Qe(s,n):(pe&&pe(t,!0),(0,y.ZP)(e[we](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function et(e,t,r){var n,i,s,a,c=U,u=e,d=u[V],h=new Blob([d],{type:"application/json"}),f=new Headers,p=d[W],v=!1,y=!1;(0,g.Qu)(c)&&f.append(m.a[6],m.a[7]),(0,_.I)((0,R.cG)(l),(function(e){f.append(e,l[e])}));var w=((n={method:"POST",headers:f,body:h})[o.xF]=!0,n);r&&(w.keepalive=!0,v=!0,ge+=p);var A=new Request(c,w);try{A[o.xF]=!0}catch(e){}!r&&Z&&(i=(0,N.Qo)((function(e,t){s=e,a=t})));try{(0,x.Dv)(fetch(A),(function(e){if(r&&(ge-=p,p=0),!y)if(y=!0,e.rejected)Ge(t,400,{},e.reason&&e.reason.message),a&&a(e.reason);else{var n=e.value;n.ok?(0,x.Dv)(n.text(),(function(e){var t=u[Fe];Ve(n.status,t,n.url,t[W],n.statusText,e.value||""),s&&s(!0)})):(Ge(t,400,{},n.statusText),s&&s(!1))}}))}catch(e){y||(Ge(t,400,{},(0,C.m)(e)),a&&a(e))}return v&&!y&&(y=!0,Ge(t,200,{}),s&&s(!0)),i}function tt(t){try{if(t&&""!==t){var r=(0,T.hm)().parse(t);if(r&&r.itemsReceived&&r.itemsReceived>=r[Ue]&&r.itemsReceived-r.itemsAccepted===r.errors[W])return r}}catch(r){(0,y.ZP)(e[we](),1,43,"Cannot parse the response. "+(0,w.lL)(r),{response:t})}return null}function rt(t,n){if(void 0===n&&(n=1),t&&0!==t[W]){var o=e[be];o[he](t),r++;for(var s=0,a=t;s<a.length;s++){var c=a[s];o[ne](c)}!function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,o=Math.floor(Math.random()*n*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var s=(0,O.f)()+1e3*t;i=s}(n),nt()}}function nt(){if(!a&&!s){var t=i?Math.max(0,i-(0,O.f)()):0,r=Math.max(Y,t);a=(0,L.dR)((function(){a=null,e[ye](!0,null,1)}),r)}}function at(){a&&a.cancel(),a=null,i=null}function ct(e){return 401===e||403===e||408===e||429===e||500===e||502===e||503===e||504===e}function ut(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+ht(e)||0:t}function pt(t,r,n){var i=t,o=(0,P.zk)(),s=new XDomainRequest,a=i[V];s.onload=function(){var t=i[Fe];e._xdrOnLoad(s,t)},s.onerror=function(){Ge(r,400,{},gt(s))};var c=o&&o.location&&o.location.protocol||"";if(0!==U.lastIndexOf(c,0))return(0,y.ZP)(e[we](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void e._buffer[ce]();var u=U.replace(/^(https?:)/,"");s.open("POST",u),s.send(a)}function gt(e,t){return e?"XDomainRequest,Response:"+ht(e)||0:t}function mt(){e[Ce]=null,e[be]=null,e._appId=null,e._sample=null,l={},v=null,r=0,i=null,s=!1,a=null,c=null,u=0,ge=0,h=null,M=null,U=null,F=null,q=0,H=!1,j=null,B=!1,$=null,K=dt,G=!1,Q=null,X=dt,oe=!1,ae=!1,pe=null,(0,D.vF)(e,"_senderConfig",{g:function(){return(0,w.CP)({},ft)}})}mt(),e.pause=function(){at(),s=!0},e.resume=function(){s&&(s=!1,i=null,$e(),nt())},e.flush=function(t,r,n){if(void 0===t&&(t=!0),!s){at();try{return e[ye](t,null,n||1)}catch(t){(0,y.ZP)(e[we](),1,22,"flush failed, telemetry will not be collected: "+(0,w.lL)(t),{exception:(0,C.m)(t)})}}},e.onunloadFlush=function(){if(!s)if(H||re)try{return e[ye](!0,We,2)}catch(t){(0,y.ZP)(e[we](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,w.lL)(t),{exception:(0,C.m)(t)})}else e.flush(!1)},e.addHeader=function(e,t){l[e]=t},e.initialize=function(t,o,s,a){e.isInitialized()&&(0,y.ZP)(e[we](),1,28,"Sender is already initialized"),n.initialize(t,o,s,a);var m=e.identifier;c=new st(o.logger),r=0,i=null,e[Ce]=null,u=0;var b=e[we]();M=(0,A.Hm)((0,I.Z)("Sender"),o.evtNamespace&&o.evtNamespace()),v=function(e){var t,r=(0,P.YE)(),n=(0,P.w3)(),i=!1,o=!0,s=(0,A.Hm)((0,I.Z)("OfflineListener"),e);try{if(c((0,P.zk)())&&(i=!0),r){var a=r.body||r;a.ononline&&c(a)&&(i=!0)}i&&n&&!(0,k.hX)(n[ee])&&(o=n[ee])}catch(e){i=!1}function c(e){var t=!1;return e&&(t=(0,A.mB)(e,"online",u,s))&&(0,A.mB)(e,"offline",l,s),t}function u(){o=!0}function l(){o=!1}return(t={})[te]=function(){var e=!0;return i?e=o:n&&!(0,k.hX)(n[ee])&&(e=n[ee]),e},t.isListening=function(){return i},t.unload=function(){var e=(0,P.zk)();if(e&&i){if(Ze(e,s),r){var t=r.body||r;(0,k.b0)(t.ononline)||Ze(t,s)}i=!1}},t}(M),e._addHook((0,S.a)(t,(function(t){var r=t.cfg;r.storagePrefix&&(0,p.vh)(r.storagePrefix);var n=(0,E.i8)(null,r,o).getExtCfg(m,ft);(0,D.vF)(e,"_senderConfig",{g:function(){return n}}),F!==n.endpointUrl&&(U=F=n.endpointUrl),j&&j!==n[Ae]&&(0,_.I)(j,(function(e){delete l[e.header]})),q=n[Ie],H=(!1===n[Se]||!1===n[Ee])&&(0,T.Uf)(),re=n[_e],oe=!!n.disableXhr;var i=n[fe],s=!!n[Te]&&(!!i||(0,p.AN)()),a=n.namePrefix,c=s!==Q||s&&X!==a||s&&J!==i;if(e[be]){if(c)try{e._buffer=e._buffer[le](b,n,s)}catch(t){(0,y.ZP)(e[we](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,w.lL)(t),{exception:(0,C.m)(t)})}$e()}else e[be]=s?new ot(b,n):new it(b,n);X=a,Q=s,J=i,ae=!n[ke]&&(0,T.R7)(!0),e._sample=new lt(n.samplingPercentage,b),function(e,t){var r=t.disableInstrumentationKeyValidation;return!((0,k.hX)(r)||!r)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}($=n[Pe],r)||(0,y.ZP)(b,1,100,"Invalid Instrumentation key "+$),j=n[Ae],!(0,g.Qu)(U)&&j&&j[W]>0?(0,_.I)(j,(function(e){d.addHeader(e.header,e.value)})):j=null,Z=n.enableSendPromise;var u,v=n.httpXHROverride,A=null;A=f([1,2],!1);var I={sendPOST:Je};pe=function(e,t){return je(I,e,t)},!n[Ee]&&(0,T.Uf)()&&(A=f([3],!1)),A=re?v:A||v||I,e[Ce]=function(e,t){return je(A,e,t)},ae&&(h=Xe),u=re?v:f([3,1],!0)||v,!re&&h||!u||(h=function(e,t){return je(u,e,t)}),h||(h=pe),B=n.disableTelemetry,K=n[Re]||dt,G=n.isRetryDisabled,Y=n[Oe]})))},e.processTelemetry=function(r,n){var i,s=(n=e._getTelCtx(n))[we]();try{if(B)return;if(!r)return void(0,y.ZP)(s,1,7,"Cannot send empty telemetry");if(r.baseData&&!r[Me])return void(0,y.ZP)(s,1,70,"Cannot send telemetry without baseData and baseType");if(r[Me]||(r[Me]="EventData"),!e[Ce])return void(0,y.ZP)(s,1,28,"Sender was not initialized");if(i=r,!e._sample.isSampledIn(i))return void(0,y.ZP)(s,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Ne]});r[o.tU]=e._sample[Ne];var a=r.iKey||$,u=t.constructEnvelope(r,a,s,K);if(!u)return void(0,y.ZP)(s,1,47,"Unable to create an AppInsights envelope");var l=!1;if(r[z]&&r[z][o.jp]&&((0,_.I)(r[z][o.jp],(function(e){try{e&&!1===e(u)&&(l=!0,(0,y.OG)(s,"Telemetry processor check returns false"))}catch(e){(0,y.ZP)(s,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,w.lL)(e),{exception:(0,C.m)(e)},!0)}})),delete r[z][o.jp]),l)return;var d=c.serialize(u),h=e[be];$e(d),h[ne](d),nt()}catch(e){(0,y.ZP)(s,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,w.lL)(e),{exception:(0,C.m)(e)})}e.processNext(r,n)},e._xhrReadyStateChange=function(e,t,r){4===e.readyState&&Ve(e.status,t,e.responseURL,r,ut(e),ht(e)||e.response)},e[ye]=function(t,r,n){var i;if(void 0===t&&(t=!0),!s)try{var o=e[be];if(B)o[ce]();else{if(o[ie]()>0){var a=o.getItems();!function(t,r){var n,i=(n="getNotifyMgr",e.core[n]?e.core[n]():e.core._notificationManager);if(i&&i[He])try{i[He](t,r)}catch(t){(0,y.ZP)(e[we](),1,74,"send request notification failed: "+(0,w.lL)(t),{exception:(0,C.m)(t)})}}(n||0,t),i=r?r.call(e,a,t):e[Ce](a,t)}new Date}at()}catch(t){var c=(0,T.L0)();(!c||c>9)&&(0,y.ZP)(e[we](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,w.lL)(t),{exception:(0,C.m)(t)})}return i},e._doTeardown=function(t,r){e.onunloadFlush(),(0,b.K)(v,!1),mt()},e[xe]=function(t,r,n){(0,y.ZP)(e[we](),2,26,"Failed to send telemetry.",{message:r}),e._buffer&&e._buffer[he](t)},e[De]=function(t,r){for(var n=[],i=[],o=0,s=r.errors.reverse();o<s.length;o++){var a=s[o],c=t.splice(a.index,1)[0];ct(a.statusCode)?i[se](c):n[se](c)}t[W]>0&&e[Le](t,r[Ue]),n[W]>0&&e[xe](n,ut(null,["partial success",r[Ue],"of",r.itemsReceived].join(" "))),i[W]>0&&(rt(i),(0,y.ZP)(e[we](),2,40,"Partial success. Delivered: "+t[W]+", Failed: "+n[W]+". Will retry to send "+i[W]+" our of "+r.itemsReceived+" items"))},e[Le]=function(t,r){e._buffer&&e._buffer[he](t)},e._xdrOnLoad=function(t,n){var i=ht(t);if(!t||i+""!="200"&&""!==i){var o=tt(i);o&&o.itemsReceived&&o.itemsReceived>o[Ue]&&!G?e[De](n,o):e[xe](n,gt(t))}else r=0,e[Le](n,0)}})),d}return(0,i.qU)(t,e),t.constructEnvelope=function(e,t,r,n){var o;return o=t===e.iKey||(0,k.hX)(t)?e:(0,i.Im)((0,i.Im)({},e),{iKey:t}),(pt[o.baseType]||Xe)(r,o,n)},t}(M.s),mt=r(4484),vt=r(9379),yt=r(3517),wt="instrumentationKey",Ct="connectionString",At=r(9762),It={diagnosticLogInterval:(0,v.Lx)((function(e){return e&&e>0}),1e4)},St=function(){function e(t){var r,i=new vt._;((0,k.hX)(t)||(0,k.hX)(t[wt])&&(0,k.hX)(t[Ct]))&&(0,yt.$8)("Invalid input configuration"),(0,n.A)(e,this,(function(e){function n(){var e=(0,S.e)(t||{},It);r=e.cfg,i.addUnloadHook((0,S.a)(e,(function(){if(r[Ct]){var e=(0,mt.H)(r[Ct]),t=e.ingestionendpoint;r.endpointUrl=t?t+o.wc:r.endpointUrl,r[wt]=e.instrumentationkey||r[wt]}}))),i.initialize(r,[new gt])}(0,D.vF)(e,"config",{g:function(){return r}}),n(),e.initialize=n,(0,w.o$)(e,i,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"])}))}return e.__ieDyn=1,e}()},8279:(e,t,r)=>{"use strict";r.d(t,{A:()=>F});var n,i=r(3076),o=r(3266),s=r(3517),a="constructor",c="prototype",u="function",l="_dynInstFuncs",d="_isDynProxy",h="_dynClass",f="_dynCls$",p="_dynInstChk",g=p,m="_dfOpts",v="_unknown_",y="__proto__",w="_dyn"+y,C="__dynProto$Gbl",A="_dynInstProto",I="useBaseInst",S="setInstFuncs",E=Object,_=E.getPrototypeOf,T=E.getOwnPropertyNames,b=(0,i.mS)(),k=b[C]||(b[C]={o:(n={},n[S]=!0,n[I]=!0,n),n:1e3});function P(e){return e&&(e===E[c]||e===Array[c])}function R(e){return P(e)||e===Function[c]}function O(e){var t;if(e){if(_)return _(e);var r=e[y]||e[c]||(e[a]?e[a][c]:null);t=e[w]||r,(0,o.v)(e,w)||(delete e[A],t=e[w]=e[A]||e[w],e[A]=r)}return t}function M(e,t){var r=[];if(T)r=T(e);else for(var n in e)"string"==typeof n&&(0,o.v)(e,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)t(r[i])}function N(e,t,r){return t!==a&&typeof e[t]===u&&(r||(0,o.v)(e,t))}function x(e){(0,s.zk)("DynamicProto: "+e)}function D(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return!0;return!1}function L(e,t,r,n,i){if(!P(e)){var s=r[l]=r[l]||{},a=s[t]=s[t]||{};!1!==s[g]&&(s[g]=!!i),M(r,(function(t){N(r,t,!1)&&r[t]!==n[t]&&(a[t]=r[t],delete r[t],(!(0,o.v)(e,t)||e[t]&&!e[t][d])&&(e[t]=function(e,t){var r=function(){var n=function(e,t,r,n){var i=null;if(e&&(0,o.v)(r,h)){var s=e[l]||{};if((i=(s[r[h]]||{})[t])||x("Missing ["+t+"] "+u),!i[p]&&!1!==s[g]){for(var a=!(0,o.v)(e,t),c=O(e),d=[];a&&c&&!R(c)&&!D(d,c);){var f=c[t];if(f){a=f===n;break}d.push(c),c=O(c)}try{a&&(e[t]=i),i[p]=1}catch(e){s[g]=!1}}}return i}(this,t,e,r)||function(e,t,r){var n=t[e];return n===r&&(n=O(t)[e]),typeof n!==u&&x("["+e+"] is not a "+u),n}(t,e,r);return n.apply(this,arguments)};return r[d]=1,r}(e,t)))}))}}function U(e,t){return(0,o.v)(e,c)?e.name||t||v:((e||{})[a]||{}).name||t||v}function F(e,t,r,n){(0,o.v)(e,c)||x("theClass is an invalid class definition.");var i=e[c];(function(e,t){if(_){for(var r=[],n=O(t);n&&!R(n)&&!D(r,n);){if(n===e)return!0;r.push(n),n=O(n)}return!1}return!0})(i,t)||x("["+U(e)+"] not in hierarchy of ["+U(t)+"]");var s=null;(0,o.v)(i,h)?s=i[h]:(s=f+U(e,"_")+"$"+k.n,k.n++,i[h]=s);var a=F[m],u=!!a[I];u&&n&&void 0!==n[I]&&(u=!!n[I]);var p=function(e){var t={};return M(e,(function(r){!t[r]&&N(e,r,!1)&&(t[r]=e[r])})),t}(t),v=function(e,t,r,n){function i(e,t,r){var i=t[r];if(i[d]&&n){var o=e[l]||{};!1!==o[g]&&(i=(o[t[h]]||{})[r]||i)}return function(){return i.apply(e,arguments)}}var o={};M(r,(function(e){o[e]=i(t,r,e)}));for(var s=O(e),a=[];s&&!R(s)&&!D(a,s);)M(s,(function(e){!o[e]&&N(s,e,!_)&&(o[e]=i(t,s,e))})),a.push(s),s=O(s);return o}(i,t,p,u);r(t,v);var y=!!_&&!!a[S];y&&n&&(y=!!n[S]),L(i,s,t,p,!1!==y)}F[m]=k.o},4292:(e,t,r)=>{"use strict";r.d(t,{Dv:()=>i,yN:()=>o});var n=r(6668);function i(e,t){return o(e,(function(e){t&&t({value:e,rejected:!1})}),(function(e){t&&t({rejected:!0,reason:e})}))}function o(e,t,r,i){var o=e;return(0,n.$X)(e)?(t||r)&&(o=e.then(t,r)):t&&t(e),i&&(o=function(e,t){var r=e;return t&&((0,n.$X)(e)?r=e.finally?e.finally(t):e.then((function(e){return t(),e}),(function(e){throw t(),e})):t()),r}(o,i)),o}},636:(e,t,r)=>{"use strict";r.d(t,{Xf:()=>q,Qo:()=>F});var n,i,o,s,a,c=r(2871),u=r(6668),l=r(8693),d=r(755),h=r(3076),f=r(1636),p=r(6336),g=r(7403),m=r(3517),v=r(5439),y=r(4292),w=!1,C=["pending","resolving","resolved","rejected"],A=r(8965),I="dispatchEvent",S="Promise",E="unhandledRejection",_=E.toLowerCase(),T=[],b=0,k=10;function P(e){return(0,u.Tn)(e)?e.toString():(0,l.m)(e)}function R(e){return function(t){var r=(0,d.K)(arguments,1);return e((function(e,r){try{var n=[],i=1;(0,v.I)(t,(function(t,o){t&&(i++,(0,y.yN)(t,(function(t){n[o]=t,0==--i&&e(n)}),r))})),0==--i&&e(n)}catch(e){r(e)}}),r)}}function O(e){return function(t){var r=(0,d.K)(arguments,1);return(0,u.$X)(t)?t:e((function(e){e(t)}),r)}}function M(e){return function(t){var r=(0,d.K)(arguments,1);return e((function(e,r){r(t)}),r)}}var N,x,D=function(e){(0,v.I)(e,(function(e){try{e()}catch(e){}}))};function L(e,t){return function(e,t,r){var c,v,y=(0,d.K)(arguments,3),R=0,O=!1,M=[],N=b++,x=T.length>0?T[T.length-1]:void 0,D=!1,L=null;!a&&(a=(0,h.O7)(S+"RejectionEvent"));var U,F,q,H,j=function(t,r){try{return T.push(N),D=!0,L&&L.cancel(),L=null,e((function(e,n){M.push((function(){try{var i=2===R?t:r,o=(0,u.b0)(i)?c:(0,u.Tn)(i)?i(c):i;(0,u.$X)(o)?o.then(e,n):i?e(o):3===R?n(o):e(o)}catch(e){n(e)}})),O&&z()}),y)}finally{T.pop()}},B=function(){return C[R]},z=function(){if(M.length>0){var e=M.slice();M=[],D=!0,t(e),L&&L.cancel(),L=null}},$=function(e,t){return function(r){if(R===t){if(2===e&&(0,u.$X)(r))return R=1,void r.then($(2,1),$(3,1));R=e,O=!0,c=r,z(),D||3!==e||L||(L=(0,f.dR)(V,k))}}},V=function(){D||((0,h.Ll)()?process.emit(E,c,v):function(e,t,r,n){var i=(0,h.YE)();!s&&(s=(0,A.I)((function(){var e;return i&&i.createEvent&&(e=i.createEvent("Event")),!!e&&e.initEvent}),null));var o=s.v?i.createEvent("Event"):n?new Event(t):{};if(r&&r(o),s.v&&o.initEvent(t,!1,!0),o&&e[I])e[I](o);else{var a=e["on"+t];if(a)a(o);else{var c=(0,h.zS)("console");c&&(c.error||c.log)(t,(0,l.m)(o))}}}((0,h.zk)()||(0,h.mS)(),_,(function(e){return(0,p.vF)(e,"promise",{g:function(){return v}}),e.reason=c,e}),!!a.v))};return v={then:j,catch:function(e){return j(void 0,e)},finally:function(e){var t=e,r=e;return(0,u.Tn)(e)&&(t=function(t){return e&&e(),t},r=function(t){throw e&&e(),t}),j(t,r)}},(0,p.Ux)(v,"state",{get:B}),w&&(U=v,F=B,q=function(){return(0,u.SZ)(c)},H=function(){return D},n=n||{toString:function(){return"[[PromiseState]]"}},i=i||{toString:function(){return"[[PromiseResult]]"}},o=o||{toString:function(){return"[[PromiseIsHandled]]"}},(0,p.Ux)(U,n,{get:F}),(0,p.Ux)(U,i,{get:q}),(0,p.Ux)(U,o,{get:H})),(0,g.Lo)()&&(v[(0,g.Y0)(11)]="IPromise"),v.toString=function(){return"IPromise"+(w?"["+N+((0,u.b0)(x)?"":":"+x)+"]":"")+" "+B()+(O?" - "+P(c):"")},function(){(0,u.Tn)(r)||(0,m.zk)(S+": executor is not a function - "+P(r));var e=$(3,0);try{r.call(v,$(2,0),e)}catch(t){e(t)}}(),v}(L,function(e){var t=(0,u.Et)(e)?e:0;return function(e){(0,f.dR)((function(){D(e)}),t)}}(t),e,t)}function U(e,t){!N&&(N=(0,h.O7)(S));var r=N.v;if(!r)return L(e);(0,u.Tn)(e)||(0,m.zk)(S+": executor is not a function - "+(0,l.m)(e));var n=0,i=new r((function(t,r){e((function(e){n=2,t(e)}),(function(e){n=3,r(e)}))}));return(0,p.Ux)(i,"state",{get:function(){return C[n]}}),i}function F(e,t){return!x&&(x=(0,c.nR)((function(){return U}))),x.v.call(this,e,t)}R(L),O(L),M(L),R(U),O(U),M(U);var q=R(F);O(F),M(F)},1187:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var n=r(6668),i=r(7403);function o(e){return!!e&&(0,n.Tn)(e.next)}var s,a=r(2871),c=r(4016),u=r(655);function l(e,t){var r;return!(0,n.b0)(t)&&e&&((0,n.cy)(t)?(0,u.p)(e.push,e,t):o(t)||(r=t,!(0,n.kF)(r)&&(0,n.Tn)(r[(0,i.Y0)(3)]))?function(e,t,r){if(e&&(o(e)||(!s&&(s=(0,a.nR)((function(){return(0,i.Y0)(3)}))),e=e[s.v]?e[s.v]():null),o(e))){var n=void 0,u=void 0;try{for(var l=0;!(u=e.next())[c.DH]&&-1!==t.call(e,u[c.Qg],l,e);)l++}catch(t){n={e:t},e.throw&&(u=null,e.throw(n))}finally{try{u&&!u[c.DH]&&e.return&&e.return(u)}finally{if(n)throw n.e}}}}(t,(function(t){e.push(t)})):e.push(t)),e}},5439:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var n=r(4016);function i(e,t,r){if(e)for(var i=e[n.pi]>>>0,o=0;o<i&&(!(o in e)||-1!==t.call(r||e,e[o],o,e));o++);}},6832:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var n=r(4016),i=r(1742),o=(0,i.lK)(n.BA,n.wM);(0,i.lK)(n.uP,n.wM)},4335:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});var n=r(4016),i=(0,r(1742).lK)("map",n.wM)},1011:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(4016),i=(0,r(1742).lK)("reduce",n.wM)},755:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(4016),i=(0,r(1742).lK)(n.$9,n.wM)},655:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var n=(0,r(1742).xC)("apply")},5683:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var n=(0,r(1742).xC)("call")},6668:(e,t,r)=>{"use strict";r.d(t,{$P:()=>w,$X:()=>S,Cb:()=>p,Ed:()=>u,Et:()=>C,Gv:()=>v,Kg:()=>g,Lm:()=>A,O9:()=>f,SZ:()=>c,Tn:()=>m,b0:()=>l,bJ:()=>I,cy:()=>y,ez:()=>s,hX:()=>d,kF:()=>h,wo:()=>E,zz:()=>_});var n=r(4016),i=r(8827),o=[n.An,n.uk,n.Jx,n.ZH,"symbol","bigint"];function s(e){return function(t){return typeof t===e}}function a(e){var t="[object "+e+"]";return function(e){return!(!e||c(e)!==t)}}function c(e){return n.Wy.toString.call(e)}function u(e,t){return typeof e===t}function l(e){return typeof e===n.ZH||e===n.ZH}function d(e){return e===n.M_||l(e)}function h(e){return e===n.M_||!f(e)}function f(e){return!!e||e!==n.DQ}var p=function(e){return e!==n.qv&&-1!==o.indexOf(e)},g=s(n.An),m=s(n.H3);function v(e){return!(!e&&d(e)||!e||typeof e!==n.qv)}var y=n.kV.isArray,w=a("Date"),C=s(n.uk),A=s(n.Jx),I=(a("RegExp"),a("File"),a("FormData"),a("Blob"),a("ArrayBuffer"),a("Error"));function S(e){return!!e&&m(e.then)}function E(e){return!e||!(0,i.y)((function(){return e&&0+e}),e)}function _(e){return!(!e||(0,i.y)((function(){return!(e&&0+e)}),!e))}},225:(e,t,r)=>{"use strict";function n(){return(Date.now||i)()}function i(){return(new Date).getTime()}r.d(t,{f:()=>n})},8693:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(4016),i=r(6668);function o(e,t){var r=n.wg;if((0,i.bJ)(e))r="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'";else try{r=JSON.stringify(e,n.M_,t?(0,i.Et)(t)?t:4:n.DQ)}catch(e){r=" - "+o(e,t)}return(0,i.SZ)(e)+": "+r}},5659:(e,t,r)=>{"use strict";r.d(t,{WS:()=>s,Tm:()=>a,fn:()=>c});var n=r(9018);function i(e,t,r,i){var o={};return(0,n.z)(e,(function(e,n){o[e]=t?n:e,o[n]=r?n:e})),i(o)}var o=r(1324);function s(e){return i(e,1,0,o.ZH)}function a(e){return i(e,0,0,o.ZH)}function c(e){return function(e){var t={};return(0,n.z)(e,(function(e,r){t[e]=r[1],t[r[0]]=r[1]})),(0,o.ZH)(t)}(e)}},3076:(e,t,r)=>{"use strict";r.d(t,{JK:()=>E,Ll:()=>_,O7:()=>p,Vd:()=>w,Wt:()=>v,YE:()=>y,mS:()=>g,tw:()=>S,w3:()=>I,w9:()=>A,zS:()=>m,zk:()=>C});var n,i,o,s,a,c,u=r(4016),l=r(1382),d=r(8965),h=r(2871),f="window",p=function(e){return(0,d.I)((function(){return m(e)||u.DQ}),u.DQ)},g=function(e){return(!n||!1===e||h.nr&&h.nr.lzy&&!n.b)&&(n=(0,d.I)(l.u,u.M_)),n.v},m=function(e,t){var r=n&&!1!==t?n.v:g(t);return r&&r[e]?r[e]:e===f&&i?i.v:u.M_},v=function(){return!!y()},y=function(){return(!o||h.nr&&h.nr.lzy&&!o.b)&&(o=p("document")),o.v},w=function(){return!!C()},C=function(){return(!i||h.nr&&h.nr.lzy&&!i.b)&&(i=p(f)),i.v},A=function(){return!!I()},I=function(){return(!s||h.nr&&h.nr.lzy&&!s.b)&&(s=p("navigator")),s.v},S=function(){return!!E()},E=function(){return(!a||h.nr&&h.nr.lzy&&!a.b)&&(a=p("history")),a.v},_=function(){return!c&&(c=(0,d.I)((function(){return!(!process||!(process.versions||{}).node)}),!1)),c.v}},2871:(e,t,r)=>{"use strict";r.d(t,{nR:()=>c,nr:()=>n});var n,i=r(4016),o=r(1382),s=r(6336),a=function(){n=(0,o.Z)(),a=i.M_};function c(e){var t={};return a&&a(),t.b=n.lzy,(0,s.Ux)(t,"v",{configurable:!0,get:function(){var r=e();return n.lzy||((0,s.Ux)(t,"v",{value:r}),t.b&&delete t.b),n.lzy&&t.b!==n.lzy&&(t.b=n.lzy),r}}),t}},4657:(e,t,r)=>{"use strict";r.d(t,{R:()=>i});var n=r(4016),i=(0,r(1742).k5)(n.pi)},558:(e,t,r)=>{"use strict";r.d(t,{FJ:()=>a,UU:()=>c});var n,i=r(225),o=r(3076),s=r(2871);function a(){return(!n||!n.b&&s.nr&&s.nr.lzy)&&(n=(0,o.O7)("performance")),n.v}function c(){var e=a();return e&&e.now?e.now():(0,i.f)()}},8827:(e,t,r)=>{"use strict";function n(e,t){var r=t;try{r=e()}catch(e){}return r}r.d(t,{y:()=>n})},8965:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var n=r(2871),i=r(8827);function o(e,t){return(0,n.nR)((function(){return(0,i.y)(e,t)}))}},3517:(e,t,r)=>{"use strict";function n(e){throw new Error(e)}function i(e){throw new TypeError(e)}r.d(t,{$8:()=>n,zk:()=>i})},4016:(e,t,r)=>{"use strict";r.d(t,{$9:()=>S,An:()=>h,BA:()=>v,BB:()=>p,DH:()=>C,DQ:()=>n,Fs:()=>l,H3:()=>a,I3:()=>T,Jx:()=>s,M_:()=>i,PF:()=>g,Qg:()=>A,Wy:()=>_,ZH:()=>f,fL:()=>m,kV:()=>P,o_:()=>I,pi:()=>w,qv:()=>u,r5:()=>d,s6:()=>E,sW:()=>b,tq:()=>k,uP:()=>y,uk:()=>c,wM:()=>R,wg:()=>o});var n=void 0,i=null,o="",s="boolean",a="function",c="number",u="object",l="prototype",d="__proto__",h="string",f="undefined",p="constructor",g="Symbol",m="_polyfill",v="indexOf",y="lastIndexOf",w="length",C="done",A="value",I="name",S="slice",E=Object,_=E[l],T=String,b=T[l],k=Math,P=Array,R=P[l]},1382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,u:()=>s});var n,i=r(4016),o="__tsUtils$gblCfg";function s(){var e;return typeof globalThis!==i.ZH&&(e=globalThis),e||typeof self===i.ZH||(e=self),e||typeof window===i.ZH||(e=window),e||typeof global===i.ZH||(e=global),e}function a(){if(!n){var e=s()||{};n=e[o]=e[o]||{}}return n}},1742:(e,t,r)=>{"use strict";r.d(t,{b2:()=>d,k5:()=>h,lK:()=>l,xC:()=>u});var n=r(8693),i=r(3517),o=r(5977),s=r(4016),a=s.wM[s.$9],c=function(e,t){(0,i.zk)("'"+(0,o.o)(e)+"' not defined for "+(0,n.m)(t))},u=function(e){return function(t){return t[e].apply(t,a.call(arguments,1))}},l=function(e,t){var r=t&&t[e];return function(t){var n=t&&t[e]||r;if(n)return n.apply(t,a.call(arguments,1));c(e,t)}},d=function(e,t,r){var n=t&&t[e];return function(t){var i=t&&t[e]||n;if(i||r){var o=arguments;return(i||r).apply(t,i?a.call(o,1):o)}c(e,t)}};function h(e){return function(t){return t[e]}}},411:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var n=r(4016),i=r(8693),o=n.s6.create||function(e){if(!e)return{};var t=typeof e;if(t!==n.qv&&t!==n.H3)throw new TypeError("Prototype must be an Object or function: "+(0,i.m)(e));function r(){}return r[n.Fs]=e,new r}},6336:(e,t,r)=>{"use strict";r.d(t,{Ux:()=>u,r:()=>l,vF:()=>d});var n=r(4016),i=r(6668),o=r(9018),s=r(695),a={e:"enumerable",c:"configurable",v:n.Qg,w:"writable",g:"get",s:"set"};function c(e){var t={};if(t[a.c]=!0,t[a.e]=!0,e.l){t.get=function(){return e.l.v};var r=(0,s.k)(e.l,"v");r&&r.set&&(t.set=function(t){e.l.v=t})}return(0,o.z)(e,(function(e,r){t[a[e]]=(0,i.b0)(r)?t[a[e]]:r})),t}var u=n.s6.defineProperty;function l(e,t,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),u(e,t,c(s))}function d(e,t,r){return u(e,t,c(r))}n.s6.defineProperties},9018:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var n=r(6668),i=r(9452);function o(e,t,r){if(e&&(0,n.Gv)(e))for(var o in e)if((0,i.K)(e,o)&&-1===t.call(r||e,o,e[o]))break}},695:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var n=r(4016).s6.getOwnPropertyDescriptor},9452:(e,t,r)=>{"use strict";r.d(t,{K:()=>s});var n=r(4016),i=r(695),o=r(3266),s=n.s6.hasOwn||function(e,t){return(0,o.v)(e,t)||!!(0,i.k)(e,t)}},3266:(e,t,r)=>{"use strict";r.d(t,{v:()=>i});var n=r(4016);function i(e,t){return e&&n.Wy.hasOwnProperty.call(e,t)}},7460:(e,t,r)=>{"use strict";r.d(t,{Q:()=>d});var n,i,o,s=r(5683),a=r(3076),c=r(4016),u=r(3266),l=r(1324);function d(e){if(!e||typeof e!==c.qv)return!1;o||(o=!(0,a.Vd)()||(0,a.zk)());var t=!1;if(e!==o){i||(n=Function[c.Fs].toString,i=(0,s.n)(n,c.s6));try{var r=(0,l.rL)(e);(t=!r)||((0,u.v)(r,c.BB)&&(r=r[c.BB]),t=r&&typeof r===c.H3&&n.call(r)===i)}catch(e){}}return t}},1324:(e,t,r)=>{"use strict";r.d(t,{vE:()=>u,ZH:()=>d,N6:()=>h,rL:()=>p,cG:()=>l,js:()=>f});var n=r(4016),i=r(6668),o=r(3517),s=r(9018),a=n.s6.freeze,c=function(e){return e},u=n.s6.assign;function l(e){return(0,i.Gv)(e)&&e!==n.M_||(0,o.zk)("objKeys called on non-object"),n.s6.keys(e)}function d(e){return a&&(0,s.z)(e,(function(e,t){((0,i.cy)(t)||(0,i.Gv)(t))&&a(t)})),h(e)}var h=a||c,f=n.s6.seal||c,p=n.s6.getPrototypeOf||function(e){return e[n.r5]||n.M_};n.s6.entries,n.s6.values},5977:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n=r(4016).I3},2494:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var n=r(6668),i=r(8693),o=r(3517),s=r(4016),a=r(1742),c=r(5977),u=r(3178),l=(0,a.b2)("endsWith",s.sW,(function(e,t,r){(0,n.Kg)(e)||(0,o.zk)("'"+(0,i.m)(e)+"' is not a string");var a=(0,n.Kg)(t)?t:(0,c.o)(t),l=a[s.pi],d=e[s.pi],h=!(0,n.b0)(r)&&r<d?r:d;return(0,u.P0)(e,h-l,h)===a}))},5881:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var n=r(4016),i=r(1742),o=(0,i.lK)(n.BA,n.sW);(0,i.lK)(n.uP,n.sW)},7931:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var n=r(6668),i=r(8693),o=r(3517),s=r(4016),a=r(1742),c=r(5977),u=r(3178),l=(0,a.b2)("startsWith",s.sW,(function(e,t,r){(0,n.Kg)(e)||(0,o.zk)("'"+(0,i.m)(e)+"' is not a string");var a=(0,n.Kg)(t)?t:(0,c.o)(t),l=a[s.pi],d=r>0?r:0;return(0,u.P0)(e,d,d+l)===a}))},3178:(e,t,r)=>{"use strict";r.d(t,{ZW:()=>h,hK:()=>d,P0:()=>l});var n=r(6668),i=r(8693),o=r(3517),s=r(4016),a=r(1742),c=(s.tq.min,s.tq.max),u=(0,a.lK)(s.$9,s.sW),l=(0,a.lK)("substring",s.sW),d=(0,a.b2)("substr",s.sW,(function(e,t,r){return(0,n.hX)(e)&&(0,o.zk)("'polyStrSubstr called with invalid "+(0,i.m)(e)),r<0?s.wg:((t=t||0)<0&&(t=c(t+e[s.pi],0)),(0,n.b0)(r)?u(e,t):u(e,t,t+r))}));function h(e,t){return l(e,0,t)}},8993:(e,t,r)=>{"use strict";r.d(t,{EH:()=>h});var n=r(4016),i=r(1742),o=r(6668),s=r(8693),a=r(3517);function c(e){return function(t){return(0,o.hX)(t)&&(0,a.zk)("strTrim called ["+(0,s.m)(t)+"]"),t&&t.replace&&(t=t.replace(e,n.wg)),t}}var u=c(/^\s+|(?=\s)\s+$/g),l=c(/^\s+/g),d=c(/(?=\s)\s+$/g),h=(0,i.b2)("trim",n.sW,u);(0,i.b2)("trimStart",n.sW,l),(0,i.b2)("trimEnd",n.sW,d)},7403:(e,t,r)=>{"use strict";r.d(t,{Y0:()=>E,Lo:()=>I,jj:()=>_,eC:()=>T});var n,i=r(4016),o=(0,r(5659).Tm)({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),s=r(9452),a=r(5977),c=r(1382),u=r(1324),l="_urid";var d={};function h(e){var t={description:(0,a.o)(e),toString:function(){return i.PF+"("+e+")"}};return t[i.fL]=!0,t}function f(e){var t=function(){if(!n){var e=(0,c.Z)();n=e.gblSym=e.gblSym||{k:{},s:{}}}return n}();if(!(0,s.K)(t.k,e)){var r=h(e),i=(0,u.cG)(t.s).length;r[l]=function(){return i+"_"+r.toString()},t.k[e]=r,t.s[r[l]()]=(0,a.o)(e)}return t.k[e]}var p,g,m,v=r(6668),y=r(2871),w=r(8965),C=r(3076);function A(e){return(0,w.I)((function(){return p.v?p.v[e]:i.DQ}),i.DQ)}function I(){return!!S()}function S(){var e=!p||y.nr&&y.nr.lzy&&!p.b;return e&&(p=(0,C.O7)(i.PF)),(!g||e)&&(g=A("for")),(!m||e)&&(m=A("keyFor")),p.v}function E(e,t){var r=o[e];return(!p||y.nr.lzy&&!p.b)&&S(),p.v?p.v[r||e]:t?i.DQ:function(e){var t,r=o[e];return r&&(t=d[r]=d[r]||h(i.PF+"."+r)),t}(e)}function _(e,t){return(!p||y.nr.lzy&&!p.b)&&S(),p.v?p.v(e):t?i.M_:h(e)}function T(e){return(!g||y.nr.lzy&&!p.b)&&S(),(g.v||f)(e)}(0,v.ez)("symbol")},1636:(e,t,r)=>{"use strict";r.d(t,{AH:()=>g,dR:()=>f,vK:()=>p});var n=r(755),i=r(655),o=r(6668),s=r(4016),a=r(6336),c="ref",u="un"+c,l="hasRef",d="enabled";function h(e,t,r,h){var f=(0,o.cy)(r),p=f?r.length:0,g=(p>0?r[0]:f?s.DQ:r)||setTimeout,m=(p>1?r[1]:s.DQ)||clearTimeout,v=h[0];h[0]=function(){y.dn(),(0,i.p)(v,e,(0,n.K)(arguments))};var y=function(t,r,n){var o,h,f=!0,p=t?r(s.M_):s.M_,g=function(){return f=!1,p&&p[u]&&p[u](),h},v=function(){return p=r(p),f||g(),h},y=function(){p&&function(t){(0,i.p)(m,e,[t])}(p),p=s.M_};return(o={cancel:y,refresh:v})[l]=function(){return p&&p[l]?p[l]():f},o[c]=function(){return f=!0,p&&p[c]&&p[c](),h},o[u]=g,o[d]=!1,h=o,(0,a.Ux)(h,d,{get:function(){return!!p},set:function(e){!e&&p&&y(),e&&!p&&v()}}),{h,dn:function(){p=s.M_}}}(t,(function(t){if(t){if(t.refresh)return t.refresh(),t;(0,i.p)(m,e,[t])}return(0,i.p)(g,e,h)}));return y.h}function f(e,t){return h(this,!0,s.DQ,(0,n.K)(arguments))}function p(e,t,r){return h(this,!0,e,(0,n.K)(arguments,1))}function g(e,t){return h(this,!1,s.DQ,(0,n.K)(arguments))}},5396:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,n)=>{let i=await(async(e,t,n)=>{const i=await Promise.resolve().then((()=>o(r(670)))),s=await Promise.resolve().then((()=>o(r(8916)))),a=new i.AppInsightsCore,c=new s.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(n){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:n};u.extensionConfig[c.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(u,[]),a.addTelemetryInitializer((e=>{l&&(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),a})(e,t,n);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise(((e,t)=>{i?i.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise((e=>{i?i.unload(!1,(()=>{e(),i=void 0}),1e3):e()}))}}},2468:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const s=r(740),a=r(8393);t.appInsightsClientFactory=async(e,t,n)=>{let i;try{const n=await Promise.resolve().then((()=>o(r(1380))));if(i=new n.ApplicationInsights({instrumentationKey:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),t){i.config.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:t};i.config.extensionConfig[s.BreezeChannelIdentifier]=e}}catch(e){return Promise.reject(e)}return{logEvent:(e,t)=>{const r={...t?.properties,...t?.measurements};n?.length&&a.TelemetryUtil.applyReplacements(r,n),i?.track({name:e,data:r,baseType:"EventData",baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})},flush:async()=>{i?.flush(!1)},dispose:async()=>new Promise((e=>{i?.unload(!0,(()=>{e(),i=void 0}),1e3)}))}}},6548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,r){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logUsage(e,{properties:t,measurements:r})}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1)}sendRawTelemetryEvent(e,t,r){const n={...t};for(const e of Object.keys(n??{})){const t=n[e];"string"==typeof e&&void 0!==t&&(n[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,n,r)}sendDangerousTelemetryEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,r,!0)}internalSendTelemetryErrorEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logError(e,{properties:t,measurements:r})}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!1)}sendDangerousTelemetryErrorEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},2396:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(r||(r={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=r.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==r.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==r.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const n={stack:e.stack,message:e.message,name:e.name};t?t.properties={...t.properties,...n}:t={properties:n},this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===r.NOT_INSTANTIATED&&(this._instantiationStatus=r.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=r.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=r.INSTANTIATED})))}}},8393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class r{static applyReplacements(e,t){for(const r of Object.keys(e))for(const n of t)n.lookup.test(r)&&(void 0!==n.replacementString?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.0"}}static getInstance(){return r._instance||(r._instance=new r),r._instance}}t.TelemetryUtil=r},1170:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(857)),a=o(r(1398)),c=o(r(5692)),u=r(6548),l=r(2396),d=r(8393),h=r(5396),f=r(2468);function p(){return{sendPOST:(e,t)=>{const r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const n=c.request(e.urlString,r,(e=>{e.on("data",(function(r){t(e.statusCode??200,e.headers,r.toString())})),e.on("error",(function(){t(0,{})}))}));n.write(e.data,(e=>{e&&t(0,{})})),n.end()}catch{t(0,{})}}}}class g extends u.BaseTelemetryReporter{constructor(e,t){let r=e=>(0,f.appInsightsClientFactory)(e,p(),t);d.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(r=e=>(0,h.oneDataSystemClientFactory)(e,a,p()));const n={release:s.release(),platform:s.platform(),architecture:s.arch()},i=new l.BaseTelemetrySender(e,r);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,a,{additionalCommonProperties:d.TelemetryUtil.getAdditionalCommonProperties(n)})}}t.default=g},1045:(e,t,r)=>{"use strict";var n=r(181).Buffer,i=r(181).SlowBuffer;function o(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}e.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=n.prototype.equal,a=i.prototype.equal;o.restore=function(){n.prototype.equal=s,i.prototype.equal=a}},2010:(e,t,r)=>{"use strict";var n=r(2861).Buffer,i=r(3527),o=128;function s(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function a(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=o&&--n,n}e.exports={derToJose:function(e,t){e=s(e);var r=i(t),o=r+1,a=e.length,c=0;if(48!==e[c++])throw new Error('Could not find expected "seq"');var u=e[c++];if(129===u&&(u=e[c++]),a-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(a-c)+'" remaining');if(2!==e[c++])throw new Error('Could not find expected "int" for "r"');var l=e[c++];if(a-c-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(a-c-2)+'" available');if(o<l)throw new Error('"r" specified length of "'+l+'", max of "'+o+'" is acceptable');var d=c;if(c+=l,2!==e[c++])throw new Error('Could not find expected "int" for "s"');var h=e[c++];if(a-c!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(a-c)+'"');if(o<h)throw new Error('"s" specified length of "'+h+'", max of "'+o+'" is acceptable');var f=c;if((c+=h)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain');var p=r-l,g=r-h,m=n.allocUnsafe(p+l+g+h);for(c=0;c<p;++c)m[c]=0;e.copy(m,c,d+Math.max(-p,0),d+l);for(var v=c=r;c<v+g;++c)m[c]=0;return e.copy(m,c,f+Math.max(-g,0),f+h),(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=s(e);var r=i(t),c=e.length;if(c!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+c+'"');var u=a(e,0,r),l=a(e,r,e.length),d=r-u,h=r-l,f=2+d+1+1+h,p=f<o,g=n.allocUnsafe((p?2:3)+f),m=0;return g[m++]=48,p?g[m++]=f:(g[m++]=129,g[m++]=255&f),g[m++]=2,g[m++]=d,u<0?(g[m++]=0,m+=e.copy(g,m,0,r)):m+=e.copy(g,m,u,r),g[m++]=2,g[m++]=h,l<0?(g[m++]=0,e.copy(g,m,r)):e.copy(g,m,r+l),g}}},3527:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=r[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},7260:(e,t,r)=>{var n=r(5747);e.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r)return null;var i=r.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:r.header,payload:i,signature:r.signature}:i}},4040:(e,t,r)=>{e.exports={decode:r(7260),verify:r(1691),sign:r(7651),JsonWebTokenError:r(1741),NotBeforeError:r(3726),TokenExpiredError:r(8980)}},1741:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},3726:(e,t,r)=>{var n=r(1741),i=function(e,t){n.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(n.prototype)).constructor=i,e.exports=i},8980:(e,t,r)=>{var n=r(1741),i=function(e,t){n.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(n.prototype)).constructor=i,e.exports=i},1977:(e,t,r)=>{const n=r(9589);e.exports=n.satisfies(process.version,">=15.7.0")},4977:(e,t,r)=>{var n=r(9589);e.exports=n.satisfies(process.version,"^6.12.0 || >=8.0.0")},4623:(e,t,r)=>{const n=r(9589);e.exports=n.satisfies(process.version,">=16.9.0")},855:(e,t,r)=>{var n=r(6585);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=n(e);if(void 0===i)return;return Math.floor(r+i/1e3)}return"number"==typeof e?r+e:void 0}},7019:(e,t,r)=>{const n=r(1977),i=r(4623),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},s={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const r=t.asymmetricKeyType;if(!r)return;const a=o[r];if(!a)throw new Error(`Unknown key type "${r}".`);if(!a.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${a.join(", ")}.`);if(n)switch(r){case"ec":const r=t.asymmetricKeyDetails.namedCurve,n=s[e];if(r!==n)throw new Error(`"alg" parameter "${e}" requires curve "${n}".`);break;case"rsa-pss":if(i){const r=parseInt(e.slice(-3),10),{hashAlgorithm:n,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(n!==`sha${r}`||i!==n)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>r>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},7651:(e,t,r)=>{const n=r(855),i=r(4977),o=r(7019),s=r(5747),a=r(6111),c=r(7914),u=r(8928),l=r(3639),d=r(9001),h=r(5931),f=r(7083),{KeyObject:p,createSecretKey:g,createPrivateKey:m}=r(6982),v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&v.splice(3,0,"PS256","PS384","PS512");const y={expiresIn:{isValid:function(e){return u(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},w={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function C(e,t,r,n){if(!d(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach((function(i){const o=e[i];if(o){if(!o.isValid(r[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+n+'"')}))}const A={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},I=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,i){"function"==typeof r?(i=r,r={}):r=r||{};const a="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:r.algorithm||"HS256",typ:a?"JWT":void 0,kid:r.keyid},r.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==r.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof p))try{t=m(t)}catch(e){try{t=g("string"==typeof t?Buffer.from(t):t)}catch(e){return u(new Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return u(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return u(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!r.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return u(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return u(new Error("payload is required"));if(a){try{!function(e){C(w,!0,e,"payload")}(e)}catch(e){return u(e)}r.mutatePayload||(e=Object.assign({},e))}else{const t=I.filter((function(e){return void 0!==r[e]}));if(t.length>0)return u(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){C(y,!1,e,"options")}(r)}catch(e){return u(e)}if(!r.allowInvalidAsymmetricKeyTypes)try{o(c.alg,t)}catch(e){return u(e)}const l=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:a&&(e.iat=l),void 0!==r.notBefore){try{e.nbf=n(r.notBefore,l)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=n(r.expiresIn,l)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(A).forEach((function(t){const n=A[t];if(void 0!==r[t]){if(void 0!==e[n])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=r[t]}}));const d=r.encoding||"utf8";if("function"!=typeof i){let n=s.sign({header:c,payload:e,secret:t,encoding:d});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&n.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return n}i=i&&f(i),s.createSign({header:c,privateKey:t,payload:e,encoding:d}).once("error",i).once("done",(function(e){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));i(null,e)}))}},1691:(e,t,r)=>{const n=r(1741),i=r(3726),o=r(8980),s=r(7260),a=r(855),c=r(7019),u=r(4977),l=r(5747),{KeyObject:d,createSecretKey:h,createPublicKey:f}=r(6982),p=["RS256","RS384","RS512"],g=["ES256","ES384","ES512"],m=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];u&&(p.splice(p.length,0,"PS256","PS384","PS512"),m.splice(m.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,r,u){let y;if("function"!=typeof r||u||(u=r,r={}),r||(r={}),r=Object.assign({},r),y=u||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return y(new n("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return y(new n("nonce must be a non-empty string"));if(void 0!==r.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof r.allowInvalidAsymmetricKeyTypes)return y(new n("allowInvalidAsymmetricKeyTypes must be a boolean"));const w=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return y(new n("jwt must be provided"));if("string"!=typeof e)return y(new n("jwt must be a string"));const C=e.split(".");if(3!==C.length)return y(new n("jwt malformed"));let A;try{A=s(e,{complete:!0})}catch(e){return y(e)}if(!A)return y(new n("invalid token"));const I=A.header;let S;if("function"==typeof t){if(!u)return y(new n("verify must be called asynchronous if secret or public key is provided as a callback"));S=t}else S=function(e,r){return r(null,t)};return S(I,(function(t,s){if(t)return y(new n("error in secret or public key callback: "+t.message));const u=""!==C[2].trim();if(!u&&s)return y(new n("jwt signature is required"));if(u&&!s)return y(new n("secret or public key must be provided"));if(!u&&!r.algorithms)return y(new n('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=s&&!(s instanceof d))try{s=f(s)}catch(e){try{s=h("string"==typeof s?Buffer.from(s):s)}catch(e){return y(new n("secretOrPublicKey is not valid key material"))}}if(r.algorithms||("secret"===s.type?r.algorithms=v:["rsa","rsa-pss"].includes(s.asymmetricKeyType)?r.algorithms=m:"ec"===s.asymmetricKeyType?r.algorithms=g:r.algorithms=p),-1===r.algorithms.indexOf(A.header.alg))return y(new n("invalid algorithm"));if(I.alg.startsWith("HS")&&"secret"!==s.type)return y(new n(`secretOrPublicKey must be a symmetric key when using ${I.alg}`));if(/^(?:RS|PS|ES)/.test(I.alg)&&"public"!==s.type)return y(new n(`secretOrPublicKey must be an asymmetric key when using ${I.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{c(I.alg,s)}catch(e){return y(e)}let S;try{S=l.verify(e,A.header.alg,s)}catch(e){return y(e)}if(!S)return y(new n("invalid signature"));const E=A.payload;if(void 0!==E.nbf&&!r.ignoreNotBefore){if("number"!=typeof E.nbf)return y(new n("invalid nbf value"));if(E.nbf>w+(r.clockTolerance||0))return y(new i("jwt not active",new Date(1e3*E.nbf)))}if(void 0!==E.exp&&!r.ignoreExpiration){if("number"!=typeof E.exp)return y(new n("invalid exp value"));if(w>=E.exp+(r.clockTolerance||0))return y(new o("jwt expired",new Date(1e3*E.exp)))}if(r.audience){const e=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(E.aud)?E.aud:[E.aud]).some((function(t){return e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))})))return y(new n("jwt audience invalid. expected: "+e.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&E.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(E.iss)))return y(new n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&E.sub!==r.subject)return y(new n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&E.jti!==r.jwtid)return y(new n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&E.nonce!==r.nonce)return y(new n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof E.iat)return y(new n("iat required when maxAge is specified"));const e=a(r.maxAge,E.iat);if(void 0===e)return y(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(w>=e+(r.clockTolerance||0))return y(new o("maxAge exceeded",new Date(1e3*e)))}if(!0===r.complete){const e=A.signature;return y(null,{header:I,payload:E,signature:e})}return y(null,E)}))}},8789:(e,t,r)=>{var n=r(1045),i=r(2861).Buffer,o=r(6982),s=r(2010),a=r(9023),c="secret must be a string or buffer",u="key must be a string or a buffer",l="key must be a string, a buffer or an object",d="function"==typeof o.createPublicKey;function h(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!d)throw m(u);if("object"!=typeof e)throw m(u);if("string"!=typeof e.type)throw m(u);if("string"!=typeof e.asymmetricKeyType)throw m(u);if("function"!=typeof e.export)throw m(u)}}function f(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m(l)}function p(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1),r=a.format.bind(a,e).apply(null,t);return new TypeError(r)}function v(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,r){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!d)throw m(c);if("object"!=typeof e)throw m(c);if("secret"!==e.type)throw m(c);if("function"!=typeof e.export)throw m(c)}}(r),t=v(t);var n=o.createHmac("sha"+e,r);return p((n.update(t),n.digest("base64")))}}function w(e){return function(t,r,o){var s=y(e)(t,o);return n(i.from(r),i.from(s))}}function C(e){return function(t,r){f(r),t=v(t);var n=o.createSign("RSA-SHA"+e);return p((n.update(t),n.sign(r,"base64")))}}function A(e){return function(t,r,n){h(n),t=v(t),r=g(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function I(e){return function(t,r){f(r),t=v(t);var n=o.createSign("RSA-SHA"+e);return p((n.update(t),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function S(e){return function(t,r,n){h(n),t=v(t),r=g(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function E(e){var t=C(e);return function(){var r=t.apply(null,arguments);return s.derToJose(r,"ES"+e)}}function _(e){var t=A(e);return function(r,n,i){return n=s.joseToDer(n,"ES"+e).toString("base64"),t(r,n,i)}}function T(){return function(){return""}}function b(){return function(e,t){return""===t}}d&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:y,rs:C,ps:I,es:E,none:T},r={hs:w,rs:A,ps:S,es:_,none:b},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:r[i](o)}}},5747:(e,t,r)=>{var n=r(3387),i=r(7599);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=n.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new n(e)},t.createVerify=function(e){return new i(e)}},8948:(e,t,r)=>{var n=r(2861).Buffer,i=r(2203);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}r(9023).inherits(o,i),o.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},3387:(e,t,r)=>{var n=r(2861).Buffer,i=r(8948),o=r(8789),s=r(2203),a=r(2851),c=r(9023);function u(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),l=function(e,t,r){r=r||"utf8";var n=u(a(e),"binary"),i=u(a(t),r);return c.format("%s.%s",n,i)}(t,r,i),d=s.sign(l,n);return c.format("%s.%s",l,d)}function d(e){var t=e.secret||e.privateKey||e.key,r=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(d,s),d.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=l,e.exports=d},2851:(e,t,r)=>{var n=r(181).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},7599:(e,t,r)=>{var n=r(2861).Buffer,i=r(8948),o=r(8789),s=r(2203),a=r(2851),c=r(9023),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(n.from(t,"base64").toString("binary"))}function d(e){return e.split(".")[2]}function h(e){return u.test(e)&&!!l(e)}function f(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=d(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,r)}function p(e,t){if(t=t||{},!h(e=a(e)))return null;var r=l(e);if(!r)return null;var i=function(e,t){t=t||"utf8";var r=e.split(".")[1];return n.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:d(e)}}function g(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(g,s),g.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=p,g.isValid=h,g.verify=f,e.exports=g},6111:e=>{var t=1/0,r=9007199254740991,n="[object Function]",i="[object GeneratorFunction]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=/^(?:0|[1-9]\d*)$/,l=parseInt;function d(e){return e!=e}var h,f,p=Object.prototype,g=p.hasOwnProperty,m=p.toString,v=p.propertyIsEnumerable,y=(h=Object.keys,f=Object,function(e){return h(f(e))}),w=Math.max;function C(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}var A=Array.isArray;function I(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=S(e)?m.call(e):"";return t==n||t==i}(e)}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){return!!e&&"object"==typeof e}e.exports=function(e,r,n,i){var u;e=I(e)?e:(u=e)?function(e,t){return function(t,r){for(var n=-1,i=t?t.length:0,o=Array(i);++n<i;)o[n]=(s=t[n],e[s]);var s;return o}(t)}(u,function(e){return I(e)?function(e,t){var r=A(e)||function(e){return function(e){return E(e)&&I(e)}(e)&&g.call(e,"callee")&&(!v.call(e,"callee")||"[object Arguments]"==m.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!g.call(e,o)||i&&("length"==o||C(o,n))||r.push(o);return r}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||p))return y(e);var t,r,n=[];for(var i in Object(e))g.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e)}(u)):[],n=n&&!i?function(e){var r=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||E(e)&&"[object Symbol]"==m.call(e)}(e))return NaN;if(S(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=S(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var r=a.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):s.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=r%1;return r==r?n?r-n:r:0}(n):0;var h=e.length;return n<0&&(n=w(h+n,0)),function(e){return"string"==typeof e||!A(e)&&E(e)&&"[object String]"==m.call(e)}(e)?n<=h&&e.indexOf(r,n)>-1:!!h&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var i=e.length,o=r+-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,d,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,r,n)>-1}},7914:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},8928:e=>{var t=1/0,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):n.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e)}},3639:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},9001:e=>{var t,r,n=Function.prototype,i=Object.prototype,o=n.toString,s=i.hasOwnProperty,a=o.call(Object),c=i.toString,u=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==a}},5931:e=>{var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},7083:e=>{var t=1/0,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,u){var l;if("function"!=typeof u)throw new TypeError("Expected a function");return e=function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):n.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e),function(){return--e>0&&(l=u.apply(this,arguments)),e<=1&&(u=void 0),l}}(2,e)}},6585:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,a){a=a||{};var c,u,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===l&&isFinite(e))return a.long?(c=e,(u=Math.abs(c))>=i?s(c,u,i,"day"):u>=n?s(c,u,n,"hour"):u>=r?s(c,u,r,"minute"):u>=t?s(c,u,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2861:(e,t,r)=>{var n=r(181),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},3904:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=r(8587),{safeRe:s,t:a}=r(9718),c=r(2111),u=r(7272),l=r(3908),d=r(8311)},8311:(e,t,r)=>{class n{constructor(e,t){if(t=o(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,o=n?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,P(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],h),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map((e=>w(e,this.options))).join(" ").split(/\s+/).map((e=>k(e,this.options)));n&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const v=new Map,y=c.map((e=>new s(e,this.options)));for(const e of y){if(m(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const C=[...v.values()];return i.set(t,C),C}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(8794)),o=r(8587),s=r(3904),a=r(7272),c=r(3908),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:f}=r(9718),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=r(6874),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},w=(e,t)=>(a("comp",e,t),e=S(e,t),a("caret",e),e=A(e,t),a("tildes",e),e=_(e,t),a("xrange",e),e=b(e,t),a("stars",e),e),C=e=>!e||"x"===e.toLowerCase()||"*"===e,A=(e,t)=>e.trim().split(/\s+/).map((e=>I(e,t))).join(" "),I=(e,t)=>{const r=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(r,((t,r,n,i,o)=>{let s;return a("tilde",e,t,r,n,i,o),C(r)?s="":C(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:C(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,a("tilde return",s),s}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{a("caret",e,t);const r=t.loose?u[l.CARETLOOSE]:u[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,s)=>{let c;return a("caret",e,t,r,i,o,s),C(r)?c="":C(i)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:C(o)?c="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(a("no pr"),c="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),a("caret return",c),c}))},_=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(r,((r,n,i,o,s,c)=>{a("xRange",e,r,n,i,o,s,c);const u=C(i),l=u||C(o),d=l||C(s),h=d;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),"<"===n&&(c="-0"),r=`${n+i}.${o}.${s}${c}`):l?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),a("xRange return",r),r}))},b=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),k=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=e=>(t,r,n,i,o,s,a,c,u,l,d,h)=>`${r=C(n)?"":C(i)?`>=${n}.0.0${e?"-0":""}`:C(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=C(u)?"":C(l)?`<${+u+1}.0.0-0`:C(d)?`<${u}.${+l+1}.0-0`:h?`<=${u}.${l}.${d}-${h}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},3908:(e,t,r)=>{const n=r(7272),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(6874),{safeRe:s,t:a}=r(9718),c=r(8587),{compareIdentifiers:u}=r(1123);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},7414:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},2111:(e,t,r)=>{const n=r(4641),i=r(3999),o=r(5580),s=r(4089),a=r(7059),c=r(5200);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return o(e,r,u);case">=":return s(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},6170:(e,t,r)=>{const n=r(3908),i=r(144),{safeRe:o,t:s}=r(9718);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let i;for(;(i=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===r)return null;const a=r[2],c=r[3]||"0",u=r[4]||"0",l=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${a}.${c}.${u}${l}${d}`,t)}},909:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r)=>{const i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},1763:(e,t,r)=>{const n=r(560);e.exports=(e,t)=>n(e,t,!0)},560:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},1832:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;const s=o>0,a=s?r:i,c=s?i:r,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return r.major!==i.major?l+"major":r.minor!==i.minor?l+"minor":r.patch!==i.patch?l+"patch":"prerelease"}},4641:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>0===n(e,t,r)},5580:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)>0},4089:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)>=0},3007:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(e){return null}}},7059:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)<0},5200:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)<=0},2938:(e,t,r)=>{const n=r(3908);e.exports=(e,t)=>new n(e,t).major},6254:(e,t,r)=>{const n=r(3908);e.exports=(e,t)=>new n(e,t).minor},3999:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>0!==n(e,t,r)},144:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},4493:(e,t,r)=>{const n=r(3908);e.exports=(e,t)=>new n(e,t).patch},1729:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9970:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(t,e,r)},4277:(e,t,r)=>{const n=r(909);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},7638:(e,t,r)=>{const n=r(8311);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},3927:(e,t,r)=>{const n=r(909);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6953:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},9589:(e,t,r)=>{const n=r(9718),i=r(6874),o=r(3908),s=r(1123),a=r(144),c=r(6953),u=r(7414),l=r(3007),d=r(1832),h=r(2938),f=r(6254),p=r(4493),g=r(1729),m=r(560),v=r(9970),y=r(1763),w=r(909),C=r(3927),A=r(4277),I=r(5580),S=r(7059),E=r(4641),_=r(3999),T=r(4089),b=r(5200),k=r(2111),P=r(6170),R=r(3904),O=r(8311),M=r(7638),N=r(7631),x=r(9628),D=r(270),L=r(1261),U=r(3874),F=r(7075),q=r(5571),H=r(5342),j=r(6780),B=r(2525),z=r(5032);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:h,minor:f,patch:p,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:w,sort:C,rsort:A,gt:I,lt:S,eq:E,neq:_,gte:T,lte:b,cmp:k,coerce:P,Comparator:R,Range:O,satisfies:M,toComparators:N,maxSatisfying:x,minSatisfying:D,minVersion:L,validRange:U,outside:F,gtr:q,ltr:H,intersects:j,simplifyRange:B,subset:z,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},1123:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8587:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},9718:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(6874),s=r(7272),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,i]],p=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=d++;s(e,i,t),l[e]=i,u[i]=t,a[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},5571:(e,t,r)=>{const n=r(7075);e.exports=(e,t,r)=>n(e,t,">",r)},6780:(e,t,r)=>{const n=r(8311);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},5342:(e,t,r)=>{const n=r(7075);e.exports=(e,t,r)=>n(e,t,"<",r)},9628:(e,t,r)=>{const n=r(3908),i=r(8311);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},270:(e,t,r)=>{const n=r(3908),i=r(8311);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},1261:(e,t,r)=>{const n=r(3908),i=r(8311),o=r(5580);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!o(r,s)||(r=s)}return r&&e.test(r)?r:null}},7075:(e,t,r)=>{const n=r(3908),i=r(3904),{ANY:o}=i,s=r(8311),a=r(7638),c=r(5580),u=r(7059),l=r(5200),d=r(4089);e.exports=(e,t,r,h)=>{let f,p,g,m,v;switch(e=new n(e,h),t=new s(t,h),r){case">":f=c,p=l,g=u,m=">",v=">=";break;case"<":f=u,p=d,g=c,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,h))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,a=null;if(n.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,h)?s=e:g(e.semver,a.semver,h)&&(a=e)})),s.operator===m||s.operator===v)return!1;if((!a.operator||a.operator===m)&&p(e,a.semver))return!1;if(a.operator===v&&g(e,a.semver))return!1}return!0}},2525:(e,t,r)=>{const n=r(7638),i=r(560);e.exports=(e,t,r)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>i(e,t,r)));for(const e of c)n(e,t,r)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},5032:(e,t,r)=>{const n=r(8311),i=r(3904),{ANY:o}=i,s=r(7638),a=r(560),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}const n=new Set;let i,l,f,p,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,r):"<"===t.operator||"<="===t.operator?l=h(l,t,r):n.add(t.semver);if(n.size>1)return null;if(i&&l){if(f=a(i.semver,l.semver,r),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const e of n){if(i&&!s(e,String(i),r))return null;if(l&&!s(e,String(l),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let y=!(!l||r.includePrerelease||!l.semver.prerelease.length)&&l.semver,w=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,i)if(w&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch&&(w=!1),">"===e.operator||">="===e.operator){if(p=d(i,e,r),p===e&&p!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),r))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=h(l,e,r),g===e&&g!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),r))return!1;if(!e.operator&&(l||i)&&0!==f)return!1}return!(i&&m&&!l&&0!==f||l&&v&&!i&&0!==f||w||y)},d=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=l(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},7631:(e,t,r)=>{const n=r(8311);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},3874:(e,t,r)=>{const n=r(8311);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},2909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationService=void 0;var n=r(7291);Object.defineProperty(t,"ExperimentationService",{enumerable:!0,get:function(){return n.ExperimentationService}})},7291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationService=void 0;const n=r(2845),i=r(1924),o=r(5761);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new n.TasApiFeatureProvider(new i.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},5761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationServiceAutoPolling=void 0;const n=r(1714),i=r(3257);class o extends n.ExperimentationServiceBase{constructor(e,t,r,n,o,s,a){if(super(e,n,o,s,a),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=o,this.storageKey=s,this.storage=a,r<1e3&&0!==r)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new i.PollingService(r),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},1714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationServiceBase=void 0;const n=r(8823);t.ExperimentationServiceBase=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,t,r,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=t,this.telemetryEventName=r,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new n.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let r={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)r.features.includes(e)||r.features.push(e);for(let e of t.configs){const t=r.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):r.configs.push(e)}r.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`);const r=this.features.configs.find((t=>t.Id===e));return null==r?void 0:r.Parameters[t]}async getTreatmentVariableAsync(e,t,r){if(r){const r=this.featuresConsumed,n=this.getTreatmentVariable(e,t);if(void 0!==n)return n;this.featuresConsumed=r}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},6790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=void 0,t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},4111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredFeatureProvider=void 0;const n=r(6790);class i extends n.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let r=t.getFilters();for(let t of r.keys()){let n=r.get(t);e.set(t,n)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},2845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TasApiFeatureProvider=t.TASAPI_FETCHERROR_EVENTNAME=void 0;const n=r(4111);t.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";const i="ErrorType";class o extends n.FilteredFeatureProvider{constructor(e,t,r){super(t,r),this.httpClient=e,this.telemetry=t,this.filterProviders=r}async fetch(){let e,r=this.getFilters(),n={};for(let e of r.keys()){const t=r.get(e);n[e]=t}try{e=await this.httpClient.get({headers:n})}catch(e){const r=e,n=new Map;r.responseReceived&&!r.responseOk?n.set(i,"ServerError"):!1===r.responseReceived?n.set(i,"NoResponse"):n.set(i,"GenericError"),this.telemetry.postEvent(t.TASAPI_FETCHERROR_EVENTNAME,n)}if(!e)throw Error(t.TASAPI_FETCHERROR_EVENTNAME);r.keys.length>0&&this.PostEventToTelemetry(n);const o=e.data;let s=o.Configs,a=[];for(let e of s)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const r=t+(e.Parameters[t]?"":"cf");a.includes(r)||a.push(r)}return{features:a,assignmentContext:o.AssignmentContext,configs:s}}}t.TasApiFeatureProvider=o},1924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=t.FetchError=void 0;class r extends Error{constructor(e,t,r){super(e),this.responseReceived=t,this.responseOk=r}}t.FetchError=r,t.HttpClient=class{constructor(e){this.endpoint=e}async get(e){const t=await fetch(this.endpoint,{method:"GET",headers:null==e?void 0:e.headers});if(!t)throw new r("No response received",!1);if(!t.ok)throw new r("Response not ok",!0,!1);const n=await t.json();if(!n)throw new r("No data received",!1);return{data:n}}}},8823:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=void 0,t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},3257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=void 0,t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},2107:(e,t,r)=>{"use strict";Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}});i(r(8610)),i(r(3208));var n=i(r(4061));i(r(3358)),i(r(6348)),i(r(51)),i(r(129)),i(r(2298)),i(r(2356));function i(e){return e&&e.__esModule?e:{default:e}}},8435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(6982))&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("md5").update(e).digest()}},6348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},2356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(129))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}},996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},9614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s>o.length-16&&(i.default.randomFillSync(o),s=0),o.slice(s,s+=16)};var n,i=(n=r(6982))&&n.__esModule?n:{default:n};const o=new Uint8Array(256);let s=o.length},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(6982))&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("sha1").update(e).digest()}},2298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(129))&&n.__esModule?n:{default:n};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).substr(1));t.default=function(e,t=0){const r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r}},8610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(9614)),i=o(r(2298));function o(e){return e&&e.__esModule?e:{default:e}}let s,a,c=0,u=0;t.default=function(e,t,r){let o=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||s,h=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||n.default)();null==d&&(d=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:u+1;const g=f-c+(p-u)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const m=(1e4*(268435455&f)+p)%4294967296;l[o++]=m>>>24&255,l[o++]=m>>>16&255,l[o++]=m>>>8&255,l[o++]=255&m;const v=f/4294967296*1e4&268435455;l[o++]=v>>>8&255,l[o++]=255&v,l[o++]=v>>>24&15|16,l[o++]=v>>>16&255,l[o++]=h>>>8|128,l[o++]=255&h;for(let e=0;e<6;++e)l[o+e]=d[e];return t||(0,i.default)(l)}},3208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(1525)),i=o(r(8435));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v3",48,i.default);t.default=s},1525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){function o(e,o,s,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=c[e];return s}return(0,n.default)(c)}try{o.name=e}catch(e){}return o.DNS=s,o.URL=a,o},t.URL=t.DNS=void 0;var n=o(r(2298)),i=o(r(2356));function o(e){return e&&e.__esModule?e:{default:e}}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},4061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(9614)),i=o(r(2298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){const o=(e=e||{}).random||(e.rng||n.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,i.default)(o)}},3358:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(1525)),i=o(r(622));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v5",80,i.default);t.default=s},129:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(996))&&n.__esModule?n:{default:n};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},51:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(129))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},1566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPopulation=t.getExperimentationServiceAsync=t.getExperimentationService=void 0;var n=r(2493);Object.defineProperty(t,"getExperimentationService",{enumerable:!0,get:function(){return n.getExperimentationService}}),Object.defineProperty(t,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return n.getExperimentationServiceAsync}});var i=r(8967);Object.defineProperty(t,"TargetPopulation",{enumerable:!0,get:function(){return i.TargetPopulation}})},8142:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=void 0,t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},9052:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},8967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPopulation=t.Filters=t.VSCodeFilterProvider=void 0;const n=r(1398);class i{constructor(e,t,r){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=r}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return i.trimVersionSuffix(n.version);case o.Build:return n.env.appName;case o.ClientId:return n.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return i.trimVersionSuffix(this.extensionVersion);case o.Language:return n.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let r of t)e.set(r,this.getFilterValue(r));return e}}var o,s;t.VSCodeFilterProvider=i,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o||(t.Filters=o={})),function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"}(s||(t.TargetPopulation=s={}))},2493:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExperimentationServiceAsync=t.getExperimentationService=void 0;const n=r(8967),i=r(2909),o=r(1398),s=r(8142),a=r(9052);function c(e,t,r,c,u,...l){if(!u)throw new Error("Memento storage was not provided.");const d=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?d.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new a.default;const h=[new n.VSCodeFilterProvider(e,t,r),...l],f=new s.MementoKeyValueStorage(u);return new i.ExperimentationService({filterProviders:h,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:f,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,r,n,i,...o){const s=c(e,t,r,n,i,...o);return await s.initializePromise,s}},9008:(e,t)=>{t.setPassword=()=>Promise.resolve(),t.getPassword=()=>Promise.resolve(),t.deletePassword=()=>Promise.resolve()},2556:(e,t,r)=>{const n=r(9896),i=r(6928),o=i.join(__dirname,"path.txt");e.exports=function(){let e;if(n.existsSync(o)&&(e=n.readFileSync(o,"utf-8")),process.env.ELECTRON_OVERRIDE_DIST_PATH)return i.join(process.env.ELECTRON_OVERRIDE_DIST_PATH,e||"electron");if(e)return i.join(__dirname,"dist",e);throw new Error("Electron failed to install correctly, please delete node_modules/electron and try installing again")}()},8447:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AzureActiveDirectoryService=t.REFRESH_NETWORK_FAILURE=void 0;const c=s(r(1398)),u=s(r(6928)),l=r(9529),d=r(1619),h=r(5951),f=r(1589),p=r(2866),g=a(r(3034)),m=r(8197),v="https://vscode.dev/redirect",y=m.Environment.AzureCloud.activeDirectoryEndpointUrl,w="aebc6443-996d-45c2-90f0-388ff96faa56";t.REFRESH_NETWORK_FAILURE="Network failure";class C{constructor(e,t,r,n,i,o){this._logger=e,this._uriHandler=r,this._tokenStorage=n,this._telemetryReporter=i,this._env=o,this._tokens=[],this._refreshTimeouts=new Map,this._sessionChangeEmitter=new c.EventEmitter,this._pendingNonces=new Map,this._codeExchangePromises=new Map,this._codeVerfifiers=new Map,this._pendingTokensToStore=new Map,this._sequencer=new d.SequencerByKey,t.subscriptions.push(this._tokenStorage.onDidChangeInOtherWindow((e=>this.checkForUpdates(e)))),t.subscriptions.push(c.window.onDidChangeWindowState((async e=>e.focused&&await this.storePendingTokens())));const s=new d.IntervalTimer;s.cancelAndSet((()=>!c.window.state.focused&&this.storePendingTokens()),18e6+Math.floor(3e4*Math.random())),t.subscriptions.push(s)}async initialize(){this._logger.trace("Reading sessions from secret storage...");const e=await this._tokenStorage.getAll((e=>this.sessionMatchesEndpoint(e)));this._logger.trace(`Got ${e.length} stored sessions`);const r=e.map((async e=>{this._logger.trace(`[${e.scope}] '${e.id}' Read stored session`);const r=e.scope.split(" "),n={scopes:r,scopeStr:e.scope,scopesToSend:r.filter((e=>!e.startsWith("VSCODE_"))).join(" "),clientId:this.getClientId(r),tenant:this.getTenantId(r)};try{await this.refreshToken(e.refreshToken,n,e.id)}catch(r){r.message===t.REFRESH_NETWORK_FAILURE?this._tokens.push({accessToken:void 0,refreshToken:e.refreshToken,account:{...e.account,type:"unknown"},scope:e.scope,sessionId:e.id}):(c.window.showErrorMessage(c.l10n.t("You have been signed out because reading stored authentication information failed.")),this._logger.error(r),await this.removeSessionByIToken({accessToken:void 0,refreshToken:e.refreshToken,account:{...e.account,type:"unknown"},scope:e.scope,sessionId:e.id}))}})),n=await Promise.allSettled(r);for(const e of n)if("rejected"===e.status){this._logger.error(`Failed to initialize stored data: ${e.reason}`),this.clearSessions();break}for(const e of this._tokens)this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(e.scope.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}").split(" ")),accountType:e.account.type})}get onDidChangeSessions(){return this._sessionChangeEmitter.event}getSessions(e,t){if(!e){this._logger.info("Getting sessions for all scopes...");const e=this._tokens.filter((e=>!t?.label||e.account.label===t.label)).map((e=>this.convertToSessionSync(e)));return this._logger.info(`Got ${e.length} sessions for all scopes${t?` for account '${t.label}'`:""}...`),Promise.resolve(e)}let r=[...e];r.includes("openid")||r.push("openid"),r.includes("email")||r.push("email"),r.includes("profile")||r.push("profile"),r.includes("offline_access")||r.push("offline_access"),r=r.sort();const n=r.join(" "),i={clientId:this.getClientId(e),originalScopes:e,scopes:r,scopeStr:n,scopesToSend:r.filter((e=>!e.startsWith("VSCODE_"))).join(" "),tenant:this.getTenantId(e)};return this._logger.trace(`[${i.scopeStr}] Queued getting sessions`+t?` for ${t?.label}`:""),this._sequencer.queue(n,(()=>this.doGetSessions(i,t)))}async doGetSessions(e,t){this._logger.info(`[${e.scopeStr}] Getting sessions`+t?` for ${t?.label}`:"");const r=this._tokens.filter((t=>t.scope===e.scopeStr)).filter((e=>!t?.label||e.account.label===t.label));if(!r.length){let n;for(const r of this._tokens)if(r.refreshToken&&(!t?.label||r.account.label===t.label)){if(e.clientId===w&&!r.scope.includes("VSCODE_CLIENT_ID")){n=r;break}if(e.clientId!==w&&r.scope.includes(`VSCODE_CLIENT_ID:${e.clientId}`)){n=r;break}}if(n){this._logger.trace(`[${e.scopeStr}] '${n.sessionId}' Found a matching token with a different scopes '${n.scope}'. Attempting to get a new session using the existing session.`);try{const t=await this.doRefreshToken(n.refreshToken,e);this._sessionChangeEmitter.fire({added:[this.convertToSessionSync(t)],removed:[],changed:[]}),r.push(t)}catch(t){this._logger.error(`[${e.scopeStr}] Attempted to get a new session using the existing session with scopes '${n.scope}' but it failed due to: ${t.message??t}`)}}}return this._logger.info(`[${e.scopeStr}] Got ${r.length} sessions`),(await Promise.allSettled(r.map((t=>this.convertToSession(t,e))))).filter((e=>"fulfilled"===e.status)).map((e=>e.value))}createSession(e,t){let r=[...e];r.includes("openid")||r.push("openid"),r.includes("email")||r.push("email"),r.includes("profile")||r.push("profile"),r.includes("offline_access")||r.push("offline_access"),r=r.sort();const n={originalScopes:e,scopes:r,scopeStr:r.join(" "),scopesToSend:r.filter((e=>!e.startsWith("VSCODE_"))).join(" "),clientId:this.getClientId(e),tenant:this.getTenantId(e)};return this._logger.trace(`[${n.scopeStr}] Queued creating session`),this._sequencer.queue(n.scopeStr,(()=>this.doCreateSession(n,t)))}async doCreateSession(e,t){this._logger.info(`[${e.scopeStr}] Creating session`+t?` for ${t?.label}`:"");const r=void 0!==c.env.remoteName,n=void 0===c.env.remoteName&&c.env.uiKind===c.UIKind.Web;if(n&&this._env.activeDirectoryEndpointUrl!==y)throw new Error("Sign in to non-public clouds is not supported on the web.");return await c.window.withProgress({location:c.ProgressLocation.Notification,title:c.l10n.t("Signing in to your account..."),cancellable:!0},(async(i,o)=>{if(r||n)return await this.createSessionWithoutLocalServer(e,t?.label,o);try{return await this.createSessionWithLocalServer(e,t?.label,o)}catch(r){if(this._logger.error(`[${e.scopeStr}] Error creating session: ${r}`),"Error listening to server"===r.message||"Closed"===r.message||"Timeout waiting for port"===r.message)return this.createSessionWithoutLocalServer(e,t?.label,o);throw r}}))}async createSessionWithLocalServer(e,t,r){this._logger.trace(`[${e.scopeStr}] Starting login flow with local server`);const n=(0,h.generateCodeVerifier)(),i=await(0,h.generateCodeChallenge)(n),o=new URLSearchParams({response_type:"code",response_mode:"query",client_id:e.clientId,redirect_uri:v,scope:e.scopesToSend,code_challenge_method:"S256",code_challenge:i});t?o.set("login_hint",t):o.set("prompt","select_account");const s=new URL(`${e.tenant}/oauth2/v2.0/authorize?${o.toString()}`,this._env.activeDirectoryEndpointUrl).toString(),a=new f.LoopbackAuthServer(u.join(__dirname,"../media"),s);let l;await a.start();try{c.env.openExternal(c.Uri.parse(`http://127.0.0.1:${a.port}/signin?nonce=${encodeURIComponent(a.nonce)}`));const{code:e}=await(0,d.raceCancellationAndTimeoutError)(a.waitForOAuthResponse(),r,3e5);l=e}finally{setTimeout((()=>{a.stop()}),5e3)}const p=await this.exchangeCodeForSession(l,n,e);return this._logger.trace(`[${e.scopeStr}] '${p.id}' Sending change event for added session`),this._sessionChangeEmitter.fire({added:[p],removed:[],changed:[]}),this._logger.info(`[${e.scopeStr}] '${p.id}' session successfully created!`),p}async createSessionWithoutLocalServer(e,t,r){this._logger.trace(`[${e.scopeStr}] Starting login flow without local server`);let n=await c.env.asExternalUri(c.Uri.parse(`${c.env.uriScheme}://vscode.microsoft-authentication`));const i=(0,h.generateCodeVerifier)(),o=new URLSearchParams(n.query);o.set("nonce",encodeURIComponent(i)),n=n.with({query:o.toString()});const s=encodeURIComponent(n.toString(!0)),a=(0,h.generateCodeVerifier)(),u=await(0,h.generateCodeChallenge)(a),f=new URL(`${e.tenant}/oauth2/v2.0/authorize`,this._env.activeDirectoryEndpointUrl),p=new URLSearchParams({response_type:"code",client_id:encodeURIComponent(e.clientId),response_mode:"query",redirect_uri:v,state:s,scope:e.scopesToSend,code_challenge_method:"S256",code_challenge:u});t?p.append("login_hint",t):p.append("prompt","select_account"),f.search=p.toString();const g=c.Uri.parse(f.toString());c.env.openExternal(g);const m=this._pendingNonces.get(e.scopeStr)||[];this._pendingNonces.set(e.scopeStr,[...m,i]);let y,w=this._codeExchangePromises.get(e.scopeStr);return w||((0,l.isSupportedEnvironment)(n)?w=this.handleCodeResponse(e):(y=c.window.createInputBox(),w=this.handleCodeInputBox(y,a,e)),this._codeExchangePromises.set(e.scopeStr,w)),this._codeVerfifiers.set(i,a),await(0,d.raceCancellationAndTimeoutError)(w,r,3e5).finally((()=>{this._pendingNonces.delete(e.scopeStr),this._codeExchangePromises.delete(e.scopeStr),this._codeVerfifiers.delete(i),y?.dispose()}))}async removeSessionById(e,t=!0){const r=this._tokens.findIndex((t=>t.sessionId===e));if(-1===r)return this._logger.warn(`'${e}' Session not found to remove`),Promise.resolve(void 0);const n=this._tokens.splice(r,1)[0];return this._logger.trace(`[${n.scope}] '${e}' Queued removing session`),this._sequencer.queue(n.scope,(()=>this.removeSessionByIToken(n,t)))}async clearSessions(){this._logger.trace("Logging out of all sessions"),this._tokens=[],await this._tokenStorage.deleteAll((e=>this.sessionMatchesEndpoint(e))),this._refreshTimeouts.forEach((e=>{clearTimeout(e)})),this._refreshTimeouts.clear(),this._logger.trace("All sessions logged out")}async removeSessionByIToken(e,t=!0){this._logger.info(`[${e.scope}] '${e.sessionId}' Logging out of session`),this.removeSessionTimeout(e.sessionId),t&&await this._tokenStorage.delete(e.sessionId);const r=this._tokens.findIndex((t=>t.sessionId===e.sessionId));-1!==r&&this._tokens.splice(r,1);const n=this.convertToSessionSync(e);return this._logger.trace(`[${e.scope}] '${e.sessionId}' Sending change event for session that was removed`),this._sessionChangeEmitter.fire({added:[],removed:[n],changed:[]}),this._logger.info(`[${e.scope}] '${e.sessionId}' Logged out of session successfully!`),n}setSessionTimeout(e,r,n,i){this._logger.trace(`[${n.scopeStr}] '${e}' Setting refresh timeout for ${i} milliseconds`),this.removeSessionTimeout(e),this._refreshTimeouts.set(e,setTimeout((async()=>{try{const t=await this.refreshToken(r,n,e);this._logger.trace(`[${n.scopeStr}] '${e}' Sending change event for session that was refreshed`),this._sessionChangeEmitter.fire({added:[],removed:[],changed:[this.convertToSessionSync(t)]}),this._logger.trace(`[${n.scopeStr}] '${e}' refresh timeout complete`)}catch(r){r.message!==t.REFRESH_NETWORK_FAILURE&&(c.window.showErrorMessage(c.l10n.t("You have been signed out because reading stored authentication information failed.")),await this.removeSessionById(e))}}),i))}removeSessionTimeout(e){const t=this._refreshTimeouts.get(e);t&&(clearTimeout(t),this._refreshTimeouts.delete(e))}convertToTokenSync(e,t,r){let n;this._logger.trace(`[${t.scopeStr}] '${r??"new"}' Attempting to parse token response.`);try{e.id_token?n=JSON.parse((0,p.base64Decode)(e.id_token.split(".")[1])):(this._logger.warn(`[${t.scopeStr}] '${r??"new"}' Attempting to parse access_token instead since no id_token was included in the response.`),n=JSON.parse((0,p.base64Decode)(e.access_token.split(".")[1])))}catch(e){throw e}const i=`${n.tid}/${n.oid??n.altsecid??""+n.ipd??""}`,o=r||`${i}/${(0,h.randomUUID)()}`;return this._logger.trace(`[${t.scopeStr}] '${o}' Token response parsed successfully.`),{expiresIn:e.expires_in,expiresAt:e.expires_in?Date.now()+1e3*e.expires_in:void 0,accessToken:e.access_token,idToken:e.id_token,refreshToken:e.refresh_token,scope:t.scopeStr,sessionId:o,account:{label:n.preferred_username??n.email??n.unique_name??"user@example.com",id:i,type:"9188040d-6c67-4c5b-b112-36a304b66dad"===n.tid||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===n.tid?"msa":"aad"}}}convertToSessionSync(e){return{id:e.sessionId,accessToken:e.accessToken,idToken:e.idToken,account:e.account,scopes:e.scope.split(" ")}}async convertToSession(e,t){if(e.accessToken&&(!e.expiresAt||e.expiresAt>Date.now()))return this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Token available from cache${e.expiresAt?`, expires in ${e.expiresAt-Date.now()} milliseconds`:""}.`),{id:e.sessionId,accessToken:e.accessToken,idToken:e.idToken,account:e.account,scopes:t.originalScopes??t.scopes};try{this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Token expired or unavailable, trying refresh`);const r=await this.refreshToken(e.refreshToken,t,e.sessionId);if(r.accessToken)return{id:e.sessionId,accessToken:r.accessToken,idToken:r.idToken,account:e.account,scopes:t.originalScopes??t.scopes};throw new Error}catch(e){throw new Error("Unavailable due to network problems")}}refreshToken(e,t,r){return this._logger.trace(`[${t.scopeStr}] '${r??"new"}' Queued refreshing token`),this._sequencer.queue(t.scopeStr,(()=>this.doRefreshToken(e,t,r)))}async doRefreshToken(e,r,n){this._logger.trace(`[${r.scopeStr}] '${n??"new"}' Refreshing token`);const i=new URLSearchParams({refresh_token:e,client_id:r.clientId,grant_type:"refresh_token",scope:r.scopesToSend}).toString();try{const e=await this.fetchTokenResponse(i,r),t=this.convertToTokenSync(e,r,n);return t.expiresIn&&this.setSessionTimeout(t.sessionId,t.refreshToken,r,t.expiresIn*C.REFRESH_TIMEOUT_MODIFIER),this.setToken(t,r),this._logger.trace(`[${r.scopeStr}] '${t.sessionId}' Token refresh success`),t}catch(i){if(i.message===t.REFRESH_NETWORK_FAILURE)throw n&&this.setSessionTimeout(n,e,r,C.POLLING_CONSTANT),i;throw this._logger.error(`[${r.scopeStr}] '${n??"new"}' Refreshing token failed: ${i.message}`),i}}getClientId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e),void 0)??w}getTenantId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e),void 0)??"organizations"}async handleCodeResponse(e){let t;return new Promise(((r,n)=>{t=this._uriHandler.event((async t=>{try{const n=new URLSearchParams(t.query);let i=n.get("code"),o=n.get("nonce");if(Array.isArray(i)&&(i=i[0]),!i)throw new Error("No code included in query");if(Array.isArray(o)&&(o=o[0]),!o)throw new Error("No nonce included in query");const s=this._pendingNonces.get(e.scopeStr)||[];if(!s.includes(o)&&!s.includes(decodeURIComponent(o)))throw new Error("Nonce does not match.");const a=this._codeVerfifiers.get(o)??this._codeVerfifiers.get(decodeURIComponent(o));if(!a)throw new Error("No available code verifier");const c=await this.exchangeCodeForSession(i,a,e);this._sessionChangeEmitter.fire({added:[c],removed:[],changed:[]}),this._logger.info(`[${e.scopeStr}] '${c.id}' session successfully created!`),r(c)}catch(e){n(e)}}))})).then((e=>(t.dispose(),e))).catch((e=>{throw t.dispose(),e}))}async handleCodeInputBox(e,t,r){return this._logger.trace(`[${r.scopeStr}] Starting login flow with input box`),e.ignoreFocusOut=!0,e.title=c.l10n.t("Microsoft Authentication"),e.prompt=c.l10n.t("Provide the authorization code to complete the sign in flow."),e.placeholder=c.l10n.t("Paste authorization code here..."),new Promise(((n,i)=>{e.show(),e.onDidAccept((async()=>{const i=e.value;if(i){e.dispose();const o=await this.exchangeCodeForSession(i,t,r);this._logger.trace(`[${r.scopeStr}] '${o.id}' sending session changed event because session was added.`),this._sessionChangeEmitter.fire({added:[o],removed:[],changed:[]}),this._logger.trace(`[${r.scopeStr}] '${o.id}' session successfully created!`),n(o)}})),e.onDidHide((()=>{e.value||(e.dispose(),i("Cancelled"))}))}))}async exchangeCodeForSession(e,t,r){let n;this._logger.trace(`[${r.scopeStr}] Exchanging login code for session`);try{const i=new URLSearchParams({grant_type:"authorization_code",code:e,client_id:r.clientId,scope:r.scopesToSend,code_verifier:t,redirect_uri:v}).toString(),o=await this.fetchTokenResponse(i,r);this._logger.trace(`[${r.scopeStr}] Exchanging code for token succeeded!`),n=this.convertToTokenSync(o,r)}catch(e){throw this._logger.error(`[${r.scopeStr}] Error exchanging code for token: ${e}`),e}return n.expiresIn&&this.setSessionTimeout(n.sessionId,n.refreshToken,r,n.expiresIn*C.REFRESH_TIMEOUT_MODIFIER),this.setToken(n,r),this._logger.trace(`[${r.scopeStr}] '${n.sessionId}' Exchanging login code for session succeeded!`),await this.convertToSession(n,r)}async fetchTokenResponse(e,r){let n;if(this._env.activeDirectoryEndpointUrl!==y)n=this._env.activeDirectoryEndpointUrl;else{const e=await c.commands.executeCommand("workbench.getCodeExchangeProxyEndpoints");n=e?.microsoft||this._env.activeDirectoryEndpointUrl}const i=new URL(`${r.tenant}/oauth2/v2.0/token`,n);let o=0;for(;o<=3;){let t,n;o++;try{t=await(0,g.default)(i.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e})}catch(e){n=e.message??e}if(t&&!(t.status>499)){if(!t.ok)throw new Error(await t.text());return await t.json()}if(o>3){this._logger.error(`[${r.scopeStr}] Fetching token failed: ${t?await t.text():n}`);break}await new Promise((e=>setTimeout(e,5*o*o*1e3)))}throw new Error(t.REFRESH_NETWORK_FAILURE)}setToken(e,t){this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Setting token`);const r=this._tokens.findIndex((t=>t.sessionId===e.sessionId));r>-1?this._tokens.splice(r,1,e):this._tokens.push(e),this.storeToken(e,t)}async storeToken(e,t){if(!c.window.state.focused)return this._pendingTokensToStore.has(e.sessionId)?this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Window is not focused, replacing token to be stored`):this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Window is not focused, pending storage of token`),void this._pendingTokensToStore.set(e.sessionId,e);await this._tokenStorage.store(e.sessionId,{id:e.sessionId,refreshToken:e.refreshToken,scope:e.scope,account:e.account,endpoint:this._env.activeDirectoryEndpointUrl}),this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Stored token`)}async storePendingTokens(){if(0===this._pendingTokensToStore.size)return void this._logger.trace("No pending tokens to store");const e=[...this._pendingTokensToStore.values()];this._pendingTokensToStore.clear(),this._logger.trace(`Storing ${e.length} pending tokens...`),await Promise.allSettled(e.map((async e=>{this._logger.trace(`[${e.scope}] '${e.sessionId}' Storing pending token`),await this._tokenStorage.store(e.sessionId,{id:e.sessionId,refreshToken:e.refreshToken,scope:e.scope,account:e.account,endpoint:this._env.activeDirectoryEndpointUrl}),this._logger.trace(`[${e.scope}] '${e.sessionId}' Stored pending token`)}))),this._logger.trace("Done storing pending tokens")}async checkForUpdates(e){for(const r of e.added){const n=await this._tokenStorage.get(r);if(n){if(this.sessionMatchesEndpoint(n)&&!this._tokens.some((e=>e.scope===n.scope&&e.sessionId===n.id))&&n.refreshToken)try{const e=n.scope.split(" "),t={scopes:e,scopeStr:n.scope,scopesToSend:e.filter((e=>!e.startsWith("VSCODE_"))).join(" "),clientId:this.getClientId(e),tenant:this.getTenantId(e)};this._logger.trace(`[${t.scopeStr}] '${n.id}' Session added in another window`);const r=await this.refreshToken(n.refreshToken,t,n.id);this._logger.trace(`[${t.scopeStr}] '${r.sessionId}' Sending change event for session that was added`),this._sessionChangeEmitter.fire({added:[this.convertToSessionSync(r)],removed:[],changed:[]}),this._logger.trace(`[${t.scopeStr}] '${r.sessionId}' Session added in another window added here`);continue}catch(e){e.message!==t.REFRESH_NETWORK_FAILURE&&(c.window.showErrorMessage(c.l10n.t("You have been signed out because reading stored authentication information failed.")),await this.removeSessionById(n.id));continue}}else this._logger.error("session not found that was apparently just added")}for(const{value:t}of e.removed)this._logger.trace(`[${t.scope}] '${t.id}' Session removed in another window`),this.sessionMatchesEndpoint(t)?(await this.removeSessionById(t.id,!1),this._logger.trace(`[${t.scope}] '${t.id}' Session removed in another window removed here`)):this._logger.trace(`[${t.scope}] '${t.id}' Session doesn't match endpoint. Skipping...`);for(const t of e.updated)this._pendingTokensToStore.delete(t)&&this._logger.trace(`'${t}' Cancelled pending token storage because token was updated in another window`)}sessionMatchesEndpoint(e){return e.endpoint||(e.endpoint=y),e.endpoint===this._env.activeDirectoryEndpointUrl}}t.AzureActiveDirectoryService=C,C.REFRESH_TIMEOUT_MODIFIER=2e3/3,C.POLLING_CONSTANT=18e5},3683:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.UriEventHandler=void 0;const a=s(r(1398));class c extends a.EventEmitter{constructor(){super(...arguments),this._disposable=a.window.registerUriHandler(this)}handleUri(e){this.fire(e)}dispose(){super.dispose(),this._disposable.dispose()}}t.UriEventHandler=c},2410:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BetterTokenStorage=void 0;const i=n(r(8377)),o=r(1398);t.BetterTokenStorage=class{constructor(e,t){this.keylistKey=e,this._operationInProgress=!1,this._tokensPromise=Promise.resolve(new Map),this._didChangeInOtherWindow=new o.EventEmitter,this.onDidChangeInOtherWindow=this._didChangeInOtherWindow.event,this._secretStorage=t.secrets,t.subscriptions.push(t.secrets.onDidChange((e=>this.handleSecretChange(e)))),this.initialize()}initialize(){this._operationInProgress=!0,this._tokensPromise=new Promise(((e,t)=>{this._secretStorage.get(this.keylistKey).then((t=>{if(!t)return void e(new Map);const r=JSON.parse(t).map((e=>new Promise(((t,r)=>{this._secretStorage.get(e).then((r=>{t({key:e,value:r})}),r)}))));Promise.allSettled(r).then((t=>{const r=new Map;t.forEach((e=>{if("fulfilled"===e.status&&e.value.value){const t=this.parseSecret(e.value.value);r.set(e.value.key,t)}else"rejected"===e.status?i.default.error(e.reason):i.default.error("Key was not found in SecretStorage.")})),e(r)}))}),(t=>{i.default.error(t),e(new Map)}))})),this._operationInProgress=!1}async get(e){return(await this.getTokens()).get(e)}async getAll(e){const t=await this.getTokens(),r=new Array;for(const[n,i]of t)e&&!e(i)||r.push(i);return r}async store(e,t){const r=await this.getTokens(),n=!r.has(e);r.set(e,t);const o=this.serializeSecret(t);this._operationInProgress=!0,this._tokensPromise=new Promise(((t,s)=>{const a=[this._secretStorage.store(e,o)];n&&a.push(this.updateKeyList(r)),Promise.allSettled(a).then((e=>{e.forEach((e=>{"rejected"===e.status&&i.default.error(e.reason)})),t(r)}))})),this._operationInProgress=!1}async delete(e){const t=await this.getTokens();t.has(e)&&(t.delete(e),this._operationInProgress=!0,this._tokensPromise=new Promise(((r,n)=>{Promise.allSettled([this._secretStorage.delete(e),this.updateKeyList(t)]).then((e=>{e.forEach((e=>{"rejected"===e.status&&i.default.error(e.reason)})),r(t)}))})),this._operationInProgress=!1)}async deleteAll(e){const t=await this.getTokens(),r=[];for(const[n,i]of t)e&&!e(i)||r.push(this.delete(n));await Promise.all(r)}async updateKeyList(e){const t=[];for(const[r]of e)t.push(r);const r=JSON.stringify(t);await this._secretStorage.store(this.keylistKey,r)}parseSecret(e){return JSON.parse(e)}serializeSecret(e){return JSON.stringify(e)}async getTokens(){let e;do{e=await this._tokensPromise}while(this._operationInProgress);return e}async handleSecretChange(e){const t=e.key;if(t===this.keylistKey)return;const r=await this.getTokens();this._operationInProgress=!0,this._tokensPromise=new Promise(((e,n)=>{this._secretStorage.get(t).then((e=>{if(!e){if(r.has(t)){const e=r.get(t);r.delete(t),this._didChangeInOtherWindow.fire({added:[],updated:[],removed:[{key:t,value:e}]})}return r}const n=this.parseSecret(e),i=r.get(t);return i?(e!==this.serializeSecret(i)&&(r.set(t,n),this._didChangeInOtherWindow.fire({added:[],updated:[t],removed:[]})),r):(r.set(t,n),this._didChangeInOtherWindow.fire({added:[t],updated:[],removed:[]}),r)}),(e=>(i.default.error(e),r))).then(e)})),this._operationInProgress=!1}}},3310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountAccessSecretStorage=t.ScopedAccountAccess=void 0;const n=r(1398);t.ScopedAccountAccess=class{constructor(e,t,r,o){this._secretStorage=e,this._cloudName=t,this._clientId=r,this._authority=o,this._onDidAccountAccessChangeEmitter=new n.EventEmitter,this.onDidAccountAccessChange=this._onDidAccountAccessChangeEmitter.event,this.value=new Array,this._accountAccessSecretStorage=new i(this._secretStorage,this._cloudName,this._clientId,this._authority),this._accountAccessSecretStorage.onDidChange((()=>this.update()))}initialize(){return this.update()}isAllowedAccess(e){return this.value.includes(e.homeAccountId)}async setAllowedAccess(e,t){if(t){if(this.value.includes(e.homeAccountId))return;await this._accountAccessSecretStorage.store([...this.value,e.homeAccountId])}else await this._accountAccessSecretStorage.store(this.value.filter((t=>t!==e.homeAccountId)))}async update(){const e=new Set(this.value),t=await this._accountAccessSecretStorage.get();this.value=t??[],e.size===this.value.length&&this.value.every((t=>e.has(t)))||this._onDidAccountAccessChangeEmitter.fire()}};class i{constructor(e,t,r,i){this._secretStorage=e,this._cloudName=t,this._clientId=r,this._authority=i,this._onDidChangeEmitter=new n.EventEmitter,this.onDidChange=this._onDidChangeEmitter.event,this._key=`accounts-${this._cloudName}-${this._clientId}-${this._authority}`,this._disposable=n.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange((e=>{e.key===this._key&&this._onDidChangeEmitter.fire()})))}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}t.AccountAccessSecretStorage=i},1619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Delayer=t.IntervalTimer=t.SequencerByKey=t.MicrotaskDelay=void 0,t.raceCancellationError=o,t.raceTimeoutError=s,t.raceCancellationAndTimeoutError=function(e,t,r){return o(s(e,r),t)},t.once=a,t.toPromise=function(e){return new Promise((t=>a(e)(t)))};const n=r(1398);t.MicrotaskDelay=Symbol("MicrotaskDelay"),t.SequencerByKey=class{constructor(){this.promiseMap=new Map}queue(e,t){const r=(this.promiseMap.get(e)??Promise.resolve()).catch((()=>{})).then(t).finally((()=>{this.promiseMap.get(e)===r&&this.promiseMap.delete(e)}));return this.promiseMap.set(e,r),r}};class i extends n.Disposable{constructor(){super((()=>this.cancel())),this._token=-1}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval((()=>{e()}),t)}}function o(e,t){return new Promise(((r,i)=>{const o=t.onCancellationRequested((()=>{o.dispose(),i(new n.CancellationError)}));e.then(r,i).finally((()=>o.dispose()))}))}function s(e,t){return new Promise(((r,i)=>{const o=setTimeout((()=>{i(new n.CancellationError)}),t);e.then(r,i).finally((()=>clearTimeout(o)))}))}function a(e){return(t,r=null,n)=>{let i,o=!1;return i=e((e=>{if(!o)return i?i.dispose():o=!0,t.call(r,e)}),null,n),o&&i.dispose(),i}}t.IntervalTimer=i,t.Delayer=class{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,r=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})));const n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=r===t.MicrotaskDelay?(e=>{let t=!0;return queueMicrotask((()=>{t&&(t=!1,e())})),{isTriggered:()=>t,dispose:()=>{t=!1}}})(n):((e,t)=>{let r=!0;const n=setTimeout((()=>{r=!1,t()}),e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(n),r=!1}}})(r,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new n.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}},3518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretStorageCachePlugin=void 0;const n=r(1398);t.SecretStorageCachePlugin=class{constructor(e,t){this._secretStorage=e,this._key=t,this._onDidChange=new n.EventEmitter,this.onDidChange=this._onDidChange.event,this._disposable=n.Disposable.from(this._onDidChange,this._registerChangeHandler())}_registerChangeHandler(){return this._secretStorage.onDidChange((e=>{e.key===this._key&&this._onDidChange.fire()}))}async beforeCacheAccess(e){const t=await this._secretStorage.get(this._key);this._value=t,t&&e.tokenCache.deserialize(t)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.serialize();t!==this._value&&await this._secretStorage.store(this._key,t)}}dispose(){this._disposable.dispose()}}},4539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBufferer=void 0,t.EventBufferer=class{constructor(){this.data=[]}wrapEvent(e,t,r){return(n,i,o)=>e((e=>{const o=this.data[this.data.length-1];if(!t)return void(o?o.buffers.push((()=>n.call(i,e))):n.call(i,e));const s=o;s?(s.items??(s.items=[]),s.items.push(e),0===s.buffers.length&&o.buffers.push((()=>{s.reducedResult??(s.reducedResult=r?s.items.reduce(t,r):s.items.reduce(t)),n.call(i,s.reducedResult)}))):n.call(i,t(r,e))}),void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const r=e();return this.data.pop(),t.buffers.forEach((e=>e())),r}async bufferEventsAsync(e){const t={buffers:new Array};this.data.push(t);try{return await e()}finally{this.data.pop(),t.buffers.forEach((e=>e()))}}}},5803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createExperimentationService=async function(e,t,r){const i=e.extension.id,o=e.extension.packageJSON.version,s=(0,n.getExperimentationService)(i,o,r?n.TargetPopulation.Insiders:n.TargetPopulation.Public,t,e.globalState);return await s.initializePromise,await s.initialFetch,s};const n=r(1566)},5541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalLoggerOptions=void 0;const n=r(341),i=r(1398);t.MsalLoggerOptions=class{constructor(e){this._output=e,this.piiLoggingEnabled=!1}get logLevel(){return this._toMsalLogLevel(i.env.logLevel)}loggerCallback(e,t,r){if(r)this._output.debug("Skipped logging message because it may contain PII");else switch(e){case n.LogLevel.Error:return void this._output.error(t);case n.LogLevel.Warning:return void this._output.warn(t);case n.LogLevel.Info:return void this._output.debug(t);case n.LogLevel.Verbose:return void this._output.trace(t);case n.LogLevel.Trace:return;default:return void this._output.debug(t)}}_toMsalLogLevel(e){switch(e){case i.LogLevel.Trace:return n.LogLevel.Trace;case i.LogLevel.Debug:return n.LogLevel.Verbose;case i.LogLevel.Info:return n.LogLevel.Info;case i.LogLevel.Warning:return n.LogLevel.Warning;case i.LogLevel.Error:return n.LogLevel.Error;default:return n.LogLevel.Info}}}},583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriHandlerLoopbackClient=void 0;const n=r(1398),i=r(1619);t.UriHandlerLoopbackClient=class{constructor(e,t,r){this._uriHandler=e,this._redirectUri=t,this._logger=r}async listenForAuthCode(){const e=await(0,i.toPromise)(this._uriHandler.event);this._logger.debug(`Received URL event. Authority: ${e.authority}`);const t=new URL(e.toString(!0));return{code:t.searchParams.get("code")??void 0,state:t.searchParams.get("state")??void 0,error:t.searchParams.get("error")??void 0,error_description:t.searchParams.get("error_description")??void 0,error_uri:t.searchParams.get("error_uri")??void 0}}getRedirectUri(){return this._redirectUri}closeServer(){}async openBrowser(e){const t=await n.env.asExternalUri(n.Uri.parse(`${n.env.uriScheme}://vscode.microsoft-authentication`)),r=n.Uri.parse(e+`&state=${encodeURI(t.toString(!0))}`);await n.env.openExternal(r)}}},1883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeData=void 0;const r=["openid","email","profile","offline_access"];t.ScopeData=class{constructor(e=[]){this.originalScopes=e;const t=[...e];t.sort(),this.allScopes=t,this.scopeStr=t.join(" "),this.scopesToSend=this.getScopesToSend(t),this.clientId=this.getClientId(this.allScopes),this.tenant=this.getTenantId(this.allScopes)}getClientId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e),void 0)??"aebc6443-996d-45c2-90f0-388ff96faa56"}getTenantId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e),void 0)??"organizations"}getScopesToSend(e){const t=e.filter((e=>!e.startsWith("VSCODE_"))),n=new Set(t);for(const e of r)n.delete(e);return n.size||t.push("User.Read"),t}}},2417:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=t.MicrosoftAuthenticationTelemetryReporter=void 0;const i=n(r(1170));class o{constructor(e){this.sharedProperties={},this._telemetryReporter=new i.default(e)}get telemetryReporter(){return this._telemetryReporter}setSharedProperty(e,t){this.sharedProperties[e]=t}postEvent(e,t){const r={...this.sharedProperties,...Object.fromEntries(t)};this._telemetryReporter.sendTelemetryEvent(e,r)}sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("login",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logout")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutFailed")}sendAccountEvent(e,t){this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(this._scrubGuids(e)),accountType:t})}_scrubGuids(e){return e.map((e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}")))}}t.MicrosoftAuthenticationTelemetryReporter=o,t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=class extends o{sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloud")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},9529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportedEnvironment=function(e){return n.env.uiKind===n.UIKind.Desktop||(!!function(e){if(!/^https?$/i.test(e.scheme))return!1;const t=e.authority.split(":")[0];return i.indexOf(t)>=0}(e)||"https"===e.scheme&&(/(?:^|\.)vscode\.dev$/.test(e.authority)||/(?:^|\.)github\.dev$/.test(e.authority)||/(?:^|\.)github\.localhost$/.test(e.authority)))};const n=r(1398),i=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"]},5951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomUUID=function(){return crypto.randomUUID()},t.generateCodeVerifier=function(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,i).join("")},t.generateCodeChallenge=async function(e){return function(e){let t="";const r=new Uint8Array(e),i=r.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(r[e]);return(0,n.base64Encode)(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(await function(e){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",t)}(e))};const n=r(2866);function i(e){return("0"+e.toString(16)).slice(-2)}},5256:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e){const t=new h.MicrosoftAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey),r=await(0,d.createExperimentationService)(e,t,"vscode"!==c.env.uriScheme);g=p(r),e.subscriptions.push(c.workspace.onDidChangeConfiguration((async e=>{if(!e.affectsConfiguration("microsoft-authentication.implementation")||g===p(r))return;const t=c.l10n.t("Reload");await c.window.showInformationMessage("Reload required",{modal:!0,detail:c.l10n.t("Microsoft Account configuration has been changed.")},t)===t&&c.commands.executeCommand("workbench.action.reloadWindow")}))),g&&"undefined"==typeof navigator?await l.activate(e,t):await u.activate(e,t.telemetryReporter)},t.deactivate=function(){g?l.deactivate():u.deactivate()};const c=r(1398),u=s(r(7773)),l=s(r(8428)),d=r(5803),h=r(2417),f=a(r(8377));function p(e){const t=c.workspace.getConfiguration("microsoft-authentication").inspect("implementation");if(void 0!==t?.workspaceFolderValue)return f.default.info(`Acquired MSAL enablement value from 'workspaceFolderValue'. Value: ${t.workspaceFolderValue}`),"msal"===t.workspaceFolderValue;if(void 0!==t?.workspaceValue)return f.default.info(`Acquired MSAL enablement value from 'workspaceValue'. Value: ${t.workspaceValue}`),"msal"===t.workspaceValue;if(void 0!==t?.globalValue)return f.default.info(`Acquired MSAL enablement value from 'globalValue'. Value: ${t.globalValue}`),"msal"===t.globalValue;const r=e.getTreatmentVariable("vscode","microsoft.useMsal");return void 0!==r?(f.default.info(`Acquired MSAL enablement value from 'exp'. Value: ${r}`),r):(f.default.info("Acquired MSAL enablement value from default. Value: false"),!1)}let g},7773:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e,t){e.globalState.update("msalMigration",!1);const r=new h.UriEventHandler;e.subscriptions.push(r);const n=new d.BetterTokenStorage("microsoft.login.keylist",e),i=new l.AzureActiveDirectoryService(f.default,e,r,n,t,u.Environment.AzureCloud);await i.initialize(),e.subscriptions.push(c.authentication.registerAuthenticationProvider("microsoft","Microsoft",{onDidChangeSessions:i.onDidChangeSessions,getSessions:(e,t)=>i.getSessions(e,t?.account),createSession:async(e,r)=>{try{return t.sendTelemetryEvent("login",{scopes:JSON.stringify(e.map((e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}"))))}),await i.createSession(e,r?.account)}catch(e){throw t.sendTelemetryEvent("loginFailed"),e}},removeSession:async e=>{try{t.sendTelemetryEvent("logout"),await i.removeSessionById(e)}catch(e){t.sendTelemetryEvent("logoutFailed")}}},{supportsMultipleAccounts:!0}));let o=await p(e,t,r,n);e.subscriptions.push(c.workspace.onDidChangeConfiguration((async i=>{i.affectsConfiguration("microsoft-sovereign-cloud")&&(o?.dispose(),o=await p(e,t,r,n))})))},t.deactivate=function(){};const c=s(r(1398)),u=r(8197),l=r(8447),d=r(2410),h=r(3683),f=a(r(8377));async function p(e,t,r,n){const i=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let o;if(!i)return;if("custom"===i){const e=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await c.window.showErrorMessage(c.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{u.Environment.add(e)}catch(e){return void(await c.window.showErrorMessage(c.l10n.t("Error validating custom environment setting: {0}",e.message),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}o=e.name}else o=i;const s=u.Environment.get(o);if(!s)return void await c.window.showErrorMessage(c.l10n.t("The environment `{0}` is not a valid environment.",o),c.l10n.t("Open settings"));const a=new l.AzureActiveDirectoryService(c.window.createOutputChannel(c.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),e,r,n,t,s);await a.initialize();const d=c.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",o,{onDidChangeSessions:a.onDidChangeSessions,getSessions:e=>a.getSessions(e),createSession:async e=>{try{return t.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(e.map((e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}"))))}),await a.createSession(e)}catch(e){throw t.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed"),e}},removeSession:async e=>{try{t.sendTelemetryEvent("logoutMicrosoftSovereignCloud"),await a.removeSessionById(e)}catch(e){t.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},{supportsMultipleAccounts:!0});return e.subscriptions.push(d),d}},8428:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e,t){const r=new a.UriEventHandler;e.subscriptions.push(r);const n=new s.MsalAuthProvider(e,t,o.default,r);await n.initialize(),e.subscriptions.push(c.authentication.registerAuthenticationProvider("microsoft","Microsoft",n,{supportsMultipleAccounts:!0}));let i=await l(e,r);e.subscriptions.push(c.workspace.onDidChangeConfiguration((async t=>{t.affectsConfiguration("microsoft-sovereign-cloud")&&(i?.dispose(),i=await l(e,r))})))},t.deactivate=function(){};const i=r(8197),o=n(r(8377)),s=r(2583),a=r(3683),c=r(1398),u=r(2417);async function l(e,t){const r=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let n;if(!r)return;if("custom"===r){const e=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await c.window.showErrorMessage(c.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{i.Environment.add(e)}catch(e){return void(await c.window.showErrorMessage(c.l10n.t("Error validating custom environment setting: {0}",e.message),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}n=e.name}else n=r;const o=i.Environment.get(n);if(!o)return void await c.window.showErrorMessage(c.l10n.t("The environment `{0}` is not a valid environment.",n),c.l10n.t("Open settings"));const a=new s.MsalAuthProvider(e,new u.MicrosoftSovereignCloudAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey),c.window.createOutputChannel(c.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),t,o);await a.initialize();const l=c.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",n,a,{supportsMultipleAccounts:!0});return e.subscriptions.push(l),l}},8377:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(1398)),c=a.window.createOutputChannel(a.l10n.t("Microsoft Authentication"),{log:!0});t.default=c},2583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalAuthProvider=void 0;const n=r(341),i=r(1398),o=r(8197),s=r(3226),a=r(583),c=r(215),u=r(1883),l=r(4539),d=r(2410),h="https://vscode.dev/redirect";t.MsalAuthProvider=class{constructor(e,t,r,n,a=o.Environment.AzureCloud){this._context=e,this._telemetryReporter=t,this._logger=r,this._uriHandler=n,this._env=a,this._eventBufferer=new l.EventBufferer,this._onDidChangeSessionsEmitter=new i.EventEmitter,this.onDidChangeSessions=this._onDidChangeSessionsEmitter.event,this._disposables=e.subscriptions,this._publicClientManager=new s.CachedPublicClientApplicationManager(e.globalState,e.secrets,this._logger,this._env.name);const c=this._eventBufferer.wrapEvent(this._publicClientManager.onDidAccountsChange,((e,t)=>{if(!e)return t;const r={added:[...e.added??[],...t.added??[]],deleted:[...e.deleted??[],...t.deleted??[]],changed:[...e.changed??[],...t.changed??[]]};return{added:Array.from(new Map(r.added.map((e=>[e.username,e]))).values()),deleted:Array.from(new Map(r.deleted.map((e=>[e.username,e]))).values()),changed:Array.from(new Map(r.changed.map((e=>[e.username,e]))).values())}}),{added:new Array,deleted:new Array,changed:new Array})((e=>this._handleAccountChange(e)));this._disposables.push(this._onDidChangeSessionsEmitter,this._publicClientManager,c)}async _migrateSessions(){const e=new d.BetterTokenStorage("microsoft.login.keylist",this._context),t=await e.getAll((e=>(e.endpoint||(e.endpoint=o.Environment.AzureCloud.activeDirectoryEndpointUrl),e.endpoint===this._env.activeDirectoryEndpointUrl)));this._context.globalState.update("msalMigration",!0);const r=new Map;for(const e of t){const t=new u.ScopeData(e.scope.split(" ")),n=`${t.clientId}:${t.tenant}`;r.has(n)||r.set(n,{clientId:t.clientId,tenant:t.tenant,refreshTokens:[]}),r.get(n).refreshTokens.push(e.refreshToken)}for(const{clientId:e,tenant:t,refreshTokens:n}of r.values())await this.getOrCreatePublicClientApplication(e,t,n)}async initialize(){await this._eventBufferer.bufferEventsAsync((()=>this._publicClientManager.initialize())),this._context.globalState.get("msalMigration",!1)||await this._migrateSessions();for(const e of this._publicClientManager.getAll())for(const t of e.accounts){if(!t.idTokenClaims?.tid)continue;const e=t.idTokenClaims.tid,r="9188040d-6c67-4c5b-b112-36a304b66dad"===e||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===e?"msa":"aad";this._telemetryReporter.sendAccountEvent([],r)}}_handleAccountChange({added:e,changed:t,deleted:r}){this._logger.debug(`[_handleAccountChange] added: ${e.length}, changed: ${t.length}, deleted: ${r.length}`),this._onDidChangeSessionsEmitter.fire({added:e.map(this.sessionFromAccountInfo),changed:t.map(this.sessionFromAccountInfo),removed:r.map(this.sessionFromAccountInfo)})}async getSessions(e,t){const r=void 0===e,n=new u.ScopeData(e);if(this._logger.info("[getSessions]",r?"[all]":`[${n.scopeStr}]`,"starting"),r){const e=new Map;for(const t of this._publicClientManager.getAll())for(const r of t.accounts)e.has(r.homeAccountId)||e.set(r.homeAccountId,this.sessionFromAccountInfo(r));const t=Array.from(e.values());return this._logger.info("[getSessions] [all]",`returned ${t.length} session(s)`),t}const i=await this.getOrCreatePublicClientApplication(n.clientId,n.tenant),o=await this.getAllSessionsForPca(i,n.originalScopes,n.scopesToSend,t?.account);return this._logger.info(`[getSessions] [${n.scopeStr}] returned ${o.length} session(s)`),o}async createSession(e,t){const r=new u.ScopeData(e);this._logger.info("[createSession]",`[${r.scopeStr}]`,"starting");const o=await this.getOrCreatePublicClientApplication(r.clientId,r.tenant);let s;try{const e=i.window.nativeHandle?Buffer.from(i.window.nativeHandle):void 0;s=await o.acquireTokenInteractive({openBrowser:async e=>{await i.env.openExternal(i.Uri.parse(e))},scopes:r.scopesToSend,successTemplate:c.loopbackTemplate,errorTemplate:c.loopbackTemplate,loginHint:t.account?.label,prompt:t.account?.label?void 0:"select_account",windowHandle:e})}catch(e){if(e instanceof i.CancellationError){const t=i.l10n.t("Yes");if(!await i.window.showErrorMessage(i.l10n.t("Having trouble logging in?"),{modal:!0,detail:i.l10n.t("Would you like to try a different way to sign in to your Microsoft account? ({0})","protocol handler")},t))throw this._telemetryReporter.sendLoginFailedEvent(),e}if(e instanceof n.ServerError)throw this._telemetryReporter.sendLoginFailedEvent(),e;const c=new a.UriHandlerLoopbackClient(this._uriHandler,h,this._logger);try{const e=i.window.nativeHandle?Buffer.from(i.window.nativeHandle):void 0;s=await o.acquireTokenInteractive({openBrowser:e=>c.openBrowser(e),scopes:r.scopesToSend,loopbackClient:c,loginHint:t.account?.label,prompt:t.account?.label?void 0:"select_account",windowHandle:e})}catch(e){throw this._telemetryReporter.sendLoginFailedEvent(),e}}if(!s)throw this._telemetryReporter.sendLoginFailedEvent(),new Error("No result returned from MSAL");const l=this.sessionFromAuthenticationResult(s,r.originalScopes);return this._telemetryReporter.sendLoginEvent(l.scopes),this._logger.info("[createSession]",`[${r.scopeStr}]`,"returned session"),this._onDidChangeSessionsEmitter.fire({added:[l],changed:[],removed:[]}),l}async removeSession(e){this._logger.info("[removeSession]",e,"starting");const t=new Array;for(const r of this._publicClientManager.getAll()){const n=r.accounts;for(const i of n)i.homeAccountId===e&&(this._telemetryReporter.sendLogoutEvent(),t.push(r.removeAccount(i)),this._logger.info(`[removeSession] [${e}] [${r.clientId}] [${r.authority}] removing session...`))}if(!t.length)return void this._logger.info("[removeSession]",e,"session not found");const r=await Promise.allSettled(t);for(const t of r)"rejected"===t.status&&(this._telemetryReporter.sendLogoutFailedEvent(),this._logger.error("[removeSession]",e,"error removing session",t.reason));this._logger.info("[removeSession]",e,`attempted to remove ${t.length} sessions`)}async getOrCreatePublicClientApplication(e,t,r){const n=new URL(t,this._env.activeDirectoryEndpointUrl).toString();return await this._publicClientManager.getOrCreate(e,n,r)}async getAllSessionsForPca(e,t,r,n){const i=n?e.accounts.filter((e=>e.homeAccountId===n.id)):e.accounts,o=[];return this._eventBufferer.bufferEventsAsync((async()=>{for(const n of i)try{const i=await e.acquireTokenSilent({account:n,scopes:r,redirectUri:h});o.push(this.sessionFromAuthenticationResult(i,t))}catch(e){continue}return o}))}sessionFromAuthenticationResult(e,t){return{accessToken:e.accessToken,idToken:e.idToken,id:e.account?.homeAccountId??e.uniqueId,account:{id:e.account?.homeAccountId??e.uniqueId,label:e.account?.username??"Unknown"},scopes:t}}sessionFromAccountInfo(e){return{accessToken:"1234",id:e.homeAccountId,scopes:[],account:{id:e.homeAccountId,label:e.username},idToken:e.idToken}}}},1589:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.LoopbackAuthServer=void 0;const a=s(r(8611)),c=r(7016),u=s(r(9896)),l=s(r(6928)),d=r(6982);function h(e,t){u.readFile(t,((t,r)=>{t?(console.error(t),e.writeHead(404),e.end()):(e.writeHead(200,{"content-length":r.length}),e.end(r))}))}t.LoopbackAuthServer=class{set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}constructor(e,t){if(this.nonce=(0,d.randomBytes)(16).toString("base64"),!e)throw new Error("serveRoot must be defined");if(!t)throw new Error("startingRedirect must be defined");let r;this._startingRedirect=new c.URL(t),this._resultPromise=new Promise(((e,t)=>r={resolve:e,reject:t})),this._server=a.createServer(((t,n)=>{const i=new c.URL(t.url,`http://${t.headers.host}`);switch(i.pathname){case"/signin":(i.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(n.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}`}),n.end()),n.writeHead(302,{location:this._startingRedirect.toString()}),n.end();break;case"/callback":{const e=i.searchParams.get("code")??void 0,t=i.searchParams.get("state")??void 0,o=(i.searchParams.get("nonce")??"").replace(/ /g,"+"),s=i.searchParams.get("error")??void 0;if(s){n.writeHead(302,{location:`/?error=${i.searchParams.get("error_description")}`}),n.end(),r.reject(new Error(s));break}if(!e||!t||!o){n.writeHead(400),n.end();break}if(this.state!==t){n.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}`}),n.end(),r.reject(new Error("State does not match."));break}if(this.nonce!==o){n.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}`}),n.end(),r.reject(new Error("Nonce does not match."));break}r.resolve({code:e,state:t}),n.writeHead(302,{location:"/"}),n.end();break}case"/":h(n,l.join(e,"index.html"));break;default:h(n,l.join(e,i.pathname.substring(1)))}}))}start(){return new Promise(((e,t)=>{if(this._server.listening)throw new Error("Server is already started");const r=setTimeout((()=>{t(new Error("Timeout waiting for port"))}),5e3);this._server.on("listening",(()=>{const t=this._server.address();if("string"==typeof t)this.port=parseInt(t);else{if(!(t instanceof Object))throw new Error("Unable to determine port");this.port=t.port}clearTimeout(r),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)})),this._server.on("error",(e=>{t(new Error(`Error listening to server: ${e}`))})),this._server.on("close",(()=>{t(new Error("Closed"))})),this._server.listen(0,"127.0.0.1")}))}stop(){return new Promise(((e,t)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close((r=>{r?t(r):e()}))}))}waitForOAuthResponse(){return this._resultPromise}}},2866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64Encode=function(e){return Buffer.from(e,"binary").toString("base64")},t.base64Decode=function(e){return Buffer.from(e,"base64").toString("utf8")}},6244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequencer=t.CachedPublicClientApplication=void 0;const n=r(341),i=r(6560),o=r(1398),s=r(1619),a=r(3518),c=r(5541),u=r(3310);t.CachedPublicClientApplication=class{constructor(e,t,r,s,d,h){this._clientId=e,this._authority=t,this._cloudName=r,this._globalMemento=s,this._secretStorage=d,this._logger=h,this._sequencer=new l,this._accounts=[],this._loggerOptions=new c.MsalLoggerOptions(this._logger),this._secretStorageCachePlugin=new a.SecretStorageCachePlugin(this._secretStorage,`pca:${JSON.stringify({clientId:this._clientId,authority:this._authority})}`),this._accountAccess=new u.ScopedAccountAccess(this._secretStorage,this._cloudName,this._clientId,this._authority),this._config={auth:{clientId:this._clientId,authority:this._authority},system:{loggerOptions:{correlationId:`${this._clientId}] [${this._authority}`,loggerCallback:(e,t,r)=>this._loggerOptions.loggerCallback(e,t,r),logLevel:n.LogLevel.Trace}},broker:{nativeBrokerPlugin:new i.NativeBrokerPlugin},cache:{cachePlugin:this._secretStorageCachePlugin}},this._isBrokerAvailable=this._config.broker?.nativeBrokerPlugin?.isBrokerAvailable??!1,this._onDidAccountsChangeEmitter=new o.EventEmitter,this.onDidAccountsChange=this._onDidAccountsChangeEmitter.event,this._onDidRemoveLastAccountEmitter=new o.EventEmitter,this.onDidRemoveLastAccount=this._onDidRemoveLastAccountEmitter.event,this._lastSeen=new Map,this._globalMemento.update(`lastRemoval:${this._clientId}:${this._authority}`,void 0),this._pca=new n.PublicClientApplication(this._config),this._disposable=o.Disposable.from(this._registerOnSecretStorageChanged(),this._onDidAccountsChangeEmitter,this._onDidRemoveLastAccountEmitter)}get accounts(){return this._accounts}get clientId(){return this._clientId}get authority(){return this._authority}async initialize(){this._isBrokerAvailable&&await this._accountAccess.initialize(),await this._sequencer.queue((()=>this._update()))}dispose(){this._disposable.dispose()}async acquireTokenSilent(e){this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}] [${e.account.username}] starting...`);const t=await this._sequencer.queue((()=>this._pca.acquireTokenSilent(e)));return this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}] [${e.account.username}] got result`),t.account&&!t.fromCache&&this._verifyIfUsingBroker(t)&&(this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}] [${e.account.username}] firing event due to change`),this._onDidAccountsChangeEmitter.fire({added:[],changed:[t.account],deleted:[]})),t}async acquireTokenInteractive(e){this._logger.debug(`[acquireTokenInteractive] [${this._clientId}] [${this._authority}] [${e.scopes?.join(" ")}] loopbackClientOverride: ${e.loopbackClient?"true":"false"}`);const t=await o.window.withProgress({location:o.ProgressLocation.Notification,cancellable:!0,title:o.l10n.t("Signing in to Microsoft...")},((t,r)=>(0,s.raceCancellationAndTimeoutError)(this._sequencer.queue((()=>this._pca.acquireTokenInteractive(e))),r,3e5)));return this._isBrokerAvailable&&await this._accountAccess.setAllowedAccess(t.account,!0),t}async acquireTokenByRefreshToken(e){this._logger.debug(`[acquireTokenByRefreshToken] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}]`);const t=await this._sequencer.queue((()=>this._pca.acquireTokenByRefreshToken(e)));return t&&this._isBrokerAvailable&&t.account&&await this._accountAccess.setAllowedAccess(t.account,!0),t}removeAccount(e){return this._isBrokerAvailable?this._accountAccess.setAllowedAccess(e,!1):this._sequencer.queue((()=>this._pca.getTokenCache().removeAccount(e)))}_registerOnSecretStorageChanged(){return this._isBrokerAvailable?this._accountAccess.onDidAccountAccessChange((()=>this._sequencer.queue((()=>this._update())))):this._secretStorageCachePlugin.onDidChange((()=>this._sequencer.queue((()=>this._update()))))}_verifyIfUsingBroker(e){if(!e.fromNativeBroker)return!0;const t=e.account.homeAccountId,r=this._lastSeen.get(t),n=e.account.idTokenClaims.iat;return r?r!==n&&(this._lastSeen.set(t,n),!0):(this._lastSeen.set(t,n),!0)}async _update(){const e=this._accounts;this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication update before: ${e.length}`),this._pca.clearCache();let t=await this._pca.getAllAccounts();this._isBrokerAvailable&&(t=t.filter((e=>this._accountAccess.isAllowedAccess(e)))),this._accounts=t,this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication update after: ${t.length}`);const r=new Set(e.map((e=>e.homeAccountId))),n=new Set(t.map((e=>e.homeAccountId))),i=t.filter((e=>!r.has(e.homeAccountId))),o=e.filter((e=>!n.has(e.homeAccountId)));(i.length>0||o.length>0)&&(this._onDidAccountsChangeEmitter.fire({added:i,changed:[],deleted:o}),this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication accounts changed. added: ${i.length}, deleted: ${o.length}`),t.length||(this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication final account deleted. Firing event.`),this._onDidRemoveLastAccountEmitter.fire())),this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication update complete`)}};class l{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then((()=>e()),(()=>e()))}}t.Sequencer=l},3034:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});try{n=r(2556).net.fetch}catch{n=fetch}t.default=n},215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loopbackTemplate=void 0,t.loopbackTemplate='\n<!DOCTYPE html>\n<html lang="en">\n\n<head>\n\t<meta charset="utf-8" />\n\t<title>Microsoft Account - Sign In</title>\n\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t<style>\n\t\thtml {\n\t\t\theight: 100%;\n\t\t}\n\n\t\tbody {\n\t\t\tbox-sizing: border-box;\n\t\t\tmin-height: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 15px 30px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tcolor: white;\n\t\t\tfont-family: "Segoe UI","Helvetica Neue","Helvetica",Arial,sans-serif;\n\t\t\tbackground-color: #2C2C32;\n\t\t}\n\n\t\t.branding {\n\t\t\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAlqADAAQAAAABAAAAlgAAAADkcSUjAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAxaElEQVR4Ae19CbgdRbXu6j2cecoECTIkICCGzAg+7qeQ9544QFQgiXpVEJTEe59ALsbMwE5AMZCQELgKeSoqDlyiQogCSUAC6FNCQhIwQMALCbNMGc68p37/v7prnz47++yzzzl76OCu851d3dXV1VXVf69atWqtVZaUg397IPJwSCKT46zgx16wh+19XSYnO6PjE7H4MDuZ7BSxXhQJ/On5KTWbTSMm3bYlvHXmJNxj2SatFLFVioeWn5lDDwAgMvOU2NG/3DMo2h691rLtr4bqBtVX1NVJRUOVBIIiyYSI3RkXO9q5NZmU5S98tu7XpmQF2AwAzCoNwMrAMm/CT3HkrgqJTI/KwodOD4ZDa5MVdUPtfe+KxONKiSob6+SIE46XqsYGK5FIBoLVtQEJiSRaWp+xktaNuzpqfirTLcBOZNJtdnjrDCk6wMrA8hOgWJcZoFSrT4nJogfPESu4Dv8AVLTTEqsC9MkSDHB2NIYfkZGnjJOqpiZQrkTCAmWyKqtDgXBAEs0tLyZtWRl7953/u/uiUR0sVgH2xuKERCJJnhc6lIFV6B7OuXyAJrIpqDzVlQ99TUKVt0scAEomQaXskBAONlEFrgpvLdkZk6r6Wjn6IxMx2qVeY0IsSVrhqnCgMiiJA62v4a5Vkmz/4a7PDWtmVXSIfGMSAGYVFGCpGvGh5VCiHohEAiJXi77sKx+eLZU1N0hHCyuTAJCCDqCAKIUCYxv4AcY6YnL0qeOkZuhQSeoo6b5OG+AC4ZJQRThQFQbAWt7Bvf8ZSNg3P3deA8ZUF2AzADCrMAArA4u9XMoQsQMp6nHlH5dKdcMcad+fJGVCCKRAxfMU1XKB1dYpI8acKI0jj5FkDNSti3LpzSgjCQQmrFA4HKiuIMAO2EnrtkBb+8pdXxr2OjOd+bAd2vQ2cro8mXPjwH/LwBp4H/a/hLvuCsr06cpky6KHfiK1jRdJ235M80ClABMtmMMfKJQDNB4j1VCstg4ZcTKANWpkZmCxAJZiABYIhgO1VRwi21HGj63OxI27pje9xGz5BlgZWOzVUgSPjEqufOheqWmcIq37YwBCWKsDDGlQULnAUh6L4CLFAh/fCmCNOSE7sNxi3IilxiUQCAdrayR+oCWBcn4q0eSy56c2PMc80+6yg2t4MEAKVgYWO7HYwcz8Ig9XSTz5kNQ0nC7tB6KoBmZ+bnAZdaVUhIMHVDxWQtQCYI3thWKZ8rrHLICiCwCslmIKFGn/GoPm9S+cW7ddswJgZw4Ta9NkC/n6HsrA6nufDewOV/Ap8x8cggHvMUztTpLO5igkCV2g4hMIJI3dY56mqBdwgXOlWP0DlhbNkhVgtoQDELza7Z1iJ2J3J2P2DX8/r+Evmsm2A2dukkBfAYbZSDkUrQco+IQ0XeY9eKwEraekovYkzP4OBhUrlGLEXYB1q6QnzXPYLUtuJ5SLcei1k62tMYDKDtTWnRusrf5/J9zbcv9xa5snc9aooLJti3xYbsVy1lEOxekBI01f8NBECVnbJVx1hHS2YSrnGf4y1SQTwAyYTJzpvr6lAWA2AWYlW1vidrQjGait/VS4pvaPx9/bvOn43+4/GwCzDcAoC0P+rKNd1ot9q1s5d489YIa/BQ9+Ap/yAxKsgJSJ8gGXUc94I1BD4Og/j91zDodYGFTmvf88VsYnpiWSt7ICNXWcoQoo2uNJ217298/X/8bky7ZcVKZYppcKE0OaDg0FDn9XPfwFCYc3YEYGUEUpTQeFUNTgyZniDBUyfJdecu9hVJjAYS+YbGuJ8z9QXXNaqL5uzQlrm3d88O79X+Ujt860MIu17ExDZJliFealkMJYMn1NQNZATnXlQ9+ScPXNEm3H02zKrZQK9PpoxQ5+PBJ3pVwqbkBJpFhjPiSNx47sWY7V60Nyy4BaQDQhdqCyJgRWX5LNLbuA8xUfaKz7sTtEkkhhMuBoU5QpVm792rdclKbzkyWoFj64WCrrAKo2SNMxhukSjb4CvoZe/pGBebyfP88ZTNx14KQX6BdV4McQSna2JZItLXGrsurEUEPdra8daPnv43934CIy+Qoqth2hDKx8v4hpkKbrAi++3AUbf4AlmqukvTmuiytgWfr3OBdg/bs533cpwMDgJ6BFEQtUVB4dGlz/kxPuab5TH8S2A1z9bGi+6/o+KY/8FKkUw6KH/ktqm/4Ngk8y6UHltvVCH39IrQx1SsXmoI9l5Tc72xS2Y50AWGtnaEjdF46/p3mtPuJqqmOUQ356YMZtYai8xITrfzsGb4Dg8392W6IZ8FOygImXslwe8KOzF0Dti2D8vZbO0KC6z37wdwfm/d2yvu8dvbPfXr7acw8YcULkrw0Sa34EoBovHZCmq3Jez7dlvwKkGMCoqIHn+E8tQtse5n1UwZn37HXVq0nOeO14sj0Ws44tD4U59FjWLEaaPue+IyXWskMqa11QUfCZQgaK6OtxhqeaIkpInjLUyiRBjJKMhRrrqkOh5IXlodB0S3/ilDR9/cngyx+RcOVg6WjtXZqe67OUUqVnJroQsgu+nTzF/oXUlsIUTIk/WaZY/e18A6r5D34MXbkV0vTBEoVKZ1Zpen8flv2+FCHLnq0YV4N2Zwcwb48pU6z+dDfVXiKnRKGh8HksJt+tIp44penZlmj68yBzD6DjRQ8pmQbwWR4u2aSau0oQg2JRT9EaUqZYfep9vEaKFGhFs2DDN6Si8m594Yk4RQyF+0gVMRlgwyTzb9qRIZu51C02+Uzc7WLaSS55eIvJh1WHwnVGWt0O+VM1eFgMg4dIXBY8OF+qar8HlRd0JciHRRutEoXUy/Q836R5kjIemnwmzpjJTcwlD7O6+crAytaZ5ppK013B5/wNy6W6/goIPkmlMBD1V5puCu8h5gs66GV6E7zHPZRRsmSrgOS7ZI3K84O9Bg/zN/wcuulfVYMHZ+3Mw+Hk+bmmuHT8pPgrZki/aG4qfVymWNneAfmp6Y5TDpm34T6s+306v9L0bA/ntSzAMZdK45qht4qXKVaPPeTM/GISWVcjnZV/xPB3mho8WL1ofPZY4AAuGHmWAZMpKv3cpPsgLlOsTC/BLNHMXn+YRAOPglE/ERoK3a1oMt1XrDQdDsne4YEEl/kv1vOzPcetUxlY6Z3kLNFEZdGG42Gk/hh00w9Xg4fedNPTy8n7OdBjgKRl+5RcudUqy7G8ADDS9DkPnApQbYNjjsOlsz1/SzTeZ/V2bKiQiZk/HUvp572VWcTrfaNYVLddvTUkgyYl5Rk2c1NARtRbUkIHX3nrKyNNn/fgp6BCcL8E0DUxuHShNL3ULzBFqVCR1KwwlZi3LshnQbkDizMkS61i2dkmqDa2zMQpr7tuDc3FQyOmNH0TtD4hTZ97/1ckFLxDEniBCbpvUZMofzQjHdzp5/6oZaoWuQHLMLOrXmgQO34hvugzUMJgfMnvIH5I9rXfgRfTJpqv9P4vU63r7cAYPESmx2X+A7NgQLoCtn68q7BLNL3VK3U9DT1pp6lsPjzoBVj8mqFWSzOfW549B7ZwP4W67RB1fgm7ACh24T84DZTsKlm2/WKZOX499Z1l512OdYoPG5yqkho8qBAoIXMf+K5UNiyAch4axbdXwiWaVAU9BwZQqdHPJCAPD82/55aSHbp17BlY/JrXQLVmOoa/VTtnSqjqVuFI2LI3itkJmX6nCLrICVceIRVVD8iNTy2RK6yrtVGGypWshVke7Bg8kCqJzF2/Gk45LoGMynEf5HGPl6WEIl/yAIlPTjstcmWyP86tW+ZZoWvCo65sbvrblVLVcCuGCFtiUb6MCjQshH/oOquAtQJMbgKzp6TUD7lKVjy9Ua57bJAaaUZ2dnd0kb1KxblKXtAYPMxd/zss0VwibTB4sEGlaF7sl8AXZP61TjhxX1qqirYO2alTPx0c3JHetbGbdq6SmqZLpXUfAEUnAo7NWA8NYLNjkFBXQJj4NpxkTpMrJj6ixgXPTLNTXut6uLkoyTR4WD0zpg5kB7+3EbrpZ6g0veQyqh5abyTuRBSP1dsM8iYwnMBTn91ph4afdKw0jDrWtqForq+oh6KKmWyDoegOLO/MbuXOO6V20BekdS9ngRwyu+ftsaZ2DPIfmI8je7Rtvlwx9vuatdRDo/FJNe/3gzDZg8FD3RjH4KE/SzTsinTy0WOH9OFCWrl8hD4GPwZYSSj/wmzBqm2y7Ff23H7cZ856Lzxk6LfjLc30nFw69R1PKwmsrqGQL57iAg6DK3c+CCadoOIyhnoh8dzXy6EVhvvohMQ7bQyN18mNf1sHUURdSYdGCj6pnDd349H4RmDwUD0AULH5hQBVT+WaZwF0YEYkGA5KKGRZrfsWyS++fHGgtvofYEpArArjpLaXl93jZYd5N9SE4oTkM5vAd0yQln1k0vvLI/HLsZXa1TbCX7n1nNyw43z5zujHBZ7iVLhaYHfQqRYbafrcB8ZhDHkEk5BG6YD7oP63LVV04Q8AKhIxGuZjsAOVBZtx4C1JJKYmb/78Y/r8aKLKrsYR1A0NBAtfryxPcIkuPPbajjeUVTuOhBcUfM11E6Aa4iy4sqb9/4fPJVCvNrhADFd+QCqr/irLd8zSCYFjht3zjDRLvft0SakwdniYd/+ZuG+LhMKNKk03fj77VFiJMiuDjnGwuoG860a4ED1RAKojbttSwxrB7zYGHuc1MS55AF4IGUjLIUO46RksuNp/lYpqmC/Bw1x+mVln1mhB07Ju6AoMjf8iL738FTy3UzhrjIzm8/IfyKjTfdCc+6bC1eYa/Z7jMcfggS33BsPamDjTtfQ0c55eFtO95XiPzT0m5jUGU0Z6XhvyQ3g6ViXVtr2LZeWUiOZH2044YVL0dT3x5w8oFhys2rIeqiEwX2rPN6hMqx0n+G37YuDdpsqoY56V67eNV1DphCHSxeuZO/obU/7GMjn7m/PANyFNX6MC3XiCzvgpJjk4mDQTe3P0lMb0TNd4rzfde+wt1+TzXk8d66gWxUYC8P4f2yvtLWfJjQAV9e7JA7NtPg8haTzsPzD7GyUt72GbMqksYH35PWJoxDBbUTUK85ptsvypb8q3x96mz/TOSPtbCTV4wGvlJGTu+kWwSr7GFwYPfWoP51RoA4e+1n2PSqdMlZs/97aKSCKngOJGUvDrXiyTDQnsfqX4Z7bOCqc6DsHwNRcnYGjsgJQbHVE3+FZZ/vQdcC7u7CGDnar6XQUtI+L4aJpz/01gdK8BTwL5Gx9Egwd2vJ//teUY+kIBsCRBgGqpLPvMGXLzZxxQcVbrNCCti5wFBCfRL+2juMGW0QoseAzRd8D30O2fzUlP6+nc5DWxN583jUMSCm2Dw/y6QV+R007aKUu3nqRrkpxMcDjrS6BQ10jT59z/K6luvAyg4syPQ6wLqr4UWIq8Nih5NYe+Vuk48FmAap72Az8YB1Q9VwrdfNA3w9wm3RybOD2d5yakX2N6+nWTZtLNPeYc17lXC10yp93NcxM8uU1Sj7HJa2JvRm+aHjueelsh1qiqOREzx7/Jsh0X6mSC7gY5NOYSyKRz2xC24zv3rccQ8iXsRYOv2/ECnEsRpc2jQ19ch77Ols0ST5woy6as06GPn5f5YLJV0tu1Jp83zRybuKc83uvm2Bt7jzOVwTTmwT9dGu6ERS+TvDSV58UKFViH5EaNAfB6PwXftVofTD6J4oJsQaXpYGRnr6+V79y/GUs0ZykPR9/lbgN9G7NdNjeoDGLoqw2h3jfJDWefJiumvJbaszBX0VTf6Hu2Hs3bNQwT1m+kgiIRiB1KFSxYZFNLghoGdYMvkRuf3iHXbzlOxQUEV6ahcZorTZ/1wAjoiO3AyzkFwx+c8XORHKjiv5+DLRz6sA8h9nZuOzBdbvjMLK1uLkOfn9vl1g3A2r8CM8I9mEFV4qU4MiXvOzHH3th7zIK85+nH5rynfCYdW2ugnJBK/Ctrx0qw6hm5fvsXFFwcGimxN4HS9DUQfH573YfwPTwFg4fjpJM7PKjmhcnlV3Bx1ucOfe07xI6dJDees0Y4pNPFRy5DX1cLfXsUkCtOxxZjyU/Br9M+fEFUiekClwFFeszmpKeZc+8102xeM9dNbPJ5z538FbrkEghWQOZ1pyx7apUmczcqUi/VTQeoZq37H3g9T8J90FDpgMGDoVR8kLdMf1EuZ8ivqgthdWO1LPv0eFn22ZecoY+yKX+syjivYWC/kLxjFjYba3k37RwHbYQ/gU85qgDS977WMgyhZhL1SGJovFSWPf1ReIs7T2aOe1ULunTt2Vgp+L0EQcSiEF1YWDqiSoluDwKGg++HE0vDexhwmfO+1iYv+S0ubVHUksTQ9zVZfvYdWqzK71SU0L+nOFIv517vB9W/0gZ+l9vHkOSCtyIluHz0yxK1x0GV5GmdoeCVDfwpAyqBogJ82Zg1Vtd/RIKBF8B7nSUX/OJf4drz90qVYjHOBimecKgUY90ShOfuMaJU8B6nEgt+gFePpZlqLCBH25/DBzNaQUVAkXfMhwEK21Wath3ceW5d+PIkxSTPH7tXmk+eiOn6I1Dwo2ZDqcHF2nHxNY79jaskWLleRh33S2irQqVQfVIFHSDh3XHWrpQJLdPGeWMee/9ZbFECJkSY7VbVYcWh+eey7AmAaspz+iETUO4uDgOuSUkpcebad8mKuGCrZFlnh2fKsr/9FtP/86TNVfSDWkbmIoqQylljPEaib0lTExaGwra8/lpQosB9GE1QIOEqPxPW0tSUMa9pwEnqnIkmk3s5/1EUCo8V0E0TiBJmyvJzVusj2Mfs6/d5cCiWaSS/IkqxGWaffD70qWBoMIgyIcq4Uq9Irxfzx3myA5t43JKamoCMHClSXw+aSlkoMpihzwyFhKFJ1/vdPE5ZXdfy3Q5oTqFI6E5BRTvW8SK2lx+voNKPNgLWA338TxC6A4sNphRbjSkw/s8+eaa07fsurFhI2dhhfF2lDWTQoaggQVTpA0eJHHY4XiPOwetrDVNgwrnqiBtApRDl5DOtYP78BQ5vAlCFsSxzl7zcClHClB2iyoYAVARrmf8koWso9DZYFfHwdX0Y9oHTRy/CrOxt8AkrIZJALjpcpm51Xl+I9+m9H3MU05UQxEOHiVRXibwO7SRSrwoOjahbgJkQWE0e8oVztmji9Fkj0wcWMPRVVKiKTtuBy+XGsx0xiVKqyYXlVdlG/vshuN2YGVisoH5dnLWoOOImyJPeAc/wC3QcGGa4xnUMLErfFFaltk5k5CiRN94QaW4GuCBrVPGDCyRvLfkC2Hj+6zEO9Nh9MzzOOWhm3hhXteGOlldBTc/HssxmxzrpGbsYQ182omua21OT3FZrFzBPT+e85u0ak8+km3OVxOGkZ2DxDn7iEXQaxREzx/4SDD1M6m3sEAqO2ewQakrU/O6Pvije7p5785hrvGSu89jk8V7PlMdcN/eS0pih8UgMje++LfI2qoklOLXUZkt1wOcDkFfv1x8cI874Vkw+VgCB2RlMHXmsRejegwGIZ8JYjlon1rtfkhUXtOrQNx1C3CIFVstbtfTHZrtm8qbnST9nvkxp6enMw/+DeSzmTA86Y4Qa8eyT16NHT8UMrRVGCWTqM89uTA3MU7zlmWtMM9fT09Lzm3zmHhOn0vGWafJPkAw9TOQoAIygUb8eyJxi6HE9xXchnflT/ywUQctkunPaleY552HStZgJhi3M+uZBNgVVF4CKSzOR4oGKVTG457FfQm7AYm2pm04d9dknPwFqMB4znjexvkjtg6J9mVk7jUBiIPWqw2zxmFGC2SNqh+oRPBnB5QJIQcRjPXDKMYBzzry/zARVH7Q9EXsL1uEfx1rfUkdZ8dBQG/Y2plDHuQOLNTDgumL03/Gmxkln6y61fPYLuFhHMzSGgfkjj3aYezL1pGgMBjA8V+rlUjoDKr3uZE3l7zoFakHLqDbc0bIRVk0nyopzHtO1Pi4eF8ukras+vj3qG7DYDIKLPNd3xr0lweYJ4C0ehx2iX6T0TkcTXAZIFEccBYBxFqgyL2QheMyQmKJkSNc0FpGJenHoCwWx3hfAWl8EVOosWXnuPh36etPwZJH/ZKEX5r2H3lCeC7PFKyzunv1Ruf6pP0BK/xnIvEAaqFvFt1jqgCpw0OLQWN8gMhLKjG+8JtIK/1ecNbKGJGLpNeU9BCbTnWOagsZgMQOFRGiAWPHpECVsVIuZnR+Gh8PpmflM3F6UwDawnvz3S0Bd+k6xTOW5eG10pOaMPRuLxXCuTyl90hkuTL6Sx0AIlxXDIKpHjRQZMsShXPTa56VcqSHQTdcXBbJnQ2BWSWPR1kelDUPfcoBKVXci9vtFd6oQr6j/wGJtqCNFjUeGOWMuxBLQcixekwriO/KRLwHv0Hj4CPBeRzqgov0qAaT8Fqps+C4m2kkYY0BmEa4KghIvlZXnnCG3nveWZ+hT6LHp5XBwD/RvKPSWo0wrZkMMc6zZGBbfgT+t66DRyY6nkagDPM1Qwh+Ci4FDYwMWsisprcfQ2IGhkYw+KRazONloLIq1vvZWiFa+BJP2dchgybQ1MBYt8dCnjfD/z8AolmkfZ0NXA0JcvpgDt0Wdzd/Al45XFODSD4dG/wQCjOCiAcnRI0WaBrtMPb8D12KmAgvIHa2bpS3+IQUVhz6G94nasLalwD8Dp1imgo5ukSulH/NjuQGUywrdA78JQch7yGLmB8TmeQONCS6CbPgRWDSGu5Z/vAF+CkNfTS1mfXtXya1TL9dHqCXQIaLmwm/DBFJe7znT09PMuYl7upfXGdLLc1K7/7p58/+yOWNUccTYtVhS+QgsaPaBcPE5BJd/gndoHDTYlpHHBeB36oC89drZCirObA8VixkltmldmwkE6Wnm3MSmiEzn6Wkmb3rMfPjPP7D4oK3u0/78Z5FX9jhMsVq551o79/5iRDo0gomvAs818liR8ad1PXVa12H5qA89AKqVf2BxrYwCw5lrPieHD31C2jub5OUXk2CCAw7L5UNwcUxMQKHLCjTAKvsPct2Om5Bkq24aqW859LkH8ggsDB1k3uli59/v/jqMYO9Rvj2AmWFHR0BefglMMhza0LKGMzD/hQDUgRyj2fpBl8l12zdL5K9HpuwBVHTvv0r7tUb5AZb6bVoMYEFL8lv3zINu0o/AsBM9CTCMWAbBHCEOATXB1Y7pvU4WcZk5/PXfZTRLy6Cq6ufke09+VsHFehq1bb++TR/Va+CzQjK4EXe/5MvWLoerSeyXDPdBAVCwpOvFlxQqRHBhJrZnt7M4TOU8MzPzUYe4VaG4gS6FatGetfK97ddjaJyLa47RrB+NIQh8PwTOClGXgVEsgsrIdi5f+zOs+l8Bwahj7UuzJz5E//mDgDVcPX9lt8iB/Y7euj+HRdbWMZqNtiakfvAc8F2PSmTHYV1Do7aE+UobONf2C6jYE6gL33b/gUV+KgWqdX+AT6oLoOnARWhnhwcDKM669JhPRSCPxf/XXhHZS01PHPuqZ7SW5of9E3CNZj8mVbJLrtl+loIr4oojTM4Sxn7CFbuB9enfUKhakpNj8h93VUuyGvsl130UVilw323R94MTCCg9YYygp7hI1RQaOpB6vQEDCA6H1PrkOp03v97kgx/HnpL6V1CbqWgCv7hevrttsSy0Ilq7EgtQ2Wump33QW6kq9B1YpiMvvW8YhJ+PqdO0Ds9+yYoj/Ojam56kHqYHmgRwMaZFzVtvOuAaNtzBlR/B5bSAGqPYGAFbi9QPuVq+t+NfJJqcJpEJ+4QuLrlDWjmkeqBvQ6HZ4eGydcdLAO6DKqpPhI4SVZOp6OeARYHhAsekKZjwo8OiJ+Z16kbRAOLNV3nm5NElO5RhyvJLTHea3MiJ/iRq6v+3VFjPy7VPflxBxRmj2mNqK/7pf3IHltnh4fJ7P4IZ3zZoUg6Hdxp+pQ6oTFfqEOieKKBwzDh17AKLwyH/mR/meLJ/L7QN9jhDIvdB9CtTr0qMNneIiKEPhmH7lEfku9vnOoa+WIw3C9amP4oR+/AbzA1Y7Cxanlz++08CCI9DRbcWPgnIqGeWSnvBpR0L8JiYh/qPH+bTf6RREa8FNoFcAqKtoJ/B5bQFewZhO7141IaD3u9DJLFOZu+o1VUHP26np3Uu3k8vwDLSdCzRzFr7ZciiHgAQsPwBuyobfEW2LyVFokxjCCIee8BkQMV02v8RXNSPenk3zOYxwhpBKm/LFkw9TB6eDySY+03MsjIeu3I6qmTXYM+gwfYuWbLlNLULoHZtUYdGVtD8pzc+vfLefOnXvPem5zN5M6V3v9YzsChNp2Ibpemz7p0l4dpfqOeUJFSPnQ0wvTXo4ViR5FxLgYqnBlxpMTuGSnc02SK4OqBST3AZIwfTnvTYeUL3fk3P05dzlsf8DOa+no45a6QzXe4ZFKr6APjOv8o12y4v6p5BWlHvj6m0idMrb/Jma6S5Zu5Nvyc9vft5ZmDpEk3E0em+7N5rIX1eIdFWzGyVq6bgKfdAqmSCF1wpapUJXHgEh8NXXoILoBa/C1JN6+CyqBOUPI7t9AatxKzxLrn0vkp1bPdPODQeDCxdook4QqVZa2/D7GchZDjcL5mwQH7zFfQh5p0KKjc2YPOCy0vF+Koo5+KzXtkNfwz7HHBpAp/r2wALJdSNGyPUNE6DEuGzsuTJcY49JgTKzpYsvq18PivWHVjdpOlrfwvd9RmuM/787Jes4HIB6QUaW6Tgw4+Czb1IqTyZ+NdeFtn3btKR0pMZ85GhxsFvg5V39wyqHgWB6na5ZutMZSnoaIV9XKrQn2+yP/egfV2NNNJ0xjXDN0ql2S8Z0vR8BgLHK0pgxV0cOY/xnDAflU8tGIu+9aYzWRgCt0UJOF9znMH1bVjOZzt6L8vZM4h9zD2Drt3+LxIf97WUz9d8LWSbBYtcAZBrPm/7+noP8jsUS5XzoEc16+4mqR6+RSrqzkjtl8xCc/lnRUw+7zHTTEgde8Bz0LCIzLys/5oPFjPwkxCQDnn+2bPgYO1fwSTjOrh6G4Ya5pn+jDE0grpS5lXb9FUJP7VTIls+5Kw1gnL5wrDXvJz8xpj1oYFUzrt83dGSCMAZf81Y8FQHO+Pv7bkp0CCj95j3mZdujhl7yZSCCyDSYZCXcBzACwnAKLYGxqLxts2QPxwvd39zo8w/+ddQGDxHqR73Rwa3rMX59kc3RjBD44cw690JvusCHRqppVrKobGAfeaIEy5feyImfNg2pOooSNO7lmgK+GAt2lArnihxYkyAYeijAUYl9pjpaF4lt00/TX70lVfVWJSqwgvH/AE5T8eQ2AEzMw7n7jpdOqJxJWPIlC/XtPQCM92XMQ/ccbt7BtU1/QwiidWai+Kc96H6c0C+xh1W7fWQvzTBNVHxQGX6vhu4lGphjxnsLCrJKDZvmp4yw1KLGVBW9RsBd0oLxv4FIJyAOr+NZRXkx7ZsGviie/tnxvQ8uablcl9PecBv2VDj0D2DBl0i127bLpEnjtU26VIQBNLvkxCQ+v1XQJfqGHxNUEjHGthBHZ7eSQU4d7qTbChcLtLbMPaYSdgnyQ/Py7zHjHGntGDscxhaMHS3/re6asy0XYvBi/eFsQnpwdsscy0930DymHsdvha7fWEhu7J2HDZAfxYAm+bsSYih0fjDMHXoT2yeZervPc+WxmeZ6+bYe6+pS7Y0Nw+1PKfiq+dp1wzRFFC8OA5+Co72MfS1H1gtt5w7Xn54/otZ95gx7pTmjH5T4vvGw2nHFvVbZcDFupsO8B6bjjPXTOxtqzfNHDP2BpPONHOcLY+5tysvvdeg3dgzqKr+Llmy/SbNYvYMMvlzibvK7A4M3ptep2xpJq8pL/3ZmdLT09xzzgpH61INfSyYTMWMsYCDWV4Iin5JqDVfAFDN1PbopAJrlNmCDos2BI+TW2Th2FMByg3ujhrZ78tWZlGvweWTs2cQttNrugx81+MQS3xAh0blu3IbGv04ftIqJTOqC93BxtF+pTrafw6mYqNl1bl36CyJ03AytbkE406JM6xF4z8Jge6vAK6wTgDcvWNzKaaEefhxO0NjVd2pON4li7dOUXDx3ZC37CUwmwnmdZrYpDP2ppljE5t86efp96XnY34TzDFjSh//Bv/kvAYd4aIFGFzgj3vMdGCPmSHbR8stU59z/E4BUI4fiNwr43WntHDcl8G/rJJqgIu+rfwtpfe2EbNG1zKouv5eiWxbqv1Au4JeZo0GDObFegvNdC1bPnNvT/eZdJOPsTfNlM09oddgys7ruVEI5hxIsDj0VYKfAwFvb54Jby4XYg3NWeoYiMtFvgCqqZDaLRp/OcB1JZakKOci3YLDD1Ta7/9JWgbBRq6TlkGD5sjiJx+V2X/2n2VQDu8/IC17V2L42A1xA/z64KUXKujQR5eL2F4tFn0RBHI8+KnVOvSpNkWOQ1+2+tGdEgP5s0Xjr8WOW/8GgS9oozqOKCZFzlbL7NccXjfoWAY1fEzqq3fJVds+4YhZImARXF9k3lL89MGwXqhPQH56UQcsts6CuOE93ahR5UF5rimXXshhco+Z9pY1MrTzJLn5vB3gHypSi7PejhrIsUqzAVLKha4afytEF1NVpyug6hLFocoDqT/vdWR7mDU2O5ZBVdUb5KqtEYey4+Pxqj87n9JAn5i/+wkdBGdJZ9WUFyCQxA6rHS/hCyfDxSWd/AwdOuurgHYEFNw7sMfMLZ+frmrOpCrc17lQgcMqeZNF434LmdhkDDHc8zAEgB8iM0b2P3eOhWVQtD0J58FXy5VPbpBZ25oo83r++TfyqxyQ5/fgLOlwEfrm818Vq3U8KNc2LEI74BrYwwBNDH0sK9b5GmZ9p4FKrdJZTr6Gvt7qZ6T0V47ZBHP5SRCr7JMwpfQ+B5f71euXzaGRE522/di0oP4TUpvcJXM3f/z1mUdAhxvB5jDvv+BUiovQpCA3f+WADN1xCuRJD6oEnIx2/4KjdVCFPWY6WtZJdcuJcvO5m3XoUyZbFQn7V3Jf7zJS+oVjnsIEcTx2Z31FKqAtQUGqUmXi32f/rJjWCY1lHeFgCb/caTYGqnsY+OFHAnO3LGJXBMIWWBkeaU498MOPUyVTE4LLyI++dc+vAa4vYvji0EGpfPe85p70mGAM0CoCIR6dJ/953lI99patCUX+4bBICjbvsUFwB/kIpPRj8KL44fhzSCGgGBh3Axn41aQdsGqHWPZbr99+zLgT3gsNGvrtROuBBF5QrzIvLbPQP6jzwWDxOvr41t2rAK5LIWvijIp5s5FdKi9j6KvlUsVbYECnQpTwmA59o6fZUHArPZtJptfwXv8IboT68Bk6xPgRXClg4cALLvZiEjIVKDraiXBo2PB6qR9xmG1z59kMr7PQGMpYPup7MFCcocqRB91y7mUA1VVYLOVyDypuPCBrS1EmYwam47OiFL2zZSPoG4Y+BVWFOg7xA6hYTYKKlJOU66oJZ0rr/rtTS0CHgpReuxs/jmVQCPywI0JxztlC34SDKZapGgWN02H+RaB963ffxHreDzGzwteC3bNtBSTvZZOgkIehjzxkLBqRH5y7WIswWqmmPD/FNIfnFsUMS7bDYKRxBgSqFEVwKOm5T5i/WKELROxl/W7R06RW+g+KJXZnTIYdNVzqh9ONBprjVUEqVj0zPQd1660TIZB7GIaXkAv9+2+mADy3Y2gcgoVTp6E0dCCgOg5g1pe8WH4wbQNkLQHhHjMEpJ8DBY0RvjK8osg27HvduACCYjNcH0zJi90W1Ayd7DyVkbGtzAiswwAsfBeHELCchhnqM+OuRqkIXoD2noEL8LxvvY3GPCTh2B2yYnq7sx3ITH75bo84t/v210uVl2ybBf5wBfhDNAvrpqXeUUN70O1Gwt0w8OnAOhIUa8ShCiwio7dZXW/X/YsuUOVNDlVevA1uBCp+4Qz5HPd1NlyamucCrA53KDykgcXu5Rc+c3VI9g5KymhspE3m//UR2FptBumw+3mV5j0M+KlGHBHZ+ikM7/dj32sMP7EYKBcFqsUP2YCFncu681igWLQcTx8KWUZPzE62awNtLcru6bEDLfrQvJ+m8CpQ3X4q3tzD0PqogXYt5XjFB1cmYPXIvPtvKCw9k+onCBopfWT8ZkjksLzV+aYadqSk9KgsX3gx/k2/pD/LpPs8LgMr/QUZXfprJ2Bh3sK+123P6/JWIVWK0utgzg2ozPkhNL6UgWVemjemAJU8VwT7XjcMHQ8h8eNqqFEIlaKeyB9ngb0FD/ByyN1baXm9fgh9A3ltd26FRWysnVqcHWJW/OR9kNJ/GoLU4vBcBilGzGBil8/iAhkFpEMpIPXhrLBMsbJBzBhqKLAmcjN17HsNXXpHjdu8+mwl9P9apk9eKRR+0p9szvU6HlnK2G1xGVi9vXqvoUZk4oUA140w8KW2B2hGARfWDThYP++x1tckmNjNo9dK/ONWKdN3UeKa+fTxRtecC+pXbZkPcH0PqsPU5GdX5v8DZakMZgg0cZrkXYfC4Yf7bkkn/x3idMf775eAigBEXGFYcgo3U79EQtXQ7cSCKXX6CxIMunoo3KUOPVwtaXIZWH3qfi5Yu4YakQk/go3A51XafUi4U+pTQweWGSpIZWD1pwtVrwtS+iUT1ko8/nFVJaKtZKENNQyFMnF/6l7Ye2wrCIc62GukDKz+drSR0l8z6TG4s5yIPXbew9BIXXqKI7oYbgOCvsbeepl7vWneY/JfDMqH4bhEMRj2hAXjZxCsp8vAcl5J/34NuK4av1OsTpjPte+GQa5jqNG/ErvuUjDhVbmY6bqQ6cgFU6ZLRUyzEdRnbFIeKANroB1vloAiH31VAlEsAbVsd6T0/bZw8tQoJ1Qhvy8m99ysPZxs2d8mVujnZWB5XmO/D7kEREONyEcPyMkTTsEuFX+ERir2boRdZSGDUrVCPqAPZYMFCNbX84Yluy+qe7MMrD70XdasxlCDAtVrJv4vWP+sgadkDIsElzI9uN0gIdfYPNGlXOnFmMsljdFeLNAHmxorE/v33bv7oqalaK4/rWhL2k8DeThFEcaf1ZKJ0+HY4wegXOS5YAuI31zx5OJI8cib9L5UImpojgdS2QHfS0DFrFA4GKxrrEjs3/9fuy8e9DktdbFaQgz4AeUCvD2g5nOuO6VrJv0fDItL4E4JogjVsOUScm7BYMfEB93FC+b/oIuFTEiAcMYx+wsGahvDyVjnq4nmfReDUn1RH6pGKlayPBQW4hUYO0qamV0z8WpYMV0KhUH0tY4Q+ZfSG/AZnBUmTuDTiFsVNcFgbWPIjna8YLfun1H38uvHgVLdnvJN5rbdF9OJQrxbn5RJf1Yw1IDqzZVPfhEbiP5aN1BLUkG9F0MNBQt+UiBxj71rhdCaHno07QoLt1YIgGA7M9BbGC1zM5Bk+4GnwUIt3XNxw69cKixnPmyHNk121Yvcji9TrMIiEEtA6HAqDV4z8U5I6T+hzmyD3GW9Hx5vCDIGAzZzrIn5/eFwhxITVlVdKFBVF7Q7W59IdLSev/viprF7vt74S4JqEtsFlKWDijUpU6z8vo+eS0sZamyBlN7aBEONejXUsGCoYQDjvVvT8GNAZGaEXoqVUvTLH8VS/snCnmvVDQFa/tjR1sdsO3AdwHS/Wz0LgAptnTmJZkGZaq7ZysDyvsxCHxtwLdoxCiPMn2AgewQc2mb2eJMJWAQV0xHzlXZpkA4YWCiNQ5kdCtQ0WuCf4NmscwOmsd/f8/VBD2u3gDKduUmCmahTpm4rAytTrxQyLWW/uGUoKNejMNQ4CTr13cFF8GggenDgpVY89wLr6BHgsQ7DOjidTff5dbI0DnlhAEqSHdjNNh5fiw3Llu75+pC/IB0q2aqoAHcE3XkovZblp881yVJW+VKuPWDcKV36QqU0qJT+dPiN6AIXX7cGHPA4G7COGiF1AFaffDfQsw55KMsCoBok2bqfT7sTz7l+zzcGbdNHc+uVZzZh8jGZwOtzKAOrz12Wpxu8LgkWbr0XUvopEKimGWp4gEUJmAGZl2L1DVgsAYAKhAO19ZJs3o9j+Zkkg8v3XFL/rLaM9frwmbZulj6AppaBNYDOG/CtpApcAmJYuPUnMNS4SNr2gmO2HP/0TDdgMjEBRmDxkjLvOVEs3pWA92hQqDpJtuxrR7k/hl/AFS9f3PQirolAZCBvI9XURxP7/1MGVv/7Lj93upJqLWzh1qWQ0s/pcqdECT6umKGQxwAV05R5j9L8C8A6vMehUAFlBcNhq7oGgNp/wLKTt8bDVatevbDmNT6TIoOtg15MpvyFMTEPoQysPHTigIugTzG5Gowy9OoXPPEdMPTXwykwAUVqxi2KFUwKMgUWKRYYpWhchn/wGGCxAU5BkLWLeQegrATW8cJWVTUB9Q6YqlsqrI4f/P3iEW+zvpNus8Nb3wAVM6sEA25E9wLKwOreHyU8gycf405pwdavwZ3S7ZIAP5+EOyUbUvoUuFxQxeLY76FSjjj+WC+giK6kFa4IWxVVYMr3vQ5ErgzG965+ceZxyqErhXpjUsEAZTqwDCzTE36JzYxx/tZzYFS2DkpzdMHZiRcF7866L5DjFhJE7IhRx8CNfi135COg7EBFdQig4izvJSwdLU80t/7k1SuOamfTCk2h0ruvDKz0HvHDuRGkLtx2OpistXZlw1C7+T2w3xBWwV9yuKpKhh0xApuIYJ+gZDJgVdUGaMQAQD0HfN2w59Wmnxu5kwOoxaBQEfJbRQtlYBWtq/v4IJdyjbx9b1Pzu3uvxXB4QbCmqT4MnqmiBgYL4Mq4aZ7diQleLPokhKM37P5G453mKTrkzcCyi6OuY5KLFpeBVbSu7seDPLKuCffZw5rfjU6OJ2LjIQyFm2S7E2B7MRBI/OmlbwzdbEpXQPWyjmfyFjL+/4JPu45FLkyEAAAAAElFTkSuQmCC\');\n\t\t\tbackground-size: 24px;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: left center;\n\t\t\tpadding-left: 36px;\n\t\t\tfont-size: 20px;\n\t\t\tletter-spacing: -0.04rem;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: white;\n\t\t\ttext-decoration: none;\n\t\t}\n\n\t\t.message-container {\n\t\t\tflex-grow: 1;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tmargin: 0 30px;\n\t\t}\n\n\t\t.message {\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.4rem;\n\t\t}\n\n\t\tbody.error .message {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tbody.error .error-message {\n\t\t\tdisplay: block;\n\t\t}\n\n\t\t.error-message {\n\t\t\tdisplay: none;\n\t\t\tmax-width: 800px;\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.3rem;\n\t\t}\n\n\t\t.error-text {\n\t\t\tcolor: salmon;\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Light"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.svg#web") format("svg");\n\t\t\tfont-weight: 200\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semilight"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.svg#web") format("svg");\n\t\t\tfont-weight: 300\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.svg#web") format("svg");\n\t\t\tfont-weight: 400\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semibold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 600\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Bold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 700\n\t\t}\n\t</style>\n</head>\n\n<body>\n\t<a class="branding" href="https://code.visualstudio.com/">\n\t\tVisual Studio Code\n\t</a>\n\t<div class="message-container">\n\t\t<div class="message">\n\t\t\tYou are signed in now and can close this page.\n\t\t</div>\n\t\t<div class="error-message">\n\t\t\tAn error occurred while signing in:\n\t\t\t<div class="error-text"></div>\n\t\t</div>\n\t</div>\n\t<script>\n\t\tvar search = new URLSearchParams(window.location.search);\n\t\tvar error = search.get(\'error\');\n\t\tif (error) {\n\t\t\tconst description = search.get(\'error_description\');\n\t\t\tdocument.querySelector(\'.error-text\')\n\t\t\t\t.textContent = error + \' - \' + description;\n\t\t\tdocument.querySelector(\'body\')\n\t\t\t\t.classList.add(\'error\');\n\t\t}\n\t<\/script>\n</body>\n\n</html>\n'},3226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedPublicClientApplicationManager=void 0;const n=r(1398),i=r(6244);t.CachedPublicClientApplicationManager=class{constructor(e,t,r,i){this._globalMemento=e,this._secretStorage=t,this._logger=r,this._cloudName=i,this._pcas=new Map,this._pcaDisposables=new Map,this._onDidAccountsChangeEmitter=new n.EventEmitter,this.onDidAccountsChange=this._onDidAccountsChangeEmitter.event,this._pcasSecretStorage=new o(t,i),this._disposable=n.Disposable.from(this._pcasSecretStorage,this._registerSecretStorageHandler(),this._onDidAccountsChangeEmitter)}_registerSecretStorageHandler(){return this._pcasSecretStorage.onDidChange((()=>this._handleSecretStorageChange()))}async initialize(){let e;this._logger.debug("[initialize] Initializing PublicClientApplicationManager");try{e=await this._pcasSecretStorage.get()}catch(e){this._logger.error("[initialize] Error initializing PublicClientApplicationManager:",e),await this._pcasSecretStorage.delete()}if(!e)return;const t=new Array;for(const r of e)try{const{clientId:e,authority:n}=JSON.parse(r);t.push(this._doCreatePublicClientApplication(e,n,r))}catch(e){this._logger.error("[initialize] Error intitializing PCA:",r)}const r=await Promise.allSettled(t);let n=!1;for(const e of r)if("rejected"===e.status)this._logger.error("[initialize] Error getting PCA:",e.reason);else if(!e.value.accounts.length){n=!0;const t=JSON.stringify({clientId:e.value.clientId,authority:e.value.authority});this._pcaDisposables.get(t)?.dispose(),this._pcaDisposables.delete(t),this._pcas.delete(t),this._logger.debug(`[initialize] [${e.value.clientId}] [${e.value.authority}] PCA disposed because it's empty.`)}n&&await this._storePublicClientApplications(),this._logger.debug("[initialize] PublicClientApplicationManager initialized")}dispose(){this._disposable.dispose(),n.Disposable.from(...this._pcaDisposables.values()).dispose()}async getOrCreate(e,t,r){const n=JSON.stringify({clientId:e,authority:t});let i=this._pcas.get(n);if(i?this._logger.debug(`[getOrCreate] [${e}] [${t}] PublicClientApplicationManager cache hit`):(this._logger.debug(`[getOrCreate] [${e}] [${t}] PublicClientApplicationManager cache miss, creating new PCA...`),i=await this._doCreatePublicClientApplication(e,t,n),await this._storePublicClientApplications(),this._logger.debug(`[getOrCreate] [${e}] [${t}] PCA created.`)),r?.length){this._logger.debug(`[getOrCreate] [${e}] [${t}] Migrating refresh tokens to PCA...`);for(const n of r)try{const r=await i.acquireTokenByRefreshToken({refreshToken:n,forceCache:!0,scopes:[]});r?.account&&this._logger.debug(`[getOrCreate] [${e}] [${t}] Refresh token migrated to PCA.`)}catch(r){this._logger.error(`[getOrCreate] [${e}] [${t}] Error migrating refresh token:`,r)}await i.initialize()}return i}async _doCreatePublicClientApplication(e,t,r){const o=new i.CachedPublicClientApplication(e,t,this._cloudName,this._globalMemento,this._secretStorage,this._logger);this._pcas.set(r,o);const s=n.Disposable.from(o,o.onDidAccountsChange((e=>this._onDidAccountsChangeEmitter.fire(e))),o.onDidRemoveLastAccount((()=>{s.dispose(),this._pcaDisposables.delete(r),this._pcas.delete(r),this._logger.debug(`[_doCreatePublicClientApplication] [${e}] [${t}] PCA disposed. Firing off storing of PCAs...`),this._storePublicClientApplications()})));return this._pcaDisposables.set(r,s),await o.initialize(),o}getAll(){return Array.from(this._pcas.values())}async _handleSecretStorageChange(){let e;this._logger.debug("[_handleSecretStorageChange] Handling PCAs secret storage change...");try{e=await this._pcasSecretStorage.get()}catch(e){return void await this._storePublicClientApplications()}if(!e)return this._logger.debug("[_handleSecretStorageChange] PCAs deleted in secret storage. Disposing all..."),n.Disposable.from(...this._pcaDisposables.values()).dispose(),this._pcas.clear(),this._pcaDisposables.clear(),void this._logger.debug("[_handleSecretStorageChange] Finished PCAs secret storage change.");const t=new Set(e);for(const e of this._pcas.keys())t.delete(e)||this._logger.debug(`[_handleSecretStorageChange] PCA was deleted in another window: ${e}`);for(const e of t)try{const{clientId:t,authority:r}=JSON.parse(e);this._logger.debug(`[_handleSecretStorageChange] [${t}] [${r}] Creating new PCA that was created in another window...`),await this._doCreatePublicClientApplication(t,r,e),this._logger.debug(`[_handleSecretStorageChange] [${t}] [${r}] PCA created.`)}catch(t){this._logger.error(`Failed to parse new PublicClientApplication: ${e}`);continue}this._logger.debug("[_handleSecretStorageChange] Finished handling PCAs secret storage change.")}_storePublicClientApplications(){return this._pcasSecretStorage.store(Array.from(this._pcas.keys()))}};class o{constructor(e,t){this._secretStorage=e,this._cloudName=t,this._onDidChangeEmitter=new n.EventEmitter,this.onDidChange=this._onDidChangeEmitter.event,this._key=`publicClientApplications-${this._cloudName}`,this._disposable=n.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange((e=>{e.key===this._key&&this._onDidChangeEmitter.fire()})))}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}},7247:e=>{"use strict";e.exports=require("./msal-node-runtime")},1398:e=>{"use strict";e.exports=require("vscode")},181:e=>{"use strict";e.exports=require("buffer")},6982:e=>{"use strict";e.exports=require("crypto")},9896:e=>{"use strict";e.exports=require("fs")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},6560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DataProtectionScope:()=>P,Environment:()=>x,FilePersistence:()=>_,FilePersistenceWithDataProtection:()=>R,KeychainPersistence:()=>M,LibSecretPersistence:()=>N,NativeBrokerPlugin:()=>ue,PersistenceCachePlugin:()=>y,PersistenceCreator:()=>D});var n=r(9896);const i=require("process"),o="EEXIST",s="ENOENT",a="Dummy data to verify underlying persistence mechanism",c="HOME",u="LOGNAME",l="USER",d="LNAME",h="USERNAME",f="LOCALAPPDATA",p="unknown_error";class g extends Error{constructor(e,t){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,g.prototype),this.errorCode=e,this.errorMessage=t,this.name="PersistenceError"}static createFileSystemError(e,t){return new g(e,t)}static createLibSecretError(e){return new g("GnomeKeyringError",e)}static createKeychainPersistenceError(e){return new g("KeychainError",e)}static createFilePersistenceWithDPAPIError(e){return new g("DPAPIEncryptedFileError",e)}static createCrossPlatformLockError(e){return new g("CrossPlatformLockError",e)}static createCachePersistenceError(e){return new g("CachePersistenceError",e)}static createNotSupportedError(e){return new g("NotSupportedError",e)}static createPersistenceNotVerifiedError(e){return new g("PersistenceNotVerifiedError",e)}static createPersistenceNotValidatedError(e){return new g("PersistenceNotValidatedError",e)}}const m=e=>!!e&&"object"==typeof e&&e.hasOwnProperty("code");class v{constructor(e,t,r){this.lockFilePath=e,this.retryNumber=r?r.retryNumber:500,this.retryDelay=r?r.retryDelay:100,this.logger=t}async lock(){for(let e=0;e<this.retryNumber;e++)try{return this.logger.info(`Pid ${i.pid} trying to acquire lock`),this.lockFileHandle=await n.promises.open(this.lockFilePath,"wx+"),this.logger.info(`Pid ${i.pid} acquired lock`),void await this.lockFileHandle.write(i.pid.toString())}catch(e){if(!m(e))throw e;if(e.code!==o&&"EPERM"!==e.code)throw this.logger.error(`${i.pid} was not able to acquire lock. Ran into error: ${e.message}`),g.createCrossPlatformLockError(e.message);this.logger.info(e.message),await this.sleep(this.retryDelay)}throw this.logger.error(`${i.pid} was not able to acquire lock. Exceeded amount of retries set in the options`),g.createCrossPlatformLockError("Not able to acquire lock. Exceeded amount of retries set in options")}async unlock(){try{this.lockFileHandle?(await n.promises.unlink(this.lockFilePath),await this.lockFileHandle.close(),this.logger.info("lockfile deleted")):this.logger.warning("lockfile handle does not exist, so lockfile could not be deleted")}catch(e){if(!m(e))throw e;if(e.code!==s)throw this.logger.error(`${i.pid} was not able to release lock. Ran into error: ${e.message}`),g.createCrossPlatformLockError(e.message);this.logger.info("Tried to unlock but lockfile does not exist")}}sleep(e){return new Promise((t=>{setTimeout(t,e)}))}}class y{constructor(e,t){this.persistence=e,this.logger=e.getLogger(),this.lockFilePath=`${this.persistence.getFilePath()}.lockfile`,this.crossPlatformLock=new v(this.lockFilePath,this.logger,t),this.lastSync=0,this.currentCache=null}async beforeCacheAccess(e){if(this.logger.info("Executing before cache access"),await this.persistence.reloadNecessary(this.lastSync)||null===this.currentCache)try{this.logger.info(`Reload necessary. Last sync time: ${this.lastSync}`),await this.crossPlatformLock.lock(),this.currentCache=await this.persistence.load(),this.lastSync=(new Date).getTime(),this.currentCache?e.tokenCache.deserialize(this.currentCache):this.logger.info("Cache empty."),this.logger.info(`Last sync time updated to: ${this.lastSync}`)}finally{e.cacheHasChanged?this.logger.info(`Pid ${i.pid} beforeCacheAccess did not release lock`):(await this.crossPlatformLock.unlock(),this.logger.info(`Pid ${i.pid} released lock`))}else e.cacheHasChanged&&(this.logger.verbose("Cache context has changed"),await this.crossPlatformLock.lock())}async afterCacheAccess(e){this.logger.info("Executing after cache access");try{e.cacheHasChanged?(this.logger.info("Msal in-memory cache has changed. Writing changes to persistence"),this.currentCache=e.tokenCache.serialize(),await this.persistence.save(this.currentCache)):this.logger.info("Msal in-memory cache has not changed. Did not write to persistence")}finally{await this.crossPlatformLock.unlock(),this.logger.info(`Pid ${i.pid} afterCacheAccess released lock`)}}}var w=r(6928);class C{async verifyPersistence(){const e=await this.createForPersistenceValidation();try{await e.save(a);const t=await e.load();if(!t)throw g.createCachePersistenceError("Persistence check failed. Data was written but it could not be read. Possible cause: on Linux, LibSecret is installed but D-Bus isn't running                     because it cannot be started over SSH.");if(t!==a)throw g.createCachePersistenceError(`Persistence check failed. Data written ${a} is different                     from data read ${t}`);return await e.delete(),!0}catch(e){throw g.createCachePersistenceError(`Verifing persistence failed with the error: ${e}`)}}}const A="",I={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};var S;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(S||(S={}));class E{constructor(e,t,r){this.level=S.Info;const n=e||E.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"==typeof n.logLevel?n.logLevel:S.Info,this.correlationId=n.correlationId||A,this.packageName=t||A,this.packageVersion=r||A}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:S.Info}}clone(e,t,r){return new E({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${S[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:S.Error,containsPii:!1,correlationId:t||A})}errorPii(e,t){this.logMessage(e,{logLevel:S.Error,containsPii:!0,correlationId:t||A})}warning(e,t){this.logMessage(e,{logLevel:S.Warning,containsPii:!1,correlationId:t||A})}warningPii(e,t){this.logMessage(e,{logLevel:S.Warning,containsPii:!0,correlationId:t||A})}info(e,t){this.logMessage(e,{logLevel:S.Info,containsPii:!1,correlationId:t||A})}infoPii(e,t){this.logMessage(e,{logLevel:S.Info,containsPii:!0,correlationId:t||A})}verbose(e,t){this.logMessage(e,{logLevel:S.Verbose,containsPii:!1,correlationId:t||A})}verbosePii(e,t){this.logMessage(e,{logLevel:S.Verbose,containsPii:!0,correlationId:t||A})}trace(e,t){this.logMessage(e,{logLevel:S.Trace,containsPii:!1,correlationId:t||A})}tracePii(e,t){this.logMessage(e,{logLevel:S.Trace,containsPii:!0,correlationId:t||A})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}class _ extends C{constructor(e,t){super(),this.logger=new E(t||_.createDefaultLoggerOptions()),this.filePath=e}static async create(e,t){const r=new _(e,t);return await r.createCacheFile(),r}async save(e){try{await n.promises.writeFile(this.getFilePath(),e,"utf-8")}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async saveBuffer(e){try{await n.promises.writeFile(this.getFilePath(),e)}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async load(){try{return await n.promises.readFile(this.getFilePath(),"utf-8")}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async loadBuffer(){try{return await n.promises.readFile(this.getFilePath())}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async delete(){try{return await n.promises.unlink(this.getFilePath()),!0}catch(e){if(m(e)){if(e.code===s)return this.logger.warning("Cache file does not exist, so it could not be deleted"),!1;throw g.createFileSystemError(e.code||p,e.message)}throw e}}getFilePath(){return this.filePath}async reloadNecessary(e){return e<await this.timeLastModified()}getLogger(){return this.logger}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePath)}/test.cache`;return _.create(e)}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:S.Info}}async timeLastModified(){try{return(await n.promises.stat(this.filePath)).mtime.getTime()}catch(e){if(m(e)){if(e.code===s)return this.logger.verbose("Cache file does not exist"),0;throw g.createFileSystemError(e.code||p,e.message)}throw e}}async createCacheFile(){await this.createFileDirectory();const e=await n.promises.open(this.filePath,"a");await e.close(),this.logger.info(`File created at ${this.filePath}`)}async createFileDirectory(){try{await n.promises.mkdir((0,w.dirname)(this.filePath),{recursive:!0})}catch(e){if(!m(e))throw e;if(e.code!==o)throw g.createFileSystemError(e.code||p,e.message);this.logger.info(`Directory ${(0,w.dirname)(this.filePath)}  already exists`)}}}const T=require("module");class b{constructor(e){this.errorMessage=e}protectData(){throw new Error(this.errorMessage)}unprotectData(){throw new Error(this.errorMessage)}}let k;if("win32"!==process.platform)k=new b("Dpapi is not supported on this platform");else{const e="undefined"!=typeof require?require:(0,T.createRequire)("file:///mnt/vss/_work/1/s/extensions/microsoft-authentication/node_modules/@azure/msal-node-extensions/dist/Dpapi.mjs");try{k=e(`../bin/${process.arch}/dpapi`)}catch(e){k=new b("Dpapi bindings unavailable")}}const P={CurrentUser:"CurrentUser",LocalMachine:"LocalMachine"};class R extends C{constructor(e,t,r){super(),this.scope=t,this.optionalEntropy=r?Buffer.from(r,"utf-8"):null,this.filePersistence=e}static async create(e,t,r,n){const i=await _.create(e,n);return new R(i,t,r)}async save(e){try{const t=k.protectData(Buffer.from(e,"utf-8"),this.optionalEntropy,this.scope.toString());await this.filePersistence.saveBuffer(t)}catch(e){throw m(e)?g.createFilePersistenceWithDPAPIError(e.message):e}}async load(){try{const e=await this.filePersistence.loadBuffer();return void 0!==e&&e&&0!==e.length?k.unprotectData(e,this.optionalEntropy,this.scope.toString()).toString():(this.filePersistence.getLogger().info("Encrypted contents loaded from file were null or empty"),null)}catch(e){throw m(e)?g.createFilePersistenceWithDPAPIError(e.message):e}}async delete(){return this.filePersistence.delete()}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return R.create(e,P.CurrentUser)}}var O=r(9008);class M extends C{constructor(e,t,r){super(),this.filePersistence=e,this.serviceName=t,this.accountName=r}static async create(e,t,r,n){const i=await _.create(e,n);return new M(i,t,r)}async save(e){try{await O.setPassword(this.serviceName,this.accountName,e)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}await this.filePersistence.save("{}")}async load(){try{return await O.getPassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}}async delete(){try{return await this.filePersistence.delete(),await O.deletePassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return M.create(e,"persistenceValidationServiceName","persistencValidationAccountName")}}class N extends C{constructor(e,t,r){super(),this.filePersistence=e,this.serviceName=t,this.accountName=r}static async create(e,t,r,n){const i=await _.create(e,n);return new N(i,t,r)}async save(e){try{await O.setPassword(this.serviceName,this.accountName,e)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}await this.filePersistence.save("{}")}async load(){try{return await O.getPassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}}async delete(){try{return await this.filePersistence.delete(),await O.deletePassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return N.create(e,"persistenceValidationServiceName","persistencValidationAccountName")}}class x{static get homeEnvVar(){return this.getEnvironmentVariable(c)}static get lognameEnvVar(){return this.getEnvironmentVariable(u)}static get userEnvVar(){return this.getEnvironmentVariable(l)}static get lnameEnvVar(){return this.getEnvironmentVariable(d)}static get usernameEnvVar(){return this.getEnvironmentVariable(h)}static getEnvironmentVariable(e){return process.env[e]||""}static getEnvironmentPlatform(){return process.platform}static isWindowsPlatform(){return"win32"===this.getEnvironmentPlatform()}static isLinuxPlatform(){return"linux"===this.getEnvironmentPlatform()}static isMacPlatform(){return"darwin"===this.getEnvironmentPlatform()}static isLinuxRootUser(){return"function"==typeof process.getuid&&0===process.getuid()}static getUserRootDirectory(){return this.isWindowsPlatform()?this.getUserHomeDirOnWindows():this.getUserHomeDirOnUnix()}static getUserHomeDirOnWindows(){return this.getEnvironmentVariable(f)}static getUserHomeDirOnUnix(){if(this.isWindowsPlatform())throw g.createNotSupportedError("Getting the user home directory for unix is not supported in windows");if(this.homeEnvVar)return this.homeEnvVar;let e=null;if(this.lognameEnvVar?e=this.lognameEnvVar:this.userEnvVar?e=this.userEnvVar:this.lnameEnvVar?e=this.lnameEnvVar:this.usernameEnvVar&&(e=this.usernameEnvVar),this.isMacPlatform())return e?w.join("/Users",e):null;if(this.isLinuxPlatform())return this.isLinuxRootUser()?"/root":e?w.join("/home",e):null;throw g.createNotSupportedError("Getting the user home directory for unix is not supported in windows")}}class D{static async createPersistence(e){let t;if(x.isWindowsPlatform()){if(!e.cachePath||!e.dataProtectionScope)throw g.createPersistenceNotValidatedError("Cache path and/or data protection scope not provided for the FilePersistenceWithDataProtection cache plugin");t=await R.create(e.cachePath,P.CurrentUser,void 0,e.loggerOptions)}else if(x.isMacPlatform()){if(!e.cachePath||!e.serviceName||!e.accountName)throw g.createPersistenceNotValidatedError("Cache path, service name and/or account name not provided for the KeychainPersistence cache plugin");t=await M.create(e.cachePath,e.serviceName,e.accountName,e.loggerOptions)}else{if(!x.isLinuxPlatform())throw g.createNotSupportedError("The current environment is not supported by msal-node-extensions yet.");if(!e.cachePath||!e.serviceName||!e.accountName)throw g.createPersistenceNotValidatedError("Cache path, service name and/or account name not provided for the LibSecretPersistence cache plugin");t=await N.create(e.cachePath,e.serviceName,e.accountName,e.loggerOptions)}return await t.verifyPersistence().catch((async r=>{if(x.isLinuxPlatform()&&e.usePlaintextFileOnLinux){if(!e.cachePath)throw g.createPersistenceNotValidatedError("Cache path not provided for the FilePersistence cache plugin");if(t=await _.create(e.cachePath,e.loggerOptions),await t.verifyPersistence())return t;throw g.createPersistenceNotVerifiedError("Persistence could not be verified")}throw r})),t}}var L,U,F=["win32"],q=["x64","ia32"];!function(e){e[e.Unexpected=0]="Unexpected",e[e.Reserved=1]="Reserved",e[e.InteractionRequired=2]="InteractionRequired",e[e.NoNetwork=3]="NoNetwork",e[e.NetworkTemporarilyUnavailable=4]="NetworkTemporarilyUnavailable",e[e.ServerTemporarilyUnavailable=5]="ServerTemporarilyUnavailable",e[e.ApiContractViolation=6]="ApiContractViolation",e[e.UserCanceled=7]="UserCanceled",e[e.ApplicationCanceled=8]="ApplicationCanceled",e[e.IncorrectConfiguration=9]="IncorrectConfiguration",e[e.InsufficientBuffer=10]="InsufficientBuffer",e[e.AuthorityUntrusted=11]="AuthorityUntrusted",e[e.UserSwitched=12]="UserSwitched",e[e.AccountUnusable=13]="AccountUnusable",e[e.UserDataRemovalRequired=14]="UserDataRemovalRequired",e[e.KeyNotFound=15]="KeyNotFound",e[e.AccountNotFound=16]="AccountNotFound"}(L||(L={})),function(e){e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error",e[e.Fatal=6]="Fatal"}(U||(U={}));var H={errorCode:0,errorStatus:L.Unexpected,errorContext:"Platform and/or architecture are unsupported. Supported Platforms: ".concat(F.join(", "),". Supported Architectures: ").concat(q.join(", "),"."),errorTag:0},j={errorCode:0,errorStatus:L.Unexpected,errorContext:"Binaries could not be loaded. This is unexpected.",errorTag:0};function B(){return F.includes(process.platform)&&q.includes(process.arch)?j:H}var z,$=function(){function e(){}return e.prototype.CreateAuthParameters=function(){throw B()},e.prototype.SetRedirectUri=function(){throw B()},e.prototype.SetRequestedScopes=function(){throw B()},e.prototype.SetDecodedClaims=function(){throw B()},e.prototype.SetAccessTokenToRenew=function(){throw B()},e.prototype.SetPopParams=function(){throw B()},e.prototype.SetAdditionalParameter=function(){throw B()},e}(),V=function(){function e(){this.AuthParameters=$,this.StartupError=B()}return e.prototype.ReadAccountByIdAsync=function(){throw B()},e.prototype.SignInAsync=function(){throw B()},e.prototype.SignInSilentlyAsync=function(){throw B()},e.prototype.SignInInteractivelyAsync=function(){throw B()},e.prototype.AcquireTokenSilentlyAsync=function(){throw B()},e.prototype.AcquireTokenInteractivelyAsync=function(){throw B()},e.prototype.SignOutSilentlyAsync=function(){throw B()},e.prototype.RegisterLogger=function(){throw B()},e.prototype.DiscoverAccountsAsync=function(){throw B()},e}();try{z=r(7247)}catch(e){z=new V}class K extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,K.prototype),this.errorCode=e||A,this.errorMessage=t||A,this.subError=r||A,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}class G extends K{constructor(e,t,r,n){super(e,t),this.name="NativeAuthError",this.statusCode=r,this.tag=n,Object.setPrototypeOf(this,G.prototype)}}const W="@azure/msal-node-extensions",Y="1.5.0",Q="no_account_found",J="no_network_connectivity",X="user_canceled",Z={client_info_decoding_error:"The client info could not be parsed/decoded correctly",client_info_empty_error:"The client info was empty",token_parsing_error:"Token cannot be parsed",null_or_empty_token:"The token is null or empty",endpoints_resolution_error:"Endpoints cannot be resolved",network_error:"Network request failed",openid_config_error:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",hash_not_deserialized:"The hash parameters could not be deserialized",invalid_state:"State was not the expected format",state_mismatch:"State mismatch error",state_not_found:"State not found",nonce_mismatch:"Nonce mismatch error",auth_time_not_found:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",max_age_transpired:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",multiple_matching_appMetadata:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",request_cannot_be_made:"Token request cannot be made without authorization code or refresh token.",cannot_remove_empty_scope:"Cannot remove null or empty scope from ScopeSet",cannot_append_scopeset:"Cannot append ScopeSet",empty_input_scopeset:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",no_account_in_silent_request:"Please pass an account object, silent flow is not supported without account information",invalid_cache_record:"Cache record object was null or undefined.",invalid_cache_environment:"Invalid environment when attempting to create cache entry",[Q]:"No account found in cache for given key.",no_crypto_object:"No crypto object detected.",unexpected_credential_type:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",token_refresh_required:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",token_claims_cnf_required_for_signedjwt:"Cannot generate a POP jwt if the token_claims are not populated",authorization_code_missing_from_server_response:"Server response does not contain an authorization code to proceed",binding_key_not_removed:"Could not remove the credential's binding key from storage.",end_session_endpoint_not_supported:"The provided authority does not support logout",key_id_missing:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[J]:"No network connectivity. Check your internet connection.",[X]:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",method_not_implemented:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled"};class ee extends K{constructor(e,t){super(e,t?`${Z[e]}: ${t}`:Z[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ee.prototype)}}function te(e,t){return new ee(e,t)}class re{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||A,this.wrapperVer=e.wrapperVer||A,this.telemetryCacheKey=I.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${I.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const n=t.join(I.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(I.VALUE_SEPARATOR);return[I.SCHEMA_VERSION,i,n].join(I.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=re.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(I.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(I.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?I.OVERFLOW_TRUE:I.OVERFLOW_FALSE].join(I.VALUE_SEPARATOR);return[I.SCHEMA_VERSION,e.cacheHits,r,n,o].join(I.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=I.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof K?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(I.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=re.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}}static maxErrorsToSend(e){let t,r=0,n=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||A,o=e.failedRequests[2*t+1]||A,s=e.errors[t]||A;if(n+=i.toString().length+o.toString().length+s.length+3,!(n<I.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||A),e.push(this.regionSource||A),e.push(this.regionOutcome||A),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,s=new Map([[0,[r,n]],[2,[i,o]]]);let a=[];if(t?.length){if(a=t.split(","),a.length<4)return t}else a=Array.from({length:4},(()=>"|"));return s.forEach(((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:a,index:t,skuName:e[0],skuVersion:e[1]})})),a.join(",")}(e)}}const ne="untrusted_authority",ie={redirect_uri_empty:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",authority_uri_insecure:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",url_parse_error:"URL could not be parsed into appropriate segments.",empty_url_error:"URL was empty or null.",empty_input_scopes_error:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",invalid_prompt_value:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",invalid_claims:"Given claims parameter must be a stringified JSON object.",token_request_empty:"Token request was empty and not found in cache.",logout_request_empty:"The logout request was null or undefined.",invalid_code_challenge_method:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',pkce_params_missing:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",invalid_cloud_discovery_metadata:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",invalid_authority_metadata:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[ne]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",missing_ssh_jwk:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",missing_ssh_kid:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",cannot_set_OIDCOptions:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",cannot_allow_native_broker:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",authority_mismatch:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class oe extends K{constructor(e){super(e,ie[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,oe.prototype)}}class se extends K{constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,se.prototype)}}class ae extends K{constructor(e,t,r,n,i,o,s,a){super(e,t,r),Object.setPrototypeOf(this,ae.prototype),this.timestamp=n||A,this.traceId=i||A,this.correlationId=o||A,this.claims=s||A,this.name="InteractionRequiredAuthError",this.errorNo=a}}const ce="x-client-xtra-sku";class ue{constructor(){this.logger=new E({loggerCallback:()=>{},piiLoggingEnabled:!1},W,Y),this.isBrokerAvailable=!z.StartupError}setLogger(e){this.logger=new E(e,W,Y);const t=(e,t,r)=>{switch(t){case U.Trace:case U.Debug:r?this.logger.tracePii(e):this.logger.trace(e);break;case U.Info:r?this.logger.infoPii(e):this.logger.info(e);break;case U.Warning:r?this.logger.warningPii(e):this.logger.warning(e);break;case U.Error:case U.Fatal:r?this.logger.errorPii(e):this.logger.error(e);break;default:r?this.logger.infoPii(e):this.logger.info(e)}};try{z.RegisterLogger(t,e.piiLoggingEnabled||!1)}catch(e){const t=this.wrapError(e);if(t)throw t}}async getAccountById(e,t){this.logger.trace("NativeBrokerPlugin - getAccountById called",t);const r=await this.readAccountById(e,t);return this.generateAccountInfo(r.account)}async getAllAccounts(e,t){return this.logger.trace("NativeBrokerPlugin - getAllAccounts called",t),new Promise(((r,n)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void n(t)}const t=[];e.accounts.forEach((e=>{t.push(this.generateAccountInfo(e))})),r(t)};try{z.DiscoverAccountsAsync(e,t,i)}catch(e){const t=this.wrapError(e);t&&n(t)}}))}async acquireTokenSilent(e){this.logger.trace("NativeBrokerPlugin - acquireTokenSilent called",e.correlationId);const t=this.generateRequestParameters(e),r=await this.getAccount(e);return new Promise(((n,i)=>{const o=t=>{try{t.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void i(t)}const r=this.getAuthenticationResult(e,t);n(r)};try{r?z.AcquireTokenSilentlyAsync(t,e.correlationId,r,o):z.SignInSilentlyAsync(t,e.correlationId,o)}catch(e){const t=this.wrapError(e);t&&i(t)}}))}async acquireTokenInteractive(e,t){this.logger.trace("NativeBrokerPlugin - acquireTokenInteractive called",e.correlationId);const r=this.generateRequestParameters(e),n=await this.getAccount(e),i=t||Buffer.from([0]);return new Promise(((t,o)=>{const s=r=>{try{r.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void o(t)}const n=this.getAuthenticationResult(e,r);t(n)};try{switch(e.prompt){case"login":case"select_account":case"create":this.logger.info("Calling native interop SignInInteractively API",e.correlationId);const t=e.loginHint||A;z.SignInInteractivelyAsync(i,r,e.correlationId,t,s);break;case"none":n?(this.logger.info("Calling native interop AcquireTokenSilently API",e.correlationId),z.AcquireTokenSilentlyAsync(r,e.correlationId,n,s)):(this.logger.info("Calling native interop SignInSilently API",e.correlationId),z.SignInSilentlyAsync(r,e.correlationId,s));break;default:if(n)this.logger.info("Calling native interop AcquireTokenInteractively API",e.correlationId),z.AcquireTokenInteractivelyAsync(i,r,e.correlationId,n,s);else{this.logger.info("Calling native interop SignIn API",e.correlationId);const t=e.loginHint||A;z.SignInAsync(i,r,e.correlationId,t,s)}}}catch(e){const t=this.wrapError(e);t&&o(t)}}))}async signOut(e){this.logger.trace("NativeBrokerPlugin - signOut called",e.correlationId);const t=await this.getAccount(e);if(!t)throw te(Q);return new Promise(((r,n)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void n(t)}r()};try{z.SignOutSilentlyAsync(e.clientId,e.correlationId,t,i)}catch(e){const t=this.wrapError(e);t&&n(t)}}))}async getAccount(e){return e.accountId?(await this.readAccountById(e.accountId,e.correlationId)).account:null}async readAccountById(e,t){return this.logger.trace("NativeBrokerPlugin - readAccountById called",t),new Promise(((r,n)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void n(t)}r(e)};try{z.ReadAccountByIdAsync(e,t,i)}catch(e){const t=this.wrapError(e);t&&n(t)}}))}generateRequestParameters(e){this.logger.trace("NativeBrokerPlugin - generateRequestParameters called",e.correlationId);const t=new z.AuthParameters;try{if(t.CreateAuthParameters(e.clientId,e.authority),t.SetRedirectUri(e.redirectUri),t.SetRequestedScopes(e.scopes.join(" ")),e.claims&&t.SetDecodedClaims(e.claims),"pop"===e.authenticationScheme){if(!e.resourceRequestMethod||!e.resourceRequestUri)throw new Error("Authentication Scheme set to POP but one or more of the following parameters are missing: resourceRequestMethod, resourceRequestUri");const r=new URL(e.resourceRequestUri);t.SetPopParams(e.resourceRequestMethod,r.host,r.pathname,e.shrNonce||"")}e.extraParameters&&Object.entries(e.extraParameters).forEach((([e,r])=>{t.SetAdditionalParameter(e,r)}));const r=e.extraParameters&&e.extraParameters[ce]?.length?e.extraParameters[ce]:"";t.SetAdditionalParameter(ce,re.makeExtraSkuString({skus:r,extensionName:"msal.node.ext",extensionVersion:Y}))}catch(e){const t=this.wrapError(e);if(t)throw t}return t}getAuthenticationResult(e,t){this.logger.trace("NativeBrokerPlugin - getAuthenticationResult called",e.correlationId);let r,n=!1;try{n=!!JSON.parse(t.telemetryData).is_cache}catch(t){this.logger.error("NativeBrokerPlugin: getAuthenticationResult - Error parsing telemetry data. Could not determine if response came from cache.",e.correlationId)}try{r=JSON.parse(t.idToken)}catch(e){throw new Error("Unable to parse idToken claims")}const i=this.generateAccountInfo(t.account,r);let o,s;return t.isPopAuthorization?(o=t.authorizationHeader.split(" ")[1],s="pop"):(o=t.accessToken,s="Bearer"),{authority:e.authority,uniqueId:r.oid||r.sub||"",tenantId:r.tid||"",scopes:t.grantedScopes.split(" "),account:i,idToken:t.rawIdToken,idTokenClaims:r,accessToken:o,fromCache:n,expiresOn:new Date(t.expiresOn),tokenType:s,correlationId:e.correlationId,fromNativeBroker:!0}}generateAccountInfo(e,t){return this.logger.trace("NativeBrokerPlugin - generateAccountInfo called"),{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,name:e.displayName,idTokenClaims:t,nativeAccountId:e.accountId}}isMsalRuntimeError(e){return e.hasOwnProperty("errorCode")||e.hasOwnProperty("errorStatus")||e.hasOwnProperty("errorContext")||e.hasOwnProperty("errorTag")}wrapError(e){if(e&&"object"==typeof e&&this.isMsalRuntimeError(e)){const{errorCode:t,errorStatus:r,errorContext:n,errorTag:i}=e;switch(r){case L.InteractionRequired:case L.AccountUnusable:return new ae("interaction_required",n);case L.NoNetwork:case L.NetworkTemporarilyUnavailable:return te(J);case L.ServerTemporarilyUnavailable:return new se("server_unavailable",n);case L.UserCanceled:return te(X);case L.AuthorityUntrusted:return function(e){return new oe(e)}(ne);case L.UserSwitched:return null;case L.AccountNotFound:return te(Q);default:return new G(L[r],n,t,i)}}throw e}}},341:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthError:()=>z,AuthErrorCodes:()=>n,AuthErrorMessage:()=>B,AzureCloudInstance:()=>jr,ClientApplication:()=>Io,ClientAssertion:()=>yo,ClientAuthError:()=>Le,ClientAuthErrorCodes:()=>i,ClientAuthErrorMessage:()=>De,ClientConfigurationError:()=>Lt,ClientConfigurationErrorCodes:()=>o,ClientConfigurationErrorMessage:()=>Dt,ClientCredentialClient:()=>To,ConfidentialClientApplication:()=>ko,CryptoProvider:()=>co,DeviceCodeClient:()=>Eo,DistributedCachePlugin:()=>Ko,InteractionRequiredAuthError:()=>Xn,InteractionRequiredAuthErrorCodes:()=>a,InteractionRequiredAuthErrorMessage:()=>Jn,LogLevel:()=>qr,Logger:()=>Hr,ManagedIdentityApplication:()=>Vo,ManagedIdentitySourceNames:()=>hr,NodeStorage:()=>uo,OnBehalfOfClient:()=>bo,PromptValue:()=>w,ProtocolMode:()=>$e,PublicClientApplication:()=>_o,ResponseMode:()=>A,ServerError:()=>Fr,TokenCache:()=>mo,TokenCacheContext:()=>ni,UsernamePasswordClient:()=>Ao,internals:()=>s,version:()=>Co});var n={};r.r(n),r.d(n,{postRequestFailed:()=>H,unexpectedError:()=>q});var i={};r.r(i),r.d(i,{authTimeNotFound:()=>re,authorizationCodeMissingFromServerResponse:()=>_e,bindingKeyNotRemoved:()=>Te,cannotAppendScopeSet:()=>ue,cannotRemoveEmptyScope:()=>ce,clientInfoDecodingError:()=>$,clientInfoEmptyError:()=>V,deviceCodeExpired:()=>he,deviceCodePollingCancelled:()=>de,deviceCodeUnknownError:()=>fe,emptyInputScopeSet:()=>le,endSessionEndpointNotSupported:()=>be,endpointResolutionError:()=>W,hashNotDeserialized:()=>J,invalidAssertion:()=>Ce,invalidCacheEnvironment:()=>me,invalidCacheRecord:()=>ge,invalidClientCredential:()=>Ae,invalidState:()=>X,keyIdMissing:()=>ke,maxAgeTranspired:()=>ne,methodNotImplemented:()=>Me,missingTenantIdError:()=>Oe,multipleMatchingAccounts:()=>oe,multipleMatchingAppMetadata:()=>se,multipleMatchingTokens:()=>ie,nestedAppAuthBridgeDisabled:()=>Ne,networkError:()=>Y,noAccountFound:()=>ve,noAccountInSilentRequest:()=>pe,noCryptoObject:()=>ye,noNetworkConnectivity:()=>Pe,nonceMismatch:()=>te,nullOrEmptyToken:()=>G,openIdConfigError:()=>Q,requestCannotBeMade:()=>ae,stateMismatch:()=>Z,stateNotFound:()=>ee,tokenClaimsCnfRequiredForSignedJwt:()=>Ee,tokenParsingError:()=>K,tokenRefreshRequired:()=>Ie,unexpectedCredentialType:()=>we,userCanceled:()=>Re,userTimeoutReached:()=>Se});var o={};r.r(o),r.d(o,{authorityMismatch:()=>Nt,authorityUriInsecure:()=>pt,cannotAllowNativeBroker:()=>Mt,cannotSetOIDCOptions:()=>Ot,claimsRequestParsingError:()=>ft,emptyInputScopesError:()=>vt,invalidAuthenticationHeader:()=>Rt,invalidAuthorityMetadata:()=>_t,invalidClaims:()=>wt,invalidCloudDiscoveryMetadata:()=>Et,invalidCodeChallengeMethod:()=>It,invalidPromptValue:()=>yt,logoutRequestEmpty:()=>At,missingNonceAuthenticationHeader:()=>Pt,missingSshJwk:()=>bt,missingSshKid:()=>kt,pkceParamsMissing:()=>St,redirectUriEmpty:()=>ht,tokenRequestEmpty:()=>Ct,untrustedAuthority:()=>Tt,urlEmptyError:()=>mt,urlParseError:()=>gt});var s={};r.r(s),r.d(s,{Deserializer:()=>tr,Serializer:()=>c});var a={};r.r(a),r.d(a,{badToken:()=>Gn,consentRequired:()=>Vn,interactionRequired:()=>$n,loginRequired:()=>Kn,nativeAccountUnavailable:()=>Bn,noTokensFound:()=>jn,refreshTokenExpired:()=>zn});class c{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){const t={};return Object.keys(e).map((function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,realm:n.realm,local_account_id:n.localAccountId,username:n.username,authority_type:n.authorityType,name:n.name,client_info:n.clientInfo,last_modification_time:n.lastModificationTime,last_modification_app:n.lastModificationApp,tenantProfiles:n.tenantProfiles?.map((e=>JSON.stringify(e)))}})),t}static serializeIdTokens(e){const t={};return Object.keys(e).map((function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm}})),t}static serializeAccessTokens(e){const t={};return Object.keys(e).map((function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm,target:n.target,cached_at:n.cachedAt,expires_on:n.expiresOn,extended_expires_on:n.extendedExpiresOn,refresh_on:n.refreshOn,key_id:n.keyId,token_type:n.tokenType,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash}})),t}static serializeRefreshTokens(e){const t={};return Object.keys(e).map((function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,family_id:n.familyId,target:n.target,realm:n.realm}})),t}static serializeAppMetadata(e){const t={};return Object.keys(e).map((function(r){const n=e[r];t[r]={client_id:n.clientId,environment:n.environment,family_id:n.familyId}})),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}const u={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},l=[u.OPENID_SCOPE,u.PROFILE_SCOPE,u.OFFLINE_ACCESS_SCOPE],d=[...l,u.EMAIL_SCOPE],h="Content-Type",f="Retry-After",p="X-AnchorMailbox",g="x-ms-request-id",m="x-ms-httpver",v={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y="access_token",w={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},C={PLAIN:"plain",S256:"S256"},A={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},I="Generic",S={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},E={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},_="appmetadata",T="1",b="authority-metadata",k="config",P="cache",R="network",O="hardcoded_values",M={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},N={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},x="throttling",D="0",L="2",U="3",F="4",q="unexpected_error",H="post_request_failed",j={[q]:"Unexpected error in authentication.",[H]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},B={unexpectedError:{code:q,desc:j[q]},postRequestFailed:{code:H,desc:j[H]}};class z extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,z.prototype),this.errorCode=e||u.EMPTY_STRING,this.errorMessage=t||u.EMPTY_STRING,this.subError=r||u.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}const $="client_info_decoding_error",V="client_info_empty_error",K="token_parsing_error",G="null_or_empty_token",W="endpoints_resolution_error",Y="network_error",Q="openid_config_error",J="hash_not_deserialized",X="invalid_state",Z="state_mismatch",ee="state_not_found",te="nonce_mismatch",re="auth_time_not_found",ne="max_age_transpired",ie="multiple_matching_tokens",oe="multiple_matching_accounts",se="multiple_matching_appMetadata",ae="request_cannot_be_made",ce="cannot_remove_empty_scope",ue="cannot_append_scopeset",le="empty_input_scopeset",de="device_code_polling_cancelled",he="device_code_expired",fe="device_code_unknown_error",pe="no_account_in_silent_request",ge="invalid_cache_record",me="invalid_cache_environment",ve="no_account_found",ye="no_crypto_object",we="unexpected_credential_type",Ce="invalid_assertion",Ae="invalid_client_credential",Ie="token_refresh_required",Se="user_timeout_reached",Ee="token_claims_cnf_required_for_signedjwt",_e="authorization_code_missing_from_server_response",Te="binding_key_not_removed",be="end_session_endpoint_not_supported",ke="key_id_missing",Pe="no_network_connectivity",Re="user_canceled",Oe="missing_tenant_id_error",Me="method_not_implemented",Ne="nested_app_auth_bridge_disabled",xe={[$]:"The client info could not be parsed/decoded correctly",[V]:"The client info was empty",[K]:"Token cannot be parsed",[G]:"The token is null or empty",[W]:"Endpoints cannot be resolved",[Y]:"Network request failed",[Q]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[J]:"The hash parameters could not be deserialized",[X]:"State was not the expected format",[Z]:"State mismatch error",[ee]:"State not found",[te]:"Nonce mismatch error",[re]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ne]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ie]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[oe]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[se]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ae]:"Token request cannot be made without authorization code or refresh token.",[ce]:"Cannot remove null or empty scope from ScopeSet",[ue]:"Cannot append ScopeSet",[le]:"Empty input ScopeSet cannot be processed",[de]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[he]:"Device code is expired.",[fe]:"Device code stopped polling for unknown reasons.",[pe]:"Please pass an account object, silent flow is not supported without account information",[ge]:"Cache record object was null or undefined.",[me]:"Invalid environment when attempting to create cache entry",[ve]:"No account found in cache for given key.",[ye]:"No crypto object detected.",[we]:"Unexpected credential type.",[Ce]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ae]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ie]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Se]:"User defined timeout for device code polling reached",[Ee]:"Cannot generate a POP jwt if the token_claims are not populated",[_e]:"Server response does not contain an authorization code to proceed",[Te]:"Could not remove the credential's binding key from storage.",[be]:"The provided authority does not support logout",[ke]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Pe]:"No network connectivity. Check your internet connection.",[Re]:"User cancelled the flow.",[Oe]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Me]:"This method has not been implemented",[Ne]:"The nested app auth bridge is disabled"},De={clientInfoDecodingError:{code:$,desc:xe[$]},clientInfoEmptyError:{code:V,desc:xe[V]},tokenParsingError:{code:K,desc:xe[K]},nullOrEmptyToken:{code:G,desc:xe[G]},endpointResolutionError:{code:W,desc:xe[W]},networkError:{code:Y,desc:xe[Y]},unableToGetOpenidConfigError:{code:Q,desc:xe[Q]},hashNotDeserialized:{code:J,desc:xe[J]},invalidStateError:{code:X,desc:xe[X]},stateMismatchError:{code:Z,desc:xe[Z]},stateNotFoundError:{code:ee,desc:xe[ee]},nonceMismatchError:{code:te,desc:xe[te]},authTimeNotFoundError:{code:re,desc:xe[re]},maxAgeTranspired:{code:ne,desc:xe[ne]},multipleMatchingTokens:{code:ie,desc:xe[ie]},multipleMatchingAccounts:{code:oe,desc:xe[oe]},multipleMatchingAppMetadata:{code:se,desc:xe[se]},tokenRequestCannotBeMade:{code:ae,desc:xe[ae]},removeEmptyScopeError:{code:ce,desc:xe[ce]},appendScopeSetError:{code:ue,desc:xe[ue]},emptyInputScopeSetError:{code:le,desc:xe[le]},DeviceCodePollingCancelled:{code:de,desc:xe[de]},DeviceCodeExpired:{code:he,desc:xe[he]},DeviceCodeUnknownError:{code:fe,desc:xe[fe]},NoAccountInSilentRequest:{code:pe,desc:xe[pe]},invalidCacheRecord:{code:ge,desc:xe[ge]},invalidCacheEnvironment:{code:me,desc:xe[me]},noAccountFound:{code:ve,desc:xe[ve]},noCryptoObj:{code:ye,desc:xe[ye]},unexpectedCredentialType:{code:we,desc:xe[we]},invalidAssertion:{code:Ce,desc:xe[Ce]},invalidClientCredential:{code:Ae,desc:xe[Ae]},tokenRefreshRequired:{code:Ie,desc:xe[Ie]},userTimeoutReached:{code:Se,desc:xe[Se]},tokenClaimsRequired:{code:Ee,desc:xe[Ee]},noAuthorizationCodeFromServer:{code:_e,desc:xe[_e]},bindingKeyNotRemovedError:{code:Te,desc:xe[Te]},logoutNotSupported:{code:be,desc:xe[be]},keyIdMissing:{code:ke,desc:xe[ke]},noNetworkConnectivity:{code:Pe,desc:xe[Pe]},userCanceledError:{code:Re,desc:xe[Re]},missingTenantIdError:{code:Oe,desc:xe[Oe]},nestedAppAuthBridgeDisabled:{code:Ne,desc:xe[Ne]}};class Le extends z{constructor(e,t){super(e,t?`${xe[e]}: ${t}`:xe[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Le.prototype)}}function Ue(e,t){return new Le(e,t)}function Fe(e,t){if(!e)throw Ue(V);try{const r=t(e);return JSON.parse(r)}catch(e){throw Ue($)}}function qe(e){if(!e)throw Ue($);const t=e.split(S.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?u.EMPTY_STRING:t[1]}}function He(e,t){return!!e&&!!t&&e===t.split(".")[1]}function je(e,t,r,n){if(n){const{oid:t,sub:r,tid:i,name:o,tfp:s,acr:a}=n,c=i||s||a||"";return{tenantId:c,localAccountId:t||r||"",name:o,isHomeTenant:He(c,e)}}return{tenantId:r,localAccountId:t,isHomeTenant:He(r,e)}}function Be(e,t,r,n){let i=e;if(t){const{isHomeTenant:r,...n}=t;i={...e,...n}}if(r){const{isHomeTenant:t,...o}=je(e.homeAccountId,e.localAccountId,e.tenantId,r);return i={...i,...o,idTokenClaims:r,idToken:n},i}return i}function ze(e){return e&&(e.tid||e.tfp||e.acr)||null}const $e={AAD:"AAD",OIDC:"OIDC"};class Ve{generateAccountId(){return[this.homeAccountId,this.environment].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Ve.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){const n=new Ve;let i;1===t.authorityType?n.authorityType="ADFS":t.protocolMode===$e.AAD?n.authorityType="MSSTS":n.authorityType=I,e.clientInfo&&r&&(i=Fe(e.clientInfo,r)),n.clientInfo=e.clientInfo,n.homeAccountId=e.homeAccountId,n.nativeAccountId=e.nativeAccountId;const o=e.environment||t&&t.getPreferredCache();if(!o)throw Ue(me);n.environment=o,n.realm=i?.utid||ze(e.idTokenClaims)||"",n.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const s=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,a=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(n.username=s||a||"",n.name=e.idTokenClaims?.name||"",n.cloudGraphHostName=e.cloudGraphHostName,n.msGraphHost=e.msGraphHost,e.tenantProfiles)n.tenantProfiles=e.tenantProfiles;else{const t=je(e.homeAccountId,n.localAccountId,n.realm,e.idTokenClaims);n.tenantProfiles=[t]}return n}static createFromAccountInfo(e,t,r){const n=new Ve;return n.authorityType=e.authorityType||I,n.homeAccountId=e.homeAccountId,n.localAccountId=e.localAccountId,n.nativeAccountId=e.nativeAccountId,n.realm=e.tenantId,n.environment=e.environment,n.username=e.username,n.name=e.name,n.cloudGraphHostName=t,n.msGraphHost=r,n.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),n}static generateHomeAccountId(e,t,r,n,i){if(1!==t&&2!==t){if(e)try{const t=Fe(e,n.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){const r=e.idTokenClaims||{},i=t.idTokenClaims||{};n=r.iat===i.iat&&r.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}function Ke(e,t){const r=function(e){if(!e)throw Ue(G);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Ue(K);return t[2]}(e);try{const e=t(r);return JSON.parse(e)}catch(e){throw Ue(K)}}function Ge(e,t){if(0===t||Date.now()-3e5>e+t)throw Ue(ne)}function We(){return Math.round((new Date).getTime()/1e3)}function Ye(e,t){const r=Number(e)||0;return We()+t>r}function Qe(e,t){return new Promise((r=>setTimeout((()=>r(t)),e)))}function Je(e){return[rt(e),nt(e),it(e),ot(e),st(e)].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}function Xe(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Ze(e){return!!e&&Xe(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===E.ACCESS_TOKEN||e.credentialType===E.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function et(e){return!!e&&Xe(e)&&e.hasOwnProperty("realm")&&e.credentialType===E.ID_TOKEN}function tt(e){return!!e&&Xe(e)&&e.credentialType===E.REFRESH_TOKEN}function rt(e){return[e.homeAccountId,e.environment].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}function nt(e){const t=e.credentialType===E.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}function it(e){return(e.target||"").toLowerCase()}function ot(e){return(e.requestedClaimsHash||"").toLowerCase()}function st(e){return e.tokenType&&e.tokenType.toLowerCase()!==N.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function at(e,t){return!!t&&0===e.indexOf(_)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function ct(){return We()+86400}function ut(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function lt(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function dt(e){return e.expiresAt<=We()}const ht="redirect_uri_empty",ft="claims_request_parsing_error",pt="authority_uri_insecure",gt="url_parse_error",mt="empty_url_error",vt="empty_input_scopes_error",yt="invalid_prompt_value",wt="invalid_claims",Ct="token_request_empty",At="logout_request_empty",It="invalid_code_challenge_method",St="pkce_params_missing",Et="invalid_cloud_discovery_metadata",_t="invalid_authority_metadata",Tt="untrusted_authority",bt="missing_ssh_jwk",kt="missing_ssh_kid",Pt="missing_nonce_authentication_header",Rt="invalid_authentication_header",Ot="cannot_set_OIDCOptions",Mt="cannot_allow_native_broker",Nt="authority_mismatch",xt={[ht]:"A redirect URI is required for all calls, and none has been set.",[ft]:"Could not parse the given claims request object.",[pt]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[gt]:"URL could not be parsed into appropriate segments.",[mt]:"URL was empty or null.",[vt]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[yt]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[wt]:"Given claims parameter must be a stringified JSON object.",[Ct]:"Token request was empty and not found in cache.",[At]:"The logout request was null or undefined.",[It]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[St]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Et]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[_t]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Tt]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[bt]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[kt]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Pt]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Rt]:"Invalid authentication header provided",[Ot]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Mt]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Nt]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Dt={redirectUriNotSet:{code:ht,desc:xt[ht]},claimsRequestParsingError:{code:ft,desc:xt[ft]},authorityUriInsecure:{code:pt,desc:xt[pt]},urlParseError:{code:gt,desc:xt[gt]},urlEmptyError:{code:mt,desc:xt[mt]},emptyScopesError:{code:vt,desc:xt[vt]},invalidPrompt:{code:yt,desc:xt[yt]},invalidClaimsRequest:{code:wt,desc:xt[wt]},tokenRequestEmptyError:{code:Ct,desc:xt[Ct]},logoutRequestEmptyError:{code:At,desc:xt[At]},invalidCodeChallengeMethod:{code:It,desc:xt[It]},invalidCodeChallengeParams:{code:St,desc:xt[St]},invalidCloudDiscoveryMetadata:{code:Et,desc:xt[Et]},invalidAuthorityMetadata:{code:_t,desc:xt[_t]},untrustedAuthority:{code:Tt,desc:xt[Tt]},missingSshJwk:{code:bt,desc:xt[bt]},missingSshKid:{code:kt,desc:xt[kt]},missingNonceAuthenticationHeader:{code:Pt,desc:xt[Pt]},invalidAuthenticationHeader:{code:Rt,desc:xt[Rt]},cannotSetOIDCOptions:{code:Ot,desc:xt[Ot]},cannotAllowNativeBroker:{code:Mt,desc:xt[Mt]},authorityMismatch:{code:Nt,desc:xt[Nt]}};class Lt extends z{constructor(e){super(e,xt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Lt.prototype)}}function Ut(e){return new Lt(e)}class Ft{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach((e=>{if(e.trim()){const[r,i]=e.split(/=(.+)/g,2);r&&i&&(t[n(r)]=n(i))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class qt{constructor(e){const t=e?Ft.trimArrayEntries([...e]):[],r=t?Ft.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||u.EMPTY_STRING).split(" ");return new qt(t)}static createSearchScopes(e){const t=new qt(e);return t.containsOnlyOIDCScopes()?t.removeScope(u.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw Ut(vt)}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new qt(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return d.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(e){throw Ue(ue)}}removeScope(e){if(!e)throw Ue(ce);this.scopes.delete(e.trim())}removeOIDCScopes(){d.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw Ue(le);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw Ue(le);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){return this.scopes?this.asArray().join(" "):u.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}const Ht="@azure/msal-common",jt="14.16.0";function Bt(e){if(!e||e.indexOf("=")<0)return null;try{const t=function(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}(e),r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.error||r.error_description||r.state)return r}catch(e){throw Ue(J)}return null}class zt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Ut(mt);e.includes("#")||(this._urlString=zt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Ft.endsWith(t,"?")?t=t.slice(0,-1):Ft.endsWith(t,"?/")&&(t=t.slice(0,-2)),Ft.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw Ut(gt)}if(!e.HostNameAndPort||!e.PathSegments)throw Ut(gt);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Ut(pt)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return zt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return!e||0===r.length||r[0]!==v.COMMON&&r[0]!==v.ORGANIZATIONS||(r[0]=e),zt.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Ut(gt);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let n=r.AbsolutePath.split("/");return n=n.filter((e=>e&&e.length>0)),r.PathSegments=n,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Ut(gt);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===u.FORWARD_SLASH){const r=new zt(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new zt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Bt(e)}}const $t={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Vt={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Kt=new Set;function Gt(e,t,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){const i=Wt(t,e);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function Wt(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.aliases.includes(t))return n}return null}Vt.metadata.forEach((e=>{e.aliases.forEach((e=>{Kt.add(e)}))}));const Yt="cache_quota_exceeded",Qt="cache_error_unknown",Jt={[Yt]:"Exceeded cache storage capacity.",[Qt]:"Unexpected error occurred when using cache storage."};class Xt extends Error{constructor(e,t){const r=t||(Jt[e]?Jt[e]:Jt[Qt]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Xt.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}class Zt{constructor(e,t,r,n){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Ht,jt),this.staticAuthorityOptions=n}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort((e=>e.idTokenClaims?-1:1))[0]:1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,t?.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,r,n){let i,o=null;if(n&&!this.tenantProfileMatchesFilter(r,n))return null;const s=this.getIdToken(e,t,r.tenantId);return s&&(i=Ke(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(i,n))?null:(o=Be(e,r,i,s?.secret),o)}getTenantProfilesFromAccountEntity(e,t,r){const n=e.getAccountInfo();let i=n.tenantProfiles||new Map;const o=this.getTokenKeys();if(t){const e=i.get(t);if(!e)return[];i=new Map([[t,e]])}const s=[];return i.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(n,o,e,r);t&&s.push(t)})),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,r){if(!e)throw Ue(ge);try{e.account&&this.setAccount(e.account),e.idToken&&!1!==t?.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken&&!1!==t?.accessToken&&await this.saveAccessToken(e.accessToken),e.refreshToken&&!1!==t?.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(e){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${e.message}`,r),"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new Xt(Yt)):new Xt(e.name,e.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${e}`,r),new Xt(Qt))}}async saveAccessToken(e){const t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),n=qt.fromString(e.target),i=[];r.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,t,!1))return;const r=this.getAccessTokenCredential(e);r&&this.credentialMatchesFilter(r,t)&&qt.fromString(r.target).intersectingScopeSets(n)&&i.push(this.removeAccessToken(e))})),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),r=[];return t.forEach((t=>{if(!this.isAccountKey(t,e.homeAccountId))return;const n=this.getAccount(t,this.commonLogger);if(!n)return;if(e.homeAccountId&&!this.matchHomeAccountId(n,e.homeAccountId))return;if(e.username&&!this.matchUsername(n.username,e.username))return;if(e.environment&&!this.matchEnvironment(n,e.environment))return;if(e.realm&&!this.matchRealm(n,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(n,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(n,e.authorityType))return;const i={localAccountId:e?.localAccountId,name:e?.name},o=n.tenantProfiles?.filter((e=>this.tenantProfileMatchesFilter(e,i)));o&&0===o.length||r.push(n)})),r}isAccountKey(e,t,r){return!(e.split(S.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(S.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(E.ID_TOKEN.toLowerCase())&&-1===t.indexOf(E.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(E.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(E.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(E.REFRESH_TOKEN.toLowerCase())>-1){const e=`${E.REFRESH_TOKEN}${S.CACHE_KEY_SEPARATOR}${this.clientId}${S.CACHE_KEY_SEPARATOR}`,r=`${E.REFRESH_TOKEN}${S.CACHE_KEY_SEPARATOR}${T}${S.CACHE_KEY_SEPARATOR}`;if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(r.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===E.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===N.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const n=this.getAppMetadata(t);n&&(e.environment&&!this.matchEnvironment(n,e.environment)||e.clientId&&!this.matchClientId(n,e.clientId)||(r[t]=n))})),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)})),r}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),r=e.generateAccountId(),n=[];t.idToken.forEach((e=>{0===e.indexOf(r)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(r)&&n.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(r)&&this.removeRefreshToken(e)})),await Promise.all(n)}updateOutdatedCachedAccount(e,t,r){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const n=this.getAccountKeys().filter((e=>e.startsWith(t.homeAccountId))),i=[];n.forEach((e=>{const t=this.getCachedAccountEntity(e);t&&i.push(t)}));const o=i.find((e=>He(e.realm,e.homeAccountId)))||i[0];o.tenantProfiles=i.map((e=>({tenantId:e.realm,localAccountId:e.localAccountId,name:e.name,isHomeTenant:He(e.realm,e.homeAccountId)})));const s=Zt.toObject(new Ve,{...o}),a=s.generateAccountKey();return n.forEach((t=>{t!==a&&this.removeOutdatedAccount(e)})),this.setAccount(s),r?.verbose("Updated an outdated account entity in the cache"),s}return t}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===E.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===N.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(e){throw Ue(Te)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=Ve.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:E.ID_TOKEN,clientId:this.clientId,realm:r},s=this.getIdTokensByFilter(o,t),a=s.size;if(a<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(a>1){let t=s;if(!r){const r=new Map;s.forEach(((t,n)=>{t.realm===e.tenantId&&r.set(n,t)}));const n=r.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),r.values().next().value;t=r}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),n&&i&&n.addFields({multiMatchedID:s.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,t){const r=t&&t.idToken||this.getTokenKeys().idToken,n=new Map;return r.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,{clientId:this.clientId,...e}))return;const r=this.getIdTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.set(t,r)})),n}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,n,i,o){this.commonLogger.trace("CacheManager - getAccessToken called");const s=qt.createSearchScopes(t.scopes),a=t.authenticationScheme||N.BEARER,c=a&&a.toLowerCase()!==N.BEARER.toLowerCase()?E.ACCESS_TOKEN_WITH_AUTH_SCHEME:E.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:n||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,u,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,u)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken(Je(e))})),i&&o&&i.addFields({multiMatchedAT:d.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,r){const n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===n.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(r&&!n.includes(e[t].toLowerCase()))return!1;if(!r&&n.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),r=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const n=this.getAccessTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.push(n)})),r}getRefreshToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=t?T:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:E.REFRESH_TOKEN,clientId:this.clientId,familyId:o},a=r&&r.refreshToken||this.getTokenKeys().refreshToken,c=[];a.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,s)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,s)&&c.push(t)}}));const u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&n&&i&&n.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map((e=>r[e])),i=n.length;if(i<1)return null;if(i>1)throw Ue(se);return n[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==T)}matchHomeAccountId(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const r=function(e,t){let r;const n=e.canonicalAuthority;if(n){const i=new zt(n).getUrlComponents().HostNameAndPort;r=Gt(i,e.cloudDiscoveryMetadata?.metadata,k,t)||Gt(i,Vt.metadata,O,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==E.ACCESS_TOKEN&&e.credentialType!==E.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&qt.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(_)}isAuthorityMetadata(e){return-1!==e.indexOf(b)}generateAuthorityMetadataCacheKey(e){return`${b}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class er extends Zt{setAccount(){throw Ue(Me)}getAccount(){throw Ue(Me)}getCachedAccountEntity(){throw Ue(Me)}setIdTokenCredential(){throw Ue(Me)}getIdTokenCredential(){throw Ue(Me)}setAccessTokenCredential(){throw Ue(Me)}getAccessTokenCredential(){throw Ue(Me)}setRefreshTokenCredential(){throw Ue(Me)}getRefreshTokenCredential(){throw Ue(Me)}setAppMetadata(){throw Ue(Me)}getAppMetadata(){throw Ue(Me)}setServerTelemetry(){throw Ue(Me)}getServerTelemetry(){throw Ue(Me)}setAuthorityMetadata(){throw Ue(Me)}getAuthorityMetadata(){throw Ue(Me)}getAuthorityMetadataKeys(){throw Ue(Me)}setThrottlingCache(){throw Ue(Me)}getThrottlingCache(){throw Ue(Me)}removeItem(){throw Ue(Me)}getKeys(){throw Ue(Me)}getAccountKeys(){throw Ue(Me)}getTokenKeys(){throw Ue(Me)}updateCredentialCacheKey(){throw Ue(Me)}removeOutdatedAccount(){throw Ue(Me)}}class tr{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){const t={};return e&&Object.keys(e).map((function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,realm:n.realm,localAccountId:n.local_account_id,username:n.username,authorityType:n.authority_type,name:n.name,clientInfo:n.client_info,lastModificationTime:n.last_modification_time,lastModificationApp:n.last_modification_app,tenantProfiles:n.tenantProfiles?.map((e=>JSON.parse(e)))},o=new Ve;Zt.toObject(o,i),t[r]=o})),t}static deserializeIdTokens(e){const t={};return e&&Object.keys(e).map((function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm};t[r]=i})),t}static deserializeAccessTokens(e){const t={};return e&&Object.keys(e).map((function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,target:n.target,cachedAt:n.cached_at,expiresOn:n.expires_on,extendedExpiresOn:n.extended_expires_on,refreshOn:n.refresh_on,keyId:n.key_id,tokenType:n.token_type,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash};t[r]=i})),t}static deserializeRefreshTokens(e){const t={};return e&&Object.keys(e).map((function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,familyId:n.family_id,target:n.target,realm:n.realm};t[r]=i})),t}static deserializeAppMetadata(e){const t={};return e&&Object.keys(e).map((function(r){const n=e[r];t[r]={clientId:n.client_id,environment:n.environment,familyId:n.family_id}})),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}const rr="Metadata",nr="api-version",ir="resource",or="https://login.microsoftonline.com/managed_identity/",sr="AZURE_POD_IDENTITY_AUTHORITY_HOST",ar="IDENTITY_ENDPOINT",cr="IDENTITY_HEADER",ur="IDENTITY_SERVER_THUMBPRINT",lr="IMDS_ENDPOINT",dr="MSI_ENDPOINT",hr={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",SERVICE_FABRIC:"ServiceFabric"},fr="system-assigned",pr="user-assigned-client-id",gr="user-assigned-resource-id",mr="user-assigned-object-id",vr="get",yr="post",wr=200,Cr=299,Ar=500,Ir="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",Sr="msal.js.node",Er="urn:ietf:params:oauth:client-assertion-type:jwt-bearer",_r="authorization_pending",Tr="http://",br="localhost",kr=[404,408,429,500,503,504];class Pr{constructor(e,t){this.cacheOutcome=D,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||u.EMPTY_STRING,this.wrapperVer=e.wrapperVer||u.EMPTY_STRING,this.telemetryCacheKey=M.CACHE_KEY+S.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${M.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const n=t.join(M.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(M.VALUE_SEPARATOR);return[M.SCHEMA_VERSION,i,n].join(M.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=Pr.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(M.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(M.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?M.OVERFLOW_TRUE:M.OVERFLOW_FALSE].join(M.VALUE_SEPARATOR);return[M.SCHEMA_VERSION,e.cacheHits,r,n,o].join(M.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=M.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof z?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(M.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=Pr.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}}static maxErrorsToSend(e){let t,r=0,n=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||u.EMPTY_STRING,o=e.failedRequests[2*t+1]||u.EMPTY_STRING,s=e.errors[t]||u.EMPTY_STRING;if(n+=i.toString().length+o.toString().length+s.length+3,!(n<M.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||u.EMPTY_STRING),e.push(this.regionSource||u.EMPTY_STRING),e.push(this.regionOutcome||u.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,s=new Map([[0,[r,n]],[2,[i,o]]]);let a=[];if(t?.length){if(a=t.split(","),a.length<4)return t}else a=Array.from({length:4},(()=>"|"));return s.forEach(((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:a,index:t,skuName:e[0],skuVersion:e[1]})})),a.join(",")}(e)}}const Rr="client_id",Or="redirect_uri",Mr="response_type",Nr="token_type",xr="req_cnf",Dr="return_spa_code",Lr="x-client-xtra-sku",Ur="brk_client_id";class Fr extends z{constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,Fr.prototype)}}var qr;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(qr||(qr={}));class Hr{constructor(e,t,r){this.level=qr.Info;const n=e||Hr.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"==typeof n.logLevel?n.logLevel:qr.Info,this.correlationId=n.correlationId||u.EMPTY_STRING,this.packageName=t||u.EMPTY_STRING,this.packageVersion=r||u.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:qr.Info}}clone(e,t,r){return new Hr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${qr[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:qr.Error,containsPii:!1,correlationId:t||u.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:qr.Error,containsPii:!0,correlationId:t||u.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:qr.Warning,containsPii:!1,correlationId:t||u.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:qr.Warning,containsPii:!0,correlationId:t||u.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:qr.Info,containsPii:!1,correlationId:t||u.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:qr.Info,containsPii:!0,correlationId:t||u.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:qr.Verbose,containsPii:!1,correlationId:t||u.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:qr.Verbose,containsPii:!0,correlationId:t||u.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:qr.Trace,containsPii:!1,correlationId:t||u.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:qr.Trace,containsPii:!0,correlationId:t||u.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const jr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},Br="networkClientSendPostRequestAsync",zr="refreshTokenClientExecutePostToTokenEndpoint",$r="authorizationCodeClientExecutePostToTokenEndpoint",Vr="refreshTokenClientExecuteTokenRequest",Kr="refreshTokenClientAcquireToken",Gr="refreshTokenClientAcquireTokenWithCachedRefreshToken",Wr="refreshTokenClientAcquireTokenByRefreshToken",Yr="refreshTokenClientCreateTokenRequestBody",Qr="silentFlowClientAcquireCachedToken",Jr="silentFlowClientGenerateResultFromCacheRecord",Xr="getAuthCodeUrl",Zr="updateTokenEndpointAuthority",en="authClientAcquireToken",tn="authClientExecuteTokenRequest",rn="authClientCreateTokenRequestBody",nn="authClientCreateQueryString",on="popTokenGenerateCnf",sn="popTokenGenerateKid",an="handleServerTokenResponse",cn="authorityFactoryCreateDiscoveredInstance",un="authorityResolveEndpointsAsync",ln="authorityGetCloudDiscoveryMetadataFromNetwork",dn="authorityUpdateCloudDiscoveryMetadata",hn="authorityGetEndpointMetadataFromNetwork",fn="authorityUpdateEndpointMetadata",pn="authorityUpdateMetadataWithRegionalInformation",gn="regionDiscoveryDetectRegion",mn="regionDiscoveryGetRegionFromIMDS",vn="regionDiscoveryGetCurrentVersion",yn="cacheManagerGetRefreshToken",wn=(new Map([["acquireTokenByCode","ATByCode"],["acquireTokenByRefreshToken","ATByRT"],["acquireTokenSilent","ATS"],["acquireTokenSilentAsync","ATSAsync"],["acquireTokenPopup","ATPopup"],["acquireTokenRedirect","ATRedirect"],["cryptoOptsGetPublicKeyThumbprint","CryptoGetPKThumb"],["cryptoOptsSignJwt","CryptoSignJwt"],["silentCacheClientAcquireToken","SltCacheClientAT"],["silentIframeClientAcquireToken","SltIframeClientAT"],["silentRefreshClientAcquireToken","SltRClientAT"],["ssoSilent","SsoSlt"],["standardInteractionClientGetDiscoveredAuthority","StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],["nativeInteractionClientAcquireToken","NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[Br,"NetClientSendPost"],[zr,"RTClientExecPost"],[$r,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[Vr,"RTClientExecTReq"],[Kr,"RTClientAT"],[Gr,"RTClientATWithCachedRT"],[Wr,"RTClientATByRT"],[Yr,"RTClientCreateTReqBody"],["acquireTokenFromCache","ATFromCache"],[Qr,"SltFlowClientATCached"],[Jr,"SltFlowClientGenResFromCache"],["acquireTokenBySilentIframe","ATBySltIframe"],["initializeBaseRequest","InitBaseReq"],["initializeSilentRequest","InitSltReq"],["initializeClientApplication","InitClientApplication"],["silentIframeClientTokenHelper","SIClientTHelper"],["silentHandlerInitiateAuthRequest","SHandlerInitAuthReq"],["silentHandlerMonitorIframeForHash","SltHandlerMonitorIframeForHash"],["silentHandlerLoadFrame","SHandlerLoadFrame"],["silentHandlerLoadFrameSync","SHandlerLoadFrameSync"],["standardInteractionClientCreateAuthCodeClient","StdIntClientCreateAuthCodeClient"],["standardInteractionClientGetClientConfiguration","StdIntClientGetClientConf"],["standardInteractionClientInitializeAuthorizationRequest","StdIntClientInitAuthReq"],["standardInteractionClientInitializeAuthorizationCodeRequest","StdIntClientInitAuthCodeReq"],[Xr,"GetAuthCodeUrl"],["handleCodeResponseFromServer","HandleCodeResFromServer"],["handleCodeResponse","HandleCodeResp"],[Zr,"UpdTEndpointAuth"],[en,"AuthClientAT"],[tn,"AuthClientExecTReq"],[rn,"AuthClientCreateTReqBody"],[nn,"AuthClientCreateQueryStr"],[on,"PopTGenCnf"],[sn,"PopTGenKid"],[an,"HandleServerTRes"],["deserializeResponse","DeserializeRes"],[cn,"AuthFactCreateDiscInst"],[un,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[ln,"AuthGetCDMetaFromNet"],[dn,"AuthUpdCDMeta"],[hn,"AuthUpdCDMetaFromNet"],[fn,"AuthUpdEndpointMeta"],[pn,"AuthUpdMetaWithRegInfo"],[gn,"RegDiscDetectReg"],[mn,"RegDiscGetRegFromIMDS"],[vn,"RegDiscGetCurrentVer"],["acquireTokenByCodeAsync","ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],["handleRedirectPromise","HandleRedirectPromise"],["handleNativeRedirectPromise","HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],["nativeMessageHandlerHandshake","NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],["removeHiddenIframe","RemoveHiddenIframe"],["clearTokensAndKeysWithClaims","ClearTAndKeysWithClaims"],[yn,"CacheManagerGetRT"],["generatePkceCodes","GenPkceCodes"],["generateCodeVerifier","GenCodeVerifier"],["generateCodeChallengeFromVerifier","GenCodeChallengeFromVerifier"],["sha256Digest","Sha256Digest"],["getRandomValues","GetRandomValues"]]),new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]),(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);const s=n?.startMeasurement(t,i);if(i){const e=t+"CallCount";n?.incrementFields({[e]:1},i)}return n?.setPreQueueTime(t,i),e(...o).then((e=>(r.trace(`Returning result from ${t}`),s?.end({success:!0}),e))).catch((e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw s?.end({success:!1},e),e}))});class Cn{constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(gn,this.correlationId);let r=e;if(r)t.region_source="3";else{const e=Cn.IMDS_OPTIONS;try{const n=await wn(this.getRegionFromIMDS.bind(this),mn,this.logger,this.performanceClient,this.correlationId)(u.IMDS_VERSION,e);if(200===n.status&&(r=n.body,t.region_source="4"),400===n.status){const n=await wn(this.getCurrentVersion.bind(this),vn,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source="1",null;const i=await wn(this.getRegionFromIMDS.bind(this),mn,this.logger,this.performanceClient,this.correlationId)(n,e);200===i.status&&(r=i.body,t.region_source="4")}}catch(e){return t.region_source="1",null}}return r||(t.region_source="1"),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(mn,this.correlationId),this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,u.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(vn,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?format=json`,e);return 400===t.status&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(e){return null}}}Cn.IMDS_OPTIONS={headers:{Metadata:"true"}};class An{constructor(e,t,r,n,i,o,s,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=o,this.managedIdentity=a||!1,this.regionDiscovery=new Cn(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(u.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case u.ADFS:return 1;case u.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new zt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ue(W)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ue(W)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ue(W)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ue(be);return this.replacePath(this.metadata.end_session_endpoint)}throw Ue(W)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ue(W)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ue(W)}canReplaceTenant(e){return 1===e.PathSegments.length&&!An.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode===$e.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const r=new zt(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,i)=>{let o=n[i];if(0===i&&this.canReplaceTenant(r)){const e=new zt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode!==$e.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(un,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await wn(this.updateCloudDiscoveryMetadata.bind(this),dn,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await wn(this.updateEndpointMetadata.bind(this),fn,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:ct(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==P&&r?.source!==P&&(e.expiresAt=ct(),e.canonical_authority=this.canonicalAuthority);const n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(fn,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===O&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(ut(e,await wn(this.updateMetadataWithRegionalInformation.bind(this),pn,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let r=await wn(this.getEndpointMetadataFromNetwork.bind(this),hn,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await wn(this.updateMetadataWithRegionalInformation.bind(this),pn,this.logger,this.performanceClient,this.correlationId)(r)),ut(e,r,!0),R;throw Ue(Q,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),ut(e,t,!1),{source:k};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return ut(e,t,!1),{source:O,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=dt(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:P}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new zt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Ut(_t)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(hn,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const r=await this.networkInterface.sendGetRequestAsync(t,e),n=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(r.body);return n?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in $t?$t[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(pn,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==u.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=t,An.replaceWithRegionalInformation(e,t);const r=await wn(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),gn,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=r,An.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome="5"}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(dn,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await wn(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ln,this.logger,this.performanceClient,this.correlationId)();if(r)return lt(e,r,!0),R;throw Ut(Tt)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||u.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),lt(e,t,!1),k;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(r=this.hostnameAndPort,Wt(Vt.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),lt(e,t,!1),O;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var r;const n=dt(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),P):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),An.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Wt(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ut(Et)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),An.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ln,this.correlationId);const e=`${u.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const n=await this.networkInterface.sendGetRequestAsync(e,t);let i,o;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(n.body))i=n.body,o=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(n.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${n.status}`),i=n.body,i.error===u.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Wt(o,this.hostnameAndPort)}catch(e){if(e instanceof z)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${e.errorCode}\nError Description: ${e.errorMessage}`);else{const t=e;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${t.name}\nError Description: ${t.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=An.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&zt.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==jr.None){const e=t.tenant?t.tenant:u.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return u.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ue(W)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Kt.has(e)}static isPublicCloudAuthority(e){return u.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const n=new zt(e);n.validateAsUri();const i=n.getUrlComponents();let o=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(o=`${t}.${u.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=zt.constructAuthorityUriFromObject({...n.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${s}?${r}`:s}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=An.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=An.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=An.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const r=new zt(e).getUrlComponents();return 0===r.PathSegments.length&&r.HostNameAndPort.endsWith(u.CIAM_AUTH_URL)&&(t=`${t}${r.HostNameAndPort.split(".")[0]}${u.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function In(e){return e.endsWith(u.FORWARD_SLASH)?e:`${e}${u.FORWARD_SLASH}`}An.reservedTenantDomains=new Set(["{tenant}","{tenantid}",v.COMMON,v.CONSUMERS,v.ORGANIZATIONS]);const Sn={createNewGuid:()=>{throw Ue(Me)},base64Decode:()=>{throw Ue(Me)},base64Encode:()=>{throw Ue(Me)},base64UrlEncode:()=>{throw Ue(Me)},encodeKid:()=>{throw Ue(Me)},async getPublicKeyThumbprint(){throw Ue(Me)},async removeTokenBindingKey(){throw Ue(Me)},async clearKeystore(){throw Ue(Me)},async signJwt(){throw Ue(Me)},async hashString(){throw Ue(Me)}},En={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},_n={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:qr.Info,correlationId:u.EMPTY_STRING},Tn={claimsBasedCachingEnabled:!1},bn={async sendGetRequestAsync(){throw Ue(Me)},async sendPostRequestAsync(){throw Ue(Me)}},kn={sku:u.SKU,version:jt,cpu:u.EMPTY_STRING,os:u.EMPTY_STRING},Pn={clientSecret:u.EMPTY_STRING,clientAssertion:void 0},Rn={azureCloudInstance:jr.None,tenant:`${u.DEFAULT_COMMON_TENANT}`},On={application:{appName:"",appVersion:""}};function Mn(e){return e.authOptions.authority.options.protocolMode===$e.OIDC}const Nn="home_account_id",xn="UPN";class Dn{static validateRedirectUri(e){if(!e)throw Ut(ht)}static validatePrompt(e){const t=[];for(const e in w)t.push(w[e]);if(t.indexOf(e)<0)throw Ut(yt)}static validateClaims(e){try{JSON.parse(e)}catch(e){throw Ut(wt)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Ut(St);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([C.PLAIN,C.S256].indexOf(e)<0)throw Ut(It)}}class Ln{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(Mr,encodeURIComponent(u.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(Mr,encodeURIComponent(`${u.TOKEN_RESPONSE_TYPE} ${u.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||A.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,t=!0,r=l){!t||r.includes("openid")||e.includes("openid")||r.push("openid");const n=t?[...e||[],...r]:e||[],i=new qt(n);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(Rr,encodeURIComponent(e))}addRedirectUri(e){Dn.validateRedirectUri(e),this.parameters.set(Or,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Dn.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(p,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(p,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const r=this.addClientCapabilitiesToClaims(e,t);Dn.validateClaims(r),this.parameters.set("claims",encodeURIComponent(r))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){Dn.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Dn.validateCodeChallengeParams(e,t),!e||!t)throw Ut(St);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach((([e,t])=>{!this.parameters.has(e)&&t&&this.parameters.set(e,t)}))}addClientCapabilitiesToClaims(e,t){let r;if(e)try{r=JSON.parse(e)}catch(e){throw Ut(wt)}else r={};return t&&t.length>0&&(r.hasOwnProperty(y)||(r[y]={}),r[y].xms_cc={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(Nr,N.POP),this.parameters.set(xr,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(Nr,N.SSH),this.parameters.set(xr,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const t={};t[Ur]=e.brokerClientId,t.brk_redirect_uri=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach(((t,r)=>{e.push(`${r}=${t}`)})),function(e,t,r){if(!t)return;const n=e.get(Rr);n&&e.has(Ur)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(Or)},t)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}async function Un(e,t,r,n,i,o,s){s?.addQueueMeasurement(cn,o);const a=An.transformCIAMAuthority(In(e)),c=new An(a,t,r,n,i,o,s);try{return await wn(c.resolveEndpointsAsync.bind(c),un,i,s,o)(),c}catch(e){throw Ue(W)}}class Fn{static generateThrottlingStorageKey(e){return`${x}.${JSON.stringify(e)}`}static preProcess(e,t){const r=Fn.generateThrottlingStorageKey(t),n=e.getThrottlingCache(r);if(n){if(n.throttleTime<Date.now())return void e.removeItem(r);throw new Fr(n.errorCodes?.join(" ")||u.EMPTY_STRING,n.errorMessage,n.subError)}}static postProcess(e,t,r){if(Fn.checkResponseStatus(r)||Fn.checkResponseForRetryAfter(r)){const n={throttleTime:Fn.calculateThrottleTime(parseInt(r.headers[f])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Fn.generateThrottlingStorageKey(t),n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(f)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))}static removeThrottle(e,t,r,n){const i={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:n,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},o=this.generateThrottlingStorageKey(i);e.removeItem(o)}}class qn extends z{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,qn.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}class Hn{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:l,persistencePlugin:d,serializableCache:h}){const f={..._n,...r};return{authOptions:(p=e,{clientCapabilities:[],azureCloudOptions:Rn,skipAuthorityMetadataCache:!1,instanceAware:!1,...p}),systemOptions:{...En,...t},loggerOptions:f,cacheOptions:{...Tn,...n},storageInterface:i||new er(e.clientId,Sn,new Hr(f)),networkInterface:o||bn,cryptoInterface:s||Sn,clientCredentials:a||Pn,libraryInfo:{...kn,...c},telemetry:{...On,...u},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:h||null};var p}(e),this.logger=new Hr(this.config.loggerOptions,Ht,jt),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[h]=u.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Nn:try{const r=qe(e.credential);t[p]=`Oid:${r.uid}@${r.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case xn:t[p]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,n,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);const s=await this.sendPostRequest(n,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,r,n){let i;Fn.preProcess(this.cacheManager,e);try{i=await wn(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Br,this.logger,this.performanceClient,n)(t,r);const e=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:e[m]||"",requestId:e[g]||""},n)}catch(e){if(e instanceof qn){const t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[m]||"",requestId:t[g]||"",contentTypeHeader:t[h]||void 0,contentLengthHeader:t["Content-Length"]||void 0,httpStatus:e.httpStatus},n),e.error}throw e instanceof z?e:Ue(Y)}return Fn.postProcess(this.cacheManager,e,i),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(Zr,t);const r=`https://${e}/${this.authority.tenant}/`,n=await Un(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=n}createTokenQueryParameters(e){const t=new Ln(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}const jn="no_tokens_found",Bn="native_account_unavailable",zn="refresh_token_expired",$n="interaction_required",Vn="consent_required",Kn="login_required",Gn="bad_token",Wn=[$n,Vn,Kn,Gn],Yn=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Qn={[jn]:"No refresh token found in the cache. Please sign-in.",[Bn]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[zn]:"Refresh token has expired.",[Gn]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},Jn={noTokensFoundError:{code:jn,desc:Qn[jn]},native_account_unavailable:{code:Bn,desc:Qn[Bn]},bad_token:{code:Gn,desc:Qn[Gn]}};class Xn extends z{constructor(e,t,r,n,i,o,s,a){super(e,t,r),Object.setPrototypeOf(this,Xn.prototype),this.timestamp=n||u.EMPTY_STRING,this.traceId=i||u.EMPTY_STRING,this.correlationId=o||u.EMPTY_STRING,this.claims=s||u.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=a}}function Zn(e,t,r){const n=!!e&&Wn.indexOf(e)>-1,i=!!r&&Yn.indexOf(r)>-1,o=!!t&&Wn.some((e=>t.indexOf(e)>-1));return n||o||i}function ei(e){return new Xn(e,Qn[e])}class ti{static setRequestState(e,t,r){const n=ti.generateLibraryState(e,r);return t?`${n}${u.RESOURCE_DELIM}${t}`:n}static generateLibraryState(e,t){if(!e)throw Ue(ye);const r={id:e.createNewGuid()};t&&(r.meta=t);const n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw Ue(ye);if(!t)throw Ue(X);try{const r=t.split(u.RESOURCE_DELIM),n=r[0],i=r.length>1?r.slice(1).join(u.RESOURCE_DELIM):u.EMPTY_STRING,o=e.base64Decode(n),s=JSON.parse(o);return{userRequestState:i||u.EMPTY_STRING,libraryState:s}}catch(e){throw Ue(X)}}}class ri{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(on,e.correlationId);const r=await wn(this.generateKid.bind(this),on,t,this.performanceClient,e.correlationId)(e),n=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:n}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(sn,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){const{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:s,shrNonce:a,shrOptions:c}=r,u=o?new zt(o):void 0,l=u?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:We(),m:i?.toUpperCase(),u:l?.HostNameAndPort,nonce:a||this.cryptoUtils.createNewGuid(),p:l?.AbsolutePath,q:l?.QueryString?[[],l.QueryString]:void 0,client_claims:s||void 0,...n},t,c,r.correlationId)}}class ni{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class ii{constructor(e,t,r,n,i,o,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=s}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?Ue(ee,"Cached State"):Ue(ee,"Server State");let r,n;try{r=decodeURIComponent(e.state)}catch(t){throw Ue(X,e.state)}try{n=decodeURIComponent(t)}catch(t){throw Ue(X,e.state)}if(r!==n)throw Ue(Z);if(e.error||e.error_description||e.suberror){const t=function(e){const t=e.error_uri?.lastIndexOf("code=");return t&&t>=0?e.error_uri?.substring(t+5):void 0}(e);if(Zn(e.error,e.error_description,e.suberror))throw new Xn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new Fr(e.error||"",e.error_description,e.suberror,t)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||u.NOT_AVAILABLE} - Timestamp: ${e.timestamp||u.NOT_AVAILABLE} - Description: ${e.error_description||u.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||u.NOT_AVAILABLE} - Trace ID: ${e.trace_id||u.NOT_AVAILABLE}`,n=e.error_codes?.length?e.error_codes[0]:void 0,i=new Fr(e.error,r,e.suberror,n,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);if(Zn(e.error,e.error_description,e.suberror))throw new Xn(e.error,e.error_description,e.suberror,e.timestamp||u.EMPTY_STRING,e.trace_id||u.EMPTY_STRING,e.correlation_id||u.EMPTY_STRING,e.claims||u.EMPTY_STRING,n);throw i}}async handleServerTokenResponse(e,t,r,n,i,o,s,a,c){let l,d;if(this.performanceClient?.addQueueMeasurement(an,e.correlation_id),e.id_token){if(l=Ke(e.id_token||u.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&l.nonce!==i.nonce)throw Ue(te);if(n.maxAge||0===n.maxAge){const e=l.auth_time;if(!e)throw Ue(re);Ge(e,n.maxAge)}}this.homeAccountIdentifier=Ve.generateHomeAccountId(e.client_info||u.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l),i&&i.state&&(d=ti.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||n.sshKid||void 0;const h=this.generateCacheRecord(e,t,r,n,l,o,i);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new ni(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),s&&!a&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ii.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,l,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,n.storeInCache,n.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return ii.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,l,d,e,c)}generateCacheRecord(e,t,r,n,i,o,s){const a=t.getPreferredCache();if(!a)throw Ue(me);const c=ze(i);let u,l;var d,h,f,p,g;e.id_token&&i&&(d=this.homeAccountIdentifier,h=a,f=e.id_token,p=this.clientId,g=c||"",u={credentialType:E.ID_TOKEN,homeAccountId:d,environment:h,clientId:p,secret:f,realm:g},l=function(e,t,r,n,i,o,s,a,c,u,l){l?.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(r)));let h=null;d&&(h=e.getAccount(d,l));const f=h||Ve.createAccount({homeAccountId:r,idTokenClaims:i,clientInfo:o,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:void 0},t,n),p=f.tenantProfiles||[],g=a||f.realm;if(g&&!p.find((e=>e.tenantId===g))){const e=je(r,f.localAccountId,g,i);p.push(e)}return f.tenantProfiles=p,f}(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,a,c,s,0,this.logger));let m=null;if(e.access_token){const i=e.scope?qt.fromString(e.scope):new qt(n.scopes||[]),s=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,u=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,d=r+s,h=d+u,f=l&&l>0?r+l:void 0;m=function(e,t,r,n,i,o,s,a,c,u,l,d,h,f,p){const g={homeAccountId:e,credentialType:E.ACCESS_TOKEN,secret:r,cachedAt:We().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:t,clientId:n,realm:i,target:o,tokenType:l||N.BEARER};if(d&&(g.userAssertionHash=d),u&&(g.refreshOn=u.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=p),g.tokenType?.toLowerCase()!==N.BEARER.toLowerCase())switch(g.credentialType=E.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case N.POP:const e=Ke(r,c);if(!e?.cnf?.kid)throw Ue(Ee);g.keyId=e.cnf.kid;break;case N.SSH:g.keyId=h}return g}(this.homeAccountIdentifier,a,e.access_token,this.clientId,c||t.tenant||"",i.printScopes(),d,h,this.cryptoObj.base64Decode,f,e.token_type,o,e.key_id,n.claims,n.requestedClaimsHash)}let v=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),v=function(e,t,r,n,i,o,s){const a={credentialType:E.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r};return o&&(a.userAssertionHash=o),i&&(a.familyId=i),s&&(a.expiresOn=s.toString()),a}(this.homeAccountIdentifier,a,e.refresh_token,this.clientId,e.foci,o,t)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:a,familyId:e.foci}),{account:l,idToken:u,accessToken:m,refreshToken:v,appMetadata:y}}static async generateAuthenticationResult(e,t,r,n,i,o,s,a,c){let l,d,h=u.EMPTY_STRING,f=[],p=null,g=u.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==N.POP||i.popKid)h=r.accessToken.secret;else{const t=new ri(e),{secret:n,keyId:o}=r.accessToken;if(!o)throw Ue(ke);h=await t.signPopToken(n,o,i)}f=qt.fromString(r.accessToken.target).asArray(),p=new Date(1e3*Number(r.accessToken.expiresOn)),l=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),r.accessToken.refreshOn&&(d=new Date(1e3*Number(r.accessToken.refreshOn)))}r.appMetadata&&(g=r.appMetadata.familyId===T?T:"");const m=o?.oid||o?.sub||"",v=o?.tid||"";a?.spa_accountid&&r.account&&(r.account.nativeAccountId=a?.spa_accountid);const y=r.account?Be(r.account.getAccountInfo(),void 0,o,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:m,tenantId:v,scopes:f,account:y,idToken:r?.idToken?.secret||"",idTokenClaims:o||{},accessToken:h,fromCache:n,expiresOn:p,extExpiresOn:l,refreshOn:d,correlationId:i.correlationId,requestId:c||u.EMPTY_STRING,familyId:g,tokenType:r.accessToken?.tokenType||u.EMPTY_STRING,state:s?s.userRequestState:u.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||u.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||u.EMPTY_STRING,code:a?.spa_code,fromNativeBroker:!1}}}async function oi(e,t,r){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:r})}class si extends Hn{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(Xr,e.correlationId);const t=await wn(this.createAuthCodeUrlQueryString.bind(this),nn,this.logger,this.performanceClient,e.correlationId)(e);return zt.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(en,e.correlationId),!e.code)throw Ue(ae);const r=We(),n=await wn(this.executeTokenRequest.bind(this),tn,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=n.headers?.[g],o=new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(n.body),wn(o.handleServerTokenResponse.bind(o),an,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,t,void 0,void 0,void 0,i)}handleFragmentResponse(e,t){if(new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw Ue(_e);return e}getLogoutUri(e){if(!e)throw Ut(At);const t=this.createLogoutUrlQueryString(e);return zt.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(tn,t.correlationId);const r=this.createTokenQueryParameters(t),n=zt.appendQueryString(e.tokenEndpoint,r),i=await wn(this.createTokenRequestBody.bind(this),rn,this.logger,this.performanceClient,t.correlationId)(t);let o;if(t.clientInfo)try{const e=Fe(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${e.uid}${S.CLIENT_INFO_SEPARATOR}${e.utid}`,type:Nn}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}const s=this.createTokenRequestHeaders(o||t.ccsCredential),a={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return wn(this.executePostToTokenEndpoint.bind(this),$r,this.logger,this.performanceClient,t.correlationId)(n,i,s,a,t.correlationId,$r)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(rn,e.correlationId);const t=new Ln(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Rr]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):Dn.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!Mn(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await oi(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(r.assertionType)}if(t.addGrantType("authorization_code"),t.addClientInfo(),e.authenticationScheme===N.POP){const r=new ri(this.cryptoUtils,this.performanceClient);let n;n=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await wn(r.generateCnf.bind(r),on,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(n)}else if(e.authenticationScheme===N.SSH){if(!e.sshJwk)throw Ut(bt);t.addSshJwk(e.sshJwk)}let r;if((!Ft.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=Fe(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${t.uid}${S.CLIENT_INFO_SEPARATOR}${t.utid}`,type:Nn}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Nn:try{const e=qe(r.credential);t.addCcsOid(e)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case xn:t.addCcsUpn(r.credential)}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Dr]||t.addExtraQueryParameters({[Dr]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){const t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(nn,t);const r=new Ln(t,this.performanceClient);r.addClientId(e.embeddedClientId||e.extraQueryParameters?.[Rr]||this.config.authOptions.clientId);const n=[...e.scopes||[],...e.extraScopesToConsent||[]];if(r.addScopes(n,!0,this.oidcDefaultScopes),r.addRedirectUri(e.redirectUri),r.addCorrelationId(t),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),Mn(this.config)||r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==w.SELECT_ACCOUNT)if(e.sid&&e.prompt===w.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){const t=this.extractAccountSid(e.account);let n=this.extractLoginHint(e.account);if(n&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),n=null),n){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(n);try{const t=qe(e.account.homeAccountId);r.addCcsOid(t)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t&&e.prompt===w.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(t);try{const t=qe(e.account.homeAccountId);r.addCcsOid(t)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{const t=qe(e.account.homeAccountId);r.addCcsOid(t)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,r),e.nativeBroker&&(r.addNativeBroker(),e.authenticationScheme===N.POP)){const t=new ri(this.cryptoUtils);let n;n=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await wn(t.generateCnf.bind(t),on,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(n)}return r.createQueryString()}createLogoutUrlQueryString(e){const t=new Ln(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}class ai extends Hn{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Kr,e.correlationId);const t=We(),r=await wn(this.executeTokenRequest.bind(this),Vr,this.logger,this.performanceClient,e.correlationId)(e,this.authority),n=r.headers?.[g],i=new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),wn(i.handleServerTokenResponse.bind(i),an,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,n)}async acquireTokenByRefreshToken(e){if(!e)throw Ut(Ct);if(this.performanceClient?.addQueueMeasurement(Wr,e.correlationId),!e.account)throw Ue(pe);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await wn(this.acquireTokenWithCachedRefreshToken.bind(this),Gr,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const r=t instanceof Xn&&t.errorCode===jn,n=t instanceof Fr&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError;if(r||n)return wn(this.acquireTokenWithCachedRefreshToken.bind(this),Gr,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return wn(this.acquireTokenWithCachedRefreshToken.bind(this),Gr,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Gr,e.correlationId);const r=(n=this.cacheManager.getRefreshToken.bind(this.cacheManager),i=yn,o=this.logger,s=this.performanceClient,a=e.correlationId,(...e)=>{o.trace(`Executing function ${i}`);const t=s?.startMeasurement(i,a);if(a){const e=i+"CallCount";s?.incrementFields({[e]:1},a)}try{const r=n(...e);return t?.end({success:!0}),o.trace(`Returning result from ${i}`),r}catch(e){o.trace(`Error occurred in ${i}`);try{o.trace(JSON.stringify(e))}catch(e){o.trace("Unable to print error message.")}throw t?.end({success:!1},e),e}})(e.account,t,void 0,this.performanceClient,e.correlationId);var n,i,o,s,a;if(!r)throw ei(jn);if(r.expiresOn&&Ye(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw ei(zn);const c={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||N.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Nn}};try{return await wn(this.acquireToken.bind(this),Kr,this.logger,this.performanceClient,e.correlationId)(c)}catch(e){if(e instanceof Xn&&e.subError===Gn){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=Je(r);this.cacheManager.removeRefreshToken(e)}throw e}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Vr,e.correlationId);const r=this.createTokenQueryParameters(e),n=zt.appendQueryString(t.tokenEndpoint,r),i=await wn(this.createTokenRequestBody.bind(this),Yr,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),s={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return wn(this.executePostToTokenEndpoint.bind(this),zr,this.logger,this.performanceClient,e.correlationId)(n,i,o,s,e.correlationId,zr)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Yr,e.correlationId);const t=e.correlationId,r=new Ln(t,this.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Rr]||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),r.addGrantType("refresh_token"),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!Mn(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await oi(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(t.assertionType)}if(e.authenticationScheme===N.POP){const t=new ri(this.cryptoUtils,this.performanceClient);let n;n=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await wn(t.generateCnf.bind(t),on,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(n)}else if(e.authenticationScheme===N.SSH){if(!e.sshJwk)throw Ut(bt);r.addSshJwk(e.sshJwk)}if((!Ft.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Nn:try{const t=qe(e.ccsCredential.credential);r.addCcsOid(t)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case xn:r.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()}}class ci extends Hn{constructor(e,t){super(e,t)}async acquireToken(e){try{const[t,r]=await this.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...l]});return r===F&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new ai(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch((()=>{}))),t}catch(t){if(t instanceof Le&&t.errorCode===Ie)return new ai(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Qr,e.correlationId);let t=D;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ft.isEmptyObj(e.claims))throw this.setCacheOutcome("1",e.correlationId),Ue(Ie);if(!e.account)throw Ue(pe);const r=e.account.tenantId||function(e){const t=new zt(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case v.COMMON:case v.ORGANIZATIONS:case v.CONSUMERS:return;default:return r}}(e.authority),n=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,n,r,this.performanceClient,e.correlationId);if(!i)throw this.setCacheOutcome(L,e.correlationId),Ue(Ie);if(o=i.cachedAt,Number(o)>We()||Ye(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(U,e.correlationId),Ue(Ie);var o;i.refreshOn&&Ye(i.refreshOn,0)&&(t=F);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,n,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await wn(this.generateResultFromCacheRecord.bind(this),Jr,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==D&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(Jr,t.correlationId),e.idToken&&(r=Ke(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=r?.auth_time;if(!e)throw Ue(re);Ge(e,t.maxAge)}return ii.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class ui{static getNetworkResponse(e,t,r){return{headers:e,body:t,status:r}}static urlToHttpOptions(e){const t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}var li=r(8611),di=r(5692);class hi{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,r){return this.proxyUrl?fi(e,this.proxyUrl,vr,t,this.customAgentOptions,r):pi(e,vr,t,this.customAgentOptions,r)}async sendPostRequestAsync(e,t){return this.proxyUrl?fi(e,this.proxyUrl,yr,t,this.customAgentOptions):pi(e,yr,t,this.customAgentOptions)}}const fi=(e,t,r,n,i,o)=>{const s=new URL(e),a=new URL(t),c=n?.headers||{},u={host:a.hostname,port:a.port,method:"CONNECT",path:s.hostname,headers:c};i&&Object.keys(i).length&&(u.agent=new li.Agent(i));let l="";if(r===yr){const e=n?.body||"";l=`Content-Type: application/x-www-form-urlencoded\r\nContent-Length: ${e.length}\r\n\r\n${e}`}else o&&(u.timeout=o);const d=`${r.toUpperCase()} ${s.href} HTTP/1.1\r\nHost: ${s.host}\r\nConnection: close\r\n`+l+"\r\n";return new Promise(((e,t)=>{const r=li.request(u);o&&r.on("timeout",(()=>{r.destroy(),t(new Error("Request time out"))})),r.end(),r.on("connect",((n,i)=>{const o=n?.statusCode||Ar;(o<wr||o>Cr)&&(r.destroy(),i.destroy(),t(new Error(`Error connecting to proxy. Http status code: ${n.statusCode}. Http status message: ${n?.statusMessage||"Unknown"}`))),i.write(d);const s=[];i.on("data",(e=>{s.push(e)})),i.on("end",(()=>{const t=Buffer.concat([...s]).toString().split("\r\n"),n=parseInt(t[0].split(" ")[1]),i=t[0].split(" ").slice(2).join(" "),o=t[t.length-1],a=t.slice(1,t.length-2),c=new Map;a.forEach((e=>{const t=e.split(new RegExp(/:\s(.*)/s)),r=t[0];let n=t[1];try{const e=JSON.parse(n);e&&"object"==typeof e&&(n=e)}catch(e){}c.set(r,n)}));const u=Object.fromEntries(c),l=ui.getNetworkResponse(u,gi(n,i,u,o),n);(n<200||n>299)&&l.body.error!==_r&&r.destroy(),e(l)})),i.on("error",(e=>{r.destroy(),i.destroy(),t(new Error(e.toString()))}))})),r.on("error",(e=>{r.destroy(),t(new Error(e.toString()))}))}))},pi=(e,t,r,n,i)=>{const o=t===yr,s=r?.body||"",a=new URL(e),c={method:t,headers:r?.headers||{},...ui.urlToHttpOptions(a)};return n&&Object.keys(n).length&&(c.agent=new di.Agent(n)),o?c.headers={...c.headers,"Content-Length":s.length}:i&&(c.timeout=i),new Promise(((e,t)=>{let r;r="http:"===c.protocol?li.request(c):di.request(c),o&&r.write(s),i&&r.on("timeout",(()=>{r.destroy(),t(new Error("Request time out"))})),r.end(),r.on("response",(t=>{const n=t.headers,i=t.statusCode,o=t.statusMessage,s=[];t.on("data",(e=>{s.push(e)})),t.on("end",(()=>{const t=Buffer.concat([...s]).toString(),a=n,c=ui.getNetworkResponse(a,gi(i,o,a,t),i);(i<200||i>299)&&c.body.error!==_r&&r.destroy(),e(c)}))})),r.on("error",(e=>{r.destroy(),t(new Error(e.toString()))}))}))},gi=(e,t,r,n)=>{let i;try{i=JSON.parse(n)}catch(n){let o,s;e>=400&&e<=499?(o="client_error",s="A client"):e>=500&&e<=599?(o="server_error",s="A server"):(o="unknown_error",s="An unknown"),i={error:o,error_description:`${s} error occured.\nHttp status code: ${e}\nHttp status message: ${t||"Unknown"}\nHeaders: ${JSON.stringify(r)}`}}return i},mi="invalid_file_extension",vi="invalid_file_path",yi="invalid_managed_identity_id_type",wi="invalid_secret",Ci="platform_not_supported",Ai="unable_to_create_azure_arc",Ii="unable_to_create_cloud_shell",Si="unable_to_create_source",Ei="unable_to_read_secret_file",_i="www_authenticate_header_missing",Ti="www_authenticate_header_unsupported_format",bi={[sr]:"azure_pod_identity_authority_host_url_malformed",[ar]:"identity_endpoint_url_malformed",[lr]:"imds_endpoint_url_malformed",[dr]:"msi_endpoint_url_malformed"},ki={[mi]:"The file path in the WWW-Authenticate header does not contain a .key file.",[vi]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[yi]:"More than one ManagedIdentityIdType was provided.",[wi]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[Ci]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",missing_client_id:"A ManagedIdentityId id was not provided.",[bi.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${sr}' environment variable is malformed.`,[bi.IDENTITY_ENDPOINT]:`The Managed Identity's '${ar}' environment variable is malformed.`,[bi.IMDS_ENDPOINT]:`The Managed Identity's '${lr}' environment variable is malformed.`,[bi.MSI_ENDPOINT]:`The Managed Identity's '${dr}' environment variable is malformed.`,network_unavailable:"Authentication unavailable. The request to the managed identity endpoint timed out.",[Ai]:"Azure Arc Managed Identities can only be system assigned.",[Ii]:"Cloud Shell Managed Identities can only be system assigned.",[Si]:"Unable to create a Managed Identity source based on environment variables.",[Ei]:"Unable to read the secret file.",user_assigned_not_available_at_runtime:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[_i]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[Ti]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class Pi extends z{constructor(e){super(e,ki[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,Pi.prototype)}}function Ri(e){return new Pi(e)}class Oi{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){const t=e?.userAssignedClientId,r=e?.userAssignedResourceId,n=e?.userAssignedObjectId;if(t){if(r||n)throw Ri(yi);this.id=t,this.idType=pr}else if(r){if(t||n)throw Ri(yi);this.id=r,this.idType=gr}else if(n){if(t||r)throw Ri(yi);this.id=n,this.idType=mr}else this.id="system_assigned_managed_identity",this.idType=fr}}class Mi{constructor(e,t,r){this.maxRetries=e,this.retryDelay=t,this.httpStatusCodesToRetryOn=r}retryAfterMillisecondsToSleep(e){if(!e)return 0;let t=Math.round(1e3*parseFloat(e));return isNaN(t)&&(t=Math.max(0,new Date(e).valueOf()-(new Date).valueOf())),t}async pauseForRetry(e,t,r){if(this.httpStatusCodesToRetryOn.includes(e)&&t<this.maxRetries){const e=this.retryAfterMillisecondsToSleep(r);return await new Promise((t=>setTimeout(t,e||this.retryDelay))),!0}return!1}}class Ni{constructor(e,t){this.httpClientNoRetries=e,this.retryPolicy=t}async sendNetworkRequestAsyncHelper(e,t,r){return e===vr?this.httpClientNoRetries.sendGetRequestAsync(t,r):this.httpClientNoRetries.sendPostRequestAsync(t,r)}async sendNetworkRequestAsync(e,t,r){let n=await this.sendNetworkRequestAsyncHelper(e,t,r),i=0;for(;await this.retryPolicy.pauseForRetry(n.status,i,n.headers[f]);)n=await this.sendNetworkRequestAsyncHelper(e,t,r),i++;return n}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(vr,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(yr,e,t)}}const xi="invalid_loopback_server_address_type",Di="Loopback server address is not type string. This is unexpected.",Li="unable_to_load_redirectUrl",Ui="Loopback server callback was invoked without a url. This is unexpected.",Fi="no_auth_code_in_response",qi="No auth code found in the server response. Please check your network trace to determine what happened.",Hi="no_loopback_server_exists",ji="No loopback server exists yet.",Bi="loopback_server_already_exists",zi="Loopback server already exists. Cannot create another.",$i="loopback_server_timeout",Vi="Timed out waiting for auth code listener to be registered.",Ki="state_not_found",Gi="State not found. Please verify that the request originated from msal.",Wi="thumbprint_missing_from_client_certificate",Yi="Client certificate does not contain a SHA-1 or SHA-256 thumbprint.";class Qi extends z{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new Qi(xi,`${Di}`)}static createUnableToLoadRedirectUrlError(){return new Qi(Li,`${Ui}`)}static createNoAuthCodeInResponseError(){return new Qi(Fi,`${qi}`)}static createNoLoopbackServerExistsError(){return new Qi(Hi,`${ji}`)}static createLoopbackServerAlreadyExistsError(){return new Qi(Bi,`${zi}`)}static createLoopbackServerTimeoutError(){return new Qi($i,`${Vi}`)}static createStateNotFoundError(){return new Qi(Ki,Gi)}static createThumbprintMissingError(){return new Qi(Wi,Yi)}}const Ji={clientId:u.EMPTY_STRING,authority:u.DEFAULT_AUTHORITY,clientSecret:u.EMPTY_STRING,clientAssertion:u.EMPTY_STRING,clientCertificate:{thumbprint:u.EMPTY_STRING,thumbprintSha256:u.EMPTY_STRING,privateKey:u.EMPTY_STRING,x5c:u.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:u.EMPTY_STRING,authorityMetadata:u.EMPTY_STRING,clientCapabilities:[],protocolMode:$e.AAD,azureCloudOptions:{azureCloudInstance:jr.None,tenant:u.EMPTY_STRING},skipAuthorityMetadataCache:!1},Xi={claimsBasedCachingEnabled:!1},Zi={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:qr.Info},eo={loggerOptions:Zi,networkClient:new hi,proxyUrl:u.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},to={application:{appName:u.EMPTY_STRING,appVersion:u.EMPTY_STRING}};var ro=r(2107);class no{generateGuid(){return(0,ro.v4)()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class io{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return io.base64Encode(e,t).replace(/=/g,u.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return io.base64Decode(t)}}var oo=r(6982);class so{sha256(e){return oo.createHash("sha256").update(e).digest()}}class ao{constructor(){this.hashUtils=new so}async generatePkceCodes(){const e=this.generateCodeVerifier();return{verifier:e,challenge:this.generateCodeChallengeFromVerifier(e)}}generateCodeVerifier(){const e=[];for(;e.length<=32;){const t=oo.randomBytes(1)[0];if(t>=198)continue;const r=t%66;e.push(Ir[r])}const t=e.join(u.EMPTY_STRING);return io.base64EncodeUrl(t)}generateCodeChallengeFromVerifier(e){return io.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}class co{constructor(){this.pkceGenerator=new ao,this.guidGenerator=new no,this.hashUtils=new so}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return io.base64Encode(e)}base64Decode(e){return io.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return io.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}class uo extends Zt{constructor(e,t,r,n){super(t,r,e,n),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach((e=>e.call(null)))}cacheToInMemoryCache(e){const t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const r in e){const n=e[r];if("object"==typeof n)if(n instanceof Ve)t.accounts[r]=n;else if(et(n))t.idTokens[r]=n;else if(Ze(n))t.accessTokens[r]=n;else if(tt(n))t.refreshTokens[r]=n;else{if(!at(r,n))continue;t.appMetadata[r]=n}}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");const t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);const r=this.getCache();r[e]=t,this.setCache(r)}getAccountKeys(){const e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){const e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){const t=this.getCachedAccountEntity(e);return t&&Ve.isAccountEntity(t)?this.updateOutdatedCachedAccount(e,t):null}getCachedAccountEntity(e){return this.getItem(e)?Object.assign(new Ve,this.getItem(e)):null}setAccount(e){const t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){const t=this.getItem(e);return et(t)?t:null}setIdTokenCredential(e){const t=Je(e);this.setItem(t,e)}getAccessTokenCredential(e){const t=this.getItem(e);return Ze(t)?t:null}setAccessTokenCredential(e){const t=Je(e);this.setItem(t,e)}getRefreshTokenCredential(e){const t=this.getItem(e);return tt(t)?t:null}setRefreshTokenCredential(e){const t=Je(e);this.setItem(t,e)}getAppMetadata(e){const t=this.getItem(e);return at(e,t)?t:null}setAppMetadata(e){const t=function({environment:e,clientId:t}){return[_,e,t].join(S.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(t,e)}getServerTelemetry(e){const t=this.getItem(e);return t&&function(e,t){const r=0===e.indexOf(M.CACHE_KEY);let n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n}(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){const t=this.getItem(e);return t&&function(e,t){return!!t&&0===e.indexOf(b)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){const t=this.getItem(e);return t&&function(e,t){let r=!1;e&&(r=0===e.indexOf(x));let n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n}(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1;const r=this.getCache();return r[e]&&(delete r[e],t=!0),t&&(this.setCache(r),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");const e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach((e=>{this.removeItem(e)})),this.emitChange()}static generateInMemoryCache(e){return tr.deserializeAllCache(tr.deserializeJSONBlob(e))}static generateJsonCache(e){return c.serializeAllCache(e)}updateCredentialCacheKey(e,t){const r=Je(t);if(e!==r){const n=this.getItem(e);if(n)return this.removeItem(e),this.setItem(r,n),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}const lo={},ho={},fo={},po={},go={};class mo{constructor(e,t,r){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),r&&(this.persistence=r),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=c.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");const e=tr.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}async getAllAccounts(){let e;this.logger.trace("getAllAccounts called");try{return this.persistence&&(e=new ni(this,!1),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter((t=>t.homeAccountId===e))[0]||null}async getAccountByLocalId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter((t=>t.localAccountId===e))[0]||null}async removeAccount(e){let t;this.logger.trace("removeAccount called");try{this.persistence&&(t=new ni(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount(Ve.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");const r=this.mergeRemovals(e,t);return this.mergeUpdates(r,t)}mergeUpdates(e,t){return Object.keys(t).forEach((r=>{const n=t[r];if(e.hasOwnProperty(r)){const t=null!==n,i="object"==typeof n,o=!Array.isArray(n),s=void 0!==e[r]&&null!==e[r];t&&i&&o&&s?this.mergeUpdates(e[r],n):e[r]=n}else null!==n&&(e[r]=n)})),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");const r=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,n=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,s=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:r,AccessToken:n,RefreshToken:i,IdToken:o,AppMetadata:s}}mergeRemovalsDict(e,t){const r={...e};return Object.keys(e).forEach((e=>{t&&t.hasOwnProperty(e)||delete r[e]})),r}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...lo,...e.Account},IdToken:{...ho,...e.IdToken},AccessToken:{...fo,...e.AccessToken},RefreshToken:{...po,...e.RefreshToken},AppMetadata:{...go,...e.AppMetadata}}}}var vo=r(4040);class yo{static fromAssertion(e){const t=new yo;return t.jwt=e,t}static fromCertificate(e,t,r){const n=new yo;return n.privateKey=t,n.thumbprint=e,n.useSha256=!1,r&&(n.publicCertificate=this.parseCertificate(r)),n}static fromCertificateWithSha256Thumbprint(e,t,r){const n=new yo;return n.privateKey=t,n.thumbprint=e,n.useSha256=!0,r&&(n.publicCertificate=this.parseCertificate(r)),n}getJwt(e,t,r){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&r===this.jwtAudience?this.jwt:this.createJwt(e,t,r);if(this.jwt)return this.jwt;throw Ue(Ce)}createJwt(e,t,r){this.issuer=t,this.jwtAudience=r;const n=We();this.expirationTime=n+600;const i={alg:this.useSha256?"PS256":"RS256"},o=this.useSha256?"x5t#S256":"x5t";Object.assign(i,{[o]:io.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(i,{x5c:this.publicCertificate});const s={aud:this.jwtAudience,exp:this.expirationTime,iss:this.issuer,sub:this.issuer,nbf:n,jti:e.createNewGuid()};return this.jwt=vo.sign(s,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<We()}static parseCertificate(e){const t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,r=[];let n;for(;null!==(n=t.exec(e));)r.push(n[1].replace(/\r*\n/g,u.EMPTY_STRING));return r}}const wo="@azure/msal-node",Co="2.16.2";class Ao extends Hn{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");const t=We(),r=await this.executeTokenRequest(this.authority,e),n=new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return n.validateTokenResponse(r.body),n.handleServerTokenResponse(r.body,this.authority,t,e)}async executeTokenRequest(e,t){const r=this.createTokenQueryParameters(t),n=zt.appendQueryString(e.tokenEndpoint,r),i=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:xn}),s={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(n,i,o,s,t.correlationId)}async createTokenRequestBody(e){const t=new Ln;t.addClientId(this.config.authOptions.clientId),t.addUsername(e.username),t.addPassword(e.password),t.addScopes(e.scopes),t.addResponseTypeForTokenAndIdToken(),t.addGrantType("password"),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(r),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);const n=this.config.clientCredentials.clientAssertion;return n&&(t.addClientAssertion(await oi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(n.assertionType)),(!Ft.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&t.addCcsUpn(e.username),t.createQueryString()}}class Io{constructor(e){this.config=function({auth:e,broker:t,cache:r,system:n,telemetry:i}){const o={...eo,networkClient:new hi(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Zi,disableInternalRetries:n?.disableInternalRetries||!1};if(e.clientCertificate&&!e.clientCertificate.thumbprint&&!e.clientCertificate.thumbprintSha256)throw Qi.createStateNotFoundError();return{auth:{...Ji,...e},broker:{...t},cache:{...Xi,...r},system:{...o,...n},telemetry:{...to,...i}}}(e),this.cryptoProvider=new co,this.logger=new Hr(this.config.system.loggerOptions,wo,Co),this.storage=new uo(this.logger,this.config.auth.clientId,this.cryptoProvider,function(e){const t=e.cloudDiscoveryMetadata;let r;if(t)try{r=JSON.parse(t)}catch(e){throw Ut(Et)}return{canonicalAuthority:e.authority?In(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:r}}(this.config.auth)),this.tokenCache=new mo(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||A.QUERY,authenticationScheme:N.BEARER},r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,t.redirectUri,void 0,void 0,e.azureCloudOptions),n=new si(r);return this.logger.verbose("Auth code client created",t.correlationId),n.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});const r={...e,...await this.initializeBaseRequest(e),authenticationScheme:N.BEARER},n=this.initializeServerTelemetryManager(871,r.correlationId);try{const i=await this.buildOauthClientConfiguration(r.authority,r.correlationId,r.redirectUri,n,void 0,e.azureCloudOptions),o=new si(i);return this.logger.verbose("Auth code client created",r.correlationId),await o.acquireToken(r,t)}catch(e){throw e instanceof z&&e.setCorrelationId(r.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),authenticationScheme:N.BEARER},r=this.initializeServerTelemetryManager(872,t.correlationId);try{const n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,t.redirectUri||"",r,void 0,e.azureCloudOptions),i=new ai(n);return this.logger.verbose("Refresh token client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenSilent(e){const t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},r=this.initializeServerTelemetryManager(62,t.correlationId,t.forceRefresh);try{const n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,t.redirectUri||"",r,void 0,e.azureCloudOptions),i=new ci(n);return this.logger.verbose("Silent flow client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)},r=this.initializeServerTelemetryManager(371,t.correlationId);try{const n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,"",r,void 0,e.azureCloudOptions),i=new Ao(n);return this.logger.verbose("Username password client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw Qi.createStateNotFoundError();if(e!==t)throw Ue(Z)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,r,n,i,o){this.logger.verbose("buildOauthClientConfiguration called",t);const s=o||this.config.auth.azureCloudOptions,a=await this.createAuthority(e,t,i,s);return this.logger.info(`Building oauth client configuration with the following authority: ${a.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(a.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:r},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(a)},libraryInfo:{sku:Sr,version:Co,cpu:process.arch||u.EMPTY_STRING,os:process.platform||u.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=yo.fromAssertion(await oi(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Er}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===N.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=N.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Ft.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...l],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,r){const n={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:r||!1};return new Pr(n,this.storage)}async createAuthority(e,t,r,n){this.logger.verbose("createAuthority called",t);const i=An.generateAuthority(e,n),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:r,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return Un(i,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}}class So{async listenForAuthCode(e,t){if(this.server)throw Qi.createLoopbackServerAlreadyExistsError();return new Promise(((r,n)=>{this.server=li.createServer(((i,o)=>{const s=i.url;if(!s)return o.end(t||"Error occurred loading redirectUrl"),void n(Qi.createUnableToLoadRedirectUrlError());if(s===u.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.");const a=this.getRedirectUri(),c=Bt(new URL(s,a).search)||{};c.code&&(o.writeHead(302,{location:a}),o.end()),c.error&&o.end(t||`Error occurred: ${c.error}`),r(c)})),this.server.listen(0,"127.0.0.1")}))}getRedirectUri(){if(!this.server||!this.server.listening)throw Qi.createNoLoopbackServerExistsError();const e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),Qi.createInvalidLoopbackAddressTypeError();const t=e&&e.port;return`${Tr}${br}:${t}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class Eo extends Hn{constructor(e){super(e)}async acquireToken(e){const t=await this.getDeviceCode(e);e.deviceCodeCallback(t);const r=We(),n=await this.acquireTokenWithDeviceCode(e,t),i=new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n),i.handleServerTokenResponse(n,this.authority,r,e)}async getDeviceCode(e){const t=this.createExtraQueryParameters(e),r=zt.appendQueryString(this.authority.deviceCodeEndpoint,t),n=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(r,n,i,o,e.correlationId)}createExtraQueryParameters(e){const t=new Ln;return e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}async executePostRequestToDeviceCodeEndpoint(e,t,r,n,i){const{body:{user_code:o,device_code:s,verification_uri:a,expires_in:c,interval:u,message:l}}=await this.sendPostRequest(n,e,{body:t,headers:r},i);return{userCode:o,deviceCode:s,verificationUri:a,expiresIn:c,interval:u,message:l}}createQueryString(e){const t=new Ln;return t.addScopes(e.scopes),t.addClientId(this.config.authOptions.clientId),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}continuePolling(e,t,r){if(r)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Ue(de);if(t&&t<e&&We()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),Ue(Se);if(We()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Ue(he);return!0}async acquireTokenWithDeviceCode(e,t){const r=this.createTokenQueryParameters(e),n=zt.appendQueryString(this.authority.tokenEndpoint,r),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),s=e.timeout?We()+e.timeout:void 0,a=We()+t.expiresIn,c=1e3*t.interval;for(;this.continuePolling(a,s,e.cancel);){const t={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},r=await this.executePostToTokenEndpoint(n,i,o,t,e.correlationId);if(!r.body||!r.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),r.body;if(r.body.error!==u.AUTHORIZATION_PENDING)throw this.logger.info("Unexpected error in polling from the server"),l=H,d=r.body.error,new z(l,d?`${j[l]} ${d}`:j[l]);this.logger.info("Authorization pending. Continue polling."),await Qe(c)}var l,d;throw this.logger.error("Polling stopped for unknown reasons."),Ue(fe)}createTokenRequestBody(e,t){const r=new Ln;r.addScopes(e.scopes),r.addClientId(this.config.authOptions.clientId),r.addGrantType("device_code"),r.addDeviceCode(t.deviceCode);const n=e.correlationId||this.config.cryptoInterface.createNewGuid();return r.addCorrelationId(n),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&r.addServerTelemetry(this.serverTelemetryManager),(!Ft.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),r.createQueryString()}}class _o extends Io{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=Pr.makeExtraSkuString({libraryName:Sr,libraryVersion:Co})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);const t=Object.assign(e,await this.initializeBaseRequest(e)),r=this.initializeServerTelemetryManager(671,t.correlationId);try{const n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,"",r,void 0,e.azureCloudOptions),i=new Eo(n);return this.logger.verbose("Device code client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);const{openBrowser:r,successTemplate:n,errorTemplate:i,windowHandle:o,loopbackClient:s,...a}=e;if(this.nativeBrokerPlugin){const r={...a,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:`${Tr}${br}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...a.extraQueryParameters,...a.tokenQueryParameters,[Lr]:this.skus},accountId:a.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(r,o)}const{verifier:c,challenge:d}=await this.cryptoProvider.generatePkceCodes(),h=s||new So;let f={},p=null;try{const o=h.listenForAuthCode(n,i).then((e=>{f=e})).catch((e=>{p=e})),s=await this.waitForRedirectUri(h),g={...a,correlationId:t,scopes:e.scopes||l,redirectUri:s,responseMode:A.QUERY,codeChallenge:d,codeChallengeMethod:C.S256},m=await this.getAuthCodeUrl(g);if(await r(m),await o,p)throw p;if(f.error)throw new Fr(f.error,f.error_description,f.suberror);if(!f.code)throw Qi.createNoAuthCodeInResponseError();const v=f.client_info,y={code:f.code,codeVerifier:c,clientInfo:v||u.EMPTY_STRING,...g};return await this.acquireTokenByCode(y)}finally{h.closeServer()}}async acquireTokenSilent(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){const r={...e,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:`${Tr}${br}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[Lr]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(r)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){const t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){const e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise(((t,r)=>{let n=0;const i=setInterval((()=>{if(50<n)return clearInterval(i),void r(Qi.createLoopbackServerTimeoutError());try{const r=e.getRedirectUri();return clearInterval(i),void t(r)}catch(e){return e instanceof z&&e.errorCode===Hi?void n++:(clearInterval(i),void r(e))}}),100)}))}}class To extends Hn{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);const[t,r]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);if(t){if(r===F){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const t=!0;await this.executeTokenRequest(e,this.authority,t)}return t}return this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,r,n,i,o){const s=t,a=t;let c,u=D;s.serializableCache&&s.persistencePlugin&&(c=new ni(s.serializableCache,!1),await s.persistencePlugin.beforeCacheAccess(c));const l=this.readAccessTokenFromCache(n,a.managedIdentityId?.id||s.authOptions.clientId,new qt(e.scopes||[]),i);return s.serializableCache&&s.persistencePlugin&&c&&await s.persistencePlugin.afterCacheAccess(c),l?Ye(l.expiresOn,s.systemOptions?.tokenRenewalOffsetSeconds||300)?(o?.setCacheOutcome(U),[null,U]):(l.refreshOn&&Ye(l.refreshOn.toString(),0)&&(u=F,o?.setCacheOutcome(F)),[await ii.generateAuthenticationResult(r,n,{account:null,idToken:null,accessToken:l,refreshToken:null,appMetadata:null},!0,e),u]):(o?.setCacheOutcome(L),[null,L])}readAccessTokenFromCache(e,t,r,n){const i={homeAccountId:u.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:E.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:qt.createSearchScopes(r.asArray())},o=n.getAccessTokensByFilter(i);if(o.length<1)return null;if(o.length>1)throw Ue(ie);return o[0]}async executeTokenRequest(e,t,r){let n,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");const t={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=We();const r=await this.appTokenProvider(t);n={access_token:r.accessToken,expires_in:r.expiresInSeconds,refresh_in:r.refreshInSeconds,token_type:N.BEARER}}else{const r=this.createTokenQueryParameters(e),o=zt.appendQueryString(t.tokenEndpoint,r),s=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),i=We();const u=await this.executePostToTokenEndpoint(o,s,a,c,e.correlationId);n=u.body,n.status=u.status}const o=new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n,r),await o.handleServerTokenResponse(n,this.authority,i,e)}async createTokenRequestBody(e){const t=new Ln;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes,!1),t.addGrantType("client_credentials"),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(r),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);const n=e.clientAssertion||this.config.clientCredentials.clientAssertion;return n&&(t.addClientAssertion(await oi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(n.assertionType)),(!Ft.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}}class bo extends Hn{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new qt(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch(t){return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){const t=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(!t)throw this.serverTelemetryManager?.setCacheOutcome(L),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ue(Ie);if(Ye(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(U),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ue(Ie);const r=this.readIdTokenFromCacheForOBO(t.homeAccountId);let n,i=null;if(r){n=Ke(r.secret,io.base64Decode);const e=n.oid||n.sub,t={homeAccountId:r.homeAccountId,environment:r.environment,tenantId:r.realm,username:u.EMPTY_STRING,localAccountId:e||u.EMPTY_STRING};i=this.cacheManager.readAccountFromCache(t)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),ii.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:t,idToken:r,refreshToken:null,appMetadata:null},!0,e,n)}readIdTokenFromCacheForOBO(e){const t={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:E.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},r=this.cacheManager.getIdTokensByFilter(t);return Object.values(r).length<1?null:Object.values(r)[0]}readAccessTokenFromCacheForOBO(e,t){const r=t.authenticationScheme||N.BEARER,n={credentialType:r&&r.toLowerCase()!==N.BEARER.toLowerCase()?E.ACCESS_TOKEN_WITH_AUTH_SCHEME:E.ACCESS_TOKEN,clientId:e,target:qt.createSearchScopes(this.scopeSet.asArray()),tokenType:r,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(n),o=i.length;if(o<1)return null;if(o>1)throw Ue(ie);return i[0]}async executeTokenRequest(e,t,r){const n=this.createTokenQueryParameters(e),i=zt.appendQueryString(t.tokenEndpoint,n),o=await this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=We(),u=await this.executePostToTokenEndpoint(i,o,s,a,e.correlationId),l=new ii(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return l.validateTokenResponse(u.body),await l.handleServerTokenResponse(u.body,this.authority,c,e,void 0,r)}async createTokenRequestBody(e){const t=new Ln;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType("urn:ietf:params:oauth:grant-type:jwt-bearer"),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(r),t.addRequestTokenUse("on_behalf_of"),t.addOboAssertion(e.oboAssertion),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);const n=this.config.clientCredentials.clientAssertion;return n&&(t.addClientAssertion(await oi(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(n.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}}class ko extends Io{constructor(e){super(e),this.setClientCredential(),this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:await oi(e.clientAssertion,this.config.auth.clientId),assertionType:Er});const r=await this.initializeBaseRequest(e),n={...r,scopes:r.scopes.filter((e=>!l.includes(e)))},i={...e,...n,clientAssertion:t},o=new zt(i.authority).getUrlComponents().PathSegments[0];if(Object.values(v).includes(o))throw Ue(Oe);const s=process.env.MSAL_FORCE_REGION;let a;"DisableMsalForceRegion"!==i.azureRegion&&(a=!i.azureRegion&&s?s:i.azureRegion);const c={azureRegion:a,environmentRegion:process.env.REGION_NAME},u=this.initializeServerTelemetryManager(771,i.correlationId,i.skipCache);try{const t=await this.buildOauthClientConfiguration(i.authority,i.correlationId,"",u,c,e.azureCloudOptions),r=new To(t,this.appTokenProvider);return this.logger.verbose("Client credential client created",i.correlationId),await r.acquireToken(i)}catch(e){throw e instanceof z&&e.setCorrelationId(i.correlationId),u.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)};try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,"",void 0,void 0,e.azureCloudOptions),n=new bo(r);return this.logger.verbose("On behalf of client created",t.correlationId),await n.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),e}}setClientCredential(){const e=!!this.config.auth.clientSecret,t=!!this.config.auth.clientAssertion,r=!(!this.config.auth.clientCertificate?.thumbprint&&!this.config.auth.clientCertificate?.thumbprintSha256||!this.config.auth.clientCertificate?.privateKey);if(!this.appTokenProvider){if(e&&t||t&&r||e&&r)throw Ue(Ae);if(this.config.auth.clientSecret)this.clientSecret=this.config.auth.clientSecret;else if(this.config.auth.clientAssertion)this.developerProvidedClientAssertion=this.config.auth.clientAssertion;else{if(!r)throw Ue(Ae);this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?yo.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):yo.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c)}}}}class Po{constructor(e,t,r,n){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n}async getServerTokenResponseAsync(e,t,r,n){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,r;return e.body.expires_on&&(r=e.body.expires_on-We(),r>7200&&(t=r/2)),{status:e.status,access_token:e.body.access_token,expires_in:r,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:"string"==typeof e.body.error?e.body.error:e.body.error?.code,error_description:e.body.message||("string"==typeof e.body.error?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,r,n){const i=this.createRequest(e.resource,t),o=i.headers;o[h]=u.URL_FORM_CONTENT_TYPE;const s={headers:o};Object.keys(i.bodyParameters).length&&(s.body=i.computeParametersBodyString());const a=We();let c;try{c=i.httpMethod===yr?await this.networkClient.sendPostRequestAsync(i.computeUri(),s):await this.networkClient.sendGetRequestAsync(i.computeUri(),s)}catch(e){throw e instanceof z?e:Ue(Y)}const l=new ii(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),d=await this.getServerTokenResponseAsync(c,this.networkClient,i,s);return l.validateTokenResponse(d,n),l.handleServerTokenResponse(d,r,a,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e){switch(e){case pr:return this.logger.info("[Managed Identity] Adding user assigned client id to the request."),"client_id";case gr:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),"mi_res_id";case mr:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),"object_id";default:throw Ri(yi)}}}Po.getValidatedEnvVariableUrlString=(e,t,r,n)=>{try{return new zt(t).urlString}catch(t){throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${e}' environment variable is malformed.`),Ri(bi[e])}};class Ro{constructor(e,t){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={}}computeUri(){const e=new Ln;this.queryParameters&&e.addExtraQueryParameters(this.queryParameters);const t=e.createQueryString();return zt.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){const e=new Ln;return this.bodyParameters&&e.addExtraQueryParameters(this.bodyParameters),e.createQueryString()}}class Oo extends Po{constructor(e,t,r,n,i,o){super(e,t,r,n),this.identityEndpoint=i,this.identityHeader=o}static getEnvironmentVariables(){return[process.env[ar],process.env[cr]]}static tryCreate(e,t,r,n){const[i,o]=Oo.getEnvironmentVariables();if(!i||!o)return e.info(`[Managed Identity] ${hr.APP_SERVICE} managed identity is unavailable because one or both of the '${cr}' and '${ar}' environment variables are not defined.`),null;const s=Oo.getValidatedEnvVariableUrlString(ar,i,hr.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${hr.APP_SERVICE} managed identity. Endpoint URI: ${s}. Creating ${hr.APP_SERVICE} managed identity.`),new Oo(e,t,r,n,i,o)}createRequest(e,t){const r=new Ro(vr,this.identityEndpoint);return r.headers["X-IDENTITY-HEADER"]=this.identityHeader,r.queryParameters[nr]="2019-08-01",r.queryParameters[ir]=e,t.idType!==fr&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}var Mo=r(9896),No=r(6928);const xo="http://127.0.0.1:40342/metadata/identity/oauth2/token",Do="N/A: himds executable exists",Lo={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},Uo={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class Fo extends Po{constructor(e,t,r,n,i){super(e,t,r,n),this.identityEndpoint=i}static getEnvironmentVariables(){let e=process.env[ar],t=process.env[lr];if(!e||!t){const r=Uo[process.platform];try{(0,Mo.accessSync)(r,Mo.constants.F_OK|Mo.constants.R_OK),e=xo,t=Do}catch(e){}}return[e,t]}static tryCreate(e,t,r,n,i){const[o,s]=Fo.getEnvironmentVariables();if(!o||!s)return e.info(`[Managed Identity] ${hr.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${ar}' and '${lr}' are not defined. ${hr.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(s===Do)e.info(`[Managed Identity] ${hr.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${hr.AZURE_ARC} endpoint: ${xo}. Creating ${hr.AZURE_ARC} managed identity.`);else{const t=Fo.getValidatedEnvVariableUrlString(ar,o,hr.AZURE_ARC,e);t.endsWith("/")&&t.slice(0,-1),Fo.getValidatedEnvVariableUrlString(lr,s,hr.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${hr.AZURE_ARC} managed identity. Endpoint URI: ${t}. Creating ${hr.AZURE_ARC} managed identity.`)}if(i.idType!==fr)throw Ri(Ai);return new Fo(e,t,r,n,o)}createRequest(e){const t=new Ro(vr,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[rr]="true",t.queryParameters[nr]="2019-11-01",t.queryParameters[ir]=e,t}async getServerTokenResponseAsync(e,t,r,n){let i;if(401===e.status){const o=e.headers["www-authenticate"];if(!o)throw Ri(_i);if(!o.includes("Basic realm="))throw Ri(Ti);const s=o.split("Basic realm=")[1];if(!Lo.hasOwnProperty(process.platform))throw Ri(Ci);const a=Lo[process.platform],c=No.basename(s);if(!c.endsWith(".key"))throw Ri(mi);if(a+c!==s)throw Ri(vi);let u,l;try{u=await(0,Mo.statSync)(s).size}catch(e){throw Ri(Ei)}if(u>4096)throw Ri(wi);try{l=(0,Mo.readFileSync)(s,"utf-8")}catch(e){throw Ri(Ei)}const d=`Basic ${l}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),r.headers.Authorization=d;try{i=await t.sendGetRequestAsync(r.computeUri(),n)}catch(e){throw e instanceof z?e:Ue(Y)}}return this.getServerTokenResponse(i||e)}}class qo extends Po{constructor(e,t,r,n,i){super(e,t,r,n),this.msiEndpoint=i}static getEnvironmentVariables(){return[process.env[dr]]}static tryCreate(e,t,r,n,i){const[o]=qo.getEnvironmentVariables();if(!o)return e.info(`[Managed Identity] ${hr.CLOUD_SHELL} managed identity is unavailable because the '${dr} environment variable is not defined.`),null;const s=qo.getValidatedEnvVariableUrlString(dr,o,hr.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${hr.CLOUD_SHELL} managed identity. Endpoint URI: ${s}. Creating ${hr.CLOUD_SHELL} managed identity.`),i.idType!==fr)throw Ri(Ii);return new qo(e,t,r,n,o)}createRequest(e){const t=new Ro(yr,this.msiEndpoint);return t.headers[rr]="true",t.bodyParameters[ir]=e,t}}const Ho="/metadata/identity/oauth2/token",jo=`http://169.254.169.254${Ho}`;class Bo extends Po{constructor(e,t,r,n,i){super(e,t,r,n),this.identityEndpoint=i}static tryCreate(e,t,r,n){let i;return process.env[sr]?(e.info(`[Managed Identity] Environment variable ${sr} for ${hr.IMDS} returned endpoint: ${process.env[sr]}`),i=Bo.getValidatedEnvVariableUrlString(sr,`${process.env[sr]}${Ho}`,hr.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${sr} environment variable for ${hr.IMDS}, using the default endpoint.`),i=jo),new Bo(e,t,r,n,i)}createRequest(e,t){const r=new Ro(vr,this.identityEndpoint);return r.headers[rr]="true",r.queryParameters[nr]="2018-02-01",r.queryParameters[ir]=e,t.idType!==fr&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}class zo extends Po{constructor(e,t,r,n,i,o){super(e,t,r,n),this.identityEndpoint=i,this.identityHeader=o}static getEnvironmentVariables(){return[process.env[ar],process.env[cr],process.env[ur]]}static tryCreate(e,t,r,n,i){const[o,s,a]=zo.getEnvironmentVariables();if(!o||!s||!a)return e.info(`[Managed Identity] ${hr.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${cr}', '${ar}' or '${ur}' environment variables are not defined.`),null;const c=zo.getValidatedEnvVariableUrlString(ar,o,hr.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${hr.SERVICE_FABRIC} managed identity. Endpoint URI: ${c}. Creating ${hr.SERVICE_FABRIC} managed identity.`),i.idType!==fr&&e.warning(`[Managed Identity] ${hr.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new zo(e,t,r,n,o,s)}createRequest(e,t){const r=new Ro(vr,this.identityEndpoint);return r.headers.secret=this.identityHeader,r.queryParameters[nr]="2019-07-01-preview",r.queryParameters[ir]=e,t.idType!==fr&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}class $o{constructor(e,t,r,n){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n}async sendManagedIdentityTokenRequest(e,t,r,n){return $o.identitySource||($o.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,t)),$o.identitySource.acquireTokenWithManagedIdentity(e,t,r,n)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every((e=>void 0!==e))}getManagedIdentitySource(){return $o.sourceName=this.allEnvironmentVariablesAreDefined(zo.getEnvironmentVariables())?hr.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(Oo.getEnvironmentVariables())?hr.APP_SERVICE:this.allEnvironmentVariablesAreDefined(qo.getEnvironmentVariables())?hr.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(Fo.getEnvironmentVariables())?hr.AZURE_ARC:hr.DEFAULT_TO_IMDS,$o.sourceName}selectManagedIdentitySource(e,t,r,n,i){const o=zo.tryCreate(e,t,r,n,i)||Oo.tryCreate(e,t,r,n)||qo.tryCreate(e,t,r,n,i)||Fo.tryCreate(e,t,r,n,i)||Bo.tryCreate(e,t,r,n);if(!o)throw Ri(Si);return o}}class Vo{constructor(e){this.config=function({managedIdentityIdParams:e,system:t}){const r=new Oi(e),n=t?.loggerOptions||Zi;let i;if(i=t?.networkClient?t.networkClient:new hi(t?.proxyUrl,t?.customAgentOptions),!t?.disableInternalRetries){const e=new Mi(3,1e3,kr);i=new Ni(i,e)}return{managedIdentityId:r,system:{loggerOptions:n,networkClient:i}}}(e||{}),this.logger=new Hr(this.config.system.loggerOptions,wo,Co);const t={canonicalAuthority:u.DEFAULT_AUTHORITY};Vo.nodeStorage||(Vo.nodeStorage=new uo(this.logger,this.config.managedIdentityId.id,Sn,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new co;const r={protocolMode:$e.AAD,knownAuthorities:[or],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new An(or,this.networkClient,Vo.nodeStorage,r,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new To({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new $o(this.logger,Vo.nodeStorage,this.networkClient,this.cryptoProvider)}async acquireToken(e){if(!e.resource)throw Ut(mt);const t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid()};if(e.claims||t.forceRefresh)return this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority);const[r,n]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,Vo.nodeStorage);if(r){if(n===F){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const e=!0;await this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority,e)}return r}return this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority)}getManagedIdentitySource(){return $o.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}class Ko{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){const t=await this.partitionManager.getKey(),r=await this.client.get(t);e.tokenCache.deserialize(r)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.getKVStore(),r=Object.values(t).filter((e=>Ve.isAccountEntity(e)));let n;if(r.length>0){const e=r[0];n=await this.partitionManager.extractKey(e)}else n=await this.partitionManager.getKey();await this.client.set(n,e.tokenCache.serialize())}}}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=r(5256),i=exports;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/cd4ee3b1c348a13bafd8f9ad8060705f6d4b9cba/extensions/microsoft-authentication/dist/extension.js.map