"use strict";var Em=Object.create;var Xn=Object.defineProperty;var vm=Object.getOwnPropertyDescriptor;var Tm=Object.getOwnPropertyNames;var Rm=Object.getPrototypeOf,Mm=Object.prototype.hasOwnProperty;var Nm=(e,t,n)=>t in e?Xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var r=(e,t)=>Xn(e,"name",{value:t,configurable:!0});var ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),si=(e,t)=>{for(var n in t)Xn(e,n,{get:t[n],enumerable:!0})},Pm=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Tm(t))!Mm.call(e,s)&&s!==n&&Xn(e,s,{get:()=>t[s],enumerable:!(o=vm(t,s))||o.enumerable});return e};var kt=(e,t,n)=>(n=e!=null?Em(Rm(e)):{},Pm(t||!e||!e.__esModule?Xn(n,"default",{value:e,enumerable:!0}):n,e));var Ft=(e,t,n)=>Nm(e,typeof t!="symbol"?t+"":t,n);var Tu=ne(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.bytePairEncode=pt.BinaryMap=pt.binaryMapKey=void 0;var zm=r((e,t,n)=>{let o=n-t,s=16777215>>>Math.max(0,(3-o)*8),u=(e[t+0]|e[t+1]<<8|e[t+2]<<16)&s,i=16777215>>>Math.min(31,Math.max(0,(6-o)*8)),a=(e[t+3]|e[t+4]<<8|e[t+5]<<16)&i;return u+16777216*a},"binaryMapKey");pt.binaryMapKey=zm;var sr=class sr{constructor(){this.nested=new Map,this.final=new Map}get(t,n=0,o=t.length){var i;let s=o<6+n,u=(0,pt.binaryMapKey)(t,n,o);return s?this.final.get(u):(i=this.nested.get(u))==null?void 0:i.get(t,6+n,o)}set(t,n){let o=(0,pt.binaryMapKey)(t,0,t.length);if(t.length<6){this.final.set(o,n);return}let u=this.nested.get(o);if(u instanceof sr)u.set(t.subarray(6),n);else{let i=new sr;i.set(t.subarray(6),n),this.nested.set(o,i)}}};r(sr,"BinaryMap");var Mi=sr;pt.BinaryMap=Mi;var ft=new Int32Array(128),Le=new Int32Array(128);function qm(e,t,n){var l;if(n===1)return[t.get(e)];let o=2147483647,s=-1;for(;ft.length<n*2;)Le=new Int32Array(Le.length*2),ft=new Int32Array(ft.length*2);for(let c=0;c<n-1;c++){let d=(l=t.get(e,c,c+2))!=null?l:2147483647;d<o&&(o=d,s=c),Le[c]=c,ft[c]=d}Le[n-1]=n-1,ft[n-1]=2147483647,Le[n]=n,ft[n]=2147483647;let u=n+1;function i(c,d=0){if(c+d+2<u){let m=t.get(e,Le[c],Le[c+d+2]);if(m!==void 0)return m}return 2147483647}for(r(i,"getRank");o!==2147483647;){ft[Le[s]]=i(s,1),s>0&&(ft[Le[s-1]]=i(s-1,1));for(let c=s+1;c<u-1;c++)Le[c]=Le[c+1];u--,s=-1,o=2147483647;for(let c=0;c<u-1;c++){let d=ft[Le[c]];ft[Le[c]]<o&&(o=d,s=c)}}let a=[];for(let c=0;c<u-1;c++)a.push(t.get(e,Le[c],Le[c+1]));return a}r(qm,"bytePairEncode");pt.bytePairEncode=qm});var Ru=ne(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.makeTextEncoder=void 0;var Li=class Li{constructor(){this.length=0,this.encoder=new TextEncoder}encode(t){let n=this.encoder.encode(t);return this.length=n.length,n}};r(Li,"UniversalTextEncoder");var Ni=Li,ki=class ki{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(t){for(;;){if(this.length=this.buffer.write(t,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(t)}}};r(ki,"NodeTextEncoder");var Pi=ki,Km=r(()=>typeof Buffer<"u"?new Pi:new Ni,"makeTextEncoder");Zr.makeTextEncoder=Km});var Mu=ne(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.LRUCache=void 0;var Oi=class Oi{constructor(t){this.size=t,this.nodes=new Map}get(t){let n=this.nodes.get(t);if(n)return this.moveToHead(n),n.value}set(t,n){let o=this.nodes.get(t);if(o)o.value=n,this.moveToHead(o);else{let s=new Ai(t,n);this.nodes.set(t,s),this.addNode(s),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(t){this.removeNode(t),t.next=void 0,t.prev=void 0,this.addNode(t)}addNode(t){this.head&&(this.head.prev=t,t.next=this.head),this.tail||(this.tail=t),this.head=t}removeNode(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}};r(Oi,"LRUCache");var Fi=Oi;Qr.LRUCache=Fi;var Ci=class Ci{constructor(t,n){this.key=t,this.value=n}};r(Ci,"Node");var Ai=Ci});var ji=ne(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.TikTokenizer=void 0;var Hm=require("fs"),Zm=require("util"),Jr=Tu(),Qm=Ru(),Jm=Mu();function Xm(e){let t=new Map;try{let o=Hm.readFileSync(e,"utf-8");return n(o),t}catch(o){throw new Error(`Failed to load from BPE encoder file stream: ${o}`)}function n(o){for(let s of o.split(/[\r\n]+/)){if(s.trim()==="")continue;let u=s.split(" ");if(u.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let i=new Uint8Array(Buffer.from(u[0],"base64")),a=parseInt(u[1]);if(!isNaN(a))t.set(i,a);else throw new Error(`Can't parse ${u[1]} to integer`)}}r(n,"processBpeRanks")}r(Xm,"loadTikTokenBpe");function Ym(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}r(Ym,"escapeRegExp");var Di=class Di{constructor(t,n,o,s=8192){this.textEncoder=(0,Qm.makeTextEncoder)(),this.textDecoder=new Zm.TextDecoder("utf-8"),this.cache=new Jm.LRUCache(s);let u=typeof t=="string"?Xm(t):t;this.init(u,n,o)}init(t,n,o){this.encoder=new Jr.BinaryMap;for(let[s,u]of t)this.encoder.set(s,u);this.regex=new RegExp(o,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(s=>Ym(s)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[s,u]of t)this.decoder.set(u,s);if(t.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[s,u]of n)this.specialTokensDecoder.set(u,s)}findNextSpecialToken(t,n,o){let s=n,u=null;if(o&&this.specialTokensRegex)for(;u=t.slice(s).match(this.specialTokensRegex),!(!u||o&&o.includes(u[0]));)s+=u.index+1;let i=u?s+u.index:t.length;return[u,i]}encode(t,n){let o=[],s=0;for(;;){let u,i;if([u,i]=this.findNextSpecialToken(t,s,n),i>s&&this.encodeByIndex(t,o,s,i),u){if(s=s+this.encodeSpecialToken(o,u),s>=t.length)break}else break}return o}encodeSpecialToken(t,n){var s;let o=(s=this.specialTokensEncoder)==null?void 0:s.get(n[0]);return t.push(o),n.index+n[0].length}encodeByIndex(t,n,o,s){let u,i=t.substring(o,s);for(this.regex.lastIndex=0;u=this.regex.exec(i);){let a=this.cache.get(u[0]);if(a)for(let l of a)n.push(l);else{let l=this.textEncoder.encode(u[0]),c=this.encoder.get(l,0,this.textEncoder.length);if(c!==void 0)n.push(c),this.cache.set(u[0],[c]);else{let d=(0,Jr.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let m of d)n.push(m);this.cache.set(u[0],d)}}}}encodeTrimSuffixByIndex(t,n,o,s,u,i,a){let l,c=t.substring(o,s);for(this.regex.lastIndex=0;l=this.regex.exec(c);){let d=l[0],m=this.cache.get(d);if(m)if(i+m.length<=u)i+=m.length,a+=d.length,n.push(...m);else{let f=u-i;i+=f,a+=d.length,n.push(...m.slice(0,f));break}else{let f=this.textEncoder.encode(d),p=this.encoder.get(f,0,f.length);if(p!==void 0)if(this.cache.set(d,[p]),i+1<=u)i++,a+=d.length,n.push(p);else break;else{let g=(0,Jr.bytePairEncode)(f,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),i+g.length<=u){i+=g.length,a+=d.length;for(let h of g)n.push(h)}else{let h=u-i;i+=h,a+=d.length;for(let x=0;x<h;x++)n.push(g[x]);break}}}if(i>=u)break}return{tokenCount:i,encodeLength:a}}encodeTrimSuffix(t,n,o){let s=[],u=0,i=0,a=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(t,u,o),d>u){let{tokenCount:m,encodeLength:f}=this.encodeTrimSuffixByIndex(t,s,u,d,n,i,a);if(i=m,a=f,i>=n)break}if(c!==null){if(i++,i<=n&&(u=u+this.encodeSpecialToken(s,c),a+=c[0].length,u>=t.length)||i>=n)break}else break}let l=a===t.length?t:t.slice(0,a);return{tokenIds:s,text:l}}encodeTrimPrefix(t,n,o){let s=[],u=0,i=0,a=0,l=new Map;for(l.set(i,a);;){let f,p;if([f,p]=this.findNextSpecialToken(t,u,o),p>u){let g,h=t.substring(u,p);for(this.regex.lastIndex=0;g=this.regex.exec(h);){let x=g[0],y=this.cache.get(x);if(y)i+=y.length,a+=x.length,s.push(...y),l.set(i,a);else{let R=this.textEncoder.encode(x),N=this.encoder.get(R);if(N!==void 0)this.cache.set(x,[N]),i++,a+=x.length,s.push(N),l.set(i,a);else{let k=(0,Jr.bytePairEncode)(R,this.encoder,this.textEncoder.length);this.cache.set(x,k),i+=k.length,a+=x.length;for(let L of k)s.push(L);l.set(i,a)}}}}if(f!==null){if(u=u+this.encodeSpecialToken(s,f),i++,a+=f[0].length,l.set(i,a),u>=t.length)break}else break}if(i<=n)return{tokenIds:s,text:t};let c=i-n,d=0,m=0;for(let[f,p]of l)if(f>=c){d=f,m=p;break}if(d>n){let f=this.encode(t,o),p=f.slice(f.length-n);return{tokenIds:p,text:this.decode(p)}}return{tokenIds:s.slice(d),text:t.slice(m)}}decode(t){var o,s;let n=[];for(let u of t){let i=[],a=(o=this.decoder)==null?void 0:o.get(u);if(a!==void 0)i=Array.from(a);else{let l=(s=this.specialTokensDecoder)==null?void 0:s.get(u);if(l!==void 0){let c=this.textEncoder.encode(l);i=Array.from(c.subarray(0,this.textEncoder.length))}}n.push(...i)}return this.textDecoder.decode(new Uint8Array(n))}};r(Di,"TikTokenizer");var Ui=Di;Xr.TikTokenizer=Ui});var Du=ne(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.createTokenizer=de.createByEncoderName=de.createByModelName=de.getRegexByModel=de.getRegexByEncoder=de.getSpecialTokensByModel=de.getSpecialTokensByEncoder=de.MODEL_TO_ENCODING=void 0;var eo=require("fs"),Bi=require("path"),ef=ji(),tf=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);de.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var Yr="<|endoftext|>",Nu="<|fim_prefix|>",Pu="<|fim_middle|>",Lu="<|fim_suffix|>",ku="<|endofprompt|>",ar="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Fu="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",nf=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Au=nf.join("|");function Wi(e){let t="";if(de.MODEL_TO_ENCODING.has(e))t=de.MODEL_TO_ENCODING.get(e);else for(let[n,o]of tf)if(e.startsWith(n)){t=o;break}return t}r(Wi,"getEncoderFromModelName");async function rf(e,t){let n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch file from ${e}. Status code: ${n.status}`);let o=await n.text();eo.writeFileSync(t,o)}r(rf,"fetchAndSaveFile");function $i(e){let t=new Map([[Yr,50256]]);switch(e){case"o200k_base":t=new Map([[Yr,199999],[ku,200018]]);break;case"cl100k_base":t=new Map([[Yr,100257],[Nu,100258],[Pu,100259],[Lu,100260],[ku,100276]]);break;case"p50k_edit":t=new Map([[Yr,50256],[Nu,50281],[Pu,50282],[Lu,50283]]);break;default:break}return t}r($i,"getSpecialTokensByEncoder");de.getSpecialTokensByEncoder=$i;function of(e){let t=Wi(e);return $i(t)}r(of,"getSpecialTokensByModel");de.getSpecialTokensByModel=of;function Ou(e){switch(e){case"o200k_base":return Au;case"cl100k_base":return Fu;default:break}return ar}r(Ou,"getRegexByEncoder");de.getRegexByEncoder=Ou;function sf(e){let t=Wi(e);return Ou(t)}r(sf,"getRegexByModel");de.getRegexByModel=sf;async function af(e,t=null){return Cu(Wi(e),t)}r(af,"createByModelName");de.createByModelName=af;async function Cu(e,t=null){let n,o,s=$i(e);switch(e){case"o200k_base":n=Au,o="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=Fu,o="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=ar,o="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=ar,o="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=ar,o="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=ar,o="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${e}]`)}t!==null&&(s=new Map([...s,...t]));let u=Bi.basename(o),i=Bi.resolve(__dirname,"..","model");eo.existsSync(i)||eo.mkdirSync(i,{recursive:!0});let a=Bi.resolve(i,u);return eo.existsSync(a)||(console.log(`Downloading file from ${o}`),await rf(o,a),console.log(`Saved file to ${a}`)),Uu(a,s,n)}r(Cu,"createByEncoderName");de.createByEncoderName=Cu;function Uu(e,t,n,o=8192){return new ef.TikTokenizer(e,t,n,o)}r(Uu,"createTokenizer");de.createTokenizer=Uu});var ju=ne(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.createTokenizer=me.createByEncoderName=me.createByModelName=me.getSpecialTokensByModel=me.getSpecialTokensByEncoder=me.getRegexByModel=me.getRegexByEncoder=me.MODEL_TO_ENCODING=me.TikTokenizer=void 0;var uf=ji();Object.defineProperty(me,"TikTokenizer",{enumerable:!0,get:r(function(){return uf.TikTokenizer},"get")});var Ot=Du();Object.defineProperty(me,"MODEL_TO_ENCODING",{enumerable:!0,get:r(function(){return Ot.MODEL_TO_ENCODING},"get")});Object.defineProperty(me,"getRegexByEncoder",{enumerable:!0,get:r(function(){return Ot.getRegexByEncoder},"get")});Object.defineProperty(me,"getRegexByModel",{enumerable:!0,get:r(function(){return Ot.getRegexByModel},"get")});Object.defineProperty(me,"getSpecialTokensByEncoder",{enumerable:!0,get:r(function(){return Ot.getSpecialTokensByEncoder},"get")});Object.defineProperty(me,"getSpecialTokensByModel",{enumerable:!0,get:r(function(){return Ot.getSpecialTokensByModel},"get")});Object.defineProperty(me,"createByModelName",{enumerable:!0,get:r(function(){return Ot.createByModelName},"get")});Object.defineProperty(me,"createByEncoderName",{enumerable:!0,get:r(function(){return Ot.createByEncoderName},"get")});Object.defineProperty(me,"createTokenizer",{enumerable:!0,get:r(function(){return Ot.createTokenizer},"get")})});var Zu=ne((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;let _Parser=class _Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=r((i,a)=>{throw a},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(i){return Module.locateFile?Module.locateFile(i,scriptDirectory):scriptDirectory+i}r(locateFile,"locateFile");function logExceptionOnExit(i){i instanceof ExitStatus||err("exiting due to exception: "+i)}if(r(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=r((i,a)=>(i=isFileURI(i)?new URL(i):nodePath.normalize(i),fs.readFileSync(i,a?void 0:"utf8")),"read_"),readBinary=r(i=>{var a=read_(i,!0);return a.buffer||(a=new Uint8Array(a)),a},"readBinary"),readAsync=r((i,a,l)=>{i=isFileURI(i)?new URL(i):nodePath.normalize(i),fs.readFile(i,function(c,d){c?l(c):a(d.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=r((i,a)=>{if(keepRuntimeAlive())throw process.exitCode=i,a;logExceptionOnExit(a),process.exit(i)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=r(i=>{var a=new XMLHttpRequest;return a.open("GET",i,!1),a.send(null),a.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=r(i=>{var a=new XMLHttpRequest;return a.open("GET",i,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)},"readBinary")),readAsync=r((i,a,l)=>{var c=new XMLHttpRequest;c.open("GET",i,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?a(c.response):l()},c.onerror=l,c.send(null)},"readAsync"),setWindowTitle=r(i=>document.title=i,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(i,a,l){for(var c=a+l,d=a;i[d]&&!(d>=c);)++d;if(d-a>16&&i.buffer&&UTF8Decoder)return UTF8Decoder.decode(i.subarray(a,d));for(var m="";a<d;){var f=i[a++];if(128&f){var p=63&i[a++];if((224&f)!=192){var g=63&i[a++];if((f=(240&f)==224?(15&f)<<12|p<<6|g:(7&f)<<18|p<<12|g<<6|63&i[a++])<65536)m+=String.fromCharCode(f);else{var h=f-65536;m+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else m+=String.fromCharCode((31&f)<<6|p)}else m+=String.fromCharCode(f)}return m}r(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(i,a){return i?UTF8ArrayToString(HEAPU8,i,a):""}r(UTF8ToString,"UTF8ToString");function stringToUTF8Array(i,a,l,c){if(!(c>0))return 0;for(var d=l,m=l+c-1,f=0;f<i.length;++f){var p=i.charCodeAt(f);if(p>=55296&&p<=57343&&(p=65536+((1023&p)<<10)|1023&i.charCodeAt(++f)),p<=127){if(l>=m)break;a[l++]=p}else if(p<=2047){if(l+1>=m)break;a[l++]=192|p>>6,a[l++]=128|63&p}else if(p<=65535){if(l+2>=m)break;a[l++]=224|p>>12,a[l++]=128|p>>6&63,a[l++]=128|63&p}else{if(l+3>=m)break;a[l++]=240|p>>18,a[l++]=128|p>>12&63,a[l++]=128|p>>6&63,a[l++]=128|63&p}}return a[l]=0,l-d}r(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(i,a,l){return stringToUTF8Array(i,HEAPU8,a,l)}r(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(i){for(var a=0,l=0;l<i.length;++l){var c=i.charCodeAt(l);c<=127?a++:c<=2047?a+=2:c>=55296&&c<=57343?(a+=4,++l):a+=3}return a}r(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(i){buffer=i,Module.HEAP8=HEAP8=new Int8Array(i),Module.HEAP16=HEAP16=new Int16Array(i),Module.HEAP32=HEAP32=new Int32Array(i),Module.HEAPU8=HEAPU8=new Uint8Array(i),Module.HEAPU16=HEAPU16=new Uint16Array(i),Module.HEAPU32=HEAPU32=new Uint32Array(i),Module.HEAPF32=HEAPF32=new Float32Array(i),Module.HEAPF64=HEAPF64=new Float64Array(i)}r(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}r(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}r(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}r(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}r(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}r(postRun,"postRun");function addOnPreRun(i){__ATPRERUN__.unshift(i)}r(addOnPreRun,"addOnPreRun");function addOnInit(i){__ATINIT__.unshift(i)}r(addOnInit,"addOnInit");function addOnPostRun(i){__ATPOSTRUN__.unshift(i)}r(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(i){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}r(addRunDependency,"addRunDependency");function removeRunDependency(i){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var a=dependenciesFulfilled;dependenciesFulfilled=null,a()}}r(removeRunDependency,"removeRunDependency");function abort(i){throw Module.onAbort&&Module.onAbort(i),err(i="Aborted("+i+")"),ABORT=!0,EXITSTATUS=1,i+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(i)}r(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(i){return i.startsWith(dataURIPrefix)}r(isDataURI,"isDataURI");function isFileURI(i){return i.startsWith("file://")}r(isFileURI,"isFileURI");function getBinary(i){try{if(i==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(i);throw"both async and sync fetching of the wasm failed"}catch(a){abort(a)}}r(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){if(!i.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return i.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(i,a){readAsync(wasmBinaryFile,function(l){i(new Uint8Array(l))},a)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}r(getBinaryPromise,"getBinaryPromise");function createWasm(){var i={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function a(d,m){var f=d.exports;f=relocateExports(f,1024);var p=getDylinkMetadata(m);p.neededDynlibs&&(dynamicLibraries=p.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(f,"main"),Module.asm=f,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}r(a,"t");function l(d){a(d.instance,d.module)}r(l,"r");function c(d){return getBinaryPromise().then(function(m){return WebAssembly.instantiate(m,i)}).then(function(m){return m}).then(d,function(m){err("failed to asynchronously prepare wasm: "+m),abort(m)})}if(r(c,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(i,a)}catch(d){return err("Module.instantiateWasm callback failed with error: "+d),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?c(l):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(d){return WebAssembly.instantiateStreaming(d,i).then(l,function(m){return err("wasm streaming compile failed: "+m),err("falling back to ArrayBuffer instantiation"),c(l)})}),{}}r(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(i){this.name="ExitStatus",this.message="Program terminated with exit("+i+")",this.status=i}r(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:r(function(i,a){var l=GOT[a];return l||(l=GOT[a]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(a)||(l.required=!0),l},"get")};function callRuntimeCallbacks(i){for(;i.length>0;)i.shift()(Module)}r(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(i){var a=0,l=0;function c(){for(var j=0,E=1;;){var O=i[a++];if(j+=(127&O)*E,E*=128,!(128&O))break}return j}r(c,"_");function d(){var j=c();return UTF8ArrayToString(i,(a+=j)-j,j)}r(d,"n");function m(j,E){if(j)throw new Error(E)}r(m,"s");var f="dylink.0";if(i instanceof WebAssembly.Module){var p=WebAssembly.Module.customSections(i,f);p.length===0&&(f="dylink",p=WebAssembly.Module.customSections(i,f)),m(p.length===0,"need dylink section"),l=(i=new Uint8Array(p[0])).length}else{m(new Uint32Array(new Uint8Array(i.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),m(i[8]!==0,"need the dylink section to be first"),a=9;var g=c();l=a+g,f=d()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(f=="dylink"){h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();for(var x=c(),y=0;y<x;++y){var R=d();h.neededDynlibs.push(R)}}else for(m(f!=="dylink.0");a<l;){var N=i[a++],k=c();if(N===1)h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();else if(N===2)for(x=c(),y=0;y<x;++y)R=d(),h.neededDynlibs.push(R);else if(N===3)for(var L=c();L--;){var U=d();256&c()&&h.tlsExports.add(U)}else if(N===4)for(L=c();L--;)d(),U=d(),(3&c())==1&&h.weakImports.add(U);else a+=k}return h}r(getDylinkMetadata,"getDylinkMetadata");function getValue(i,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":case"i8":return HEAP8[i>>0];case"i16":return HEAP16[i>>1];case"i32":case"i64":return HEAP32[i>>2];case"float":return HEAPF32[i>>2];case"double":return HEAPF64[i>>3];case"*":return HEAPU32[i>>2];default:abort("invalid type for getValue: "+a)}return null}r(getValue,"getValue");function asmjsMangle(i){return i.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(i)?i:"_"+i}r(asmjsMangle,"asmjsMangle");function mergeLibSymbols(i,a){for(var l in i)if(i.hasOwnProperty(l)){asmLibraryArg.hasOwnProperty(l)||(asmLibraryArg[l]=i[l]);var c=asmjsMangle(l);Module.hasOwnProperty(c)||(Module[c]=i[l]),l=="__main_argc_argv"&&(Module._main=i[l])}}r(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(i,a,l){var c=Module["dynCall_"+i];return l&&l.length?c.apply(null,[a].concat(l)):c.call(null,a)}r(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(i){var a=wasmTableMirror[i];return a||(i>=wasmTableMirror.length&&(wasmTableMirror.length=i+1),wasmTableMirror[i]=a=wasmTable.get(i)),a}r(getWasmTableEntry,"getWasmTableEntry");function dynCall(i,a,l){return i.includes("j")?dynCallLegacy(i,a,l):getWasmTableEntry(a).apply(null,l)}r(dynCall,"dynCall");function createInvokeFunction(i){return function(){var a=stackSave();try{return dynCall(i,arguments[0],Array.prototype.slice.call(arguments,1))}catch(l){if(stackRestore(a),l!==l+0)throw l;_setThrew(1,0)}}}r(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(i,a){return HEAPU8.fill(0,i,i+a),i}r(zeroMemory,"zeroMemory");function getMemory(i){if(runtimeInitialized)return zeroMemory(_malloc(i),i);var a=___heap_base,l=a+i+15&-16;return ___heap_base=l,GOT.__heap_base.value=l,a}r(getMemory,"getMemory");function isInternalSym(i){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(i)}r(isInternalSym,"isInternalSym");function uleb128Encode(i,a){i<128?a.push(i):a.push(i%128|128,i>>7)}r(uleb128Encode,"uleb128Encode");function sigToWasmTypes(i){for(var a={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},l={parameters:[],results:i[0]=="v"?[]:[a[i[0]]]},c=1;c<i.length;++c)l.parameters.push(a[i[c]]),i[c]==="j"&&l.parameters.push("i32");return l}r(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(i,a){var l=i.slice(0,1),c=i.slice(1),d={i:127,p:127,j:126,f:125,d:124};a.push(96),uleb128Encode(c.length,a);for(var m=0;m<c.length;++m)a.push(d[c[m]]);l=="v"?a.push(0):a.push(1,d[l])}r(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(i,a){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(a),i);var l=[1];generateFuncType(a,l);var c=[0,97,115,109,1,0,0,0,1];uleb128Encode(l.length,c),c.push.apply(c,l),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var d=new WebAssembly.Module(new Uint8Array(c));return new WebAssembly.Instance(d,{e:{f:i}}).exports.f}r(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(i,a){if(functionsInTableMap)for(var l=i;l<i+a;l++){var c=getWasmTableEntry(l);c&&functionsInTableMap.set(c,l)}}r(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(i){throw i instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":i}return wasmTable.length-1}r(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(i,a){wasmTable.set(i,a),wasmTableMirror[i]=wasmTable.get(i)}r(setWasmTableEntry,"setWasmTableEntry");function addFunction(i,a){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(i))return functionsInTableMap.get(i);var l=getEmptyTableSlot();try{setWasmTableEntry(l,i)}catch(c){if(!(c instanceof TypeError))throw c;setWasmTableEntry(l,convertJsFunctionToWasm(i,a))}return functionsInTableMap.set(i,l),l}r(addFunction,"addFunction");function updateGOT(i,a){for(var l in i)if(!isInternalSym(l)){var c=i[l];l.startsWith("orig$")&&(l=l.split("$")[1],a=!0),GOT[l]||(GOT[l]=new WebAssembly.Global({value:"i32",mutable:!0})),(a||GOT[l].value==0)&&(typeof c=="function"?GOT[l].value=addFunction(c):typeof c=="number"?GOT[l].value=c:err("unhandled export type for `"+l+"`: "+typeof c))}}r(updateGOT,"updateGOT");function relocateExports(i,a,l){var c={};for(var d in i){var m=i[d];typeof m=="object"&&(m=m.value),typeof m=="number"&&(m+=a),c[d]=m}return updateGOT(c,l),c}r(relocateExports,"relocateExports");function resolveGlobalSymbol(i,a){var l;return a&&(l=asmLibraryArg["orig$"+i]),l||(l=asmLibraryArg[i])&&l.stub&&(l=void 0),l||(l=Module[asmjsMangle(i)]),!l&&i.startsWith("invoke_")&&(l=createInvokeFunction(i.split("_")[1])),l}r(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(i,a){return Math.ceil(i/a)*a}r(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(i){var a=resolveGlobalSymbol(i,!1);return a||(a=moduleExports[i]),a}r(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:r(function(i,a){switch(a){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(a in asmLibraryArg)return asmLibraryArg[a];var l;return a in i||(i[a]=function(){return l||(l=resolveSymbol(a)),l.apply(null,arguments)}),i[a]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(r(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(r(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(i){return postInstantiation(i.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return r(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(i,a){return i.then(function(){return loadDynamicLibrary(a,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(i){loadDynamicLibrary(i,flags)}),loadModule())}r(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(i,a,l){a=a||{global:!0,nodelete:!0};var c=LDSO.loadedLibsByName[i];if(c)return a.global&&!c.global&&(c.global=!0,c.module!=="loading"&&mergeLibSymbols(c.module,i)),a.nodelete&&c.refcount!==1/0&&(c.refcount=1/0),c.refcount++,l&&(LDSO.loadedLibsByHandle[l]=c),!a.loadAsync||Promise.resolve(!0);function d(p){if(a.fs&&a.fs.findObject(p)){var g=a.fs.readFile(p,{encoding:"binary"});return g instanceof Uint8Array||(g=new Uint8Array(g)),a.loadAsync?Promise.resolve(g):g}if(p=locateFile(p),a.loadAsync)return new Promise(function(h,x){readAsync(p,y=>h(new Uint8Array(y)),x)});if(!readBinary)throw new Error(p+": file not found, and synchronous loading of external files is not available");return readBinary(p)}r(d,"n");function m(){if(typeof preloadedWasm<"u"&&preloadedWasm[i]){var p=preloadedWasm[i];return a.loadAsync?Promise.resolve(p):p}return a.loadAsync?d(i).then(function(g){return loadWebAssemblyModule(g,a,l)}):loadWebAssemblyModule(d(i),a,l)}r(m,"s");function f(p){c.global&&mergeLibSymbols(p,i),c.module=p}return r(f,"a"),c={refcount:a.nodelete?1/0:1,name:i,module:"loading",global:a.global},LDSO.loadedLibsByName[i]=c,l&&(LDSO.loadedLibsByHandle[l]=c),a.loadAsync?m().then(function(p){return f(p),!0}):(f(m()),!0)}r(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var i in GOT)if(GOT[i].value==0){var a=resolveGlobalSymbol(i,!0);if(!a&&!GOT[i].required)continue;if(typeof a=="function")GOT[i].value=addFunction(a,a.sig);else{if(typeof a!="number")throw new Error("bad export type for `"+i+"`: "+typeof a);GOT[i].value=a}}}r(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(i,a){return i.then(function(){return loadDynamicLibrary(a,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}r(preloadDylibs,"preloadDylibs");function setValue(i,a,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":HEAP8[i>>0]=a;break;case"i16":HEAP16[i>>1]=a;break;case"i32":HEAP32[i>>2]=a;break;case"i64":tempI64=[a>>>0,(tempDouble=a,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1];break;case"float":HEAPF32[i>>2]=a;break;case"double":HEAPF64[i>>3]=a;break;case"*":HEAPU32[i>>2]=a;break;default:abort("invalid type for setValue: "+l)}}r(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}r(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}r(_abort,"_abort");function _emscripten_date_now(){return Date.now()}r(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(i,a,l){HEAPU8.copyWithin(i,a,a+l)}r(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}r(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(i){try{return wasmMemory.grow(i-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}r(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(i){var a=HEAPU8.length;i>>>=0;var l=getHeapMax();if(i>l)return!1;for(var c=1;c<=4;c*=2){var d=a*(1+.2/c);if(d=Math.min(d,i+100663296),emscripten_realloc_buffer(Math.min(l,(m=Math.max(i,d))+((f=65536)-m%f)%f)))return!0}var m,f;return!1}r(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var i=process.hrtime();return 1e3*i[0]+i[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:r(function(i,a,l){if(PATH.isAbs(a))return a;var c;if(i===-100?c=FS.cwd():c=SYSCALLS.getStreamFromFD(i).path,a.length==0){if(!l)throw new FS.ErrnoError(44);return c}return PATH.join2(c,a)},"calculateAt"),doStat:r(function(i,a,l){try{var c=i(a)}catch(p){if(p&&p.node&&PATH.normalize(a)!==PATH.normalize(FS.getPath(p.node)))return-54;throw p}HEAP32[l>>2]=c.dev,HEAP32[l+8>>2]=c.ino,HEAP32[l+12>>2]=c.mode,HEAPU32[l+16>>2]=c.nlink,HEAP32[l+20>>2]=c.uid,HEAP32[l+24>>2]=c.gid,HEAP32[l+28>>2]=c.rdev,tempI64=[c.size>>>0,(tempDouble=c.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+40>>2]=tempI64[0],HEAP32[l+44>>2]=tempI64[1],HEAP32[l+48>>2]=4096,HEAP32[l+52>>2]=c.blocks;var d=c.atime.getTime(),m=c.mtime.getTime(),f=c.ctime.getTime();return tempI64=[Math.floor(d/1e3)>>>0,(tempDouble=Math.floor(d/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+56>>2]=tempI64[0],HEAP32[l+60>>2]=tempI64[1],HEAPU32[l+64>>2]=d%1e3*1e3,tempI64=[Math.floor(m/1e3)>>>0,(tempDouble=Math.floor(m/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+72>>2]=tempI64[0],HEAP32[l+76>>2]=tempI64[1],HEAPU32[l+80>>2]=m%1e3*1e3,tempI64=[Math.floor(f/1e3)>>>0,(tempDouble=Math.floor(f/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+88>>2]=tempI64[0],HEAP32[l+92>>2]=tempI64[1],HEAPU32[l+96>>2]=f%1e3*1e3,tempI64=[c.ino>>>0,(tempDouble=c.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[l+104>>2]=tempI64[0],HEAP32[l+108>>2]=tempI64[1],0},"doStat"),doMsync:r(function(i,a,l,c,d){if(!FS.isFile(a.node.mode))throw new FS.ErrnoError(43);if(2&c)return 0;var m=HEAPU8.slice(i,i+l);FS.msync(a,m,d,l,c)},"doMsync"),varargs:void 0,get:r(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:r(function(i){return UTF8ToString(i)},"getStr"),getStreamFromFD:r(function(i){var a=FS.getStream(i);if(!a)throw new FS.ErrnoError(8);return a},"getStreamFromFD")};function _proc_exit(i){EXITSTATUS=i,keepRuntimeAlive()||(Module.onExit&&Module.onExit(i),ABORT=!0),quit_(i,new ExitStatus(i))}r(_proc_exit,"_proc_exit");function exitJS(i,a){EXITSTATUS=i,_proc_exit(i)}r(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(i){try{var a=SYSCALLS.getStreamFromFD(i);return FS.close(a),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}r(_fd_close,"_fd_close");function convertI32PairToI53Checked(i,a){return a+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*a:NaN}r(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(i,a,l,c,d){try{var m=convertI32PairToI53Checked(a,l);if(isNaN(m))return 61;var f=SYSCALLS.getStreamFromFD(i);return FS.llseek(f,m,c),tempI64=[f.position>>>0,(tempDouble=f.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[d>>2]=tempI64[0],HEAP32[d+4>>2]=tempI64[1],f.getdents&&m===0&&c===0&&(f.getdents=null),0}catch(p){if(typeof FS>"u"||!(p instanceof FS.ErrnoError))throw p;return p.errno}}r(_fd_seek,"_fd_seek");function doWritev(i,a,l,c){for(var d=0,m=0;m<l;m++){var f=HEAPU32[a>>2],p=HEAPU32[a+4>>2];a+=8;var g=FS.write(i,HEAP8,f,p,c);if(g<0)return-1;d+=g,c!==void 0&&(c+=g)}return d}r(doWritev,"doWritev");function _fd_write(i,a,l,c){try{var d=doWritev(SYSCALLS.getStreamFromFD(i),a,l);return HEAPU32[c>>2]=d,0}catch(m){if(typeof FS>"u"||!(m instanceof FS.ErrnoError))throw m;return m.errno}}r(_fd_write,"_fd_write");function _tree_sitter_log_callback(i,a){if(currentLogCallback){let l=UTF8ToString(a);currentLogCallback(l,i!==0)}}r(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(i,a,l,c,d){var m=currentParseCallback(a,{row:l,column:c});typeof m=="string"?(setValue(d,m.length,"i32"),stringToUTF16(m,i,10240)):setValue(d,0,"i32")}r(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(i){if(i instanceof ExitStatus||i=="unwind")return EXITSTATUS;quit_(1,i)}r(handleException,"handleException");function allocateUTF8OnStack(i){var a=lengthBytesUTF8(i)+1,l=stackAlloc(a);return stringToUTF8Array(i,HEAP8,l,a),l}r(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(i,a,l){if(l===void 0&&(l=2147483647),l<2)return 0;for(var c=a,d=(l-=2)<2*i.length?l/2:i.length,m=0;m<d;++m){var f=i.charCodeAt(m);HEAP16[a>>1]=f,a+=2}return HEAP16[a>>1]=0,a-c}r(stringToUTF16,"stringToUTF16");function AsciiToString(i){for(var a="";;){var l=HEAPU8[i++>>0];if(!l)return a;a+=String.fromCharCode(l)}}r(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(i){var a=Module._main;if(a){(i=i||[]).unshift(thisProgram);var l=i.length,c=stackAlloc(4*(l+1)),d=c>>2;i.forEach(f=>{HEAP32[d++]=allocateUTF8OnStack(f)}),HEAP32[d]=0;try{var m=a(l,c);return exitJS(m,!0),m}catch(f){return handleException(f)}}}r(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=r(function i(){calledRun||run(),calledRun||(dependenciesFulfilled=i)},"e");var dylibsLoaded=!1;function run(i){function a(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(i),postRun()))}r(a,"t"),i=i||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),a()},1)):a()))}if(r(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;let e=class e{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(a){let l;if(a){if(a.constructor!==Language)throw new Error("Argument must be a Language");{l=a[0];let c=C._ts_language_version(l);if(c<MIN_COMPATIBLE_VERSION||VERSION<c)throw new Error(`Incompatible language version ${c}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else l=0,a=null;return this.language=a,C._ts_parser_set_language(this[0],l),this}getLanguage(){return this.language}parse(a,l,c){if(typeof a=="string")currentParseCallback=r((g,h,x)=>a.slice(g,x),"currentParseCallback");else{if(typeof a!="function")throw new Error("Argument must be a string or a function");currentParseCallback=a}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let d=0,m=0;if(c&&c.includedRanges){d=c.includedRanges.length,m=C._calloc(d,SIZE_OF_RANGE);let g=m;for(let h=0;h<d;h++)marshalRange(g,c.includedRanges[h]),g+=SIZE_OF_RANGE}let f=C._ts_parser_parse_wasm(this[0],this[1],l?l[0]:0,m,d);if(!f)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let p=new Tree(INTERNAL,f,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,p}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(a){C._ts_parser_set_timeout_micros(this[0],a)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(a){if(a){if(typeof a!="function")throw new Error("Logger callback must be a function")}else a=null;return this.logCallback=a,this}getLogger(){return this.logCallback}};r(e,"ParserImpl");let ParserImpl=e,t=class t{constructor(a,l,c,d){assertInternal(a),this[0]=l,this.language=c,this.textCallback=d}copy(){let a=C._ts_tree_copy(this[0]);return new t(INTERNAL,a,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(a){marshalEdit(a),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(a){if(a.constructor!==t)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],a[0]);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(l);if(l>0){let m=c;for(let f=0;f<l;f++)d[f]=unmarshalRange(m),m+=SIZE_OF_RANGE;C._free(c)}return d}};r(t,"Tree");let Tree=t,n=class n{constructor(a,l){assertInternal(a),this.tree=l}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(a){return this.id===a.id}child(a){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],a),unmarshalNode(this.tree)}namedChild(a){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],a),unmarshalNode(this.tree)}childForFieldId(a){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],a),unmarshalNode(this.tree)}childForFieldName(a){let l=this.tree.language.fields.indexOf(a);if(l!==-1)return this.childForFieldId(l)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(a),a>0){let c=l;for(let d=0;d<a;d++)this._children[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(l)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(a),a>0){let c=l;for(let d=0;d<a;d++)this._namedChildren[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(l)}}return this._namedChildren}descendantsOfType(a,l,c){Array.isArray(a)||(a=[a]),l||(l=ZERO_POINT),c||(c=ZERO_POINT);let d=[],m=this.tree.language.types;for(let x=0,y=m.length;x<y;x++)a.includes(m[x])&&d.push(x);let f=C._malloc(SIZE_OF_INT*d.length);for(let x=0,y=d.length;x<y;x++)setValue(f+x*SIZE_OF_INT,d[x],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],f,d.length,l.row,l.column,c.row,c.column);let p=getValue(TRANSFER_BUFFER,"i32"),g=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),h=new Array(p);if(p>0){let x=g;for(let y=0;y<p;y++)h[y]=unmarshalNode(this.tree,x),x+=SIZE_OF_NODE}return C._free(g),C._free(f),h}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(a,l=a){if(typeof a!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,a,"i32"),setValue(c+SIZE_OF_INT,l,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(a,l=a){if(typeof a!="number"||typeof l!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,a,"i32"),setValue(c+SIZE_OF_INT,l,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(a,l=a){if(!isPoint(a)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,a),marshalPoint(c+SIZE_OF_POINT,l),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(a,l=a){if(!isPoint(a)||!isPoint(l))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,a),marshalPoint(c+SIZE_OF_POINT,l),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let a=C._ts_node_to_string_wasm(this.tree[0]),l=AsciiToString(a);return C._free(a),l}};r(n,"Node");let Node=n,o=class o{constructor(a,l){assertInternal(a),this.tree=l,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(a){marshalNode(a),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let a=C._ts_tree_cursor_start_index_wasm(this.tree[0]),l=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,a,l)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let a=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),a===1}gotoNextSibling(){marshalTreeCursor(this);let a=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),a===1}gotoParent(){marshalTreeCursor(this);let a=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),a===1}};r(o,"TreeCursor");let TreeCursor=o,s=class s{constructor(a,l){assertInternal(a),this[0]=l,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let c=0,d=this.types.length;c<d;c++)C._ts_language_symbol_type(this[0],c)<2&&(this.types[c]=UTF8ToString(C._ts_language_symbol_name(this[0],c)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let c=0,d=this.fields.length;c<d;c++){let m=C._ts_language_field_name_for_id(this[0],c);this.fields[c]=m!==0?UTF8ToString(m):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(a){let l=this.fields.indexOf(a);return l!==-1?l:null}fieldNameForId(a){return this.fields[a]||null}idForNodeType(a,l){let c=lengthBytesUTF8(a),d=C._malloc(c+1);stringToUTF8(a,d,c+1);let m=C._ts_language_symbol_for_name(this[0],d,c,l);return C._free(d),m||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(a){let l=C._ts_language_symbol_name(this[0],a);return l?UTF8ToString(l):null}nodeTypeIsNamed(a){return!!C._ts_language_type_is_named_wasm(this[0],a)}nodeTypeIsVisible(a){return!!C._ts_language_type_is_visible_wasm(this[0],a)}query(a){let l=lengthBytesUTF8(a),c=C._malloc(l+1);stringToUTF8(a,c,l+1);let d=C._ts_query_new(this[0],c,l,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!d){let L=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),U=UTF8ToString(c,getValue(TRANSFER_BUFFER,"i32")).length,j=a.substr(U,100).split(`
`)[0],E,O=j.match(QUERY_WORD_REGEX)[0];switch(L){case 2:E=new RangeError(`Bad node name '${O}'`);break;case 3:E=new RangeError(`Bad field name '${O}'`);break;case 4:E=new RangeError(`Bad capture name @${O}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${U}: '${j}'...`),O="";break;default:E=new SyntaxError(`Bad syntax at offset ${U}: '${j}'...`),O=""}throw E.index=U,E.length=O.length,C._free(c),E}let m=C._ts_query_string_count(d),f=C._ts_query_capture_count(d),p=C._ts_query_pattern_count(d),g=new Array(f),h=new Array(m);for(let L=0;L<f;L++){let U=C._ts_query_capture_name_for_id(d,L,TRANSFER_BUFFER),j=getValue(TRANSFER_BUFFER,"i32");g[L]=UTF8ToString(U,j)}for(let L=0;L<m;L++){let U=C._ts_query_string_value_for_id(d,L,TRANSFER_BUFFER),j=getValue(TRANSFER_BUFFER,"i32");h[L]=UTF8ToString(U,j)}let x=new Array(p),y=new Array(p),R=new Array(p),N=new Array(p),k=new Array(p);for(let L=0;L<p;L++){let U=C._ts_query_predicates_for_pattern(d,L,TRANSFER_BUFFER),j=getValue(TRANSFER_BUFFER,"i32");N[L]=[],k[L]=[];let E=[],O=U;for(let ot=0;ot<j;ot++){let mt=getValue(O,"i32");O+=SIZE_OF_INT;let xt=getValue(O,"i32");if(O+=SIZE_OF_INT,mt===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:g[xt]});else if(mt===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:h[xt]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let T=E[0].value,w=!0;switch(T){case"not-eq?":w=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let A=E[1].name,F=E[2].name;k[L].push(function(Fe){let he,se;for(let wt of Fe)wt.name===A&&(he=wt.node),wt.name===F&&(se=wt.node);return he===void 0||se===void 0||he.text===se.text===w})}else{let A=E[1].name,F=E[2].value;k[L].push(function(Fe){for(let he of Fe)if(he.name===A)return he.node.text===F===w;return!0})}break;case"not-match?":w=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let v=E[1].name,M=new RegExp(E[2].value);k[L].push(function(A){for(let F of A)if(F.name===v)return M.test(F.node.text)===w;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(A=>A.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');x[L]||(x[L]={}),x[L][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${T}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(A=>A.type!=="string"))throw new Error(`Arguments to \`#${T}\` predicate must be a strings.".`);let K=T==="is?"?y:R;K[L]||(K[L]={}),K[L][E[1].value]=E[2]?E[2].value:null;break;default:N[L].push({operator:T,operands:E.slice(1)})}E.length=0}}Object.freeze(x[L]),Object.freeze(y[L]),Object.freeze(R[L])}return C._free(c),new Query(INTERNAL,d,g,k,N,Object.freeze(x),Object.freeze(y),Object.freeze(R))}static load(a){let l;if(a instanceof Uint8Array)l=Promise.resolve(a);else{let d=a;if(typeof process<"u"&&process.versions&&process.versions.node){let m=require("fs");l=Promise.resolve(m.readFileSync(d))}else l=fetch(d).then(m=>m.arrayBuffer().then(f=>{if(m.ok)return new Uint8Array(f);{let p=new TextDecoder("utf-8").decode(f);throw new Error(`Language.load failed with status ${m.status}.

${p}`)}}))}let c=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return l.then(d=>c(d,{loadAsync:!0})).then(d=>{let m=Object.keys(d),f=m.find(g=>LANGUAGE_FUNCTION_REGEX.test(g)&&!g.includes("external_scanner_"));f||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(m,null,2)}`);let p=d[f]();return new s(INTERNAL,p)})}};r(s,"Language");let Language=s,u=class u{constructor(a,l,c,d,m,f,p,g){assertInternal(a),this[0]=l,this.captureNames=c,this.textPredicates=d,this.predicates=m,this.setProperties=f,this.assertedProperties=p,this.refutedProperties=g,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(a,l,c,d){l||(l=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let m=d.matchLimit;if(m===void 0)m=0;else if(typeof m!="number")throw new Error("Arguments must be numbers");marshalNode(a),C._ts_query_matches_wasm(this[0],a.tree[0],l.row,l.column,c.row,c.column,m);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=new Array(f);this.exceededMatchLimit=!!g;let x=0,y=p;for(let R=0;R<f;R++){let N=getValue(y,"i32");y+=SIZE_OF_INT;let k=getValue(y,"i32");y+=SIZE_OF_INT;let L=new Array(k);if(y=unmarshalCaptures(this,a.tree,y,L),this.textPredicates[N].every(U=>U(L))){h[x++]={pattern:N,captures:L};let U=this.setProperties[N];U&&(h[R].setProperties=U);let j=this.assertedProperties[N];j&&(h[R].assertedProperties=j);let E=this.refutedProperties[N];E&&(h[R].refutedProperties=E)}}return h.length=x,C._free(p),h}captures(a,l,c,d){l||(l=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let m=d.matchLimit;if(m===void 0)m=0;else if(typeof m!="number")throw new Error("Arguments must be numbers");marshalNode(a),C._ts_query_captures_wasm(this[0],a.tree[0],l.row,l.column,c.row,c.column,m);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=[];this.exceededMatchLimit=!!g;let x=[],y=p;for(let R=0;R<f;R++){let N=getValue(y,"i32");y+=SIZE_OF_INT;let k=getValue(y,"i32");y+=SIZE_OF_INT;let L=getValue(y,"i32");if(y+=SIZE_OF_INT,x.length=k,y=unmarshalCaptures(this,a.tree,y,x),this.textPredicates[N].every(U=>U(x))){let U=x[L],j=this.setProperties[N];j&&(U.setProperties=j);let E=this.assertedProperties[N];E&&(U.assertedProperties=E);let O=this.refutedProperties[N];O&&(U.refutedProperties=O),h.push(U)}}return C._free(p),h}predicatesForPattern(a){return this.predicates[a]}didExceedMatchLimit(){return this.exceededMatchLimit}};r(u,"Query");let Query=u;function getText(i,a,l){let c=l-a,d=i.textCallback(a,null,l);for(a+=d.length;a<l;){let m=i.textCallback(a,null,l);if(!(m&&m.length>0))break;a+=m.length,d+=m}return a>l&&(d=d.slice(0,c)),d}r(getText,"getText");function unmarshalCaptures(i,a,l,c){for(let d=0,m=c.length;d<m;d++){let f=getValue(l,"i32"),p=unmarshalNode(a,l+=SIZE_OF_INT);l+=SIZE_OF_NODE,c[d]={name:i.captureNames[f],node:p}}return l}r(unmarshalCaptures,"unmarshalCaptures");function assertInternal(i){if(i!==INTERNAL)throw new Error("Illegal constructor")}r(assertInternal,"assertInternal");function isPoint(i){return i&&typeof i.row=="number"&&typeof i.column=="number"}r(isPoint,"isPoint");function marshalNode(i){let a=TRANSFER_BUFFER;setValue(a,i.id,"i32"),a+=SIZE_OF_INT,setValue(a,i.startIndex,"i32"),a+=SIZE_OF_INT,setValue(a,i.startPosition.row,"i32"),a+=SIZE_OF_INT,setValue(a,i.startPosition.column,"i32"),a+=SIZE_OF_INT,setValue(a,i[0],"i32")}r(marshalNode,"marshalNode");function unmarshalNode(i,a=TRANSFER_BUFFER){let l=getValue(a,"i32");if(l===0)return null;let c=getValue(a+=SIZE_OF_INT,"i32"),d=getValue(a+=SIZE_OF_INT,"i32"),m=getValue(a+=SIZE_OF_INT,"i32"),f=getValue(a+=SIZE_OF_INT,"i32"),p=new Node(INTERNAL,i);return p.id=l,p.startIndex=c,p.startPosition={row:d,column:m},p[0]=f,p}r(unmarshalNode,"unmarshalNode");function marshalTreeCursor(i,a=TRANSFER_BUFFER){setValue(a+0*SIZE_OF_INT,i[0],"i32"),setValue(a+1*SIZE_OF_INT,i[1],"i32"),setValue(a+2*SIZE_OF_INT,i[2],"i32")}r(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(i){i[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),i[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),i[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}r(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(i,a){setValue(i,a.row,"i32"),setValue(i+SIZE_OF_INT,a.column,"i32")}r(marshalPoint,"marshalPoint");function unmarshalPoint(i){return{row:getValue(i,"i32"),column:getValue(i+SIZE_OF_INT,"i32")}}r(unmarshalPoint,"unmarshalPoint");function marshalRange(i,a){marshalPoint(i,a.startPosition),marshalPoint(i+=SIZE_OF_POINT,a.endPosition),setValue(i+=SIZE_OF_POINT,a.startIndex,"i32"),setValue(i+=SIZE_OF_INT,a.endIndex,"i32"),i+=SIZE_OF_INT}r(marshalRange,"marshalRange");function unmarshalRange(i){let a={};return a.startPosition=unmarshalPoint(i),i+=SIZE_OF_POINT,a.endPosition=unmarshalPoint(i),i+=SIZE_OF_POINT,a.startIndex=getValue(i,"i32"),i+=SIZE_OF_INT,a.endIndex=getValue(i,"i32"),a}r(unmarshalRange,"unmarshalRange");function marshalEdit(i){let a=TRANSFER_BUFFER;marshalPoint(a,i.startPosition),a+=SIZE_OF_POINT,marshalPoint(a,i.oldEndPosition),a+=SIZE_OF_POINT,marshalPoint(a,i.newEndPosition),a+=SIZE_OF_POINT,setValue(a,i.startIndex,"i32"),a+=SIZE_OF_INT,setValue(a,i.oldEndIndex,"i32"),a+=SIZE_OF_INT,setValue(a,i.newEndIndex,"i32"),a+=SIZE_OF_INT}r(marshalEdit,"marshalEdit");for(let i of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(_Parser.prototype,i,{value:ParserImpl.prototype[i],enumerable:!1,writable:!1});_Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}};r(_Parser,"Parser");let Parser=_Parser;return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var hd=ne(ra=>{var gd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");ra.encode=function(e){if(0<=e&&e<gd.length)return gd[e];throw new TypeError("Must be between 0 and 63: "+e)};ra.decode=function(e){var t=65,n=90,o=97,s=122,u=48,i=57,a=43,l=47,c=26,d=52;return t<=e&&e<=n?e-t:o<=e&&e<=s?e-o+c:u<=e&&e<=i?e-u+d:e==a?62:e==l?63:-1}});var sa=ne(ia=>{var yd=hd(),oa=5,bd=1<<oa,Id=bd-1,xd=bd;function ey(e){return e<0?(-e<<1)+1:(e<<1)+0}r(ey,"toVLQSigned");function ty(e){var t=(e&1)===1,n=e>>1;return t?-n:n}r(ty,"fromVLQSigned");ia.encode=r(function(t){var n="",o,s=ey(t);do o=s&Id,s>>>=oa,s>0&&(o|=xd),n+=yd.encode(o);while(s>0);return n},"base64VLQ_encode");ia.decode=r(function(t,n,o){var s=t.length,u=0,i=0,a,l;do{if(n>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(l=yd.decode(t.charCodeAt(n++)),l===-1)throw new Error("Invalid base64 digit: "+t.charAt(n-1));a=!!(l&xd),l&=Id,u=u+(l<<i),i+=oa}while(a);o.value=ty(u),o.rest=n},"base64VLQ_decode")});var Bn=ne(Pe=>{function ny(e,t,n){if(t in e)return e[t];if(arguments.length===3)return n;throw new Error('"'+t+'" is a required argument.')}r(ny,"getArg");Pe.getArg=ny;var wd=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,ry=/^data:.+\,.+$/;function kr(e){var t=e.match(wd);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}r(kr,"urlParse");Pe.urlParse=kr;function Dn(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}r(Dn,"urlGenerate");Pe.urlGenerate=Dn;function aa(e){var t=e,n=kr(e);if(n){if(!n.path)return e;t=n.path}for(var o=Pe.isAbsolute(t),s=t.split(/\/+/),u,i=0,a=s.length-1;a>=0;a--)u=s[a],u==="."?s.splice(a,1):u===".."?i++:i>0&&(u===""?(s.splice(a+1,i),i=0):(s.splice(a,2),i--));return t=s.join("/"),t===""&&(t=o?"/":"."),n?(n.path=t,Dn(n)):t}r(aa,"normalize");Pe.normalize=aa;function Sd(e,t){e===""&&(e="."),t===""&&(t=".");var n=kr(t),o=kr(e);if(o&&(e=o.path||"/"),n&&!n.scheme)return o&&(n.scheme=o.scheme),Dn(n);if(n||t.match(ry))return t;if(o&&!o.host&&!o.path)return o.host=t,Dn(o);var s=t.charAt(0)==="/"?t:aa(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=s,Dn(o)):s}r(Sd,"join");Pe.join=Sd;Pe.isAbsolute=function(e){return e.charAt(0)==="/"||wd.test(e)};function oy(e,t){e===""&&(e="."),e=e.replace(/\/$/,"");for(var n=0;t.indexOf(e+"/")!==0;){var o=e.lastIndexOf("/");if(o<0||(e=e.slice(0,o),e.match(/^([^\/]+:\/)?\/*$/)))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)}r(oy,"relative");Pe.relative=oy;var Ed=function(){var e=Object.create(null);return!("__proto__"in e)}();function vd(e){return e}r(vd,"identity");function iy(e){return Td(e)?"$"+e:e}r(iy,"toSetString");Pe.toSetString=Ed?vd:iy;function sy(e){return Td(e)?e.slice(1):e}r(sy,"fromSetString");Pe.fromSetString=Ed?vd:sy;function Td(e){if(!e)return!1;var t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(var n=t-10;n>=0;n--)if(e.charCodeAt(n)!==36)return!1;return!0}r(Td,"isProtoString");function ay(e,t,n){var o=jn(e.source,t.source);return o!==0||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0||n)||(o=e.generatedColumn-t.generatedColumn,o!==0)||(o=e.generatedLine-t.generatedLine,o!==0)?o:jn(e.name,t.name)}r(ay,"compareByOriginalPositions");Pe.compareByOriginalPositions=ay;function uy(e,t,n){var o=e.generatedLine-t.generatedLine;return o!==0||(o=e.generatedColumn-t.generatedColumn,o!==0||n)||(o=jn(e.source,t.source),o!==0)||(o=e.originalLine-t.originalLine,o!==0)||(o=e.originalColumn-t.originalColumn,o!==0)?o:jn(e.name,t.name)}r(uy,"compareByGeneratedPositionsDeflated");Pe.compareByGeneratedPositionsDeflated=uy;function jn(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}r(jn,"strcmp");function ly(e,t){var n=e.generatedLine-t.generatedLine;return n!==0||(n=e.generatedColumn-t.generatedColumn,n!==0)||(n=jn(e.source,t.source),n!==0)||(n=e.originalLine-t.originalLine,n!==0)||(n=e.originalColumn-t.originalColumn,n!==0)?n:jn(e.name,t.name)}r(ly,"compareByGeneratedPositionsInflated");Pe.compareByGeneratedPositionsInflated=ly;function cy(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))}r(cy,"parseSourceMapInput");Pe.parseSourceMapInput=cy;function dy(e,t,n){if(t=t||"",e&&(e[e.length-1]!=="/"&&t[0]!=="/"&&(e+="/"),t=e+t),n){var o=kr(n);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var s=o.path.lastIndexOf("/");s>=0&&(o.path=o.path.substring(0,s+1))}t=Sd(Dn(o),t)}return aa(t)}r(dy,"computeSourceURL");Pe.computeSourceURL=dy});var ca=ne(Rd=>{var ua=Bn(),la=Object.prototype.hasOwnProperty,un=typeof Map<"u";function Nt(){this._array=[],this._set=un?new Map:Object.create(null)}r(Nt,"ArraySet");Nt.fromArray=r(function(t,n){for(var o=new Nt,s=0,u=t.length;s<u;s++)o.add(t[s],n);return o},"ArraySet_fromArray");Nt.prototype.size=r(function(){return un?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");Nt.prototype.add=r(function(t,n){var o=un?t:ua.toSetString(t),s=un?this.has(t):la.call(this._set,o),u=this._array.length;(!s||n)&&this._array.push(t),s||(un?this._set.set(t,u):this._set[o]=u)},"ArraySet_add");Nt.prototype.has=r(function(t){if(un)return this._set.has(t);var n=ua.toSetString(t);return la.call(this._set,n)},"ArraySet_has");Nt.prototype.indexOf=r(function(t){if(un){var n=this._set.get(t);if(n>=0)return n}else{var o=ua.toSetString(t);if(la.call(this._set,o))return this._set[o]}throw new Error('"'+t+'" is not in the set.')},"ArraySet_indexOf");Nt.prototype.at=r(function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},"ArraySet_at");Nt.prototype.toArray=r(function(){return this._array.slice()},"ArraySet_toArray");Rd.ArraySet=Nt});var Pd=ne(Nd=>{var Md=Bn();function my(e,t){var n=e.generatedLine,o=t.generatedLine,s=e.generatedColumn,u=t.generatedColumn;return o>n||o==n&&u>=s||Md.compareByGeneratedPositionsInflated(e,t)<=0}r(my,"generatedPositionAfter");function Ao(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}r(Ao,"MappingList");Ao.prototype.unsortedForEach=r(function(t,n){this._array.forEach(t,n)},"MappingList_forEach");Ao.prototype.add=r(function(t){my(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},"MappingList_add");Ao.prototype.toArray=r(function(){return this._sorted||(this._array.sort(Md.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Nd.MappingList=Ao});var da=ne(Ld=>{var Fr=sa(),_e=Bn(),Oo=ca().ArraySet,fy=Pd().MappingList;function et(e){e||(e={}),this._file=_e.getArg(e,"file",null),this._sourceRoot=_e.getArg(e,"sourceRoot",null),this._skipValidation=_e.getArg(e,"skipValidation",!1),this._sources=new Oo,this._names=new Oo,this._mappings=new fy,this._sourcesContents=null}r(et,"SourceMapGenerator");et.prototype._version=3;et.fromSourceMap=r(function(t){var n=t.sourceRoot,o=new et({file:t.file,sourceRoot:n});return t.eachMapping(function(s){var u={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(u.source=s.source,n!=null&&(u.source=_e.relative(n,u.source)),u.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(u.name=s.name)),o.addMapping(u)}),t.sources.forEach(function(s){var u=s;n!==null&&(u=_e.relative(n,s)),o._sources.has(u)||o._sources.add(u);var i=t.sourceContentFor(s);i!=null&&o.setSourceContent(s,i)}),o},"SourceMapGenerator_fromSourceMap");et.prototype.addMapping=r(function(t){var n=_e.getArg(t,"generated"),o=_e.getArg(t,"original",null),s=_e.getArg(t,"source",null),u=_e.getArg(t,"name",null);this._skipValidation||this._validateMapping(n,o,s,u),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),u!=null&&(u=String(u),this._names.has(u)||this._names.add(u)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:s,name:u})},"SourceMapGenerator_addMapping");et.prototype.setSourceContent=r(function(t,n){var o=t;this._sourceRoot!=null&&(o=_e.relative(this._sourceRoot,o)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[_e.toSetString(o)]=n):this._sourcesContents&&(delete this._sourcesContents[_e.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");et.prototype.applySourceMap=r(function(t,n,o){var s=n;if(n==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=t.file}var u=this._sourceRoot;u!=null&&(s=_e.relative(u,s));var i=new Oo,a=new Oo;this._mappings.unsortedForEach(function(l){if(l.source===s&&l.originalLine!=null){var c=t.originalPositionFor({line:l.originalLine,column:l.originalColumn});c.source!=null&&(l.source=c.source,o!=null&&(l.source=_e.join(o,l.source)),u!=null&&(l.source=_e.relative(u,l.source)),l.originalLine=c.line,l.originalColumn=c.column,c.name!=null&&(l.name=c.name))}var d=l.source;d!=null&&!i.has(d)&&i.add(d);var m=l.name;m!=null&&!a.has(m)&&a.add(m)},this),this._sources=i,this._names=a,t.sources.forEach(function(l){var c=t.sourceContentFor(l);c!=null&&(o!=null&&(l=_e.join(o,l)),u!=null&&(l=_e.relative(u,l)),this.setSourceContent(l,c))},this)},"SourceMapGenerator_applySourceMap");et.prototype._validateMapping=r(function(t,n,o,s){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!n&&!o&&!s)){if(t&&"line"in t&&"column"in t&&n&&"line"in n&&"column"in n&&t.line>0&&t.column>=0&&n.line>0&&n.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:o,original:n,name:s}))}},"SourceMapGenerator_validateMapping");et.prototype._serializeMappings=r(function(){for(var t=0,n=1,o=0,s=0,u=0,i=0,a="",l,c,d,m,f=this._mappings.toArray(),p=0,g=f.length;p<g;p++){if(c=f[p],l="",c.generatedLine!==n)for(t=0;c.generatedLine!==n;)l+=";",n++;else if(p>0){if(!_e.compareByGeneratedPositionsInflated(c,f[p-1]))continue;l+=","}l+=Fr.encode(c.generatedColumn-t),t=c.generatedColumn,c.source!=null&&(m=this._sources.indexOf(c.source),l+=Fr.encode(m-i),i=m,l+=Fr.encode(c.originalLine-1-s),s=c.originalLine-1,l+=Fr.encode(c.originalColumn-o),o=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),l+=Fr.encode(d-u),u=d)),a+=l}return a},"SourceMapGenerator_serializeMappings");et.prototype._generateSourcesContent=r(function(t,n){return t.map(function(o){if(!this._sourcesContents)return null;n!=null&&(o=_e.relative(n,o));var s=_e.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)},"SourceMapGenerator_generateSourcesContent");et.prototype.toJSON=r(function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},"SourceMapGenerator_toJSON");et.prototype.toString=r(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");Ld.SourceMapGenerator=et});var kd=ne(ln=>{ln.GREATEST_LOWER_BOUND=1;ln.LEAST_UPPER_BOUND=2;function ma(e,t,n,o,s,u){var i=Math.floor((t-e)/2)+e,a=s(n,o[i],!0);return a===0?i:a>0?t-i>1?ma(i,t,n,o,s,u):u==ln.LEAST_UPPER_BOUND?t<o.length?t:-1:i:i-e>1?ma(e,i,n,o,s,u):u==ln.LEAST_UPPER_BOUND?i:e<0?-1:e}r(ma,"recursiveSearch");ln.search=r(function(t,n,o,s){if(n.length===0)return-1;var u=ma(-1,n.length,t,n,o,s||ln.GREATEST_LOWER_BOUND);if(u<0)return-1;for(;u-1>=0&&o(n[u],n[u-1],!0)===0;)--u;return u},"search")});var Ad=ne(Fd=>{function fa(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}r(fa,"swap");function py(e,t){return Math.round(e+Math.random()*(t-e))}r(py,"randomIntInRange");function pa(e,t,n,o){if(n<o){var s=py(n,o),u=n-1;fa(e,s,o);for(var i=e[o],a=n;a<o;a++)t(e[a],i)<=0&&(u+=1,fa(e,u,a));fa(e,u+1,a);var l=u+1;pa(e,t,n,l-1),pa(e,t,l+1,o)}}r(pa,"doQuickSort");Fd.quickSort=function(e,t){pa(e,t,0,e.length-1)}});var Cd=ne(Co=>{var P=Bn(),_a=kd(),Wn=ca().ArraySet,_y=sa(),Ar=Ad().quickSort;function ie(e,t){var n=e;return typeof e=="string"&&(n=P.parseSourceMapInput(e)),n.sections!=null?new ct(n,t):new ve(n,t)}r(ie,"SourceMapConsumer");ie.fromSourceMap=function(e,t){return ve.fromSourceMap(e,t)};ie.prototype._version=3;ie.prototype.__generatedMappings=null;Object.defineProperty(ie.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:r(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});ie.prototype.__originalMappings=null;Object.defineProperty(ie.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:r(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});ie.prototype._charIsMappingSeparator=r(function(t,n){var o=t.charAt(n);return o===";"||o===","},"SourceMapConsumer_charIsMappingSeparator");ie.prototype._parseMappings=r(function(t,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");ie.GENERATED_ORDER=1;ie.ORIGINAL_ORDER=2;ie.GREATEST_LOWER_BOUND=1;ie.LEAST_UPPER_BOUND=2;ie.prototype.eachMapping=r(function(t,n,o){var s=n||null,u=o||ie.GENERATED_ORDER,i;switch(u){case ie.GENERATED_ORDER:i=this._generatedMappings;break;case ie.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;i.map(function(l){var c=l.source===null?null:this._sources.at(l.source);return c=P.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(t,s)},"SourceMapConsumer_eachMapping");ie.prototype.allGeneratedPositionsFor=r(function(t){var n=P.getArg(t,"line"),o={source:P.getArg(t,"source"),originalLine:n,originalColumn:P.getArg(t,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var s=[],u=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",P.compareByOriginalPositions,_a.LEAST_UPPER_BOUND);if(u>=0){var i=this._originalMappings[u];if(t.column===void 0)for(var a=i.originalLine;i&&i.originalLine===a;)s.push({line:P.getArg(i,"generatedLine",null),column:P.getArg(i,"generatedColumn",null),lastColumn:P.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++u];else for(var l=i.originalColumn;i&&i.originalLine===n&&i.originalColumn==l;)s.push({line:P.getArg(i,"generatedLine",null),column:P.getArg(i,"generatedColumn",null),lastColumn:P.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++u]}return s},"SourceMapConsumer_allGeneratedPositionsFor");Co.SourceMapConsumer=ie;function ve(e,t){var n=e;typeof e=="string"&&(n=P.parseSourceMapInput(e));var o=P.getArg(n,"version"),s=P.getArg(n,"sources"),u=P.getArg(n,"names",[]),i=P.getArg(n,"sourceRoot",null),a=P.getArg(n,"sourcesContent",null),l=P.getArg(n,"mappings"),c=P.getArg(n,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i&&(i=P.normalize(i)),s=s.map(String).map(P.normalize).map(function(d){return i&&P.isAbsolute(i)&&P.isAbsolute(d)?P.relative(i,d):d}),this._names=Wn.fromArray(u.map(String),!0),this._sources=Wn.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(d){return P.computeSourceURL(i,d,t)}),this.sourceRoot=i,this.sourcesContent=a,this._mappings=l,this._sourceMapURL=t,this.file=c}r(ve,"BasicSourceMapConsumer");ve.prototype=Object.create(ie.prototype);ve.prototype.consumer=ie;ve.prototype._findSourceIndex=function(e){var t=e;if(this.sourceRoot!=null&&(t=P.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==e)return n;return-1};ve.fromSourceMap=r(function(t,n){var o=Object.create(ve.prototype),s=o._names=Wn.fromArray(t._names.toArray(),!0),u=o._sources=Wn.fromArray(t._sources.toArray(),!0);o.sourceRoot=t._sourceRoot,o.sourcesContent=t._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=t._file,o._sourceMapURL=n,o._absoluteSources=o._sources.toArray().map(function(p){return P.computeSourceURL(o.sourceRoot,p,n)});for(var i=t._mappings.toArray().slice(),a=o.__generatedMappings=[],l=o.__originalMappings=[],c=0,d=i.length;c<d;c++){var m=i[c],f=new Od;f.generatedLine=m.generatedLine,f.generatedColumn=m.generatedColumn,m.source&&(f.source=u.indexOf(m.source),f.originalLine=m.originalLine,f.originalColumn=m.originalColumn,m.name&&(f.name=s.indexOf(m.name)),l.push(f)),a.push(f)}return Ar(o.__originalMappings,P.compareByOriginalPositions),o},"SourceMapConsumer_fromSourceMap");ve.prototype._version=3;Object.defineProperty(ve.prototype,"sources",{get:r(function(){return this._absoluteSources.slice()},"get")});function Od(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}r(Od,"Mapping");ve.prototype._parseMappings=r(function(t,n){for(var o=1,s=0,u=0,i=0,a=0,l=0,c=t.length,d=0,m={},f={},p=[],g=[],h,x,y,R,N;d<c;)if(t.charAt(d)===";")o++,d++,s=0;else if(t.charAt(d)===",")d++;else{for(h=new Od,h.generatedLine=o,R=d;R<c&&!this._charIsMappingSeparator(t,R);R++);if(x=t.slice(d,R),y=m[x],y)d+=x.length;else{for(y=[];d<R;)_y.decode(t,d,f),N=f.value,d=f.rest,y.push(N);if(y.length===2)throw new Error("Found a source, but no line and column");if(y.length===3)throw new Error("Found a source and line, but no column");m[x]=y}h.generatedColumn=s+y[0],s=h.generatedColumn,y.length>1&&(h.source=a+y[1],a+=y[1],h.originalLine=u+y[2],u=h.originalLine,h.originalLine+=1,h.originalColumn=i+y[3],i=h.originalColumn,y.length>4&&(h.name=l+y[4],l+=y[4])),g.push(h),typeof h.originalLine=="number"&&p.push(h)}Ar(g,P.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,Ar(p,P.compareByOriginalPositions),this.__originalMappings=p},"SourceMapConsumer_parseMappings");ve.prototype._findMapping=r(function(t,n,o,s,u,i){if(t[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[o]);if(t[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[s]);return _a.search(t,n,u,i)},"SourceMapConsumer_findMapping");ve.prototype.computeColumnSpans=r(function(){for(var t=0;t<this._generatedMappings.length;++t){var n=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var o=this._generatedMappings[t+1];if(n.generatedLine===o.generatedLine){n.lastGeneratedColumn=o.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");ve.prototype.originalPositionFor=r(function(t){var n={generatedLine:P.getArg(t,"line"),generatedColumn:P.getArg(t,"column")},o=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",P.compareByGeneratedPositionsDeflated,P.getArg(t,"bias",ie.GREATEST_LOWER_BOUND));if(o>=0){var s=this._generatedMappings[o];if(s.generatedLine===n.generatedLine){var u=P.getArg(s,"source",null);u!==null&&(u=this._sources.at(u),u=P.computeSourceURL(this.sourceRoot,u,this._sourceMapURL));var i=P.getArg(s,"name",null);return i!==null&&(i=this._names.at(i)),{source:u,line:P.getArg(s,"originalLine",null),column:P.getArg(s,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");ve.prototype.hasContentsOfAllSources=r(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");ve.prototype.sourceContentFor=r(function(t,n){if(!this.sourcesContent)return null;var o=this._findSourceIndex(t);if(o>=0)return this.sourcesContent[o];var s=t;this.sourceRoot!=null&&(s=P.relative(this.sourceRoot,s));var u;if(this.sourceRoot!=null&&(u=P.urlParse(this.sourceRoot))){var i=s.replace(/^file:\/\//,"");if(u.scheme=="file"&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!u.path||u.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(n)return null;throw new Error('"'+s+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");ve.prototype.generatedPositionFor=r(function(t){var n=P.getArg(t,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var o={source:n,originalLine:P.getArg(t,"line"),originalColumn:P.getArg(t,"column")},s=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",P.compareByOriginalPositions,P.getArg(t,"bias",ie.GREATEST_LOWER_BOUND));if(s>=0){var u=this._originalMappings[s];if(u.source===o.source)return{line:P.getArg(u,"generatedLine",null),column:P.getArg(u,"generatedColumn",null),lastColumn:P.getArg(u,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");Co.BasicSourceMapConsumer=ve;function ct(e,t){var n=e;typeof e=="string"&&(n=P.parseSourceMapInput(e));var o=P.getArg(n,"version"),s=P.getArg(n,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new Wn,this._names=new Wn;var u={line:-1,column:0};this._sections=s.map(function(i){if(i.url)throw new Error("Support for url field in sections not implemented.");var a=P.getArg(i,"offset"),l=P.getArg(a,"line"),c=P.getArg(a,"column");if(l<u.line||l===u.line&&c<u.column)throw new Error("Section offsets must be ordered and non-overlapping.");return u=a,{generatedOffset:{generatedLine:l+1,generatedColumn:c+1},consumer:new ie(P.getArg(i,"map"),t)}})}r(ct,"IndexedSourceMapConsumer");ct.prototype=Object.create(ie.prototype);ct.prototype.constructor=ie;ct.prototype._version=3;Object.defineProperty(ct.prototype,"sources",{get:r(function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e},"get")});ct.prototype.originalPositionFor=r(function(t){var n={generatedLine:P.getArg(t,"line"),generatedColumn:P.getArg(t,"column")},o=_a.search(n,this._sections,function(u,i){var a=u.generatedLine-i.generatedOffset.generatedLine;return a||u.generatedColumn-i.generatedOffset.generatedColumn}),s=this._sections[o];return s?s.consumer.originalPositionFor({line:n.generatedLine-(s.generatedOffset.generatedLine-1),column:n.generatedColumn-(s.generatedOffset.generatedLine===n.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");ct.prototype.hasContentsOfAllSources=r(function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");ct.prototype.sourceContentFor=r(function(t,n){for(var o=0;o<this._sections.length;o++){var s=this._sections[o],u=s.consumer.sourceContentFor(t,!0);if(u)return u}if(n)return null;throw new Error('"'+t+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");ct.prototype.generatedPositionFor=r(function(t){for(var n=0;n<this._sections.length;n++){var o=this._sections[n];if(o.consumer._findSourceIndex(P.getArg(t,"source"))!==-1){var s=o.consumer.generatedPositionFor(t);if(s){var u={line:s.line+(o.generatedOffset.generatedLine-1),column:s.column+(o.generatedOffset.generatedLine===s.line?o.generatedOffset.generatedColumn-1:0)};return u}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");ct.prototype._parseMappings=r(function(t,n){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var s=this._sections[o],u=s.consumer._generatedMappings,i=0;i<u.length;i++){var a=u[i],l=s.consumer._sources.at(a.source);l=P.computeSourceURL(s.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;a.name&&(c=s.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var d={source:l,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}Ar(this.__generatedMappings,P.compareByGeneratedPositionsDeflated),Ar(this.__originalMappings,P.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");Co.IndexedSourceMapConsumer=ct});var Dd=ne(Ud=>{var gy=da().SourceMapGenerator,Uo=Bn(),hy=/(\r?\n)/,yy=10,$n="$$$isSourceNode$$$";function $e(e,t,n,o,s){this.children=[],this.sourceContents={},this.line=e==null?null:e,this.column=t==null?null:t,this.source=n==null?null:n,this.name=s==null?null:s,this[$n]=!0,o!=null&&this.add(o)}r($e,"SourceNode");$e.fromStringWithSourceMap=r(function(t,n,o){var s=new $e,u=t.split(hy),i=0,a=r(function(){var f=g(),p=g()||"";return f+p;function g(){return i<u.length?u[i++]:void 0}},"shiftNextLine"),l=1,c=0,d=null;return n.eachMapping(function(f){if(d!==null)if(l<f.generatedLine)m(d,a()),l++,c=0;else{var p=u[i]||"",g=p.substr(0,f.generatedColumn-c);u[i]=p.substr(f.generatedColumn-c),c=f.generatedColumn,m(d,g),d=f;return}for(;l<f.generatedLine;)s.add(a()),l++;if(c<f.generatedColumn){var p=u[i]||"";s.add(p.substr(0,f.generatedColumn)),u[i]=p.substr(f.generatedColumn),c=f.generatedColumn}d=f},this),i<u.length&&(d&&m(d,a()),s.add(u.splice(i).join(""))),n.sources.forEach(function(f){var p=n.sourceContentFor(f);p!=null&&(o!=null&&(f=Uo.join(o,f)),s.setSourceContent(f,p))}),s;function m(f,p){if(f===null||f.source===void 0)s.add(p);else{var g=o?Uo.join(o,f.source):f.source;s.add(new $e(f.originalLine,f.originalColumn,g,p,f.name))}}r(m,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");$e.prototype.add=r(function(t){if(Array.isArray(t))t.forEach(function(n){this.add(n)},this);else if(t[$n]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this},"SourceNode_add");$e.prototype.prepend=r(function(t){if(Array.isArray(t))for(var n=t.length-1;n>=0;n--)this.prepend(t[n]);else if(t[$n]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this},"SourceNode_prepend");$e.prototype.walk=r(function(t){for(var n,o=0,s=this.children.length;o<s;o++)n=this.children[o],n[$n]?n.walk(t):n!==""&&t(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");$e.prototype.join=r(function(t){var n,o,s=this.children.length;if(s>0){for(n=[],o=0;o<s-1;o++)n.push(this.children[o]),n.push(t);n.push(this.children[o]),this.children=n}return this},"SourceNode_join");$e.prototype.replaceRight=r(function(t,n){var o=this.children[this.children.length-1];return o[$n]?o.replaceRight(t,n):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,n):this.children.push("".replace(t,n)),this},"SourceNode_replaceRight");$e.prototype.setSourceContent=r(function(t,n){this.sourceContents[Uo.toSetString(t)]=n},"SourceNode_setSourceContent");$e.prototype.walkSourceContents=r(function(t){for(var n=0,o=this.children.length;n<o;n++)this.children[n][$n]&&this.children[n].walkSourceContents(t);for(var s=Object.keys(this.sourceContents),n=0,o=s.length;n<o;n++)t(Uo.fromSetString(s[n]),this.sourceContents[s[n]])},"SourceNode_walkSourceContents");$e.prototype.toString=r(function(){var t="";return this.walk(function(n){t+=n}),t},"SourceNode_toString");$e.prototype.toStringWithSourceMap=r(function(t){var n={code:"",line:1,column:0},o=new gy(t),s=!1,u=null,i=null,a=null,l=null;return this.walk(function(c,d){n.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((u!==d.source||i!==d.line||a!==d.column||l!==d.name)&&o.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name}),u=d.source,i=d.line,a=d.column,l=d.name,s=!0):s&&(o.addMapping({generated:{line:n.line,column:n.column}}),u=null,s=!1);for(var m=0,f=c.length;m<f;m++)c.charCodeAt(m)===yy?(n.line++,n.column=0,m+1===f?(u=null,s=!1):s&&o.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name})):n.column++}),this.walkSourceContents(function(c,d){o.setSourceContent(c,d)}),{code:n.code,map:o}},"SourceNode_toStringWithSourceMap");Ud.SourceNode=$e});var jd=ne(Do=>{Do.SourceMapGenerator=da().SourceMapGenerator;Do.SourceMapConsumer=Cd().SourceMapConsumer;Do.SourceNode=Dd().SourceNode});var Wd=ne((MA,Bd)=>{var by=Object.prototype.toString,ga=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Iy(e){return by.call(e).slice(8,-1)==="ArrayBuffer"}r(Iy,"isArrayBuffer");function xy(e,t,n){t>>>=0;var o=e.byteLength-t;if(o<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=o;else if(n>>>=0,n>o)throw new RangeError("'length' is out of bounds");return ga?Buffer.from(e.slice(t,t+n)):new Buffer(new Uint8Array(e.slice(t,t+n)))}r(xy,"fromArrayBuffer");function wy(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return ga?Buffer.from(e,t):new Buffer(e,t)}r(wy,"fromString");function Sy(e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return Iy(e)?xy(e,t,n):typeof e=="string"?wy(e,t):ga?Buffer.from(e):new Buffer(e)}r(Sy,"bufferFrom");Bd.exports=Sy});var Zd=ne((dn,Ia)=>{var Ey=jd().SourceMapConsumer,ha=require("path"),bt;try{bt=require("fs"),(!bt.existsSync||!bt.readFileSync)&&(bt=null)}catch{}var vy=Wd();function $d(e,t){return e.require(t)}r($d,"dynamicRequire");var Vd=!1,Gd=!1,ya=!1,Or="auto",cn={},Cr={},Ty=/^data:application\/json[^,]+base64,/,Gt=[],zt=[];function xa(){return Or==="browser"?!0:Or==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}r(xa,"isInBrowser");function Ry(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}r(Ry,"hasGlobalProcessEventEmitter");function My(){return typeof process=="object"&&process!==null?process.version:""}r(My,"globalProcessVersion");function Ny(){if(typeof process=="object"&&process!==null)return process.stderr}r(Ny,"globalProcessStderr");function Py(e){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(e)}r(Py,"globalProcessExit");function jo(e){return function(t){for(var n=0;n<e.length;n++){var o=e[n](t);if(o)return o}return null}}r(jo,"handlerExec");var wa=jo(Gt);Gt.push(function(e){if(e=e.trim(),/^file:/.test(e)&&(e=e.replace(/file:\/\/\/(\w:)?/,function(o,s){return s?"":"/"})),e in cn)return cn[e];var t="";try{if(bt)bt.existsSync(e)&&(t=bt.readFileSync(e,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",e,!1),n.send(null),n.readyState===4&&n.status===200&&(t=n.responseText)}}catch{}return cn[e]=t});function ba(e,t){if(!e)return t;var n=ha.dirname(e),o=/^\w+:\/\/[^\/]*/.exec(n),s=o?o[0]:"",u=n.slice(s.length);return s&&/^\/\w\:/.test(u)?(s+="/",s+ha.resolve(n.slice(s.length),t).replace(/\\/g,"/")):s+ha.resolve(n.slice(s.length),t)}r(ba,"supportRelativeURL");function Ly(e){var t;if(xa())try{var n=new XMLHttpRequest;n.open("GET",e,!1),n.send(null),t=n.readyState===4?n.responseText:null;var o=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(o)return o}catch{}t=wa(e);for(var s=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,u,i;i=s.exec(t);)u=i;return u?u[1]:null}r(Ly,"retrieveSourceMapURL");var Sa=jo(zt);zt.push(function(e){var t=Ly(e);if(!t)return null;var n;if(Ty.test(t)){var o=t.slice(t.indexOf(",")+1);n=vy(o,"base64").toString(),t=e}else t=ba(e,t),n=wa(t);return n?{url:t,map:n}:null});function Ea(e){var t=Cr[e.source];if(!t){var n=Sa(e.source);n?(t=Cr[e.source]={url:n.url,map:new Ey(n.map)},t.map.sourcesContent&&t.map.sources.forEach(function(s,u){var i=t.map.sourcesContent[u];if(i){var a=ba(t.url,s);cn[a]=i}})):t=Cr[e.source]={url:null,map:null}}if(t&&t.map&&typeof t.map.originalPositionFor=="function"){var o=t.map.originalPositionFor(e);if(o.source!==null)return o.source=ba(t.url,o.source),o}return e}r(Ea,"mapSourcePosition");function qd(e){var t=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(e);if(t){var n=Ea({source:t[2],line:+t[3],column:t[4]-1});return"eval at "+t[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return t=/^eval at ([^(]+) \((.+)\)$/.exec(e),t?"eval at "+t[1]+" ("+qd(t[2])+")":e}r(qd,"mapEvalOrigin");function ky(){var e,t="";if(this.isNative())t="native";else{e=this.getScriptNameOrSourceURL(),!e&&this.isEval()&&(t=this.getEvalOrigin(),t+=", "),e?t+=e:t+="<anonymous>";var n=this.getLineNumber();if(n!=null){t+=":"+n;var o=this.getColumnNumber();o&&(t+=":"+o)}}var s="",u=this.getFunctionName(),i=!0,a=this.isConstructor(),l=!(this.isToplevel()||a);if(l){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();u?(c&&u.indexOf(c)!=0&&(s+=c+"."),s+=u,d&&u.indexOf("."+d)!=u.length-d.length-1&&(s+=" [as "+d+"]")):s+=c+"."+(d||"<anonymous>")}else a?s+="new "+(u||"<anonymous>"):u?s+=u:(s+=t,i=!1);return i&&(s+=" ("+t+")"),s}r(ky,"CallSiteToString");function zd(e){var t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(function(n){t[n]=/^(?:is|get)/.test(n)?function(){return e[n].call(e)}:e[n]}),t.toString=ky,t}r(zd,"cloneCallSite");function Kd(e,t){if(t===void 0&&(t={nextPosition:null,curPosition:null}),e.isNative())return t.curPosition=null,e;var n=e.getFileName()||e.getScriptNameOrSourceURL();if(n){var o=e.getLineNumber(),s=e.getColumnNumber()-1,u=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,i=u.test(My())?0:62;o===1&&s>i&&!xa()&&!e.isEval()&&(s-=i);var a=Ea({source:n,line:o,column:s});t.curPosition=a,e=zd(e);var l=e.getFunctionName;return e.getFunctionName=function(){return t.nextPosition==null?l():t.nextPosition.name||l()},e.getFileName=function(){return a.source},e.getLineNumber=function(){return a.line},e.getColumnNumber=function(){return a.column+1},e.getScriptNameOrSourceURL=function(){return a.source},e}var c=e.isEval()&&e.getEvalOrigin();return c&&(c=qd(c),e=zd(e),e.getEvalOrigin=function(){return c}),e}r(Kd,"wrapCallSite");function Fy(e,t){ya&&(cn={},Cr={});for(var n=e.name||"Error",o=e.message||"",s=n+": "+o,u={nextPosition:null,curPosition:null},i=[],a=t.length-1;a>=0;a--)i.push(`
    at `+Kd(t[a],u)),u.nextPosition=u.curPosition;return u.curPosition=u.nextPosition=null,s+i.reverse().join("")}r(Fy,"prepareStackTrace");function Hd(e){var t=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(t){var n=t[1],o=+t[2],s=+t[3],u=cn[n];if(!u&&bt&&bt.existsSync(n))try{u=bt.readFileSync(n,"utf8")}catch{u=""}if(u){var i=u.split(/(?:\r\n|\r|\n)/)[o-1];if(i)return n+":"+o+`
`+i+`
`+new Array(s).join(" ")+"^"}}return null}r(Hd,"getErrorSource");function Ay(e){var t=Hd(e),n=Ny();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),t&&(console.error(),console.error(t)),console.error(e.stack),Py(1)}r(Ay,"printErrorAndExit");function Oy(){var e=process.emit;process.emit=function(t){if(t==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,o=this.listeners(t).length>0;if(n&&!o)return Ay(arguments[1])}return e.apply(this,arguments)}}r(Oy,"shimEmitUncaughtException");var Cy=Gt.slice(0),Uy=zt.slice(0);dn.wrapCallSite=Kd;dn.getErrorSource=Hd;dn.mapSourcePosition=Ea;dn.retrieveSourceMap=Sa;dn.install=function(e){if(e=e||{},e.environment&&(Or=e.environment,["node","browser","auto"].indexOf(Or)===-1))throw new Error("environment "+Or+" was unknown. Available options are {auto, browser, node}");if(e.retrieveFile&&(e.overrideRetrieveFile&&(Gt.length=0),Gt.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(zt.length=0),zt.unshift(e.retrieveSourceMap)),e.hookRequire&&!xa()){var t=$d(Ia,"module"),n=t.prototype._compile;n.__sourceMapSupport||(t.prototype._compile=function(u,i){return cn[i]=u,Cr[i]=void 0,n.call(this,u,i)},t.prototype._compile.__sourceMapSupport=!0)}if(ya||(ya="emptyCacheBetweenOperations"in e?e.emptyCacheBetweenOperations:!1),Vd||(Vd=!0,Error.prepareStackTrace=Fy),!Gd){var o="handleUncaughtExceptions"in e?e.handleUncaughtExceptions:!0;try{var s=$d(Ia,"worker_threads");s.isMainThread===!1&&(o=!1)}catch{}o&&Ry()&&(Gd=!0,Oy())}};dn.resetRetrieveHandlers=function(){Gt.length=0,zt.length=0,Gt=Cy.slice(0),zt=Uy.slice(0),Sa=jo(zt),wa=jo(Gt)}});var Qd=ne(()=>{Zd().install()});var mm=ne((AC,dm)=>{var Qa=require("fs"),Xo=require("path"),Gr=Xo.join,eb=Xo.dirname,lm=Qa.accessSync&&function(e){try{Qa.accessSync(e)}catch{return!1}return!0}||Qa.existsSync||Xo.existsSync,cm={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function tb(e){typeof e=="string"?e={bindings:e}:e||(e={}),Object.keys(cm).map(function(l){l in e||(e[l]=cm[l])}),e.module_root||(e.module_root=nb(__filename)),Xo.extname(e.bindings)!=".node"&&(e.bindings+=".node");for(var t=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],o=0,s=e.try.length,u,i,a;o<s;o++){u=Gr.apply(null,e.try[o].map(function(l){return e[l]||l})),n.push(u);try{return i=e.path?t.resolve(u):t(u),e.path||(i.path=u),i}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw a=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(l){return e.arrow+l}).join(`
`)),a.tries=n,a}r(tb,"bindings");dm.exports=tb;function nb(e){for(var t=eb(e),n;;){if(t==="."&&(t=process.cwd()),lm(Gr(t,"dist")))return Gr(t,"dist");if(lm(Gr(t,"compiled")))return t;if(n===t)throw new Error('Could not find module root given file: "'+e+'". Do you have a `dist` or `compiled` directory? ');n=t,t=Gr(t,"..")}}r(nb,"getRoot")});var pm=ne((CC,fm)=>{fm.exports=mm()("node_sqlite3.node")});var hm=ne(gm=>{var rb=require("util");function ob(e,t,n){let o=e[t];e[t]=function(){let s=new Error,u=e.constructor.name+"#"+t+"("+Array.prototype.slice.call(arguments).map(function(a){return rb.inspect(a,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let i=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=r(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=_m(l).join(`
`),l.stack+=`
--> in `+u,l.stack+=`
`+_m(s).slice(1).join(`
`),l.__augmented=!0),i.apply(this,arguments)},"replacement")),o.apply(this,arguments)}}r(ob,"extendTrace");gm.extendTrace=ob;function _m(e){return e.stack.split(`
`).filter(function(t){return t.indexOf(__filename)<0})}r(_m,"filter")});var xm=ne((bm,Im)=>{var ib=require("path"),rt=pm(),Kn=require("events").EventEmitter;Im.exports=bm=rt;function Hn(e){return function(t){let n,o=Array.prototype.slice.call(arguments,1);if(typeof o[o.length-1]=="function"){let u=o[o.length-1];n=r(function(i){i&&u(i)},"errBack")}let s=new Yo(this,t,n);return e.call(this,s,o)}}r(Hn,"normalizeMethod");function Xa(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}r(Xa,"inherits");rt.cached={Database:r(function(e,t,n){if(e===""||e===":memory:")return new ke(e,t,n);let o;if(e=ib.resolve(e),!rt.cached.objects[e])o=rt.cached.objects[e]=new ke(e,t,n);else{o=rt.cached.objects[e];let u=typeof t=="number"?n:t;if(typeof u=="function"){let i=function(){u.call(o,null)};var s=i;r(i,"cb"),o.open?process.nextTick(i):o.once("open",i)}}return o},"Database"),objects:{}};var ke=rt.Database,Yo=rt.Statement,Ja=rt.Backup;Xa(ke,Kn);Xa(Yo,Kn);Xa(Ja,Kn);ke.prototype.prepare=Hn(function(e,t){return t.length?e.bind.apply(e,t):e});ke.prototype.run=Hn(function(e,t){return e.run.apply(e,t).finalize(),this});ke.prototype.get=Hn(function(e,t){return e.get.apply(e,t).finalize(),this});ke.prototype.all=Hn(function(e,t){return e.all.apply(e,t).finalize(),this});ke.prototype.each=Hn(function(e,t){return e.each.apply(e,t).finalize(),this});ke.prototype.map=Hn(function(e,t){return e.map.apply(e,t).finalize(),this});ke.prototype.backup=function(){let e;return arguments.length<=2?e=new Ja(this,arguments[0],"main","main",!0,arguments[1]):e=new Ja(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),e.retryErrors=[rt.BUSY,rt.LOCKED],e};Yo.prototype.map=function(){let e=Array.prototype.slice.call(arguments),t=e.pop();return e.push(function(n,o){if(n)return t(n);let s={};if(o.length){let u=Object.keys(o[0]),i=u[0];if(u.length>2)for(let a=0;a<o.length;a++)s[o[a][i]]=o[a];else{let a=u[1];for(let l=0;l<o.length;l++)s[o[l][i]]=o[l][a]}}t(n,s)}),this.all.apply(this,e)};var ym=!1,Ya=["trace","profile","change"];ke.prototype.addListener=ke.prototype.on=function(e){let t=Kn.prototype.addListener.apply(this,arguments);return Ya.indexOf(e)>=0&&this.configure(e,!0),t};ke.prototype.removeListener=function(e){let t=Kn.prototype.removeListener.apply(this,arguments);return Ya.indexOf(e)>=0&&!this._events[e]&&this.configure(e,!1),t};ke.prototype.removeAllListeners=function(e){let t=Kn.prototype.removeAllListeners.apply(this,arguments);return Ya.indexOf(e)>=0&&this.configure(e,!1),t};rt.verbose=function(){if(!ym){let e=hm();["prepare","get","run","all","each","map","close","exec"].forEach(function(t){e.extendTrace(ke.prototype,t)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(t){e.extendTrace(Yo.prototype,t)}),ym=!0}return rt}});var Yn={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".jsonl",".mcmeta",".sarif",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Pipfile.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},python:{extensions:[".ipynb",".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:["Notebook",".gclient","DEPS","SConscript","SConstruct","wscript"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".gemrc","CITATION.cff","glide.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]}};var uu=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],lu={".php":[".blade"]},cu=Object.keys(Yn).flatMap(e=>Yn[e].extensions);var ui=require("os"),li=require("path");var du;(()=>{"use strict";var e={470:s=>{function u(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}r(u,"e");function i(l,c){for(var d,m="",f=0,p=-1,g=0,h=0;h<=l.length;++h){if(h<l.length)d=l.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(p===h-1||g===1))if(p!==h-1&&g===2){if(m.length<2||f!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var x=m.lastIndexOf("/");if(x!==m.length-1){x===-1?(m="",f=0):f=(m=m.slice(0,x)).length-1-m.lastIndexOf("/"),p=h,g=0;continue}}else if(m.length===2||m.length===1){m="",f=0,p=h,g=0;continue}}c&&(m.length>0?m+="/..":m="..",f=2)}else m.length>0?m+="/"+l.slice(p+1,h):m=l.slice(p+1,h),f=h-p-1;p=h,g=0}else d===46&&g!==-1?++g:g=-1}return m}r(i,"r");var a={resolve:r(function(){for(var l,c="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var f;m>=0?f=arguments[m]:(l===void 0&&(l=process.cwd()),f=l),u(f),f.length!==0&&(c=f+"/"+c,d=f.charCodeAt(0)===47)}return c=i(c,!d),d?c.length>0?"/"+c:"/":c.length>0?c:"."},"resolve"),normalize:r(function(l){if(u(l),l.length===0)return".";var c=l.charCodeAt(0)===47,d=l.charCodeAt(l.length-1)===47;return(l=i(l,!c)).length!==0||c||(l="."),l.length>0&&d&&(l+="/"),c?"/"+l:l},"normalize"),isAbsolute:r(function(l){return u(l),l.length>0&&l.charCodeAt(0)===47},"isAbsolute"),join:r(function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var d=arguments[c];u(d),d.length>0&&(l===void 0?l=d:l+="/"+d)}return l===void 0?".":a.normalize(l)},"join"),relative:r(function(l,c){if(u(l),u(c),l===c||(l=a.resolve(l))===(c=a.resolve(c)))return"";for(var d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,f=m-d,p=1;p<c.length&&c.charCodeAt(p)===47;++p);for(var g=c.length-p,h=f<g?f:g,x=-1,y=0;y<=h;++y){if(y===h){if(g>h){if(c.charCodeAt(p+y)===47)return c.slice(p+y+1);if(y===0)return c.slice(p+y)}else f>h&&(l.charCodeAt(d+y)===47?x=y:y===0&&(x=0));break}var R=l.charCodeAt(d+y);if(R!==c.charCodeAt(p+y))break;R===47&&(x=y)}var N="";for(y=d+x+1;y<=m;++y)y!==m&&l.charCodeAt(y)!==47||(N.length===0?N+="..":N+="/..");return N.length>0?N+c.slice(p+x):(p+=x,c.charCodeAt(p)===47&&++p,c.slice(p))},"relative"),_makeLong:r(function(l){return l},"_makeLong"),dirname:r(function(l){if(u(l),l.length===0)return".";for(var c=l.charCodeAt(0),d=c===47,m=-1,f=!0,p=l.length-1;p>=1;--p)if((c=l.charCodeAt(p))===47){if(!f){m=p;break}}else f=!1;return m===-1?d?"/":".":d&&m===1?"//":l.slice(0,m)},"dirname"),basename:r(function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');u(l);var d,m=0,f=-1,p=!0;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var g=c.length-1,h=-1;for(d=l.length-1;d>=0;--d){var x=l.charCodeAt(d);if(x===47){if(!p){m=d+1;break}}else h===-1&&(p=!1,h=d+1),g>=0&&(x===c.charCodeAt(g)?--g==-1&&(f=d):(g=-1,f=h))}return m===f?f=h:f===-1&&(f=l.length),l.slice(m,f)}for(d=l.length-1;d>=0;--d)if(l.charCodeAt(d)===47){if(!p){m=d+1;break}}else f===-1&&(p=!1,f=d+1);return f===-1?"":l.slice(m,f)},"basename"),extname:r(function(l){u(l);for(var c=-1,d=0,m=-1,f=!0,p=0,g=l.length-1;g>=0;--g){var h=l.charCodeAt(g);if(h!==47)m===-1&&(f=!1,m=g+1),h===46?c===-1?c=g:p!==1&&(p=1):c!==-1&&(p=-1);else if(!f){d=g+1;break}}return c===-1||m===-1||p===0||p===1&&c===m-1&&c===d+1?"":l.slice(c,m)},"extname"),format:r(function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(c,d){var m=d.dir||d.root,f=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+f:m+"/"+f:f}(0,l)},"format"),parse:r(function(l){u(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var d,m=l.charCodeAt(0),f=m===47;f?(c.root="/",d=1):d=0;for(var p=-1,g=0,h=-1,x=!0,y=l.length-1,R=0;y>=d;--y)if((m=l.charCodeAt(y))!==47)h===-1&&(x=!1,h=y+1),m===46?p===-1?p=y:R!==1&&(R=1):p!==-1&&(R=-1);else if(!x){g=y+1;break}return p===-1||h===-1||R===0||R===1&&p===h-1&&p===g+1?h!==-1&&(c.base=c.name=g===0&&f?l.slice(1,h):l.slice(g,h)):(g===0&&f?(c.name=l.slice(1,p),c.base=l.slice(1,h)):(c.name=l.slice(g,p),c.base=l.slice(g,h)),c.ext=l.slice(p,h)),g>0?c.dir=l.slice(0,g-1):f&&(c.dir="/"),c},"parse"),sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,s.exports=a}},t={};function n(s){var u=t[s];if(u!==void 0)return u.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}r(n,"r"),n.d=(s,u)=>{for(var i in u)n.o(u,i)&&!n.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:u[i]})},n.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u),n.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var o={};(()=>{let s;n.r(o),n.d(o,{URI:r(()=>f,"URI"),Utils:r(()=>ot,"Utils")}),typeof process=="object"?s=process.platform==="win32":typeof navigator=="object"&&(s=navigator.userAgent.indexOf("Windows")>=0);let u=/^\w[\w\d+.-]*$/,i=/^\//,a=/^\/\//;function l(T,w){if(!T.scheme&&w)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${T.authority}", path: "${T.path}", query: "${T.query}", fragment: "${T.fragment}"}`);if(T.scheme&&!u.test(T.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(T.path){if(T.authority){if(!i.test(T.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(T.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}r(l,"s");let c="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,mt=class mt{constructor(w,v,M,K,A,F=!1){Ft(this,"scheme");Ft(this,"authority");Ft(this,"path");Ft(this,"query");Ft(this,"fragment");typeof w=="object"?(this.scheme=w.scheme||c,this.authority=w.authority||c,this.path=w.path||c,this.query=w.query||c,this.fragment=w.fragment||c):(this.scheme=function(Fe,he){return Fe||he?Fe:"file"}(w,F),this.authority=v||c,this.path=function(Fe,he){switch(Fe){case"https":case"http":case"file":he?he[0]!==d&&(he=d+he):he=d}return he}(this.scheme,M||c),this.query=K||c,this.fragment=A||c,l(this,F))}static isUri(w){return w instanceof mt||!!w&&typeof w.authority=="string"&&typeof w.fragment=="string"&&typeof w.path=="string"&&typeof w.query=="string"&&typeof w.scheme=="string"&&typeof w.fsPath=="string"&&typeof w.with=="function"&&typeof w.toString=="function"}get fsPath(){return R(this,!1)}with(w){if(!w)return this;let{scheme:v,authority:M,path:K,query:A,fragment:F}=w;return v===void 0?v=this.scheme:v===null&&(v=c),M===void 0?M=this.authority:M===null&&(M=c),K===void 0?K=this.path:K===null&&(K=c),A===void 0?A=this.query:A===null&&(A=c),F===void 0?F=this.fragment:F===null&&(F=c),v===this.scheme&&M===this.authority&&K===this.path&&A===this.query&&F===this.fragment?this:new g(v,M,K,A,F)}static parse(w,v=!1){let M=m.exec(w);return M?new g(M[2]||c,U(M[4]||c),U(M[5]||c),U(M[7]||c),U(M[9]||c),v):new g(c,c,c,c,c)}static file(w){let v=c;if(s&&(w=w.replace(/\\/g,d)),w[0]===d&&w[1]===d){let M=w.indexOf(d,2);M===-1?(v=w.substring(2),w=d):(v=w.substring(2,M),w=w.substring(M)||d)}return new g("file",v,w,c,c)}static from(w){let v=new g(w.scheme,w.authority,w.path,w.query,w.fragment);return l(v,!0),v}toString(w=!1){return N(this,w)}toJSON(){return this}static revive(w){if(w){if(w instanceof mt)return w;{let v=new g(w);return v._formatted=w.external,v._fsPath=w._sep===p?w.fsPath:null,v}}return w}};r(mt,"f");let f=mt,p=s?1:void 0,xt=class xt extends f{constructor(){super(...arguments);Ft(this,"_formatted",null);Ft(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=R(this,!1)),this._fsPath}toString(v=!1){return v?N(this,!0):(this._formatted||(this._formatted=N(this,!1)),this._formatted)}toJSON(){let v={$mid:1};return this._fsPath&&(v.fsPath=this._fsPath,v._sep=p),this._formatted&&(v.external=this._formatted),this.path&&(v.path=this.path),this.scheme&&(v.scheme=this.scheme),this.authority&&(v.authority=this.authority),this.query&&(v.query=this.query),this.fragment&&(v.fragment=this.fragment),v}};r(xt,"l");let g=xt,h={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function x(T,w,v){let M,K=-1;for(let A=0;A<T.length;A++){let F=T.charCodeAt(A);if(F>=97&&F<=122||F>=65&&F<=90||F>=48&&F<=57||F===45||F===46||F===95||F===126||w&&F===47||v&&F===91||v&&F===93||v&&F===58)K!==-1&&(M+=encodeURIComponent(T.substring(K,A)),K=-1),M!==void 0&&(M+=T.charAt(A));else{M===void 0&&(M=T.substr(0,A));let Fe=h[F];Fe!==void 0?(K!==-1&&(M+=encodeURIComponent(T.substring(K,A)),K=-1),M+=Fe):K===-1&&(K=A)}}return K!==-1&&(M+=encodeURIComponent(T.substring(K))),M!==void 0?M:T}r(x,"d");function y(T){let w;for(let v=0;v<T.length;v++){let M=T.charCodeAt(v);M===35||M===63?(w===void 0&&(w=T.substr(0,v)),w+=h[M]):w!==void 0&&(w+=T[v])}return w!==void 0?w:T}r(y,"p");function R(T,w){let v;return v=T.authority&&T.path.length>1&&T.scheme==="file"?`//${T.authority}${T.path}`:T.path.charCodeAt(0)===47&&(T.path.charCodeAt(1)>=65&&T.path.charCodeAt(1)<=90||T.path.charCodeAt(1)>=97&&T.path.charCodeAt(1)<=122)&&T.path.charCodeAt(2)===58?w?T.path.substr(1):T.path[1].toLowerCase()+T.path.substr(2):T.path,s&&(v=v.replace(/\//g,"\\")),v}r(R,"m");function N(T,w){let v=w?y:x,M="",{scheme:K,authority:A,path:F,query:Fe,fragment:he}=T;if(K&&(M+=K,M+=":"),(A||K==="file")&&(M+=d,M+=d),A){let se=A.indexOf("@");if(se!==-1){let wt=A.substr(0,se);A=A.substr(se+1),se=wt.lastIndexOf(":"),se===-1?M+=v(wt,!1,!1):(M+=v(wt.substr(0,se),!1,!1),M+=":",M+=v(wt.substr(se+1),!1,!0)),M+="@"}A=A.toLowerCase(),se=A.lastIndexOf(":"),se===-1?M+=v(A,!1,!0):(M+=v(A.substr(0,se),!1,!0),M+=A.substr(se))}if(F){if(F.length>=3&&F.charCodeAt(0)===47&&F.charCodeAt(2)===58){let se=F.charCodeAt(1);se>=65&&se<=90&&(F=`/${String.fromCharCode(se+32)}:${F.substr(3)}`)}else if(F.length>=2&&F.charCodeAt(1)===58){let se=F.charCodeAt(0);se>=65&&se<=90&&(F=`${String.fromCharCode(se+32)}:${F.substr(2)}`)}M+=v(F,!0,!1)}return Fe&&(M+="?",M+=v(Fe,!1,!1)),he&&(M+="#",M+=w?he:x(he,!1,!1)),M}r(N,"y");function k(T){try{return decodeURIComponent(T)}catch{return T.length>3?T.substr(0,3)+k(T.substr(3)):T}}r(k,"v");let L=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function U(T){return T.match(L)?T.replace(L,w=>k(w)):T}r(U,"C");var j=n(470);let E=j.posix||j,O="/";var ot;(function(T){T.joinPath=function(w,...v){return w.with({path:E.join(w.path,...v)})},T.resolvePath=function(w,...v){let M=w.path,K=!1;M[0]!==O&&(M=O+M,K=!0);let A=E.resolve(M,...v);return K&&A[0]===O&&!w.authority&&(A=A.substring(1)),w.with({path:A})},T.dirname=function(w){if(w.path.length===0||w.path===O)return w;let v=E.dirname(w.path);return v.length===1&&v.charCodeAt(0)===46&&(v=""),w.with({path:v})},T.basename=function(w){return E.basename(w.path)},T.extname=function(w){return E.extname(w.path)}})(ot||(ot={}))})(),du=o})();var{URI:ai,Utils:Lm}=du;function fu(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substring(0,3)+fu(e.substring(3)):e}}r(fu,"decodeURIComponentGraceful");var mu=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function km(e){return e.match(mu)?e.replace(mu,t=>fu(t)):e}r(km,"percentDecode");function er(e,t=!1){try{let n=e.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return n?ai.parse(n[1]+n[2],t):ai.parse(e,t)}catch(n){let o=new Error(`Could not parse <${e}>`);throw o.cause=n,o}}r(er,"parseUri");function Fm(e){return["file","notebook","vscode-notebook","vscode-notebook-cell"].includes(e)}r(Fm,"isFsScheme");function Am(e){return Fm(e.scheme)&&(!e.authority||(0,ui.platform)()=="win32")}r(Am,"isFsUri");function pu(e){try{typeof e=="string"&&(e=er(e,!0))}catch{return}if(Am(e))if((0,ui.platform)()==="win32"){let t=e.path;return e.authority?t=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(t)&&(t=t.substring(1)),(0,li.normalize)(t)}else return e.authority?void 0:e.path}r(pu,"getFsPath");function _u(e){return km(e.toString().replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}r(_u,"basename");var ci=kt(require("path"));var _i=class _i{constructor(t,n,o){this.languageId=t;this.isGuess=n;this.fileExtension=o}};r(_i,"Language");var tr=_i,gi=class gi{};r(gi,"LanguageDetection");var nr=gi,di=new Map,gn=new Map,gu,hu;for(let[e,{extensions:t,filenames:n}]of Object.entries(Yn)){for(let o of t)di.set(o,[...(gu=di.get(o))!=null?gu:[],e]);for(let o of n!=null?n:[])gn.set(o,[...(hu=gn.get(o))!=null?hu:[],e])}var hi=class hi extends nr{detectLanguage(t){let n=_u(t.uri),o=ci.extname(n).toLowerCase(),s=this.extensionWithoutTemplateLanguage(n,o),u=this.detectLanguageId(n,s);return new tr(u.languageId,u.isGuess,this.computeFullyQualifiedExtension(o,s))}extensionWithoutTemplateLanguage(t,n){if(uu.includes(n)){let o=t.substring(0,t.lastIndexOf(".")),s=ci.extname(o).toLowerCase();if(s.length>0&&cu.includes(s)&&this.isExtensionValidForTemplateLanguage(n,s))return s}return n}isExtensionValidForTemplateLanguage(t,n){let o=lu[t];return!o||o.includes(n)}detectLanguageId(t,n){var s;if(gn.has(t))return{languageId:gn.get(t)[0],isGuess:!1};let o=(s=di.get(n))!=null?s:[];if(o.length>0)return{languageId:o[0],isGuess:o.length>1};for(;t.includes(".");)if(t=t.replace(/\.[^.]*$/,""),gn.has(t))return{languageId:gn.get(t)[0],isGuess:!1};return{languageId:"unknown",isGuess:!0}}computeFullyQualifiedExtension(t,n){return t!==n?n+t:t}};r(hi,"FilenameAndExensionLanguageDetection");var mi=hi,yi=class yi extends nr{constructor(n){super();this.delegate=n}detectLanguage(n){let o=this.delegate.detectLanguage(n),s=o.languageId;return s==="c"||s==="cpp"?new tr("cpp",o.isGuess,o.fileExtension):o}};r(yi,"GroupingLanguageDetection");var fi=yi,bi=class bi extends nr{constructor(n){super();this.delegate=n}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new tr(n.languageId,!0,""):this.delegate.detectLanguage(n)}};r(bi,"ClientProvidedLanguageDetection");var pi=bi,Ib=new fi(new pi(new mi));var Ii=class Ii{constructor(){this.items=[]}push(t){this.items.push(t)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};r(Ii,"Stack");var zr=Ii;function xi(e,t,n){return{type:"virtual",indentation:e,subs:t,label:n}}r(xi,"virtualNode");function yu(e,t,n,o,s){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:e,lineNumber:t,sourceLine:n,subs:o,label:s}}r(yu,"lineNode");function wi(e){return{type:"blank",lineNumber:e,subs:[]}}r(wi,"blankNode");function qr(e){return{type:"top",indentation:-1,subs:e!=null?e:[]}}r(qr,"topNode");function we(e){return e.type==="blank"}r(we,"isBlank");function Kt(e){return e.type==="line"}r(Kt,"isLine");function Ht(e){return e.type==="virtual"}r(Ht,"isVirtual");function bu(e,t){return Te(e,n=>{n.label=n.label?t(n.label)?void 0:n.label:void 0},"bottomUp"),e}r(bu,"clearLabelsIf");function Zt(e,t){switch(e.type){case"line":case"virtual":{let n=e.subs.map(o=>Zt(o,t));return{...e,subs:n,label:e.label?t(e.label):void 0}}case"blank":return{...e,label:e.label?t(e.label):void 0};case"top":return{...e,subs:e.subs.map(n=>Zt(n,t)),label:e.label?t(e.label):void 0}}}r(Zt,"mapLabels");function Te(e,t,n){function o(s){n==="topDown"&&t(s),s.subs.forEach(u=>{o(u)}),n==="bottomUp"&&t(s)}r(o,"_visit"),o(e)}r(Te,"visitTree");function Si(e,t,n,o){let s=t;function u(i){s=n(i,s)}return r(u,"visitor"),Te(e,u,o),s}r(Si,"foldTree");function Kr(e,t,n){let o=r(u=>{if(n!==void 0&&n(u))return u;{let i=u.subs.map(o).filter(a=>a!==void 0);return u.subs=i,t(u)}},"rebuild"),s=o(e);return s!==void 0?s:qr()}r(Kr,"rebuildTree");function Cm(e){let t=e.split(`
`),n=t.map(c=>c.match(/^\s*/)[0].length),o=t.map(c=>c.trimLeft());function s(c){let[d,m]=u(c+1,n[c]);return[yu(n[c],c,o[c],d),m]}r(s,"parseNode");function u(c,d){let m,f=[],p=c,g;for(;p<o.length&&(o[p]===""||n[p]>d);)if(o[p]==="")g===void 0&&(g=p),p+=1;else{if(g!==void 0){for(let h=g;h<p;h++)f.push(wi(h));g=void 0}[m,p]=s(p),f.push(m)}return g!==void 0&&(p=g),[f,p]}r(u,"parseSubs");let[i,a]=u(0,-1),l=a;for(;l<o.length&&o[l]==="";)i.push(wi(l)),l+=1;if(l<o.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${o.length}`);return qr(i)}r(Cm,"parseRaw");function rr(e,t){function n(o){if(Kt(o)){let s=t.find(u=>u.matches(o.sourceLine));s&&(o.label=s.label)}}r(n,"visitor"),Te(e,n,"bottomUp")}r(rr,"labelLines");function Hr(e){function t(n){if(Ht(n)&&n.label===void 0){let o=n.subs.filter(s=>!we(s));o.length===1&&(n.label=o[0].label)}}r(t,"visitor"),Te(e,t,"bottomUp")}r(Hr,"labelVirtualInherited");function or(e){return Object.keys(e).map(t=>{let n;return e[t].test?n=r(o=>e[t].test(o),"matches"):n=e[t],{matches:n,label:t}})}r(or,"buildLabelRules");function Ei(e){let n=Kr(e,r(function(o){if(o.subs.length===0||o.subs.findIndex(i=>i.label==="closer"||i.label==="opener")===-1)return o;let s=[],u;for(let i=0;i<o.subs.length;i++){let a=o.subs[i],l=o.subs[i-1];if(a.label==="opener"&&l!==void 0&&Kt(l))l.subs.push(a),a.subs.forEach(c=>l.subs.push(c)),a.subs=[];else if(a.label==="closer"&&u!==void 0&&(Kt(a)||Ht(a))&&a.indentation>=u.indentation){let c=s.length-1;for(;c>0&&we(s[c]);)c-=1;if(u.subs.push(...s.splice(c+1)),a.subs.length>0){let d=u.subs.findIndex(g=>g.label!=="newVirtual"),m=u.subs.slice(0,d),f=u.subs.slice(d),p=f.length>0?[xi(a.indentation,f,"newVirtual")]:[];u.subs=[...m,...p,a]}else u.subs.push(a)}else s.push(a),we(a)||(u=a)}return o.subs=s,o},"rebuilder"));return bu(e,o=>o==="newVirtual"),n}r(Ei,"combineClosersAndOpeners");function Iu(e,t=we,n){return Kr(e,r(function(s){if(s.subs.length<=1)return s;let u=[],i=[],a,l=!1;function c(d=!1){if(a!==void 0&&(u.length>0||!d)){let m=xi(a,i,n);u.push(m)}else i.forEach(m=>u.push(m))}r(c,"flushBlockIntoNewSubs");for(let d=0;d<s.subs.length;d++){let m=s.subs[d],f=t(m);!f&&l&&(c(),i=[]),l=f,i.push(m),we(m)||(a=a!=null?a:m.indentation)}return c(!0),s.subs=u,s},"rebuilder"))}r(Iu,"groupBlocks");function Qt(e){return Kr(e,r(function(n){return Ht(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&Ht(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}r(Qt,"flattenVirtual");var Um={opener:/^[[({]/,closer:/^[\])}]/},Dm=or(Um),xu={};function vi(e,t){xu[e]=t}r(vi,"registerLanguageSpecificParser");function ir(e,t){let n=Cm(e),o=xu[t!=null?t:""];return o?o(n):(rr(n,Dm),Ei(n))}r(ir,"parseTree");var jm={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},Bm=or(jm);function wu(e){let t=e;return rr(t,Bm),t=Ei(t),t=Qt(t),Hr(t),Te(t,n=>{if(n.label==="class"||n.label==="interface")for(let o of n.subs)!we(o)&&(o.label===void 0||o.label==="annotation")&&(o.label="member")},"bottomUp"),t}r(wu,"processJava");var Wm={heading:/^# /,subheading:/^## /,subsubheading:/### /},$m=or(Wm);function Su(e){let t=e;if(rr(t,$m),we(t))return t;function n(u){if(u.label==="heading")return 1;if(u.label==="subheading")return 2;if(u.label==="subsubheading")return 3}r(n,"headingLevel");let o=[t],s=[...t.subs];t.subs=[];for(let u of s){let i=n(u);if(i===void 0||we(u))o[o.length-1].subs.push(u);else{for(;o.length<i;)o.push(o[o.length-1]);for(o[i-1].subs.push(u),o[i]=u;o.length>i+1;)o.pop()}}return t=Iu(t),t=Qt(t),Hr(t),t}r(Su,"processMarkdown");function Eu(e){return" ".repeat(e.indentation)+e.sourceLine+`
`}r(Eu,"deparseLine");vi("markdown",Su);vi("java",wu);var Vm={worthUp:.9,worthSibling:.88,worthDown:.8};function Ti(e,t=Vm){let n=Zt(e,o=>o?1:void 0);return Te(n,o=>{var u;if(we(o))return;let s=o.subs.reduce((i,a)=>{var l;return Math.max(i,(l=a.label)!=null?l:0)},0);o.label=Math.max((u=o.label)!=null?u:0,s*t.worthUp)},"bottomUp"),Te(n,o=>{if(we(o))return;let s=o.subs.map(a=>{var l;return(l=a.label)!=null?l:0}),u=[...s];for(let a=0;a<s.length;a++)s[a]!==0&&(u=u.map((l,c)=>Math.max(l,Math.pow(t.worthSibling,Math.abs(a-c))*s[a])));let i=o.label;i!==void 0&&(u=u.map(a=>Math.max(a,t.worthDown*i))),o.subs.forEach((a,l)=>a.label=u[l])},"topDown"),Gm(n)}r(Ti,"fromTreeWithFocussedLines");function Gm(e){let t=Si(e,[],(n,o)=>{var s,u;return(n.type==="line"||n.type==="blank")&&o.push(n.type==="line"?[Eu(n).trimEnd(),(s=n.label)!=null?s:0]:["",(u=n.label)!=null?u:0]),o},"topDown");return new Jt(t)}r(Gm,"fromTreeWithValuedLines");function vu(e,t=!0,n=!0){let o=typeof e=="string"?ir(e):ir(e.source,e.languageId);Qt(o);let s=Zt(o,u=>t&&u!=="closer");return Te(s,u=>{u.label===void 0&&(u.label=t&&u.label!==!1)},"topDown"),t&&Te(s,u=>{if(u.label){let i=!1;for(let a of[...u.subs].reverse())a.label&&!i?i=!0:a.label=!1}else for(let i of u.subs)i.label=!1;u.subs.length>0&&(u.label=!1)},"topDown"),n&&Te(s,u=>{u.label||(u.label=(Kt(u)||we(u))&&u.lineNumber==0)},"topDown"),Ti(s)}r(vu,"elidableTextForSourceCode");var Ri=class Ri extends Error{constructor(n,o){super(n);this.cause=o;this.code="CopilotPromptLoadFailure"}};r(Ri,"CopilotPromptLoadFailure");var At=Ri;var hn=kt(ju()),Wu=require("fs"),$u=require("path");var Bu=new Map;function it(e="cl100k_base"){let t=Bu.get(e);return t!==void 0||(e==="mock"?t=new Gi:t=new Vi(e),Bu.set(e,t)),t}r(it,"getTokenizer");function lf(e){if(!e.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let t=(0,Wu.readFileSync)(e,"utf-8"),n=new Map;for(let o of t.split(`
`)){if(!o)continue;let s=Buffer.from(o,"base64");n.set(s,n.size)}return n}r(lf,"parseTikTokenNoIndex");var zi=class zi{constructor(t){try{this._tokenizer=(0,hn.createTokenizer)(lf((0,$u.join)(__dirname,`./resources/${t}.tiktoken.noindex`)),(0,hn.getSpecialTokensByEncoder)(t),(0,hn.getRegexByEncoder)(t),32768)}catch(n){throw n instanceof Error?new At("Could not load tokenizer",n):n}}tokenize(t){return this._tokenizer.encode(t)}detokenize(t){return this._tokenizer.decode(t)}tokenLength(t){return this.tokenize(t).length}tokenizeStrings(t){return this.tokenize(t).map(o=>this.detokenize([o]))}takeLastTokens(t,n){if(n<=0)return"";let o=4,s=1,u=Math.min(t.length,n*o),i=t.slice(-u),a=this.tokenize(i);for(;a.length<n+2&&u<t.length;)u=Math.min(t.length,u+n*s),i=t.slice(-u),a=this.tokenize(i);return a.length<n?t:(a=a.slice(-n),this.detokenize(a))}takeFirstTokens(t,n){if(n<=0)return{text:"",tokens:[]};let o=4,s=1,u=Math.min(t.length,n*o),i=t.slice(0,u),a=this.tokenize(i);for(;a.length<n+2&&u<t.length;)u=Math.min(t.length,u+n*s),i=t.slice(0,u),a=this.tokenize(i);return a.length<n?{text:t,tokens:a}:(a=a.slice(0,n),{text:this.detokenize(a),tokens:a})}takeLastLinesTokens(t,n){let o=this.takeLastTokens(t,n);if(o.length===t.length||t[t.length-o.length-1]===`
`)return o;let s=o.indexOf(`
`);return o.substring(s+1)}};r(zi,"TTokenizer");var Vi=zi,qi=class qi{constructor(){this.hash=r(t=>{let n=0;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);n=(n<<5)-n+s,n&=n&65535}return n},"hash")}tokenize(t){return this.tokenizeStrings(t).map(this.hash)}detokenize(t){return t.map(n=>n.toString()).join(" ")}tokenizeStrings(t){return t.split(/\b/)}tokenLength(t){return this.tokenizeStrings(t).length}takeLastTokens(t,n){return this.tokenizeStrings(t).slice(-n).join("")}takeFirstTokens(t,n){let o=this.tokenizeStrings(t).slice(0,n);return{text:o.join(""),tokens:o.map(this.hash)}}takeLastLinesTokens(t,n){let o=this.takeLastTokens(t,n);if(o.length===t.length||t[t.length-o.length-1]===`
`)return o;let s=o.indexOf(`
`);return o.substring(s+1)}};r(qi,"MockTokenizer");var Gi=qi;var to=class to{constructor(t,n,o=it().tokenLength(t+`
`),s="strict"){this.text=t;this._value=n;this._cost=o;if(t.includes(`
`)&&s!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&s!=="none")throw new Error("LineWithValueAndCost: value is negative");if(o<0&&s!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(s=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}get value(){return this._value}get cost(){return this._cost}adjustValue(t){return this._value*=t,this}recost(t=n=>it().tokenLength(n+`
`)){return this._cost=t(this.text),this}copy(){return new to(this.text,this.value,this.cost,"none")}};r(to,"LineWithValueAndCost");var ur=to;var no=class no{constructor(t){this.lines=[];let n=[];for(let o of t){let s=Array.isArray(o)?o[1]:1,u=Array.isArray(o)?o[0]:o;typeof u=="string"?u.split(`
`).forEach(i=>n.push(new ur(i,s))):u instanceof no?u.lines.forEach(i=>n.push(i.copy().adjustValue(s))):"source"in u&&"languageId"in u&&vu(u).lines.forEach(i=>n.push(i.copy().adjustValue(s)))}this.lines=n}adjust(t){this.lines.forEach(n=>n.adjustValue(t))}recost(t=n=>it().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(t))}makePrompt(t,n="[...]",o=!0,s="removeLeastDesirable",u=it()){let i=this.lines.map(a=>a.copy());return cf(i,t,n,o,s,u)}};r(no,"ElidableText");var Jt=no;function cf(e,t,n,o,s,u){var m,f,p,g,h,x,y,R,N,k,L,U,j;if(u.tokenLength(n+`
`)>t)throw new Error("maxTokens must be larger than the ellipsis length");s==="removeLeastBangForBuck"&&e.forEach(E=>E.adjustValue(1/E.cost));let i=e.reduce((E,O)=>Math.max(E,O.value),0)+1,a=e.reduce((E,O)=>Math.max(E,O.text.length),0)+1,l=n.trim(),c=e.reduce((E,O)=>E+O.cost,0),d=e.length+1;for(;c>t&&d-->=-1;){let E=e.reduce((v,M)=>M.value<v.value?M:v),O=e.indexOf(E),ot=(m=e.slice(0,O+1).reverse().find(v=>v.text.trim()!==""))!=null?m:{text:""},mt=o?Math.min((p=(f=ot.text.match(/^\s*/))==null?void 0:f[0].length)!=null?p:0,((g=e[O-1])==null?void 0:g.text.trim())===l?(y=(x=(h=e[O-1])==null?void 0:h.text.match(/^\s*/))==null?void 0:x[0].length)!=null?y:0:a,((R=e[O+1])==null?void 0:R.text.trim())===l?(L=(k=(N=e[O+1])==null?void 0:N.text.match(/^\s*/))==null?void 0:k[0].length)!=null?L:0:a):0,xt=" ".repeat(mt)+n,T=new ur(xt,i,u.tokenLength(xt+`
`),"loose");e.splice(O,1,T),((U=e[O+1])==null?void 0:U.text.trim())===l&&e.splice(O+1,1),((j=e[O-1])==null?void 0:j.text.trim())===l&&e.splice(O-1,1);let w=e.reduce((v,M)=>v+M.cost,0);w>=c&&e.every(v=>v.value===i)&&(o=!1),c=w}if(d<0)throw new Error("Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text");return e.map(E=>E.text).join(`
`)}r(cf,"makePrompt");function st(){}r(st,"Diff");st.prototype={diff:r(function(t,n){var o,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.callback;typeof s=="function"&&(u=s,s={});var i=this;function a(k){return k=i.postProcess(k,s),u?(setTimeout(function(){u(k)},0),!0):k}r(a,"done"),t=this.castInput(t,s),n=this.castInput(n,s),t=this.removeEmpty(this.tokenize(t,s)),n=this.removeEmpty(this.tokenize(n,s));var l=n.length,c=t.length,d=1,m=l+c;s.maxEditLength!=null&&(m=Math.min(m,s.maxEditLength));var f=(o=s.timeout)!==null&&o!==void 0?o:1/0,p=Date.now()+f,g=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(g[0],n,t,0,s);if(g[0].oldPos+1>=c&&h+1>=l)return a(Vu(i,g[0].lastComponent,n,t,i.useLongestToken));var x=-1/0,y=1/0;function R(){for(var k=Math.max(x,-d);k<=Math.min(y,d);k+=2){var L=void 0,U=g[k-1],j=g[k+1];U&&(g[k-1]=void 0);var E=!1;if(j){var O=j.oldPos-k;E=j&&0<=O&&O<l}var ot=U&&U.oldPos+1<c;if(!E&&!ot){g[k]=void 0;continue}if(!ot||E&&U.oldPos<j.oldPos?L=i.addToPath(j,!0,!1,0,s):L=i.addToPath(U,!1,!0,1,s),h=i.extractCommon(L,n,t,k,s),L.oldPos+1>=c&&h+1>=l)return a(Vu(i,L.lastComponent,n,t,i.useLongestToken));g[k]=L,L.oldPos+1>=c&&(y=Math.min(y,k-1)),h+1>=l&&(x=Math.max(x,k+1))}d++}if(r(R,"execEditLength"),u)r(function k(){setTimeout(function(){if(d>m||Date.now()>p)return u();R()||k()},0)},"exec")();else for(;d<=m&&Date.now()<=p;){var N=R();if(N)return N}},"diff"),addToPath:r(function(t,n,o,s,u){var i=t.lastComponent;return i&&!u.oneChangePerToken&&i.added===n&&i.removed===o?{oldPos:t.oldPos+s,lastComponent:{count:i.count+1,added:n,removed:o,previousComponent:i.previousComponent}}:{oldPos:t.oldPos+s,lastComponent:{count:1,added:n,removed:o,previousComponent:i}}},"addToPath"),extractCommon:r(function(t,n,o,s,u){for(var i=n.length,a=o.length,l=t.oldPos,c=l-s,d=0;c+1<i&&l+1<a&&this.equals(o[l+1],n[c+1],u);)c++,l++,d++,u.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return d&&!u.oneChangePerToken&&(t.lastComponent={count:d,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=l,c},"extractCommon"),equals:r(function(t,n,o){return o.comparator?o.comparator(t,n):t===n||o.ignoreCase&&t.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:r(function(t){for(var n=[],o=0;o<t.length;o++)t[o]&&n.push(t[o]);return n},"removeEmpty"),castInput:r(function(t){return t},"castInput"),tokenize:r(function(t){return Array.from(t)},"tokenize"),join:r(function(t){return t.join("")},"join"),postProcess:r(function(t){return t},"postProcess")};function Vu(e,t,n,o,s){for(var u=[],i;t;)u.push(t),i=t.previousComponent,delete t.previousComponent,t=i;u.reverse();for(var a=0,l=u.length,c=0,d=0;a<l;a++){var m=u[a];if(m.removed)m.value=e.join(o.slice(d,d+m.count)),d+=m.count;else{if(!m.added&&s){var f=n.slice(c,c+m.count);f=f.map(function(p,g){var h=o[d+g];return h.length>p.length?h:p}),m.value=e.join(f)}else m.value=e.join(n.slice(c,c+m.count));c+=m.count,m.added||(d+=m.count)}}return u}r(Vu,"buildValues");var ox=new st;function Gu(e,t){var n;for(n=0;n<e.length&&n<t.length;n++)if(e[n]!=t[n])return e.slice(0,n);return e.slice(0,n)}r(Gu,"longestCommonPrefix");function zu(e,t){var n;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(n=0;n<e.length&&n<t.length;n++)if(e[e.length-(n+1)]!=t[t.length-(n+1)])return e.slice(-n);return e.slice(-n)}r(zu,"longestCommonSuffix");function Ki(e,t,n){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return n+e.slice(t.length)}r(Ki,"replacePrefix");function Hi(e,t,n){if(!t)return e+n;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+n}r(Hi,"replaceSuffix");function lr(e,t){return Ki(e,t,"")}r(lr,"removePrefix");function ro(e,t){return Hi(e,t,"")}r(ro,"removeSuffix");function qu(e,t){return t.slice(0,df(e,t))}r(qu,"maximumOverlap");function df(e,t){var n=0;e.length>t.length&&(n=e.length-t.length);var o=t.length;e.length<t.length&&(o=e.length);var s=Array(o),u=0;s[0]=0;for(var i=1;i<o;i++){for(t[i]==t[u]?s[i]=s[u]:s[i]=u;u>0&&t[i]!=t[u];)u=s[u];t[i]==t[u]&&u++}u=0;for(var a=n;a<e.length;a++){for(;u>0&&e[a]!=t[u];)u=s[u];e[a]==t[u]&&u++}return u}r(df,"overlapCount");var oo="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",mf=new RegExp("[".concat(oo,"]+|\\s+|[^").concat(oo,"]"),"ug"),io=new st;io.equals=function(e,t,n){return n.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()};io.tokenize=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(t.intlSegmenter.segment(e),function(u){return u.segment})}else n=e.match(mf)||[];var o=[],s=null;return n.forEach(function(u){/\s/.test(u)?s==null?o.push(u):o.push(o.pop()+u):/\s/.test(s)?o[o.length-1]==s?o.push(o.pop()+u):o.push(s+u):o.push(u),s=u}),o};io.join=function(e){return e.map(function(t,n){return n==0?t:t.replace(/^\s+/,"")}).join("")};io.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var n=null,o=null,s=null;return e.forEach(function(u){u.added?o=u:u.removed?s=u:((o||s)&&Ku(n,s,o,u),n=u,o=null,s=null)}),(o||s)&&Ku(n,s,o,null),e};function Ku(e,t,n,o){if(t&&n){var s=t.value.match(/^\s*/)[0],u=t.value.match(/\s*$/)[0],i=n.value.match(/^\s*/)[0],a=n.value.match(/\s*$/)[0];if(e){var l=Gu(s,i);e.value=Hi(e.value,i,l),t.value=lr(t.value,l),n.value=lr(n.value,l)}if(o){var c=zu(u,a);o.value=Ki(o.value,a,c),t.value=ro(t.value,c),n.value=ro(n.value,c)}}else if(n)e&&(n.value=n.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(e&&o){var d=o.value.match(/^\s*/)[0],m=t.value.match(/^\s*/)[0],f=t.value.match(/\s*$/)[0],p=Gu(d,m);t.value=lr(t.value,p);var g=zu(lr(d,p),f);t.value=ro(t.value,g),o.value=Ki(o.value,d,g),e.value=Hi(e.value,d,d.slice(0,d.length-g.length))}else if(o){var h=o.value.match(/^\s*/)[0],x=t.value.match(/\s*$/)[0],y=qu(x,h);t.value=ro(t.value,y)}else if(e){var R=e.value.match(/\s*$/)[0],N=t.value.match(/^\s*/)[0],k=qu(R,N);t.value=lr(t.value,k)}}r(Ku,"dedupeWhitespaceInChangeObjects");var ff=new st;ff.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(oo,"]+|[^\\S\\n\\r]+|[^").concat(oo,"]"),"ug");return e.match(t)||[]};var Xi=new st;Xi.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var n=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var s=0;s<o.length;s++){var u=o[s];s%2&&!t.newlineIsToken?n[n.length-1]+=u:n.push(u)}return n};Xi.equals=function(e,t,n){return n.ignoreWhitespace?((!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),st.prototype.equals.call(this,e,t,n)};var pf=new st;pf.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var _f=new st;_f.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Zi(e){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(e)}r(Zi,"_typeof");var cr=new st;cr.useLongestToken=!0;cr.tokenize=Xi.tokenize;cr.castInput=function(e,t){var n=t.undefinedReplacement,o=t.stringifyReplacer,s=o===void 0?function(u,i){return typeof i>"u"?n:i}:o;return typeof e=="string"?e:JSON.stringify(Qi(e,null,null,s),s,"  ")};cr.equals=function(e,t,n){return st.prototype.equals.call(cr,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),n)};function Qi(e,t,n,o,s){t=t||[],n=n||[],o&&(e=o(s,e));var u;for(u=0;u<t.length;u+=1)if(t[u]===e)return n[u];var i;if(Object.prototype.toString.call(e)==="[object Array]"){for(t.push(e),i=new Array(e.length),n.push(i),u=0;u<e.length;u+=1)i[u]=Qi(e[u],t,n,o,s);return t.pop(),n.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),Zi(e)==="object"&&e!==null){t.push(e),i={},n.push(i);var a=[],l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.push(l);for(a.sort(),u=0;u<a.length;u+=1)l=a[u],i[l]=Qi(e[l],t,n,o,l);t.pop(),n.pop()}else i=e;return i}r(Qi,"canonicalize");var Ji=new st;Ji.tokenize=function(e){return e.slice()};Ji.join=Ji.removeEmpty=function(e){return e};var yf={tokenizerName:"cl100k_base"};function bf(e){return{...yf,...e}}r(bf,"cursorContextOptions");function yn(e,t={}){let n=bf(t),o=it(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let s=e.source.slice(0,e.offset);return n.maxLineCount!==void 0&&(s=s.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(s=o.takeLastLinesTokens(s,n.maxTokenLength)),{context:s,lineCount:s.split(`
`).length,tokenLength:o.tokenLength(s),tokenizerName:n.tokenizerName}}r(yn,"getCursorContext");var ts=class ts{constructor(t){this.keys=[];this.cache={};this.size=t}put(t,n){var o;if(this.cache[t]=n,this.keys.length>this.size){this.keys.push(t);let s=(o=this.keys.shift())!=null?o:"";delete this.cache[s]}}get(t){return this.cache[t]}};r(ts,"FifoCache");var Yi=ts;var ns=class ns{constructor(t){var n;this.stopsForLanguage=(n=Sf.get(t.languageId))!=null?n:wf}tokenize(t){return new Set(If(t).filter(n=>!this.stopsForLanguage.has(n)))}};r(ns,"Tokenizer");var es=ns,Hu=new Yi(20),rs=class rs{constructor(t){this.referenceDoc=t,this.tokenizer=new es(t)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){var t;return(t=this.referenceTokensCache)!=null?t:this.referenceTokensCache=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(t,n="descending"){return n=="ascending"?t.sort((o,s)=>o.score>s.score?1:-1):n=="descending"?t.sort((o,s)=>o.score>s.score?-1:1):t}async retrieveAllSnippets(t,n="descending"){var c;let o=[];if(t.source.length===0||(await this.referenceTokens).size===0)return o;let s=t.source.split(`
`),u=this.id()+":"+t.source,i=(c=Hu.get(u))!=null?c:[],a=i.length==0,l=a?s.map(d=>this.tokenizer.tokenize(d),this.tokenizer):[];for(let[d,[m,f]]of this.getWindowsDelineations(s).entries()){if(a){let h=new Set;l.slice(m,f).forEach(x=>x.forEach(y=>h.add(y),h)),i.push(h)}let p=i[d],g=this.similarityScore(p,await this.referenceTokens);if(o.length&&m>0&&o[o.length-1].endLine>m){o[o.length-1].score<g&&(o[o.length-1].score=g,o[o.length-1].startLine=m,o[o.length-1].endLine=f);continue}o.push({score:g,startLine:m,endLine:f})}return a&&Hu.put(u,i),this.sortScoredSnippets(o,n)}findMatches(t,n){return this.findBestMatch(t,n)}async findBestMatch(t,n){if(t.source.length===0||(await this.referenceTokens).size===0)return[];let o=t.source.split(`
`),s=await this.retrieveAllSnippets(t,"descending");if(s.length===0)return[];let u=[];for(let i=0;i<s.length&&i<n;i++)if(s[i].score!==0){let a=o.slice(s[i].startLine,s[i].endLine).join(`
`);u.push({snippet:a,semantics:"snippet",provider:"similar-files",...s[i]})}return u}};r(rs,"WindowedMatcher");var bn=rs;function If(e){return e.split(/[^a-zA-Z0-9]/).filter(t=>t.length>0)}r(If,"splitIntoWords");var xf=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),wf=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...xf]),Sf=new Map([]);function so(e,t){let n=[],o=t.length;if(o==0)return[];if(o<e)return[[0,o]];for(let s=0;s<o-e+1;s++)n.push([s,s+e]);return n}r(so,"getBasicWindowDelineations");var dr=class dr extends bn{constructor(t,n){super(t),this.windowLength=n}id(){return"fixed:"+this.windowLength}getWindowsDelineations(t){return so(this.windowLength,t)}_getCursorContextInfo(t){return yn(t,{maxLineCount:this.windowLength})}similarityScore(t,n){return Ef(t,n)}};r(dr,"FixedWindowSizeJaccardMatcher"),dr.FACTORY=r(t=>({to:r(n=>new dr(n,t),"to")}),"FACTORY");var ao=dr;function Ef(e,t){let n=new Set;return e.forEach(o=>{t.has(o)&&n.add(o)}),n.size/(e.size+t.size-n.size)}r(Ef,"computeScore");var Ju=require("fs"),uo=kt(require("path")),lo=kt(Zu());var Qu={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java"};function Xu(e){if(!(e in Qu))throw new Error(`Unrecognized language: ${e}`);return Qu[e]}r(Xu,"languageIdToWasmLanguage");var os=new Map;async function vf(e){let t,n=uo.default.resolve(uo.default.extname(__filename)!==".ts"?__dirname:uo.default.resolve(__dirname,"../../dist"),`tree-sitter-${e}.wasm`);try{t=await Ju.promises.readFile(n)}catch(o){throw o instanceof Error&&"code"in o&&typeof o.code=="string"&&o.name==="Error"?new At(`Could not load tree-sitter-${e}.wasm`,o):o}return lo.default.Language.load(t)}r(vf,"loadWasmLanguage");function Tf(e){let t=Xu(e);if(!os.has(t)){let n=vf(t);os.set(t,n)}return os.get(t)}r(Tf,"getLanguage");var ss=class ss extends Error{constructor(n,o){super(n);this.cause=o}};r(ss,"WrappedError");var is=ss;async function Xt(e,t){await lo.default.init();let n;try{n=new lo.default}catch(u){throw u&&typeof u=="object"&&"message"in u&&typeof u.message=="string"&&u.message.includes("table index is out of bounds")?new is(`Could not init Parse for language <${e}>`,u):u}let o=await Tf(e);n.setLanguage(o);let s=n.parse(t);return n.delete(),s}r(Xt,"parseTreeSitter");function Rf(e,t){let n=[];for(let o of e){if(!o[1]){let s=t.tree.getLanguage();o[1]=s.query(o[0])}n.push(...o[1].matches(t))}return n}r(Rf,"innerQuery");var Mf=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function Yu(e){return Rf([Mf],e).length==1}r(Yu,"queryPythonIsDocstring");var Ct=class Ct extends bn{constructor(t,n){super(t),this.windowLength=n}id(){return"fixed:"+this.windowLength}getWindowsDelineations(t){return so(this.windowLength,t)}_getCursorContextInfo(t){return yn(t,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=Ct.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){var s;let t=(s=await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))==null?void 0:s.startIndex,n=this.referenceDoc.offset,o=t?this.referenceDoc.source.slice(t,n):yn(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(o)}static syntaxAwareSupportsLanguage(t){switch(t){case"csharp":return!0;default:return!1}}similarityScore(t,n){return Nf(t,n)}async getEnclosingMemberStart(t,n){var s;let o;try{o=await Xt(this.referenceDoc.languageId,t);let u=o.rootNode.namedDescendantForIndex(n);for(;u&&!(Ct.isMember(u)||Ct.isBlock(u));)u=(s=u.parent)!=null?s:void 0;return u}finally{o==null||o.delete()}}static isMember(t){switch(t==null?void 0:t.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(t){switch(t==null?void 0:t.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};r(Ct,"BlockTokenSubsetMatcher"),Ct.FACTORY=r(t=>({to:r(n=>new Ct(n,t),"to")}),"FACTORY");var co=Ct;function Nf(e,t){let n=new Set;return t.forEach(o=>{e.has(o)&&n.add(o)}),n.size}r(Nf,"computeScore");function Pf(e,t){return(t.useSubsetMatching?co.FACTORY(t.snippetLength):ao.FACTORY(t.snippetLength)).to(e)}r(Pf,"getMatcher");async function el(e,t,n){let o=Pf(e,n);return n.maxTopSnippets===0?[]:(await t.filter(u=>u.source.length<n.maxCharPerFile&&u.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(u,i)=>(await u).concat((await o.findMatches(i,n.maxSnippetsPerFile)).map(a=>({relativePath:i.relativePath,...a}))),Promise.resolve([]))).filter(u=>u.score&&u.snippet&&u.score>n.threshold).sort((u,i)=>u.score-i.score).slice(-n.maxTopSnippets)}r(el,"getSimilarSnippets");var Re={};si(Re,{HasPropertyKey:()=>mo,IsArray:()=>le,IsAsyncIterator:()=>us,IsBigInt:()=>mr,IsBoolean:()=>Et,IsDate:()=>Yt,IsFunction:()=>ls,IsIterator:()=>cs,IsNull:()=>ds,IsNumber:()=>Ge,IsObject:()=>H,IsRegExp:()=>fr,IsString:()=>J,IsSymbol:()=>ms,IsUint8Array:()=>vt,IsUndefined:()=>ye});function mo(e,t){return t in e}r(mo,"HasPropertyKey");function us(e){return H(e)&&!le(e)&&!vt(e)&&Symbol.asyncIterator in e}r(us,"IsAsyncIterator");function le(e){return Array.isArray(e)}r(le,"IsArray");function mr(e){return typeof e=="bigint"}r(mr,"IsBigInt");function Et(e){return typeof e=="boolean"}r(Et,"IsBoolean");function Yt(e){return e instanceof globalThis.Date}r(Yt,"IsDate");function ls(e){return typeof e=="function"}r(ls,"IsFunction");function cs(e){return H(e)&&!le(e)&&!vt(e)&&Symbol.iterator in e}r(cs,"IsIterator");function ds(e){return e===null}r(ds,"IsNull");function Ge(e){return typeof e=="number"}r(Ge,"IsNumber");function H(e){return typeof e=="object"&&e!==null}r(H,"IsObject");function fr(e){return e instanceof globalThis.RegExp}r(fr,"IsRegExp");function J(e){return typeof e=="string"}r(J,"IsString");function ms(e){return typeof e=="symbol"}r(ms,"IsSymbol");function vt(e){return e instanceof globalThis.Uint8Array}r(vt,"IsUint8Array");function ye(e){return e===void 0}r(ye,"IsUndefined");function kf(e){return e.map(t=>fo(t))}r(kf,"ArrayType");function Ff(e){return new Date(e.getTime())}r(Ff,"DateType");function Af(e){return new Uint8Array(e)}r(Af,"Uint8ArrayType");function Of(e){return new RegExp(e.source,e.flags)}r(Of,"RegExpType");function Cf(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=fo(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=fo(e[n]);return t}r(Cf,"ObjectType");function fo(e){return le(e)?kf(e):Yt(e)?Ff(e):vt(e)?Af(e):fr(e)?Of(e):H(e)?Cf(e):e}r(fo,"Visit");function re(e){return fo(e)}r(re,"Clone");function tl(e,t){return t===void 0?re(e):re({...t,...e})}r(tl,"CloneType");function nl(e){return e!==null&&typeof e=="object"}r(nl,"IsObject");function rl(e){return globalThis.Array.isArray(e)&&!globalThis.ArrayBuffer.isView(e)}r(rl,"IsArray");function ol(e){return e===void 0}r(ol,"IsUndefined");function il(e){return typeof e=="number"}r(il,"IsNumber");var po;(function(e){e.InstanceMode="default",e.ExactOptionalPropertyTypes=!1,e.AllowArrayObject=!1,e.AllowNaN=!1,e.AllowNullVoid=!1;function t(i,a){return e.ExactOptionalPropertyTypes?a in i:i[a]!==void 0}r(t,"IsExactOptionalProperty"),e.IsExactOptionalProperty=t;function n(i){let a=nl(i);return e.AllowArrayObject?a:a&&!rl(i)}r(n,"IsObjectLike"),e.IsObjectLike=n;function o(i){return n(i)&&!(i instanceof Date)&&!(i instanceof Uint8Array)}r(o,"IsRecordLike"),e.IsRecordLike=o;function s(i){return e.AllowNaN?il(i):Number.isFinite(i)}r(s,"IsNumberLike"),e.IsNumberLike=s;function u(i){let a=ol(i);return e.AllowNullVoid?a||i===null:a}r(u,"IsVoidLike"),e.IsVoidLike=u})(po||(po={}));function Uf(e){return globalThis.Object.freeze(e).map(t=>pr(t))}r(Uf,"ImmutableArray");function Df(e){let t={};for(let n of Object.getOwnPropertyNames(e))t[n]=pr(e[n]);for(let n of Object.getOwnPropertySymbols(e))t[n]=pr(e[n]);return globalThis.Object.freeze(t)}r(Df,"ImmutableObject");function pr(e){return le(e)?Uf(e):Yt(e)?e:vt(e)?e:fr(e)?e:H(e)?Df(e):e}r(pr,"Immutable");function I(e,t){let n=t!==void 0?{...t,...e}:e;switch(po.InstanceMode){case"freeze":return pr(n);case"clone":return re(n);default:return n}}r(I,"CreateType");var ps=class ps extends Error{constructor(t){super(t)}};r(ps,"TypeBoxError");var Ie=ps;var Se=Symbol.for("TypeBox.Transform"),at=Symbol.for("TypeBox.Readonly"),Ee=Symbol.for("TypeBox.Optional"),ze=Symbol.for("TypeBox.Hint"),S=Symbol.for("TypeBox.Kind");function _o(e){return H(e)&&e[at]==="Readonly"}r(_o,"IsReadonly");function qe(e){return H(e)&&e[Ee]==="Optional"}r(qe,"IsOptional");function _s(e){return W(e,"Any")}r(_s,"IsAny");function Tt(e){return W(e,"Array")}r(Tt,"IsArray");function _r(e){return W(e,"AsyncIterator")}r(_r,"IsAsyncIterator");function gs(e){return W(e,"BigInt")}r(gs,"IsBigInt");function hs(e){return W(e,"Boolean")}r(hs,"IsBoolean");function Ae(e){return W(e,"Computed")}r(Ae,"IsComputed");function gr(e){return W(e,"Constructor")}r(gr,"IsConstructor");function jf(e){return W(e,"Date")}r(jf,"IsDate");function hr(e){return W(e,"Function")}r(hr,"IsFunction");function en(e){return W(e,"Integer")}r(en,"IsInteger");function ce(e){return W(e,"Intersect")}r(ce,"IsIntersect");function yr(e){return W(e,"Iterator")}r(yr,"IsIterator");function W(e,t){return H(e)&&S in e&&e[S]===t}r(W,"IsKindOf");function go(e){return Et(e)||Ge(e)||J(e)}r(go,"IsLiteralValue");function Rt(e){return W(e,"Literal")}r(Rt,"IsLiteral");function je(e){return W(e,"MappedKey")}r(je,"IsMappedKey");function oe(e){return W(e,"MappedResult")}r(oe,"IsMappedResult");function Ut(e){return W(e,"Never")}r(Ut,"IsNever");function Bf(e){return W(e,"Not")}r(Bf,"IsNot");function Wf(e){return W(e,"Null")}r(Wf,"IsNull");function tn(e){return W(e,"Number")}r(tn,"IsNumber");function be(e){return W(e,"Object")}r(be,"IsObject");function br(e){return W(e,"Promise")}r(br,"IsPromise");function ys(e){return W(e,"Record")}r(ys,"IsRecord");function ae(e){return W(e,"Ref")}r(ae,"IsRef");function bs(e){return W(e,"RegExp")}r(bs,"IsRegExp");function Ir(e){return W(e,"String")}r(Ir,"IsString");function $f(e){return W(e,"Symbol")}r($f,"IsSymbol");function Be(e){return W(e,"TemplateLiteral")}r(Be,"IsTemplateLiteral");function Vf(e){return W(e,"This")}r(Vf,"IsThis");function xn(e){return H(e)&&Se in e}r(xn,"IsTransform");function ut(e){return W(e,"Tuple")}r(ut,"IsTuple");function Gf(e){return W(e,"Undefined")}r(Gf,"IsUndefined");function V(e){return W(e,"Union")}r(V,"IsUnion");function zf(e){return W(e,"Uint8Array")}r(zf,"IsUint8Array");function qf(e){return W(e,"Unknown")}r(qf,"IsUnknown");function Kf(e){return W(e,"Unsafe")}r(Kf,"IsUnsafe");function Hf(e){return W(e,"Void")}r(Hf,"IsVoid");function Zf(e){return H(e)&&S in e&&J(e[S])}r(Zf,"IsKind");function We(e){return _s(e)||Tt(e)||hs(e)||gs(e)||_r(e)||Ae(e)||gr(e)||jf(e)||hr(e)||en(e)||ce(e)||yr(e)||Rt(e)||je(e)||oe(e)||Ut(e)||Bf(e)||Wf(e)||tn(e)||be(e)||br(e)||ys(e)||ae(e)||bs(e)||Ir(e)||$f(e)||Be(e)||Vf(e)||ut(e)||Gf(e)||V(e)||zf(e)||qf(e)||Kf(e)||Hf(e)||Zf(e)}r(We,"IsSchema");var _={};si(_,{IsAny:()=>ll,IsArray:()=>cl,IsAsyncIterator:()=>dl,IsBigInt:()=>ml,IsBoolean:()=>fl,IsComputed:()=>pl,IsConstructor:()=>_l,IsDate:()=>gl,IsFunction:()=>hl,IsImport:()=>np,IsInteger:()=>yl,IsIntersect:()=>bl,IsIterator:()=>Il,IsKind:()=>ql,IsKindOf:()=>D,IsLiteral:()=>wr,IsLiteralBoolean:()=>rp,IsLiteralNumber:()=>wl,IsLiteralString:()=>xl,IsLiteralValue:()=>Sl,IsMappedKey:()=>El,IsMappedResult:()=>vl,IsNever:()=>Tl,IsNot:()=>Rl,IsNull:()=>Ml,IsNumber:()=>Nl,IsObject:()=>Pl,IsOptional:()=>tp,IsPromise:()=>Ll,IsProperties:()=>ho,IsReadonly:()=>ep,IsRecord:()=>kl,IsRecursive:()=>op,IsRef:()=>Fl,IsRegExp:()=>Al,IsSchema:()=>xe,IsString:()=>Ol,IsSymbol:()=>Cl,IsTemplateLiteral:()=>Ul,IsThis:()=>Dl,IsTransform:()=>jl,IsTuple:()=>Bl,IsUint8Array:()=>$l,IsUndefined:()=>Wl,IsUnion:()=>Ss,IsUnionLiteral:()=>ip,IsUnknown:()=>Vl,IsUnsafe:()=>Gl,IsVoid:()=>zl,TypeGuardUnknownTypeError:()=>Is});var Es=class Es extends Ie{};r(Es,"TypeGuardUnknownTypeError");var Is=Es,Jf=["Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function sl(e){try{return new RegExp(e),!0}catch{return!1}}r(sl,"IsPattern");function xs(e){if(!J(e))return!1;for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}r(xs,"IsControlCharacterFree");function al(e){return ws(e)||xe(e)}r(al,"IsAdditionalProperties");function xr(e){return ye(e)||mr(e)}r(xr,"IsOptionalBigInt");function X(e){return ye(e)||Ge(e)}r(X,"IsOptionalNumber");function ws(e){return ye(e)||Et(e)}r(ws,"IsOptionalBoolean");function Z(e){return ye(e)||J(e)}r(Z,"IsOptionalString");function Xf(e){return ye(e)||J(e)&&xs(e)&&sl(e)}r(Xf,"IsOptionalPattern");function Yf(e){return ye(e)||J(e)&&xs(e)}r(Yf,"IsOptionalFormat");function ul(e){return ye(e)||xe(e)}r(ul,"IsOptionalSchema");function ep(e){return H(e)&&e[at]==="Readonly"}r(ep,"IsReadonly");function tp(e){return H(e)&&e[Ee]==="Optional"}r(tp,"IsOptional");function ll(e){return D(e,"Any")&&Z(e.$id)}r(ll,"IsAny");function cl(e){return D(e,"Array")&&e.type==="array"&&Z(e.$id)&&xe(e.items)&&X(e.minItems)&&X(e.maxItems)&&ws(e.uniqueItems)&&ul(e.contains)&&X(e.minContains)&&X(e.maxContains)}r(cl,"IsArray");function dl(e){return D(e,"AsyncIterator")&&e.type==="AsyncIterator"&&Z(e.$id)&&xe(e.items)}r(dl,"IsAsyncIterator");function ml(e){return D(e,"BigInt")&&e.type==="bigint"&&Z(e.$id)&&xr(e.exclusiveMaximum)&&xr(e.exclusiveMinimum)&&xr(e.maximum)&&xr(e.minimum)&&xr(e.multipleOf)}r(ml,"IsBigInt");function fl(e){return D(e,"Boolean")&&e.type==="boolean"&&Z(e.$id)}r(fl,"IsBoolean");function pl(e){return D(e,"Computed")&&J(e.target)&&le(e.parameters)&&e.parameters.every(t=>xe(t))}r(pl,"IsComputed");function _l(e){return D(e,"Constructor")&&e.type==="Constructor"&&Z(e.$id)&&le(e.parameters)&&e.parameters.every(t=>xe(t))&&xe(e.returns)}r(_l,"IsConstructor");function gl(e){return D(e,"Date")&&e.type==="Date"&&Z(e.$id)&&X(e.exclusiveMaximumTimestamp)&&X(e.exclusiveMinimumTimestamp)&&X(e.maximumTimestamp)&&X(e.minimumTimestamp)&&X(e.multipleOfTimestamp)}r(gl,"IsDate");function hl(e){return D(e,"Function")&&e.type==="Function"&&Z(e.$id)&&le(e.parameters)&&e.parameters.every(t=>xe(t))&&xe(e.returns)}r(hl,"IsFunction");function np(e){return D(e,"Import")&&mo(e,"$defs")&&H(e.$defs)&&ho(e.$defs)&&mo(e,"$ref")&&J(e.$ref)&&e.$ref in e.$defs}r(np,"IsImport");function yl(e){return D(e,"Integer")&&e.type==="integer"&&Z(e.$id)&&X(e.exclusiveMaximum)&&X(e.exclusiveMinimum)&&X(e.maximum)&&X(e.minimum)&&X(e.multipleOf)}r(yl,"IsInteger");function ho(e){return H(e)&&Object.entries(e).every(([t,n])=>xs(t)&&xe(n))}r(ho,"IsProperties");function bl(e){return D(e,"Intersect")&&!(J(e.type)&&e.type!=="object")&&le(e.allOf)&&e.allOf.every(t=>xe(t)&&!jl(t))&&Z(e.type)&&(ws(e.unevaluatedProperties)||ul(e.unevaluatedProperties))&&Z(e.$id)}r(bl,"IsIntersect");function Il(e){return D(e,"Iterator")&&e.type==="Iterator"&&Z(e.$id)&&xe(e.items)}r(Il,"IsIterator");function D(e,t){return H(e)&&S in e&&e[S]===t}r(D,"IsKindOf");function xl(e){return wr(e)&&J(e.const)}r(xl,"IsLiteralString");function wl(e){return wr(e)&&Ge(e.const)}r(wl,"IsLiteralNumber");function rp(e){return wr(e)&&Et(e.const)}r(rp,"IsLiteralBoolean");function wr(e){return D(e,"Literal")&&Z(e.$id)&&Sl(e.const)}r(wr,"IsLiteral");function Sl(e){return Et(e)||Ge(e)||J(e)}r(Sl,"IsLiteralValue");function El(e){return D(e,"MappedKey")&&le(e.keys)&&e.keys.every(t=>Ge(t)||J(t))}r(El,"IsMappedKey");function vl(e){return D(e,"MappedResult")&&ho(e.properties)}r(vl,"IsMappedResult");function Tl(e){return D(e,"Never")&&H(e.not)&&Object.getOwnPropertyNames(e.not).length===0}r(Tl,"IsNever");function Rl(e){return D(e,"Not")&&xe(e.not)}r(Rl,"IsNot");function Ml(e){return D(e,"Null")&&e.type==="null"&&Z(e.$id)}r(Ml,"IsNull");function Nl(e){return D(e,"Number")&&e.type==="number"&&Z(e.$id)&&X(e.exclusiveMaximum)&&X(e.exclusiveMinimum)&&X(e.maximum)&&X(e.minimum)&&X(e.multipleOf)}r(Nl,"IsNumber");function Pl(e){return D(e,"Object")&&e.type==="object"&&Z(e.$id)&&ho(e.properties)&&al(e.additionalProperties)&&X(e.minProperties)&&X(e.maxProperties)}r(Pl,"IsObject");function Ll(e){return D(e,"Promise")&&e.type==="Promise"&&Z(e.$id)&&xe(e.item)}r(Ll,"IsPromise");function kl(e){return D(e,"Record")&&e.type==="object"&&Z(e.$id)&&al(e.additionalProperties)&&H(e.patternProperties)&&(t=>{let n=Object.getOwnPropertyNames(t.patternProperties);return n.length===1&&sl(n[0])&&H(t.patternProperties)&&xe(t.patternProperties[n[0]])})(e)}r(kl,"IsRecord");function op(e){return H(e)&&ze in e&&e[ze]==="Recursive"}r(op,"IsRecursive");function Fl(e){return D(e,"Ref")&&Z(e.$id)&&J(e.$ref)}r(Fl,"IsRef");function Al(e){return D(e,"RegExp")&&Z(e.$id)&&J(e.source)&&J(e.flags)&&X(e.maxLength)&&X(e.minLength)}r(Al,"IsRegExp");function Ol(e){return D(e,"String")&&e.type==="string"&&Z(e.$id)&&X(e.minLength)&&X(e.maxLength)&&Xf(e.pattern)&&Yf(e.format)}r(Ol,"IsString");function Cl(e){return D(e,"Symbol")&&e.type==="symbol"&&Z(e.$id)}r(Cl,"IsSymbol");function Ul(e){return D(e,"TemplateLiteral")&&e.type==="string"&&J(e.pattern)&&e.pattern[0]==="^"&&e.pattern[e.pattern.length-1]==="$"}r(Ul,"IsTemplateLiteral");function Dl(e){return D(e,"This")&&Z(e.$id)&&J(e.$ref)}r(Dl,"IsThis");function jl(e){return H(e)&&Se in e}r(jl,"IsTransform");function Bl(e){return D(e,"Tuple")&&e.type==="array"&&Z(e.$id)&&Ge(e.minItems)&&Ge(e.maxItems)&&e.minItems===e.maxItems&&(ye(e.items)&&ye(e.additionalItems)&&e.minItems===0||le(e.items)&&e.items.every(t=>xe(t)))}r(Bl,"IsTuple");function Wl(e){return D(e,"Undefined")&&e.type==="undefined"&&Z(e.$id)}r(Wl,"IsUndefined");function ip(e){return Ss(e)&&e.anyOf.every(t=>xl(t)||wl(t))}r(ip,"IsUnionLiteral");function Ss(e){return D(e,"Union")&&Z(e.$id)&&H(e)&&le(e.anyOf)&&e.anyOf.every(t=>xe(t))}r(Ss,"IsUnion");function $l(e){return D(e,"Uint8Array")&&e.type==="Uint8Array"&&Z(e.$id)&&X(e.minByteLength)&&X(e.maxByteLength)}r($l,"IsUint8Array");function Vl(e){return D(e,"Unknown")&&Z(e.$id)}r(Vl,"IsUnknown");function Gl(e){return D(e,"Unsafe")}r(Gl,"IsUnsafe");function zl(e){return D(e,"Void")&&e.type==="void"&&Z(e.$id)}r(zl,"IsVoid");function ql(e){return H(e)&&S in e&&J(e[S])&&!Jf.includes(e[S])}r(ql,"IsKind");function xe(e){return H(e)&&(ll(e)||cl(e)||fl(e)||ml(e)||dl(e)||pl(e)||_l(e)||gl(e)||hl(e)||yl(e)||bl(e)||Il(e)||wr(e)||El(e)||vl(e)||Tl(e)||Rl(e)||Ml(e)||Nl(e)||Pl(e)||Ll(e)||kl(e)||Fl(e)||Al(e)||Ol(e)||Cl(e)||Ul(e)||Dl(e)||Bl(e)||Wl(e)||Ss(e)||$l(e)||Vl(e)||Gl(e)||zl(e)||ql(e))}r(xe,"IsSchema");var vs="(true|false)",Sr="(0|[1-9][0-9]*)",Ts="(.*)",sp="(?!.*)",Cw=`^${vs}$`,nn=`^${Sr}$`,rn=`^${Ts}$`,Kl=`^${sp}$`;function Hl(e,t){return e.includes(t)}r(Hl,"SetIncludes");function Zl(e){return[...new Set(e)]}r(Zl,"SetDistinct");function ap(e,t){return e.filter(n=>t.includes(n))}r(ap,"SetIntersect");function up(e,t){return e.reduce((n,o)=>ap(n,o),t)}r(up,"SetIntersectManyResolve");function Ql(e){return e.length===1?e[0]:e.length>1?up(e.slice(1),e[0]):[]}r(Ql,"SetIntersectMany");function Jl(e){let t=[];for(let n of e)t.push(...n);return t}r(Jl,"SetUnionMany");function Dt(e){return I({[S]:"Any"},e)}r(Dt,"Any");function wn(e,t){return I({[S]:"Array",type:"array",items:e},t)}r(wn,"Array");function Sn(e,t){return I({[S]:"AsyncIterator",type:"AsyncIterator",items:e},t)}r(Sn,"AsyncIterator");function G(e,t,n){return I({[S]:"Computed",target:e,parameters:t},n)}r(G,"Computed");function lp(e,t){let{[t]:n,...o}=e;return o}r(lp,"DiscardKey");function ue(e,t){return t.reduce((n,o)=>lp(n,o),e)}r(ue,"Discard");function Y(e){return I({[S]:"Never",not:{}},e)}r(Y,"Never");function $(e){return I({[S]:"MappedResult",properties:e})}r($,"MappedResult");function En(e,t,n){return I({[S]:"Constructor",type:"Constructor",parameters:e,returns:t},n)}r(En,"Constructor");function _t(e,t,n){return I({[S]:"Function",type:"Function",parameters:e,returns:t},n)}r(_t,"Function");function Er(e,t){return I({[S]:"Union",anyOf:e},t)}r(Er,"UnionCreate");function cp(e){return e.some(t=>qe(t))}r(cp,"IsUnionOptional");function Xl(e){return e.map(t=>qe(t)?dp(t):t)}r(Xl,"RemoveOptionalFromRest");function dp(e){return ue(e,[Ee])}r(dp,"RemoveOptionalFromType");function mp(e,t){return cp(e)?Oe(Er(Xl(e),t)):Er(Xl(e),t)}r(mp,"ResolveUnion");function gt(e,t){return e.length===1?I(e[0],t):e.length===0?Y(t):mp(e,t)}r(gt,"UnionEvaluated");function q(e,t){return e.length===0?Y(t):e.length===1?I(e[0],t):Er(e,t)}r(q,"Union");var Ms=class Ms extends Ie{};r(Ms,"TemplateLiteralParserError");var yo=Ms;function fp(e){return e.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}r(fp,"Unescape");function Rs(e,t,n){return e[t]===n&&e.charCodeAt(t-1)!==92}r(Rs,"IsNonEscaped");function Mt(e,t){return Rs(e,t,"(")}r(Mt,"IsOpenParen");function vr(e,t){return Rs(e,t,")")}r(vr,"IsCloseParen");function Yl(e,t){return Rs(e,t,"|")}r(Yl,"IsSeparator");function pp(e){if(!(Mt(e,0)&&vr(e,e.length-1)))return!1;let t=0;for(let n=0;n<e.length;n++)if(Mt(e,n)&&(t+=1),vr(e,n)&&(t-=1),t===0&&n!==e.length-1)return!1;return!0}r(pp,"IsGroup");function _p(e){return e.slice(1,e.length-1)}r(_p,"InGroup");function gp(e){let t=0;for(let n=0;n<e.length;n++)if(Mt(e,n)&&(t+=1),vr(e,n)&&(t-=1),Yl(e,n)&&t===0)return!0;return!1}r(gp,"IsPrecedenceOr");function hp(e){for(let t=0;t<e.length;t++)if(Mt(e,t))return!0;return!1}r(hp,"IsPrecedenceAnd");function yp(e){let[t,n]=[0,0],o=[];for(let u=0;u<e.length;u++)if(Mt(e,u)&&(t+=1),vr(e,u)&&(t-=1),Yl(e,u)&&t===0){let i=e.slice(n,u);i.length>0&&o.push(vn(i)),n=u+1}let s=e.slice(n);return s.length>0&&o.push(vn(s)),o.length===0?{type:"const",const:""}:o.length===1?o[0]:{type:"or",expr:o}}r(yp,"Or");function bp(e){function t(s,u){if(!Mt(s,u))throw new yo("TemplateLiteralParser: Index must point to open parens");let i=0;for(let a=u;a<s.length;a++)if(Mt(s,a)&&(i+=1),vr(s,a)&&(i-=1),i===0)return[u,a];throw new yo("TemplateLiteralParser: Unclosed group parens in expression")}r(t,"Group");function n(s,u){for(let i=u;i<s.length;i++)if(Mt(s,i))return[u,i];return[u,s.length]}r(n,"Range");let o=[];for(let s=0;s<e.length;s++)if(Mt(e,s)){let[u,i]=t(e,s),a=e.slice(u,i+1);o.push(vn(a)),s=i}else{let[u,i]=n(e,s),a=e.slice(u,i);a.length>0&&o.push(vn(a)),s=i-1}return o.length===0?{type:"const",const:""}:o.length===1?o[0]:{type:"and",expr:o}}r(bp,"And");function vn(e){return pp(e)?vn(_p(e)):gp(e)?yp(e):hp(e)?bp(e):{type:"const",const:fp(e)}}r(vn,"TemplateLiteralParse");function Tn(e){return vn(e.slice(1,e.length-1))}r(Tn,"TemplateLiteralParseExact");var Ps=class Ps extends Ie{};r(Ps,"TemplateLiteralFiniteError");var Ns=Ps;function Ip(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="0"&&e.expr[1].type==="const"&&e.expr[1].const==="[1-9][0-9]*"}r(Ip,"IsNumberExpression");function xp(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="true"&&e.expr[1].type==="const"&&e.expr[1].const==="false"}r(xp,"IsBooleanExpression");function wp(e){return e.type==="const"&&e.const===".*"}r(wp,"IsStringExpression");function on(e){return Ip(e)||wp(e)?!1:xp(e)?!0:e.type==="and"?e.expr.every(t=>on(t)):e.type==="or"?e.expr.every(t=>on(t)):e.type==="const"?!0:(()=>{throw new Ns("Unknown expression type")})()}r(on,"IsTemplateLiteralExpressionFinite");function ec(e){let t=Tn(e.pattern);return on(t)}r(ec,"IsTemplateLiteralFinite");var ks=class ks extends Ie{};r(ks,"TemplateLiteralGenerateError");var Ls=ks;function*tc(e){if(e.length===1)return yield*e[0];for(let t of e[0])for(let n of tc(e.slice(1)))yield`${t}${n}`}r(tc,"GenerateReduce");function*Sp(e){return yield*tc(e.expr.map(t=>[...Tr(t)]))}r(Sp,"GenerateAnd");function*Ep(e){for(let t of e.expr)yield*Tr(t)}r(Ep,"GenerateOr");function*vp(e){return yield e.const}r(vp,"GenerateConst");function*Tr(e){return e.type==="and"?yield*Sp(e):e.type==="or"?yield*Ep(e):e.type==="const"?yield*vp(e):(()=>{throw new Ls("Unknown expression")})()}r(Tr,"TemplateLiteralExpressionGenerate");function bo(e){let t=Tn(e.pattern);return on(t)?[...Tr(t)]:[]}r(bo,"TemplateLiteralGenerate");function z(e,t){return I({[S]:"Literal",const:e,type:typeof e},t)}r(z,"Literal");function Io(e){return I({[S]:"Boolean",type:"boolean"},e)}r(Io,"Boolean");function Rn(e){return I({[S]:"BigInt",type:"bigint"},e)}r(Rn,"BigInt");function ht(e){return I({[S]:"Number",type:"number"},e)}r(ht,"Number");function jt(e){return I({[S]:"String",type:"string"},e)}r(jt,"String");function*Tp(e){let t=e.trim().replace(/"|'/g,"");return t==="boolean"?yield Io():t==="number"?yield ht():t==="bigint"?yield Rn():t==="string"?yield jt():yield(()=>{let n=t.split("|").map(o=>z(o.trim()));return n.length===0?Y():n.length===1?n[0]:gt(n)})()}r(Tp,"FromUnion");function*Rp(e){if(e[1]!=="{"){let t=z("$"),n=Fs(e.slice(1));return yield*[t,...n]}for(let t=2;t<e.length;t++)if(e[t]==="}"){let n=Tp(e.slice(2,t)),o=Fs(e.slice(t+1));return yield*[...n,...o]}yield z(e)}r(Rp,"FromTerminal");function*Fs(e){for(let t=0;t<e.length;t++)if(e[t]==="$"){let n=z(e.slice(0,t)),o=Rp(e.slice(t));return yield*[n,...o]}yield z(e)}r(Fs,"FromSyntax");function nc(e){return[...Fs(e)]}r(nc,"TemplateLiteralSyntax");var Cs=class Cs extends Ie{};r(Cs,"TemplateLiteralPatternError");var As=Cs;function Mp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}r(Mp,"Escape");function rc(e,t){return Be(e)?e.pattern.slice(1,e.pattern.length-1):V(e)?`(${e.anyOf.map(n=>rc(n,t)).join("|")})`:tn(e)?`${t}${Sr}`:en(e)?`${t}${Sr}`:gs(e)?`${t}${Sr}`:Ir(e)?`${t}${Ts}`:Rt(e)?`${t}${Mp(e.const.toString())}`:hs(e)?`${t}${vs}`:(()=>{throw new As(`Unexpected Kind '${e[S]}'`)})()}r(rc,"Visit");function Os(e){return`^${e.map(t=>rc(t,"")).join("")}$`}r(Os,"TemplateLiteralPattern");function sn(e){let n=bo(e).map(o=>z(o));return gt(n)}r(sn,"TemplateLiteralToUnion");function xo(e,t){let n=J(e)?Os(nc(e)):Os(e);return I({[S]:"TemplateLiteral",type:"string",pattern:n},t)}r(xo,"TemplateLiteral");function Np(e){return bo(e).map(n=>n.toString())}r(Np,"FromTemplateLiteral");function Pp(e){let t=[];for(let n of e)t.push(...Ce(n));return t}r(Pp,"FromUnion");function Lp(e){return[e.toString()]}r(Lp,"FromLiteral");function Ce(e){return[...new Set(Be(e)?Np(e):V(e)?Pp(e.anyOf):Rt(e)?Lp(e.const):tn(e)?["[number]"]:en(e)?["[number]"]:[])]}r(Ce,"IndexPropertyKeys");function kp(e,t,n){let o={};for(let s of Object.getOwnPropertyNames(t))o[s]=Bt(e,Ce(t[s]),n);return o}r(kp,"FromProperties");function Fp(e,t,n){return kp(e,t.properties,n)}r(Fp,"FromMappedResult");function oc(e,t,n){let o=Fp(e,t,n);return $(o)}r(oc,"IndexFromMappedResult");function sc(e,t){return e.map(n=>ac(n,t))}r(sc,"FromRest");function Ap(e){return e.filter(t=>!Ut(t))}r(Ap,"FromIntersectRest");function Op(e,t){return wo(Ap(sc(e,t)))}r(Op,"FromIntersect");function Cp(e){return e.some(t=>Ut(t))?[]:e}r(Cp,"FromUnionRest");function Up(e,t){return gt(Cp(sc(e,t)))}r(Up,"FromUnion");function Dp(e,t){return t in e?e[t]:t==="[number]"?gt(e):Y()}r(Dp,"FromTuple");function jp(e,t){return t==="[number]"?e:Y()}r(jp,"FromArray");function Bp(e,t){return t in e?e[t]:Y()}r(Bp,"FromProperty");function ac(e,t){var n;return ce(e)?Op(e.allOf,t):V(e)?Up(e.anyOf,t):ut(e)?Dp((n=e.items)!=null?n:[],t):Tt(e)?jp(e.items,t):be(e)?Bp(e.properties,t):Y()}r(ac,"IndexFromPropertyKey");function Us(e,t){return t.map(n=>ac(e,n))}r(Us,"IndexFromPropertyKeys");function ic(e,t){return gt(Us(e,t))}r(ic,"FromSchema");function Bt(e,t,n){if(ae(e)||ae(t)){let o="Index types using Ref parameters require both Type and Key to be of TSchema";if(!We(e)||!We(t))throw new Ie(o);return G("Index",[e,t])}return oe(t)?oc(e,t,n):je(t)?uc(e,t,n):I(We(t)?ic(e,Ce(t)):ic(e,t),n)}r(Bt,"Index");function Wp(e,t,n){return{[t]:Bt(e,[t],re(n))}}r(Wp,"MappedIndexPropertyKey");function $p(e,t,n){return t.reduce((o,s)=>({...o,...Wp(e,s,n)}),{})}r($p,"MappedIndexPropertyKeys");function Vp(e,t,n){return $p(e,t.keys,n)}r(Vp,"MappedIndexProperties");function uc(e,t,n){let o=Vp(e,t,n);return $(o)}r(uc,"IndexFromMappedKey");function Mn(e,t){return I({[S]:"Iterator",type:"Iterator",items:e},t)}r(Mn,"Iterator");function Gp(e){let t=[];for(let n in e)qe(e[n])||t.push(n);return t}r(Gp,"RequiredKeys");function zp(e,t){let n=Gp(e),o=n.length>0?{[S]:"Object",type:"object",properties:e,required:n}:{[S]:"Object",type:"object",properties:e};return I(o,t)}r(zp,"_Object");var ee=zp;function So(e,t){return I({[S]:"Promise",type:"Promise",item:e},t)}r(So,"Promise");function qp(e){return I(ue(e,[at]))}r(qp,"RemoveReadonly");function Kp(e){return I({...e,[at]:"Readonly"})}r(Kp,"AddReadonly");function Hp(e,t){return t===!1?qp(e):Kp(e)}r(Hp,"ReadonlyWithFlag");function Ke(e,t){let n=t!=null?t:!0;return oe(e)?lc(e,n):Hp(e,n)}r(Ke,"Readonly");function Zp(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=Ke(e[o],t);return n}r(Zp,"FromProperties");function Qp(e,t){return Zp(e.properties,t)}r(Qp,"FromMappedResult");function lc(e,t){let n=Qp(e,t);return $(n)}r(lc,"ReadonlyFromMappedResult");function He(e,t){return I(e.length>0?{[S]:"Tuple",type:"array",items:e,additionalItems:!1,minItems:e.length,maxItems:e.length}:{[S]:"Tuple",type:"array",minItems:e.length,maxItems:e.length},t)}r(He,"Tuple");function cc(e,t){return e in t?Ze(e,t[e]):$(t)}r(cc,"FromMappedResult");function Jp(e){return{[e]:z(e)}}r(Jp,"MappedKeyToKnownMappedResultProperties");function Xp(e){let t={};for(let n of e)t[n]=z(n);return t}r(Xp,"MappedKeyToUnknownMappedResultProperties");function Yp(e,t){return Hl(t,e)?Jp(e):Xp(t)}r(Yp,"MappedKeyToMappedResultProperties");function e_(e,t){let n=Yp(e,t);return cc(e,n)}r(e_,"FromMappedKey");function Rr(e,t){return t.map(n=>Ze(e,n))}r(Rr,"FromRest");function t_(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=Ze(e,t[o]);return n}r(t_,"FromProperties");function Ze(e,t){var o;let n={...t};return qe(t)?Oe(Ze(e,ue(t,[Ee]))):_o(t)?Ke(Ze(e,ue(t,[at]))):oe(t)?cc(e,t.properties):je(t)?e_(e,t.keys):gr(t)?En(Rr(e,t.parameters),Ze(e,t.returns),n):hr(t)?_t(Rr(e,t.parameters),Ze(e,t.returns),n):_r(t)?Sn(Ze(e,t.items),n):yr(t)?Mn(Ze(e,t.items),n):ce(t)?Me(Rr(e,t.allOf),n):V(t)?q(Rr(e,t.anyOf),n):ut(t)?He(Rr(e,(o=t.items)!=null?o:[]),n):be(t)?ee(t_(e,t.properties),n):Tt(t)?wn(Ze(e,t.items),n):br(t)?So(Ze(e,t.item),n):t}r(Ze,"FromSchemaType");function n_(e,t){let n={};for(let o of e)n[o]=Ze(o,t);return n}r(n_,"MappedFunctionReturnType");function dc(e,t,n){let o=We(e)?Ce(e):e,s=t({[S]:"MappedKey",keys:o}),u=n_(o,s);return ee(u,n)}r(dc,"Mapped");function r_(e){return I(ue(e,[Ee]))}r(r_,"RemoveOptional");function o_(e){return I({...e,[Ee]:"Optional"})}r(o_,"AddOptional");function i_(e,t){return t===!1?r_(e):o_(e)}r(i_,"OptionalWithFlag");function Oe(e,t){let n=t!=null?t:!0;return oe(e)?mc(e,n):i_(e,n)}r(Oe,"Optional");function s_(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=Oe(e[o],t);return n}r(s_,"FromProperties");function a_(e,t){return s_(e.properties,t)}r(a_,"FromMappedResult");function mc(e,t){let n=a_(e,t);return $(n)}r(mc,"OptionalFromMappedResult");function Mr(e,t={}){let n=e.every(s=>be(s)),o=We(t.unevaluatedProperties)?{unevaluatedProperties:t.unevaluatedProperties}:{};return I(t.unevaluatedProperties===!1||We(t.unevaluatedProperties)||n?{...o,[S]:"Intersect",type:"object",allOf:e}:{...o,[S]:"Intersect",allOf:e},t)}r(Mr,"IntersectCreate");function u_(e){return e.every(t=>qe(t))}r(u_,"IsIntersectOptional");function l_(e){return ue(e,[Ee])}r(l_,"RemoveOptionalFromType");function fc(e){return e.map(t=>qe(t)?l_(t):t)}r(fc,"RemoveOptionalFromRest");function c_(e,t){return u_(e)?Oe(Mr(fc(e),t)):Mr(fc(e),t)}r(c_,"ResolveIntersect");function wo(e,t={}){if(e.length===1)return I(e[0],t);if(e.length===0)return Y(t);if(e.some(n=>xn(n)))throw new Error("Cannot intersect transform types");return c_(e,t)}r(wo,"IntersectEvaluated");function Me(e,t){if(e.length===1)return I(e[0],t);if(e.length===0)return Y(t);if(e.some(n=>xn(n)))throw new Error("Cannot intersect transform types");return Mr(e,t)}r(Me,"Intersect");function Qe(...e){let[t,n]=typeof e[0]=="string"?[e[0],e[1]]:[e[0].$id,e[1]];if(typeof t!="string")throw new Ie("Ref: $ref must be a string");return I({[S]:"Ref",$ref:t},n)}r(Qe,"Ref");function d_(e,t){return G("Awaited",[G(e,t)])}r(d_,"FromComputed");function m_(e){return G("Awaited",[Qe(e)])}r(m_,"FromRef");function f_(e){return Me(pc(e))}r(f_,"FromIntersect");function p_(e){return q(pc(e))}r(p_,"FromUnion");function __(e){return Nn(e)}r(__,"FromPromise");function pc(e){return e.map(t=>Nn(t))}r(pc,"FromRest");function Nn(e,t){return I(Ae(e)?d_(e.target,e.parameters):ce(e)?f_(e.allOf):V(e)?p_(e.anyOf):br(e)?__(e.item):ae(e)?m_(e.$ref):e,t)}r(Nn,"Awaited");function _c(e){let t=[];for(let n of e)t.push(Nr(n));return t}r(_c,"FromRest");function g_(e){let t=_c(e);return Jl(t)}r(g_,"FromIntersect");function h_(e){let t=_c(e);return Ql(t)}r(h_,"FromUnion");function y_(e){return e.map((t,n)=>n.toString())}r(y_,"FromTuple");function b_(e){return["[number]"]}r(b_,"FromArray");function I_(e){return globalThis.Object.getOwnPropertyNames(e)}r(I_,"FromProperties");function x_(e){return w_?globalThis.Object.getOwnPropertyNames(e).map(n=>n[0]==="^"&&n[n.length-1]==="$"?n.slice(1,n.length-1):n):[]}r(x_,"FromPatternProperties");function Nr(e){var t;return ce(e)?g_(e.allOf):V(e)?h_(e.anyOf):ut(e)?y_((t=e.items)!=null?t:[]):Tt(e)?b_(e.items):be(e)?I_(e.properties):ys(e)?x_(e.patternProperties):[]}r(Nr,"KeyOfPropertyKeys");var w_=!1;function S_(e,t){return G("KeyOf",[G(e,t)])}r(S_,"FromComputed");function E_(e){return G("KeyOf",[Qe(e)])}r(E_,"FromRef");function v_(e,t){let n=Nr(e),o=T_(n),s=gt(o);return I(s,t)}r(v_,"KeyOfFromType");function T_(e){return e.map(t=>t==="[number]"?ht():z(t))}r(T_,"KeyOfPropertyKeysToRest");function Pn(e,t){return Ae(e)?S_(e.target,e.parameters):ae(e)?E_(e.$ref):oe(e)?gc(e,t):v_(e,t)}r(Pn,"KeyOf");function R_(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=Pn(e[o],re(t));return n}r(R_,"FromProperties");function M_(e,t){return R_(e.properties,t)}r(M_,"FromMappedResult");function gc(e,t){let n=M_(e,t);return $(n)}r(gc,"KeyOfFromMappedResult");function N_(e){let t=[];for(let n of e)t.push(...Nr(n));return Zl(t)}r(N_,"CompositeKeys");function P_(e){return e.filter(t=>!Ut(t))}r(P_,"FilterNever");function L_(e,t){let n=[];for(let o of e)n.push(...Us(o,[t]));return P_(n)}r(L_,"CompositeProperty");function k_(e,t){let n={};for(let o of t)n[o]=wo(L_(e,o));return n}r(k_,"CompositeProperties");function hc(e,t){let n=N_(e),o=k_(e,n);return ee(o,t)}r(hc,"Composite");function Eo(e){return I({[S]:"Date",type:"Date"},e)}r(Eo,"Date");function vo(e){return I({[S]:"Null",type:"null"},e)}r(vo,"Null");function To(e){return I({[S]:"Symbol",type:"symbol"},e)}r(To,"Symbol");function Ro(e){return I({[S]:"Undefined",type:"undefined"},e)}r(Ro,"Undefined");function Mo(e){return I({[S]:"Uint8Array",type:"Uint8Array"},e)}r(Mo,"Uint8Array");function Ln(e){return I({[S]:"Unknown"},e)}r(Ln,"Unknown");function F_(e){return e.map(t=>Ds(t,!1))}r(F_,"FromArray");function A_(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=Ke(Ds(e[n],!1));return t}r(A_,"FromProperties");function No(e,t){return t===!0?e:Ke(e)}r(No,"ConditionalReadonly");function Ds(e,t){return us(e)?No(Dt(),t):cs(e)?No(Dt(),t):le(e)?Ke(He(F_(e))):vt(e)?Mo():Yt(e)?Eo():H(e)?No(ee(A_(e)),t):ls(e)?No(_t([],Ln()),t):ye(e)?Ro():ds(e)?vo():ms(e)?To():mr(e)?Rn():Ge(e)?z(e):Et(e)?z(e):J(e)?z(e):ee({})}r(Ds,"FromValue");function yc(e,t){return I(Ds(e,!0),t)}r(yc,"Const");function bc(e,t){return He(e.parameters,t)}r(bc,"ConstructorParameters");function Ic(e,t){if(ye(e))throw new Error("Enum undefined or empty");let n=globalThis.Object.getOwnPropertyNames(e).filter(u=>isNaN(u)).map(u=>e[u]),s=[...new Set(n)].map(u=>z(u));return q(s,{...t,[ze]:"Enum"})}r(Ic,"Enum");var zs=class zs extends Ie{};r(zs,"ExtendsResolverError");var Bs=zs,b;(function(e){e[e.Union=0]="Union",e[e.True=1]="True",e[e.False=2]="False"})(b||(b={}));function Je(e){return e===b.False?e:b.True}r(Je,"IntoBooleanResult");function kn(e){throw new Bs(e)}r(kn,"Throw");function fe(e){return _.IsNever(e)||_.IsIntersect(e)||_.IsUnion(e)||_.IsUnknown(e)||_.IsAny(e)}r(fe,"IsStructuralRight");function pe(e,t){return _.IsNever(t)?Rc(e,t):_.IsIntersect(t)?Po(e,t):_.IsUnion(t)?Gs(e,t):_.IsUnknown(t)?Lc(e,t):_.IsAny(t)?Vs(e,t):kn("StructuralRight")}r(pe,"StructuralRight");function Vs(e,t){return b.True}r(Vs,"FromAnyRight");function O_(e,t){return _.IsIntersect(t)?Po(e,t):_.IsUnion(t)&&t.anyOf.some(n=>_.IsAny(n)||_.IsUnknown(n))?b.True:_.IsUnion(t)?b.Union:_.IsUnknown(t)||_.IsAny(t)?b.True:b.Union}r(O_,"FromAny");function C_(e,t){return _.IsUnknown(e)?b.False:_.IsAny(e)?b.Union:_.IsNever(e)?b.True:b.False}r(C_,"FromArrayRight");function U_(e,t){return _.IsObject(t)&&Lo(t)?b.True:fe(t)?pe(e,t):_.IsArray(t)?Je(Q(e.items,t.items)):b.False}r(U_,"FromArray");function D_(e,t){return fe(t)?pe(e,t):_.IsAsyncIterator(t)?Je(Q(e.items,t.items)):b.False}r(D_,"FromAsyncIterator");function j_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsBigInt(t)?b.True:b.False}r(j_,"FromBigInt");function vc(e,t){return _.IsLiteralBoolean(e)||_.IsBoolean(e)?b.True:b.False}r(vc,"FromBooleanRight");function B_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsBoolean(t)?b.True:b.False}r(B_,"FromBoolean");function W_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsConstructor(t)?e.parameters.length>t.parameters.length?b.False:e.parameters.every((n,o)=>Je(Q(t.parameters[o],n))===b.True)?Je(Q(e.returns,t.returns)):b.False:b.False}r(W_,"FromConstructor");function $_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsDate(t)?b.True:b.False}r($_,"FromDate");function V_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsFunction(t)?e.parameters.length>t.parameters.length?b.False:e.parameters.every((n,o)=>Je(Q(t.parameters[o],n))===b.True)?Je(Q(e.returns,t.returns)):b.False:b.False}r(V_,"FromFunction");function Tc(e,t){return _.IsLiteral(e)&&Re.IsNumber(e.const)||_.IsNumber(e)||_.IsInteger(e)?b.True:b.False}r(Tc,"FromIntegerRight");function G_(e,t){return _.IsInteger(t)||_.IsNumber(t)?b.True:fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):b.False}r(G_,"FromInteger");function Po(e,t){return t.allOf.every(n=>Q(e,n)===b.True)?b.True:b.False}r(Po,"FromIntersectRight");function z_(e,t){return e.allOf.some(n=>Q(n,t)===b.True)?b.True:b.False}r(z_,"FromIntersect");function q_(e,t){return fe(t)?pe(e,t):_.IsIterator(t)?Je(Q(e.items,t.items)):b.False}r(q_,"FromIterator");function K_(e,t){return _.IsLiteral(t)&&t.const===e.const?b.True:fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsString(t)?Pc(e,t):_.IsNumber(t)?Mc(e,t):_.IsInteger(t)?Tc(e,t):_.IsBoolean(t)?vc(e,t):b.False}r(K_,"FromLiteral");function Rc(e,t){return b.False}r(Rc,"FromNeverRight");function H_(e,t){return b.True}r(H_,"FromNever");function xc(e){let[t,n]=[e,0];for(;_.IsNot(t);)t=t.not,n+=1;return n%2===0?t:Ln()}r(xc,"UnwrapTNot");function Z_(e,t){return _.IsNot(e)?Q(xc(e),t):_.IsNot(t)?Q(e,xc(t)):kn("Invalid fallthrough for Not")}r(Z_,"FromNot");function Q_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsNull(t)?b.True:b.False}r(Q_,"FromNull");function Mc(e,t){return _.IsLiteralNumber(e)||_.IsNumber(e)||_.IsInteger(e)?b.True:b.False}r(Mc,"FromNumberRight");function J_(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsInteger(t)||_.IsNumber(t)?b.True:b.False}r(J_,"FromNumber");function Ue(e,t){return Object.getOwnPropertyNames(e.properties).length===t}r(Ue,"IsObjectPropertyCount");function wc(e){return Lo(e)}r(wc,"IsObjectStringLike");function Sc(e){return Ue(e,0)||Ue(e,1)&&"description"in e.properties&&_.IsUnion(e.properties.description)&&e.properties.description.anyOf.length===2&&(_.IsString(e.properties.description.anyOf[0])&&_.IsUndefined(e.properties.description.anyOf[1])||_.IsString(e.properties.description.anyOf[1])&&_.IsUndefined(e.properties.description.anyOf[0]))}r(Sc,"IsObjectSymbolLike");function js(e){return Ue(e,0)}r(js,"IsObjectNumberLike");function Ec(e){return Ue(e,0)}r(Ec,"IsObjectBooleanLike");function X_(e){return Ue(e,0)}r(X_,"IsObjectBigIntLike");function Y_(e){return Ue(e,0)}r(Y_,"IsObjectDateLike");function eg(e){return Lo(e)}r(eg,"IsObjectUint8ArrayLike");function tg(e){let t=ht();return Ue(e,0)||Ue(e,1)&&"length"in e.properties&&Je(Q(e.properties.length,t))===b.True}r(tg,"IsObjectFunctionLike");function ng(e){return Ue(e,0)}r(ng,"IsObjectConstructorLike");function Lo(e){let t=ht();return Ue(e,0)||Ue(e,1)&&"length"in e.properties&&Je(Q(e.properties.length,t))===b.True}r(Lo,"IsObjectArrayLike");function rg(e){let t=_t([Dt()],Dt());return Ue(e,0)||Ue(e,1)&&"then"in e.properties&&Je(Q(e.properties.then,t))===b.True}r(rg,"IsObjectPromiseLike");function Nc(e,t){return Q(e,t)===b.False||_.IsOptional(e)&&!_.IsOptional(t)?b.False:b.True}r(Nc,"Property");function Ne(e,t){return _.IsUnknown(e)?b.False:_.IsAny(e)?b.Union:_.IsNever(e)||_.IsLiteralString(e)&&wc(t)||_.IsLiteralNumber(e)&&js(t)||_.IsLiteralBoolean(e)&&Ec(t)||_.IsSymbol(e)&&Sc(t)||_.IsBigInt(e)&&X_(t)||_.IsString(e)&&wc(t)||_.IsSymbol(e)&&Sc(t)||_.IsNumber(e)&&js(t)||_.IsInteger(e)&&js(t)||_.IsBoolean(e)&&Ec(t)||_.IsUint8Array(e)&&eg(t)||_.IsDate(e)&&Y_(t)||_.IsConstructor(e)&&ng(t)||_.IsFunction(e)&&tg(t)?b.True:_.IsRecord(e)&&_.IsString(Ws(e))?t[ze]==="Record"?b.True:b.False:_.IsRecord(e)&&_.IsNumber(Ws(e))?Ue(t,0)?b.True:b.False:b.False}r(Ne,"FromObjectRight");function og(e,t){return fe(t)?pe(e,t):_.IsRecord(t)?Xe(e,t):_.IsObject(t)?(()=>{for(let n of Object.getOwnPropertyNames(t.properties)){if(!(n in e.properties)&&!_.IsOptional(t.properties[n]))return b.False;if(_.IsOptional(t.properties[n]))return b.True;if(Nc(e.properties[n],t.properties[n])===b.False)return b.False}return b.True})():b.False}r(og,"FromObject");function ig(e,t){return fe(t)?pe(e,t):_.IsObject(t)&&rg(t)?b.True:_.IsPromise(t)?Je(Q(e.item,t.item)):b.False}r(ig,"FromPromise");function Ws(e){return nn in e.patternProperties?ht():rn in e.patternProperties?jt():kn("Unknown record key pattern")}r(Ws,"RecordKey");function $s(e){return nn in e.patternProperties?e.patternProperties[nn]:rn in e.patternProperties?e.patternProperties[rn]:kn("Unable to get record value schema")}r($s,"RecordValue");function Xe(e,t){let[n,o]=[Ws(t),$s(t)];return _.IsLiteralString(e)&&_.IsNumber(n)&&Je(Q(e,o))===b.True?b.True:_.IsUint8Array(e)&&_.IsNumber(n)||_.IsString(e)&&_.IsNumber(n)||_.IsArray(e)&&_.IsNumber(n)?Q(e,o):_.IsObject(e)?(()=>{for(let s of Object.getOwnPropertyNames(e.properties))if(Nc(o,e.properties[s])===b.False)return b.False;return b.True})():b.False}r(Xe,"FromRecordRight");function sg(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Q($s(e),$s(t)):b.False}r(sg,"FromRecord");function ag(e,t){let n=_.IsRegExp(e)?jt():e,o=_.IsRegExp(t)?jt():t;return Q(n,o)}r(ag,"FromRegExp");function Pc(e,t){return _.IsLiteral(e)&&Re.IsString(e.const)||_.IsString(e)?b.True:b.False}r(Pc,"FromStringRight");function ug(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsString(t)?b.True:b.False}r(ug,"FromString");function lg(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsSymbol(t)?b.True:b.False}r(lg,"FromSymbol");function cg(e,t){return _.IsTemplateLiteral(e)?Q(sn(e),t):_.IsTemplateLiteral(t)?Q(e,sn(t)):kn("Invalid fallthrough for TemplateLiteral")}r(cg,"FromTemplateLiteral");function dg(e,t){return _.IsArray(t)&&e.items!==void 0&&e.items.every(n=>Q(n,t.items)===b.True)}r(dg,"IsArrayOfTuple");function mg(e,t){return _.IsNever(e)?b.True:_.IsUnknown(e)?b.False:_.IsAny(e)?b.Union:b.False}r(mg,"FromTupleRight");function fg(e,t){return fe(t)?pe(e,t):_.IsObject(t)&&Lo(t)||_.IsArray(t)&&dg(e,t)?b.True:_.IsTuple(t)?Re.IsUndefined(e.items)&&!Re.IsUndefined(t.items)||!Re.IsUndefined(e.items)&&Re.IsUndefined(t.items)?b.False:Re.IsUndefined(e.items)&&!Re.IsUndefined(t.items)||e.items.every((n,o)=>Q(n,t.items[o])===b.True)?b.True:b.False:b.False}r(fg,"FromTuple");function pg(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsUint8Array(t)?b.True:b.False}r(pg,"FromUint8Array");function _g(e,t){return fe(t)?pe(e,t):_.IsObject(t)?Ne(e,t):_.IsRecord(t)?Xe(e,t):_.IsVoid(t)?yg(e,t):_.IsUndefined(t)?b.True:b.False}r(_g,"FromUndefined");function Gs(e,t){return t.anyOf.some(n=>Q(e,n)===b.True)?b.True:b.False}r(Gs,"FromUnionRight");function gg(e,t){return e.anyOf.every(n=>Q(n,t)===b.True)?b.True:b.False}r(gg,"FromUnion");function Lc(e,t){return b.True}r(Lc,"FromUnknownRight");function hg(e,t){return _.IsNever(t)?Rc(e,t):_.IsIntersect(t)?Po(e,t):_.IsUnion(t)?Gs(e,t):_.IsAny(t)?Vs(e,t):_.IsString(t)?Pc(e,t):_.IsNumber(t)?Mc(e,t):_.IsInteger(t)?Tc(e,t):_.IsBoolean(t)?vc(e,t):_.IsArray(t)?C_(e,t):_.IsTuple(t)?mg(e,t):_.IsObject(t)?Ne(e,t):_.IsUnknown(t)?b.True:b.False}r(hg,"FromUnknown");function yg(e,t){return _.IsUndefined(e)||_.IsUndefined(e)?b.True:b.False}r(yg,"FromVoidRight");function bg(e,t){return _.IsIntersect(t)?Po(e,t):_.IsUnion(t)?Gs(e,t):_.IsUnknown(t)?Lc(e,t):_.IsAny(t)?Vs(e,t):_.IsObject(t)?Ne(e,t):_.IsVoid(t)?b.True:b.False}r(bg,"FromVoid");function Q(e,t){return _.IsTemplateLiteral(e)||_.IsTemplateLiteral(t)?cg(e,t):_.IsRegExp(e)||_.IsRegExp(t)?ag(e,t):_.IsNot(e)||_.IsNot(t)?Z_(e,t):_.IsAny(e)?O_(e,t):_.IsArray(e)?U_(e,t):_.IsBigInt(e)?j_(e,t):_.IsBoolean(e)?B_(e,t):_.IsAsyncIterator(e)?D_(e,t):_.IsConstructor(e)?W_(e,t):_.IsDate(e)?$_(e,t):_.IsFunction(e)?V_(e,t):_.IsInteger(e)?G_(e,t):_.IsIntersect(e)?z_(e,t):_.IsIterator(e)?q_(e,t):_.IsLiteral(e)?K_(e,t):_.IsNever(e)?H_(e,t):_.IsNull(e)?Q_(e,t):_.IsNumber(e)?J_(e,t):_.IsObject(e)?og(e,t):_.IsRecord(e)?sg(e,t):_.IsString(e)?ug(e,t):_.IsSymbol(e)?lg(e,t):_.IsTuple(e)?fg(e,t):_.IsPromise(e)?ig(e,t):_.IsUint8Array(e)?pg(e,t):_.IsUndefined(e)?_g(e,t):_.IsUnion(e)?gg(e,t):_.IsUnknown(e)?hg(e,t):_.IsVoid(e)?bg(e,t):kn(`Unknown left type operand '${e[S]}'`)}r(Q,"Visit");function Wt(e,t){return Q(e,t)}r(Wt,"ExtendsCheck");function Ig(e,t,n,o,s){let u={};for(let i of globalThis.Object.getOwnPropertyNames(e))u[i]=Fn(e[i],t,n,o,re(s));return u}r(Ig,"FromProperties");function xg(e,t,n,o,s){return Ig(e.properties,t,n,o,s)}r(xg,"FromMappedResult");function kc(e,t,n,o,s){let u=xg(e,t,n,o,s);return $(u)}r(kc,"ExtendsFromMappedResult");function wg(e,t,n,o){let s=Wt(e,t);return s===b.Union?q([n,o]):s===b.True?n:o}r(wg,"ExtendsResolve");function Fn(e,t,n,o,s){return oe(e)?kc(e,t,n,o,s):je(e)?I(Fc(e,t,n,o,s)):I(wg(e,t,n,o),s)}r(Fn,"Extends");function Sg(e,t,n,o,s){return{[e]:Fn(z(e),t,n,o,re(s))}}r(Sg,"FromPropertyKey");function Eg(e,t,n,o,s){return e.reduce((u,i)=>({...u,...Sg(i,t,n,o,s)}),{})}r(Eg,"FromPropertyKeys");function vg(e,t,n,o,s){return Eg(e.keys,t,n,o,s)}r(vg,"FromMappedKey");function Fc(e,t,n,o,s){let u=vg(e,t,n,o,s);return $(u)}r(Fc,"ExtendsFromMappedKey");function Ac(e,t){return An(sn(e),t)}r(Ac,"ExcludeFromTemplateLiteral");function Tg(e,t){let n=e.filter(o=>Wt(o,t)===b.False);return n.length===1?n[0]:q(n)}r(Tg,"ExcludeRest");function An(e,t,n={}){return Be(e)?I(Ac(e,t),n):oe(e)?I(Oc(e,t),n):I(V(e)?Tg(e.anyOf,t):Wt(e,t)!==b.False?Y():e,n)}r(An,"Exclude");function Rg(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=An(e[o],t);return n}r(Rg,"FromProperties");function Mg(e,t){return Rg(e.properties,t)}r(Mg,"FromMappedResult");function Oc(e,t){let n=Mg(e,t);return $(n)}r(Oc,"ExcludeFromMappedResult");function Cc(e,t){return On(sn(e),t)}r(Cc,"ExtractFromTemplateLiteral");function Ng(e,t){let n=e.filter(o=>Wt(o,t)!==b.False);return n.length===1?n[0]:q(n)}r(Ng,"ExtractRest");function On(e,t,n){return Be(e)?I(Cc(e,t),n):oe(e)?I(Uc(e,t),n):I(V(e)?Ng(e.anyOf,t):Wt(e,t)!==b.False?e:Y(),n)}r(On,"Extract");function Pg(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=On(e[o],t);return n}r(Pg,"FromProperties");function Lg(e,t){return Pg(e.properties,t)}r(Lg,"FromMappedResult");function Uc(e,t){let n=Lg(e,t);return $(n)}r(Uc,"ExtractFromMappedResult");function Dc(e,t){return I(e.returns,t)}r(Dc,"InstanceType");function jc(e){return I({[S]:"Integer",type:"integer"},e)}r(jc,"Integer");function kg(e,t,n){return{[e]:lt(z(e),t,re(n))}}r(kg,"MappedIntrinsicPropertyKey");function Fg(e,t,n){return e.reduce((s,u)=>({...s,...kg(u,t,n)}),{})}r(Fg,"MappedIntrinsicPropertyKeys");function Ag(e,t,n){return Fg(e.keys,t,n)}r(Ag,"MappedIntrinsicProperties");function Bc(e,t,n){let o=Ag(e,t,n);return $(o)}r(Bc,"IntrinsicFromMappedKey");function Og(e){let[t,n]=[e.slice(0,1),e.slice(1)];return[t.toLowerCase(),n].join("")}r(Og,"ApplyUncapitalize");function Cg(e){let[t,n]=[e.slice(0,1),e.slice(1)];return[t.toUpperCase(),n].join("")}r(Cg,"ApplyCapitalize");function Ug(e){return e.toUpperCase()}r(Ug,"ApplyUppercase");function Dg(e){return e.toLowerCase()}r(Dg,"ApplyLowercase");function jg(e,t,n){let o=Tn(e.pattern);if(!on(o))return{...e,pattern:Wc(e.pattern,t)};let i=[...Tr(o)].map(c=>z(c)),a=$c(i,t),l=q(a);return xo([l],n)}r(jg,"FromTemplateLiteral");function Wc(e,t){return typeof e=="string"?t==="Uncapitalize"?Og(e):t==="Capitalize"?Cg(e):t==="Uppercase"?Ug(e):t==="Lowercase"?Dg(e):e:e.toString()}r(Wc,"FromLiteralValue");function $c(e,t){return e.map(n=>lt(n,t))}r($c,"FromRest");function lt(e,t,n={}){return je(e)?Bc(e,t,n):Be(e)?jg(e,t,n):V(e)?q($c(e.anyOf,t),n):Rt(e)?z(Wc(e.const,t),n):I(e,n)}r(lt,"Intrinsic");function Vc(e,t={}){return lt(e,"Capitalize",t)}r(Vc,"Capitalize");function Gc(e,t={}){return lt(e,"Lowercase",t)}r(Gc,"Lowercase");function zc(e,t={}){return lt(e,"Uncapitalize",t)}r(zc,"Uncapitalize");function qc(e,t={}){return lt(e,"Uppercase",t)}r(qc,"Uppercase");function Bg(e,t,n){let o={};for(let s of globalThis.Object.getOwnPropertyNames(e))o[s]=$t(e[s],t,re(n));return o}r(Bg,"FromProperties");function Wg(e,t,n){return Bg(e.properties,t,n)}r(Wg,"FromMappedResult");function Kc(e,t,n){let o=Wg(e,t,n);return $(o)}r(Kc,"OmitFromMappedResult");function $g(e,t){return e.map(n=>qs(n,t))}r($g,"FromIntersect");function Vg(e,t){return e.map(n=>qs(n,t))}r(Vg,"FromUnion");function Gg(e,t){let{[t]:n,...o}=e;return o}r(Gg,"FromProperty");function zg(e,t){return t.reduce((n,o)=>Gg(n,o),e)}r(zg,"FromProperties");function qg(e,t){let n=ue(e,[Se,"$id","required","properties"]),o=zg(e.properties,t);return ee(o,n)}r(qg,"FromObject");function Kg(e){let t=e.reduce((n,o)=>go(o)?[...n,z(o)]:n,[]);return q(t)}r(Kg,"UnionFromPropertyKeys");function qs(e,t){return ce(e)?Me($g(e.allOf,t)):V(e)?q(Vg(e.anyOf,t)):be(e)?qg(e,t):ee({})}r(qs,"OmitResolve");function $t(e,t,n){let o=le(t)?Kg(t):t,s=We(t)?Ce(t):t,u=ae(e),i=ae(t);return oe(e)?Kc(e,s,n):je(t)?Hc(e,t,n):u&&i?G("Omit",[e,o],n):!u&&i?G("Omit",[e,o],n):u&&!i?G("Omit",[e,o],n):I({...qs(e,s),...n})}r($t,"Omit");function Hg(e,t,n){return{[t]:$t(e,[t],re(n))}}r(Hg,"FromPropertyKey");function Zg(e,t,n){return t.reduce((o,s)=>({...o,...Hg(e,s,n)}),{})}r(Zg,"FromPropertyKeys");function Qg(e,t,n){return Zg(e,t.keys,n)}r(Qg,"FromMappedKey");function Hc(e,t,n){let o=Qg(e,t,n);return $(o)}r(Hc,"OmitFromMappedKey");function Jg(e,t,n){let o={};for(let s of globalThis.Object.getOwnPropertyNames(e))o[s]=Vt(e[s],t,re(n));return o}r(Jg,"FromProperties");function Xg(e,t,n){return Jg(e.properties,t,n)}r(Xg,"FromMappedResult");function Zc(e,t,n){let o=Xg(e,t,n);return $(o)}r(Zc,"PickFromMappedResult");function Yg(e,t){return e.map(n=>Ks(n,t))}r(Yg,"FromIntersect");function eh(e,t){return e.map(n=>Ks(n,t))}r(eh,"FromUnion");function th(e,t){let n={};for(let o of t)o in e&&(n[o]=e[o]);return n}r(th,"FromProperties");function nh(e,t){let n=ue(e,[Se,"$id","required","properties"]),o=th(e.properties,t);return ee(o,n)}r(nh,"FromObject");function rh(e){let t=e.reduce((n,o)=>go(o)?[...n,z(o)]:n,[]);return q(t)}r(rh,"UnionFromPropertyKeys");function Ks(e,t){return ce(e)?Me(Yg(e.allOf,t)):V(e)?q(eh(e.anyOf,t)):be(e)?nh(e,t):ee({})}r(Ks,"PickResolve");function Vt(e,t,n){let o=le(t)?rh(t):t,s=We(t)?Ce(t):t,u=ae(e),i=ae(t);return oe(e)?Zc(e,s,n):je(t)?Qc(e,t,n):u&&i?G("Pick",[e,o],n):!u&&i?G("Pick",[e,o],n):u&&!i?G("Pick",[e,o],n):I({...Ks(e,s),...n})}r(Vt,"Pick");function oh(e,t,n){return{[t]:Vt(e,[t],re(n))}}r(oh,"FromPropertyKey");function ih(e,t,n){return t.reduce((o,s)=>({...o,...oh(e,s,n)}),{})}r(ih,"FromPropertyKeys");function sh(e,t,n){return ih(e,t.keys,n)}r(sh,"FromMappedKey");function Qc(e,t,n){let o=sh(e,t,n);return $(o)}r(Qc,"PickFromMappedKey");function ah(e,t){return G("Partial",[G(e,t)])}r(ah,"FromComputed");function uh(e){return G("Partial",[Qe(e)])}r(uh,"FromRef");function lh(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=Oe(e[n]);return t}r(lh,"FromProperties");function ch(e){let t=ue(e,[Se,"$id","required","properties"]),n=lh(e.properties);return ee(n,t)}r(ch,"FromObject");function Jc(e){return e.map(t=>Xc(t))}r(Jc,"FromRest");function Xc(e){return Ae(e)?ah(e.target,e.parameters):ae(e)?uh(e.$ref):ce(e)?Me(Jc(e.allOf)):V(e)?q(Jc(e.anyOf)):be(e)?ch(e):ee({})}r(Xc,"PartialResolve");function Cn(e,t){return oe(e)?Yc(e,t):I({...Xc(e),...t})}r(Cn,"Partial");function dh(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=Cn(e[o],re(t));return n}r(dh,"FromProperties");function mh(e,t){return dh(e.properties,t)}r(mh,"FromMappedResult");function Yc(e,t){let n=mh(e,t);return $(n)}r(Yc,"PartialFromMappedResult");function an(e,t,n){return I({[S]:"Record",type:"object",patternProperties:{[e]:t}},n)}r(an,"RecordCreateFromPattern");function Hs(e,t,n){let o={};for(let s of e)o[s]=t;return ee(o,{...n,[ze]:"Record"})}r(Hs,"RecordCreateFromKeys");function fh(e,t,n){return ec(e)?Hs(Ce(e),t,n):an(e.pattern,t,n)}r(fh,"FromTemplateLiteralKey");function ph(e,t,n){return Hs(Ce(q(e)),t,n)}r(ph,"FromUnionKey");function _h(e,t,n){return Hs([e.toString()],t,n)}r(_h,"FromLiteralKey");function gh(e,t,n){return an(e.source,t,n)}r(gh,"FromRegExpKey");function hh(e,t,n){let o=ye(e.pattern)?rn:e.pattern;return an(o,t,n)}r(hh,"FromStringKey");function yh(e,t,n){return an(rn,t,n)}r(yh,"FromAnyKey");function bh(e,t,n){return an(Kl,t,n)}r(bh,"FromNeverKey");function Ih(e,t,n){return an(nn,t,n)}r(Ih,"FromIntegerKey");function xh(e,t,n){return an(nn,t,n)}r(xh,"FromNumberKey");function ko(e,t,n={}){return Ae(t)?G("Record",[e,G(t.target,t.parameters)],n):Ae(e)?G("Record",[G(t.target,t.parameters),t],n):ae(e)?G("Record",[Qe(e.$ref),t]):V(e)?ph(e.anyOf,t,n):Be(e)?fh(e,t,n):Rt(e)?_h(e.const,t,n):en(e)?Ih(e,t,n):tn(e)?xh(e,t,n):bs(e)?gh(e,t,n):Ir(e)?hh(e,t,n):_s(e)?yh(e,t,n):Ut(e)?bh(e,t,n):Y(n)}r(ko,"Record");function wh(e,t){return G("Required",[G(e,t)])}r(wh,"FromComputed");function Sh(e){return G("Required",[Qe(e)])}r(Sh,"FromRef");function Eh(e){let t={};for(let n of globalThis.Object.getOwnPropertyNames(e))t[n]=ue(e[n],[Ee]);return t}r(Eh,"FromProperties");function vh(e){let t=ue(e,[Se,"$id","required","properties"]),n=Eh(e.properties);return ee(n,t)}r(vh,"FromObject");function ed(e){return e.map(t=>td(t))}r(ed,"FromRest");function td(e){return Ae(e)?wh(e.target,e.parameters):ae(e)?Sh(e.$ref):ce(e)?Me(ed(e.allOf)):V(e)?q(ed(e.anyOf)):be(e)?vh(e):ee({})}r(td,"RequiredResolve");function Un(e,t){return oe(e)?nd(e,t):I({...td(e),...t})}r(Un,"Required");function Th(e,t){let n={};for(let o of globalThis.Object.getOwnPropertyNames(e))n[o]=Un(e[o],t);return n}r(Th,"FromProperties");function Rh(e,t){return Th(e.properties,t)}r(Rh,"FromMappedResult");function nd(e,t){let n=Rh(e,t);return $(n)}r(nd,"RequiredFromMappedResult");function Mh(e,t){return t.map(n=>ae(n)?rd(e,n.$ref):Ye(e,n))}r(Mh,"DerefParameters");function rd(e,t){return t in e?ae(e[t])?rd(e,e[t].$ref):Ye(e,e[t]):Y()}r(rd,"Deref");function Nh(e){return Nn(e[0])}r(Nh,"FromAwaited");function Ph(e){return Bt(e[0],e[1])}r(Ph,"FromIndex");function Lh(e){return Pn(e[0])}r(Lh,"FromKeyOf");function kh(e){return Cn(e[0])}r(kh,"FromPartial");function Fh(e){return $t(e[0],e[1])}r(Fh,"FromOmit");function Ah(e){return Vt(e[0],e[1])}r(Ah,"FromPick");function Oh(e){return ko(e[0],e[1])}r(Oh,"FromRecord");function Ch(e){return Un(e[0])}r(Ch,"FromRequired");function Uh(e,t,n){let o=Mh(e,n);return t==="Awaited"?Nh(o):t==="Index"?Ph(o):t==="KeyOf"?Lh(o):t==="Partial"?kh(o):t==="Omit"?Fh(o):t==="Pick"?Ah(o):t==="Record"?Oh(o):t==="Required"?Ch(o):Y()}r(Uh,"FromComputed");function Dh(e,t){return ee(globalThis.Object.keys(t).reduce((n,o)=>({...n,[o]:Ye(e,t[o])}),{}))}r(Dh,"FromObject");function jh(e,t,n){return En(Pr(e,t),Ye(e,n))}r(jh,"FromConstructor");function Bh(e,t,n){return _t(Pr(e,t),Ye(e,n))}r(Bh,"FromFunction");function Wh(e,t){return He(Pr(e,t))}r(Wh,"FromTuple");function $h(e,t){return Me(Pr(e,t))}r($h,"FromIntersect");function Vh(e,t){return q(Pr(e,t))}r(Vh,"FromUnion");function Gh(e,t){return wn(Ye(e,t))}r(Gh,"FromArray");function zh(e,t){return Sn(Ye(e,t))}r(zh,"FromAsyncIterator");function qh(e,t){return Mn(Ye(e,t))}r(qh,"FromIterator");function Pr(e,t){return t.map(n=>Ye(e,n))}r(Pr,"FromRest");function Ye(e,t){return qe(t)?I(Ye(e,ue(t,[Ee])),t):_o(t)?I(Ye(e,ue(t,[at])),t):Tt(t)?I(Gh(e,t.items),t):_r(t)?I(zh(e,t.items),t):Ae(t)?I(Uh(e,t.target,t.parameters)):gr(t)?I(jh(e,t.parameters,t.returns),t):hr(t)?I(Bh(e,t.parameters,t.returns),t):ce(t)?I($h(e,t.allOf),t):yr(t)?I(qh(e,t.items),t):be(t)?I(Dh(e,t.properties),t):ut(t)?I(Wh(e,t.items||[]),t):V(t)?I(Vh(e,t.anyOf),t):t}r(Ye,"FromType");function Kh(e,t){return t in e?Ye(e,e[t]):Y()}r(Kh,"ComputeType");function od(e){return globalThis.Object.getOwnPropertyNames(e).reduce((t,n)=>({...t,[n]:Kh(e,n)}),{})}r(od,"ComputeModuleProperties");var Qs=class Qs{constructor(t){let n=od(t),o=this.WithIdentifiers(n);this.$defs=o}Import(t,n){let o={...this.$defs,[t]:I(this.$defs[t],n)};return I({[S]:"Import",$defs:o,$ref:t})}WithIdentifiers(t){return globalThis.Object.getOwnPropertyNames(t).reduce((n,o)=>({...n,[o]:{...t[o],$id:o}}),{})}};r(Qs,"TModule");var Zs=Qs;function id(e){return new Zs(e)}r(id,"Module");function sd(e,t){return I({[S]:"Not",not:e},t)}r(sd,"Not");function ad(e,t){return He(e.parameters,t)}r(ad,"Parameters");function ud(e){return Ke(Oe(e))}r(ud,"ReadonlyOptional");var Hh=0;function ld(e,t={}){ye(t.$id)&&(t.$id=`T${Hh++}`);let n=tl(e({[S]:"This",$ref:`${t.$id}`}));return n.$id=t.$id,I({[ze]:"Recursive",...n},t)}r(ld,"Recursive");function cd(e,t){let n=J(e)?new globalThis.RegExp(e):e;return I({[S]:"RegExp",type:"RegExp",source:n.source,flags:n.flags},t)}r(cd,"RegExp");function Zh(e){var t;return ce(e)?e.allOf:V(e)?e.anyOf:ut(e)?(t=e.items)!=null?t:[]:[]}r(Zh,"RestResolve");function dd(e){return Zh(e)}r(dd,"Rest");function md(e,t){return I(e.returns,t)}r(md,"ReturnType");var Ys=class Ys{constructor(t){this.schema=t}Decode(t){return new Xs(this.schema,t)}};r(Ys,"TransformDecodeBuilder");var Js=Ys,ea=class ea{constructor(t,n){this.schema=t,this.decode=n}EncodeTransform(t,n){let u={Encode:r(i=>n[Se].Encode(t(i)),"Encode"),Decode:r(i=>this.decode(n[Se].Decode(i)),"Decode")};return{...n,[Se]:u}}EncodeSchema(t,n){let o={Decode:this.decode,Encode:t};return{...n,[Se]:o}}Encode(t){return xn(this.schema)?this.EncodeTransform(t,this.schema):this.EncodeSchema(t,this.schema)}};r(ea,"TransformEncodeBuilder");var Xs=ea;function fd(e){return new Js(e)}r(fd,"Transform");function pd(e={}){var t;return I({[S]:(t=e[S])!=null?t:"Unsafe"},e)}r(pd,"Unsafe");function _d(e){return I({[S]:"Void",type:"void"},e)}r(_d,"Void");var ta={};si(ta,{Any:()=>Dt,Array:()=>wn,AsyncIterator:()=>Sn,Awaited:()=>Nn,BigInt:()=>Rn,Boolean:()=>Io,Capitalize:()=>Vc,Composite:()=>hc,Const:()=>yc,Constructor:()=>En,ConstructorParameters:()=>bc,Date:()=>Eo,Enum:()=>Ic,Exclude:()=>An,Extends:()=>Fn,Extract:()=>On,Function:()=>_t,Index:()=>Bt,InstanceType:()=>Dc,Integer:()=>jc,Intersect:()=>Me,Iterator:()=>Mn,KeyOf:()=>Pn,Literal:()=>z,Lowercase:()=>Gc,Mapped:()=>dc,Module:()=>id,Never:()=>Y,Not:()=>sd,Null:()=>vo,Number:()=>ht,Object:()=>ee,Omit:()=>$t,Optional:()=>Oe,Parameters:()=>ad,Partial:()=>Cn,Pick:()=>Vt,Promise:()=>So,Readonly:()=>Ke,ReadonlyOptional:()=>ud,Record:()=>ko,Recursive:()=>ld,Ref:()=>Qe,RegExp:()=>cd,Required:()=>Un,Rest:()=>dd,ReturnType:()=>md,String:()=>jt,Symbol:()=>To,TemplateLiteral:()=>xo,Transform:()=>fd,Tuple:()=>He,Uint8Array:()=>Mo,Uncapitalize:()=>zc,Undefined:()=>Ro,Union:()=>q,Unknown:()=>Ln,Unsafe:()=>pd,Uppercase:()=>qc,Void:()=>_d});var yt=ta;var Qh=500,WF=8192-Qh;var Jh=yt.Object({relativePath:yt.Optional(yt.String()),uri:yt.String(),source:yt.String(),languageId:yt.String()}),$F=yt.Intersect([Jh,yt.Object({offset:yt.Number()})]);var Bo=kt(require("path")),It=require("worker_threads");function Dy(e){return new Promise(t=>{setTimeout(()=>t(`delay: ${e}`),e)})}r(Dy,"sleep");var Jd=["getSimilarSnippets","sleep"],Ta=class Ta{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=el;this.sleep=Dy;var t;!It.isMainThread&&((t=It.workerData)!=null&&t.port)&&(Qd(),process.cwd=()=>It.workerData.cwd,this.configureWorkerResponse(It.workerData.port))}initWorker(){let{port1:t,port2:n}=new It.MessageChannel;this.port=t,this.worker=new It.Worker(Bo.default.resolve(Bo.default.extname(__filename)!==".ts"?__dirname:Bo.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:n,cwd:process.cwd()},transferList:[n]}),this.port.on("message",o=>this.handleMessage(o)),this.port.on("error",o=>this.handleError(o))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let t of Jd)this.fns.set(t,this[t]),this.proxy(t)}unproxyFunctions(){for(let t of Jd){let n=this.fns.get(t);if(n)this[t]=n;else throw new Error(`Unproxy function not found: ${t}`)}}configureWorkerResponse(t){this.port=t,this.port.on("message",n=>void this.onMessage(n))}async onMessage({id:t,fn:n,args:o}){let s=this[n];if(!s)throw new Error(`Function not found: ${n}`);try{let u=await s.apply(this,o);this.port.postMessage({id:t,res:u})}catch(u){if(!(u instanceof Error))throw u;typeof u.code=="string"?this.port.postMessage({id:t,err:u,code:u.code}):this.port.postMessage({id:t,err:u})}}handleMessage({id:t,err:n,code:o,res:s}){let u=this.handlers.get(t);u&&(this.handlers.delete(t),n?(n.code=o,u.reject(n)):u.resolve(s))}handleError(t){var o;console.log(t);let n;if(t instanceof Error){n=t,n.code==="MODULE_NOT_FOUND"&&((o=n.message)!=null&&o.endsWith("workerProxy.js'"))&&(n=new At("Failed to load workerProxy.js"));let s=new Error().stack;n.stack&&(s!=null&&s.match(/^Error\n/))&&(n.stack+=s.replace(/^Error/,""))}else t&&typeof t=="object"&&"name"in t&&t.name==="ExitStatus"&&"status"in t&&typeof t.status=="number"?(n=new Error(`workerProxy.js exited with status ${t.status}`),n.code=`CopilotPromptWorkerExit${t.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(t)}`);for(let s of this.handlers.values())s.reject(n);throw n}proxy(t){this[t]=function(...n){let o=this.nextHandlerId++;return new Promise((s,u)=>{var i;this.handlers.set(o,{resolve:s,reject:u}),(i=this.port)==null||i.postMessage({id:o,fn:t,args:n})})}}};r(Ta,"WorkerProxy");var va=Ta,jy=new va;var Ra=class Ra{constructor(t,n,o){this.languageId=t;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=o}async getNodeMatchAtPosition(t,n,o){let s=await Xt(this.languageId,t);try{let i=s.rootNode.descendantForIndex(n);for(;i;){let a=this.nodeMatch[i.type];if(a){if(!this.nodeTypesWithBlockOrStmtChild.has(i.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(i.type),c=l==""?i.namedChildren[0]:i.childForFieldName(l);if((c==null?void 0:c.type)==a)break}i=i.parent}return i?o(i):void 0}finally{s.delete()}}getNextBlockAtPosition(t,n,o){return this.getNodeMatchAtPosition(t,n,s=>{let u=s.children.reverse().find(i=>i.type==this.nodeMatch[s.type]);if(u){if(this.languageId=="python"&&u.parent){let i=u.parent.type==":"?u.parent.parent:u.parent,a=i==null?void 0:i.nextSibling;for(;a&&a.type=="comment";){let l=a.startPosition.row==u.endPosition.row&&a.startPosition.column>=u.endPosition.column,c=a.startPosition.row>i.endPosition.row&&a.startPosition.column>i.startPosition.column;if(l||c)u=a,a=a.nextSibling;else break}}if(!(u.endIndex>=u.tree.rootNode.endIndex-1&&(u.hasError()||u.parent.hasError())))return o(u)}})}async isBlockBodyFinished(t,n,o){let s=(t+n).trimEnd(),u=await this.getNextBlockAtPosition(s,o,i=>i.endIndex);if(u!==void 0&&u<s.length){let i=u-t.length;return i>0?i:void 0}}getNodeStart(t,n){let o=t.trimEnd();return this.getNodeMatchAtPosition(o,n,s=>s.startIndex)}};r(Ra,"BaseBlockParser");var Wo=Ra,Ma=class Ma extends Wo{constructor(n,o,s,u,i){super(n,u,i);this.blockEmptyMatch=o;this.lineMatch=s}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,o){let s=await this.getNextBlockAtPosition(n,o,u=>{u.startIndex<o&&(o=u.startIndex);let i=n.substring(o,u.endIndex).trim();return i==""||i.replace(/\s/g,"")==this.blockEmptyMatch});return s===void 0||s}async isEmptyBlockStart(n,o){return o=Yd(n,o),this.isBlockStart(Wy(n,o))&&this.isBlockBodyEmpty(n,o)}};r(Ma,"RegexBasedBlockParser");var $o=Ma;function Wy(e,t){let n=e.lastIndexOf(`
`,t-1),o=e.indexOf(`
`,t);return o<0&&(o=e.length),e.slice(n+1,o)}r(Wy,"getLineAtOffset");function Yd(e,t){let n=t;for(;n>0&&/\s/.test(e.charAt(n-1));)n--;return n}r(Yd,"rewindToNearestNonWs");function Xd(e,t){let n=e.startIndex,o=e.startIndex-e.startPosition.column,s=t.substring(o,n);if(/^\s*$/.test(s))return s}r(Xd,"indent");function $y(e,t,n){if(t.startPosition.row<=e.startPosition.row)return!1;let o=Xd(e,n),s=Xd(t,n);return o!==void 0&&s!==void 0&&o.startsWith(s)}r($y,"outdented");var Na=class Na extends Wo{constructor(n,o,s,u,i,a,l){super(n,o,s);this.startKeywords=u;this.blockNodeType=i;this.emptyStatementType=a;this.curlyBraceLanguage=l}isBlockEmpty(n,o){var u,i;let s=n.text.trim();return this.curlyBraceLanguage&&(s.startsWith("{")&&(s=s.slice(1)),s.endsWith("}")&&(s=s.slice(0,-1)),s=s.trim()),!!(s.length==0||this.languageId=="python"&&(((u=n.parent)==null?void 0:u.type)=="class_definition"||((i=n.parent)==null?void 0:i.type)=="function_definition")&&n.children.length==1&&Yu(n.parent))}async isEmptyBlockStart(n,o){var u,i,a,l;if(o>n.length)throw new RangeError("Invalid offset");for(let c=o;c<n.length&&n.charAt(c)!=`
`;c++)if(/\S/.test(n.charAt(c)))return!1;o=Yd(n,o);let s=await Xt(this.languageId,n);try{let c=s.rootNode.descendantForIndex(o-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let g=c;for(;g.parent;){if(g.type=="function_signature"||g.type=="method_signature"){let h=c.nextSibling;return h&&g.hasError()&&$y(g,h,n)?!0:!g.children.find(y=>y.type==";")&&g.endIndex<=o}g=g.parent}}let d=null,m=null,f=null,p=c;for(;p!=null;){if(p.type==this.blockNodeType){m=p;break}if(this.nodeMatch[p.type]){f=p;break}if(p.type=="ERROR"){d=p;break}p=p.parent}if(m!=null){if(!m.parent||!this.nodeMatch[m.parent.type])return!1;if(this.languageId=="python"){let g=m.previousSibling;if(g!=null&&g.hasError()&&(g.text.startsWith('"""')||g.text.startsWith("'''")))return!0}return this.isBlockEmpty(m,o)}if(d!=null){if(((u=d.previousSibling)==null?void 0:u.type)=="module"||((i=d.previousSibling)==null?void 0:i.type)=="internal_module"||((a=d.previousSibling)==null?void 0:a.type)=="def")return!0;let g=[...d.children].reverse(),h=g.find(y=>this.startKeywords.includes(y.type)),x=g.find(y=>y.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(x=(l=g.find(N=>N.hasError()))==null?void 0:l.children.find(N=>N.type=="block"));let y,R=0;for(let N of d.children){if(N.type==":"&&R==0){y=N;break}N.type=="("&&(R+=1),N.type==")"&&(R-=1)}if(y&&h.endIndex<=y.startIndex&&y.nextSibling){if(h.type=="def"){let N=y.nextSibling;if(N.type=='"'||N.type=="'"||N.type=="ERROR"&&(N.text=='"""'||N.text=="'''"))return!0}return!1}break}case"javascript":{let y=g.find(k=>k.type=="formal_parameters");if(h.type=="class"&&y)return!0;let R=g.find(k=>k.type=="{");if(R&&R.startIndex>h.endIndex&&R.nextSibling!=null||g.find(k=>k.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let y=g.find(N=>N.type=="{");if(y&&y.startIndex>h.endIndex&&y.nextSibling!=null||g.find(N=>N.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return x&&x.startIndex>h.endIndex?this.isBlockEmpty(x,o):!0}}if(f!=null){let g=this.nodeMatch[f.type],h=f.children.slice().reverse().find(x=>x.type==g);if(h)return this.isBlockEmpty(h,o);if(this.nodeTypesWithBlockOrStmtChild.has(f.type)){let x=this.nodeTypesWithBlockOrStmtChild.get(f.type),y=x==""?f.children[0]:f.childForFieldName(x);if(y&&y.type!=this.blockNodeType&&y.type!=this.emptyStatementType)return!1}return!0}return!1}finally{s.delete()}}};r(Na,"TreeSitterBasedBlockParser");var qt=Na,sO={python:new qt("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new qt("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new qt("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new qt("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new $o("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new $o("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new qt("csharp",{},new Map([]),[],"block",null,!0),java:new qt("java",{},new Map([]),[],"block",null,!0)};function mn(e){switch(e){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}r(mn,"isTypeDefinition");var Vn=class Vn{constructor(t,n){this.start=t,this.length=n}static fromBounds(t,n){return new Vn(t,n-t)}get end(){return this.start+this.length}contains(t){return this.start<=t&&this.end>=t}containsRange(t){return this.start<=t.start&&this.end>=t.end}equals(t){return this.start===t.start&&this.length===t.length}getText(t){return t.slice(this.start,this.end)}getTextWithIndentation(t,n){let o=[],s=this.start;for(s=tm(t,t.length,s),em(o,n);s<this.end;)t[s]!=="\r"&&t[s]!==`
`?o.push(t[s++]):t[s]==="\r"&&s<t.length&&t[s+1]!==`
`||t[s]===`
`?(o.push(`
`),s=tm(t,t.length,++s),em(o,n)):s++;return o.join("")}};r(Vn,"TextRange"),Vn.empty=new Vn(0,0);var tt=Vn;function em(e,t){for(let n=0;n<t;n++)e.push(" ")}r(em,"appendIndent");function tm(e,t,n){for(;n<t&&(e[n]===" "||e[n]==="	");)n++;return n}r(tm,"consumeIndent");var Pa=class Pa{constructor(t,n,o,s,u,i,a,l,c){this.fileName=t;this.fullyQualifiedName=n;this.unqualifiedName=o;this.commentRange=s;this.nameRange=u;this.bodyRange=i;this.extentRange=a;this.kind=l;this.refKind=c;if(t.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}equals(t){return this.fileName===t.fileName&&this.fullyQualifiedName===t.fullyQualifiedName&&this.unqualifiedName===t.unqualifiedName&&this.commentRange.equals(t.commentRange)&&this.nameRange.equals(t.nameRange)&&this.bodyRange.equals(t.bodyRange)&&this.extentRange.equals(t.extentRange)&&this.kind===t.kind&&this.refKind===t.refKind}};r(Pa,"SymbolRange");var Gn=Pa,Ur=class Ur{constructor(){this.queriesCache=new Map}async executeQuery(t,n,o){let s;try{s=await Xt(this.languageId,n);let u=s.getLanguage(),a=this.getOrCreateQuery(u,o).matches(s.rootNode),l=new zr,c=[];for(let d of a){let m=this.createSymbolRange(l,t,n,d.captures);m&&c.push(m)}return c}finally{s==null||s.delete()}}getOrCreateQuery(t,n){let o=this.queriesCache.get(n);return o||(o=t.query(n),this.queriesCache.set(n,o)),o}createSymbolRange(t,n,o,s){let u=0,i=0,a=0,l=0,c=0,d=0,m=0,f=0,p=null,g=null;for(let y=0;y<s.length;y++){let R=s[y].name;R==="name"?(c=s[y].node.startIndex,d=s[y].node.endIndex):R==="reference"?(c=s[y].node.startIndex,d=s[y].node.endIndex,a=s[y].node.startIndex,l=s[y].node.endIndex,p=R):R==="body"?(m=s[y].node.startIndex,f=s[y].node.endIndex):R==="comment"?(u=u===0?s[y].node.startIndex:Math.min(u,s[y].node.startIndex),i=Math.max(i,s[y].node.endIndex)):R==="receiver"?g=tt.fromBounds(s[y].node.startIndex,s[y].node.endIndex).getText(o):(a=s[y].node.startIndex,l=s[y].node.endIndex,p=R)}p==="definition.module.filescoped"&&(f=o.length,l=f);let h=tt.fromBounds(a,l),x=a>0||l>0||c>0||d>0?new Gn(n,"","",tt.fromBounds(u,i),tt.fromBounds(c,d),tt.fromBounds(m,f),h,Ur.kindFromString(p),0):null;if(x){Ur.updateScopesForSymbol(t,x);let y=x.nameRange.getText(o),R=this.createNameFromScopes(o,t.toArray());return R=g?`${g}.${R}`:R,new Gn(n,R,y.substring(y.lastIndexOf(".")+1),x.commentRange,x.nameRange,x.bodyRange,x.extentRange,x.kind,0)}return null}static updateScopesForSymbol(t,n){var o;for(;t.tryPeek()&&!((o=t.peek())!=null&&o.extentRange.containsRange(n.extentRange));)t.pop();t.push(n)}static kindFromString(t){switch(t){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;default:throw new Error("NotSupportedException")}}};r(Ur,"SymbolExtractorBase");var dt=Ur;var La=class La extends dt{get languageId(){return"go"}extractSymbols(t,n){return this.executeQuery(t,n,Vy)}createNameFromScopes(t,n){return n.map(o=>o.nameRange.getText(t)).join(".")}};r(La,"GoSymbolExtractor");var Vo=La,ka=class ka extends dt{get languageId(){return"go"}createNameFromScopes(t,n){return n.length>0?n[n.length-1].nameRange.getText(t):""}extractReferences(t,n){return this.executeQuery(t,n,Gy)}async extractLocalReferences(t,n,o){let s=await this.executeQuery(t,n,zy),u=s.filter(l=>l.kind!==9),i=s.filter(l=>l.kind===9&&l.extentRange.containsRange(o)),a=[];for(let l of i)a.push(...u.filter(c=>l.extentRange.containsRange(c.extentRange)));return a}};r(ka,"GoReferenceExtractor");var Go=ka,Vy=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,Gy=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,zy=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;var Fa=class Fa extends dt{get languageId(){return"java"}extractSymbols(t,n){return this.executeQuery(t,n,qy)}createNameFromScopes(t,n){return n.map(o=>o.nameRange.getText(t)).join(".")}};r(Fa,"JavaSymbolExtractor");var zo=Fa,Aa=class Aa extends dt{get languageId(){return"java"}createNameFromScopes(t,n){return n.length>0?n[n.length-1].nameRange.getText(t):""}extractReferences(t,n){return this.executeQuery(t,n,Ky)}async extractLocalReferences(t,n,o){let s=await this.executeQuery(t,n,Hy),u=s.filter(l=>l.kind!==9),i=s.filter(l=>l.kind===9&&l.extentRange.containsRange(o)),a=[];for(let l of i)a.push(...u.filter(c=>l.extentRange.containsRange(c.extentRange)));return a}};r(Aa,"JavaReferenceExtractor");var qo=Aa,qy=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,Ky=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,Hy=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;var Zy=new Set(["int","str","float","bool","list","dict","tuple","set"]),Oa=class Oa extends dt{get languageId(){return"python"}extractSymbols(t,n){return this.executeQuery(t,n,Qy)}createNameFromScopes(t,n){return n.map(o=>o.nameRange.getText(t)).join(".")}};r(Oa,"PythonSymbolExtractor");var Ko=Oa,Ca=class Ca extends dt{get languageId(){return"python"}createNameFromScopes(t,n){return n.length>0?n[n.length-1].nameRange.getText(t):""}async extractReferences(t,n){return(await this.executeQuery(t,n,Jy)).filter(s=>!Zy.has(s.unqualifiedName))}async extractLocalReferences(t,n,o){let s=await this.executeQuery(t,n,Xy),u=s.filter(l=>l.kind!==9),i=s.filter(l=>l.kind===9&&l.extentRange.containsRange(o)),a=[];for(let l of i)a.push(...u.filter(c=>l.extentRange.containsRange(c.extentRange)));return a}};r(Ca,"PythonReferenceExtractor");var Ho=Ca,Qy=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,Jy=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,Xy=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;var rm=[{symbolExtractor:new zo,referenceExtractor:new qo,languageId:"java"},{symbolExtractor:new Vo,referenceExtractor:new Go,languageId:"go"},{symbolExtractor:new Ko,referenceExtractor:new Ho,languageId:"python"}];var om=rm.map(e=>e.referenceExtractor),im=rm.map(e=>e.symbolExtractor);var sm=require("fs");async function am(e,t,n,o){let s=new Map,u=0;for(let d of e){let m=d.node.fileName.toLowerCase(),f=s.get(m);f?f.symbols.push(d):s.set(m,{symbols:[d],topRank:u}),u++}if(s.delete(n.toLowerCase()),s.size===0)return[];let i=t,a=t/Math.min(4,s.size),l=[],c=Array.from(s.keys());c.sort((d,m)=>{let f=s.get(d).topRank,p=s.get(m).topRank;return f-p});for(let d of c){let m=s.get(d).symbols;if(m.length===0)continue;let f=m[0].node.fileName,p=m.reduce((g,h)=>g+h.node.extentRange.length,0);for(let g of m){if(i<=5)return l;let h=g.node.extentRange.length/p,x=Math.min(i,h*a),y=(await Yy([g])).makePrompt(x);i-=o.tokenLength(y),l.push({uri:f,value:y})}}return l}r(am,"symbolRangesToCodeSnippets");async function Yy(e){if(e.length===0)return new Jt([]);let t=e[0].node.fileName,n=[],o=er(t).fsPath,s=(await sm.promises.readFile(o)).toString();for(let u of e)um(u,s).forEach(i=>n.push(i));return new Jt(n)}r(Yy,"sameFileSymbolRangeToElidableText");function um(e,t){let o=[],s=e.node,u=t.substring(Ua(t,s.commentRange.start),s.commentRange.end);o.push([Da(u),1-3e-4]);let i=Ua(t,s.bodyRange.start),a=Ua(t,s.extentRange.start),l=s.bodyRange.length===0?t.substring(a,s.extentRange.end):t.substring(s.commentRange.length===0?a:s.commentRange.end,i);if(mn(s.kind)&&(l="BEGIN "+l.trimStart()),o.push([Da(l),1-1e-4]),e.children.length>0)for(let c of e.children)o.push(...um(c,t));else{let c=1-(mn(e.node.kind)?3e-4:4e-4),d=t.substring(i,s.bodyRange.end);o.push([Da(d),c])}return mn(s.kind)&&o.push(["END "+l.substring(6),1-1e-4]),o.filter(c=>c[0].length>0)}r(um,"prepareForElidableText");function Ua(e,t){for(;t-1>=0&&(e[t-1]==="	"||e[t-1]===" ");)t--;return t}r(Ua,"shiftLeftToNearestLineEndingOrAlphanumeric");function Da(e){let t=0;for(;t<e.length&&(e[t]==="\r"||e[t]===`
`);)t++;let n=e.length-1;for(;n>=0&&(e[n]==="\r"||e[n]===`
`||e[n]===" "||e[n]==="	");)n--;return e.substring(t,n+1)}r(Da,"trimLineEndingsAndTrailingWhitespace");var Ba=class Ba{constructor(t,n){this.referenceExtractors=new Map;this.index=t;for(let o of n)this.referenceExtractors.set(o.languageId,o)}};r(Ba,"ContextRetrievalStrategy");var ja=Ba,Wa=class Wa extends ja{constructor(t,n,o,s){super(t,n),this.caseSensitive=o,this.typesOnly=s}async getContextAtPositionAsync(t,n,o,s){let u=this.referenceExtractors.get(s);if(!u)return[];let i=await u.extractReferences(t,n),a=Array.from(i);a.sort((m,f)=>this.compareSymbolRanges(m,f,o));let l=[],c=new Set,d=await this.findDefinitionsViaUnqualifiedNames(a);this.typesOnly&&(d=d.filter(m=>mn(m.kind)));for(let m of d)c.has(JSON.stringify(m))||(c.add(JSON.stringify(m)),l.push(await this.makeSymbolRangeNodeFromDefinition(m)));return l}async findDefinitionsViaUnqualifiedNames(t){var c;let n=Array.from(new Set(t.map(d=>d.unqualifiedName))),o=!this.caseSensitive,s=await this.index.findPotentialDefinitionsAsync(n,o),u=r(d=>o?d.toLowerCase():d,"lowercaseIfCaseInsensitive"),i=r(d=>u(d.unqualifiedName),"getSymbolKey"),a=new Map;for(let d of s){let m=i(d),f=(c=a.get(m))!=null?c:[];a.set(m,[...f,d])}let l=[];for(let d of n){let m=a.get(u(d));!m||m.length>20||l.push(...m)}return l}async makeSymbolRangeNodeFromDefinition(t){if(mn(t.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(t.fileName,t.fullyQualifiedName+"."),o=await Promise.all(n.map(s=>this.makeSymbolRangeNodeFromDefinition(s)));return{node:t,children:o}}else return{node:t,children:[]}}compareSymbolRanges(t,n,o){let s=Math.abs(t.extentRange.start-o),u=Math.abs(n.extentRange.start-o);return s-u}};r(Wa,"DynamicallyTypedRetrievalStrategy");var Dr=Wa,$a=class $a{constructor(t,n){this.strategies=new Map;this.strategies.set("java",new Dr(t,n,!0,!0)),this.strategies.set("go",new Dr(t,n,!0,!0)),this.strategies.set("python",new Dr(t,n,!1,!1))}async getStringifiedContextAtPositionAsync(t,n,o,s,u){let i=await this.getContextAtPositionAsync(t,n,o,s),a=it();return am(i,u,t,a)}async getContextAtPositionAsync(t,n,o,s){return this.strategies.has(s)?this.strategies.get(s).getContextAtPositionAsync(t,n,o,s):[]}};r($a,"SyntaxAwareContextRetrieval");var Zo=$a;var fn={Id:"id"},Ve={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},B={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};var Ga=class Ga{constructor(t,n,o){this.tableName=t;this.createOptimizations=n;this.extraCreateDeclarations=o;this.primaryKey=new Va(fn.Id)}createTableQueries(){var t;return(t=this.createTableString)!=null||(this.createTableString=this.generateCreateTableString()),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let t=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&t.push(this.extraCreateDeclarations),t.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${t.join(`,
`)}`,")"].join(`
`)}insertQuery(t,n){var s;(s=this.cachedInsertQueryStrings)!=null||(this.cachedInsertQueryStrings=this.generateInsertQueryStrings());let o=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return t&&o.push("ON CONFLICT DO NOTHING"),o.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(t=>t.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}};r(Ga,"SQLTableQueryGenerator");var Qo=Ga,zn=class zn extends Qo{constructor(){super(zn.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${zn.tableName}' ('${Ve.FilePath}');`]);this.fields=[new $r(Ve.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new De(Ve.LastWriteTimeUtc,{notNull:!0})]}};r(zn,"DocumentQueryGenerator"),zn.tableName="Document";var jr=zn,pn=class pn extends Qo{constructor(){super(pn.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${pn.tableName}' ('${B.DocumentId}', '${B.ExtentStart}', '${B.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${pn.tableName}' ('${B.UnqualifiedName}');`],`FOREIGN KEY(${B.DocumentId}) REFERENCES Document(${fn.Id}) ON DELETE CASCADE`);this.fields=[new De(B.DocumentId),new $r(B.FullyQualifiedName,{notNull:!0}),new $r(B.UnqualifiedName,{notNull:!0}),new De(B.CommentStart,{notNull:!0}),new De(B.CommentLength,{notNull:!0}),new De(B.NameStart,{notNull:!0}),new De(B.NameLength,{notNull:!0}),new De(B.BodyStart,{notNull:!0}),new De(B.BodyLength,{notNull:!0}),new De(B.ExtentStart,{notNull:!0}),new De(B.ExtentLength,{notNull:!0}),new De(B.SymbolKind,{notNull:!0}),new De(B.RefKind,{notNull:!0})]}};r(pn,"SymbolQueryGenerator"),pn.tableName="Symbol";var Br=pn,za=class za{constructor(t,n){this.name=t;var o;this.notNull=(o=n==null?void 0:n.notNull)!=null?o:!1}};r(za,"SQLField");var Wr=za,qa=class qa extends Wr{constructor(t,n){var o,s,u;super(t,{notNull:n==null?void 0:n.notNull}),this.collate=(o=n==null?void 0:n.collate)!=null?o:!1,this.noCase=(s=n==null?void 0:n.noCase)!=null?s:!1,this.unique=(u=n==null?void 0:n.unique)!=null?u:!1}initColumnString(){let t=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,o=this.notNull?"NOT NULL":void 0,s=this.unique?"UNIQUE":void 0,u=[t,n,o,s].filter(i=>i).join(" ");return`'${this.name}' VARCHAR(500) ${u}`}};r(qa,"StringColumn");var $r=qa,Ka=class Ka extends Wr{initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}};r(Ka,"NumberColumn");var De=Ka,Ha=class Ha extends Wr{initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};r(Ha,"NumberPrimaryKeyColumn");var Va=Ha;var Za=class Za{constructor(t){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(t)}async doInit(t){let n=await t;return await this.create(n),n}async create(t){let n=r(s=>new Promise((u,i)=>{t.run(s,a=>{a?i(a):u()})}),"runQuery"),o=this.queryGenerator.createTableQueries();for(let s of o)await n(s)}async insert(t,n){let o=await this.init;return new Promise((s,u)=>{let i=this.queryGenerator.insertQuery(n,t.length);o.run(i,t.map(a=>Object.values(a)).flat(),function(a){a?u(a):s(this)})})}async getAllRows(){let t=await this.init;return nt(t,`SELECT * FROM ${this.queryGenerator.tableName}`,[])}async deleteRow(t){let n=await this.init;return nt(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${fn.Id} = ?`,[t])}};r(Za,"SQLTable");var Jo=Za,qn=class qn extends Jo{createQueryGenerator(){return new jr}async updateTimestamp(t,n){let o=await this.init;await nt(o,`UPDATE ${qn.tableName} SET ${Ve.LastWriteTimeUtc} = ? WHERE ${Ve.FilePath} = ?`,[n,t])}async deleteAllWithPath(t){let n=await this.init;await nt(n,`DELETE FROM ${qn.tableName} WHERE ${Ve.FilePath} = ?`,[t])}async getDocumentByFilePath(t){let n=await this.init;return nt(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${Ve.FilePath} = ?`,[t])}};r(qn,"DocumentTable"),qn.tableName=jr.tableName;var Pt=qn,Vr=class Vr extends Jo{createQueryGenerator(){return new Br}async clearAllSymbolsFromDocument(t){let n=await this.init;return nt(n,`DELETE FROM ${Vr.tableName} WHERE ${B.DocumentId} = ?`,[t])}};r(Vr,"SymbolTable"),Vr.tableName=Br.tableName;var ge=Vr;async function nt(e,t,n){return new Promise((o,s)=>e.all(t,n,(u,i)=>{u&&s(u),o(i)}))}r(nt,"runPromisifiedDBQuery");var wm=kt(xm());var eu=class eu{constructor(t){this.databaseFileName=t;this.innerJoinStatement=`INNER JOIN ${Pt.tableName} ON ${ge.tableName}.${B.DocumentId} = ${Pt.tableName}.${fn.Id}`;this.db=this.initDb(t),this.documentTable=new Pt(this.db),this.symbolTable=new ge(this.db)}async initDb(t){let n=await new Promise((o,s)=>{let u=new wm.Database(t,i=>{i?(console.error("Error opening database",i),s(i)):o(u)})});return await nt(n,"pragma journal_mode=wal",[]),await nt(n,"pragma synchronous=normal",[]),await nt(n,"pragma optimize=0x10002",[]),await nt(n,"pragma foreign_keys = ON",[]),n}async close(){let t=await this.db;return await this.documentTable.init,await this.symbolTable.init,new Promise((n,o)=>{t.close(s=>s?o(s):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(t,n){return await this.query([`SELECT * FROM ${ge.tableName}`,this.innerJoinStatement,`WHERE ${B.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${B.UnqualifiedName}`,"LIMIT ?"].join(`
`),[t,t,n])}async querySymbolsUsingUnqualifiedNames(t,n){let o=t.map(()=>"?").join(", "),s=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${ge.tableName}`,this.innerJoinStatement,`WHERE ${B.UnqualifiedName} ${s}IN (${o})`].join(`
`),t)}async querySymbolsUsingFullyQualifiedName(t){return this.query([`SELECT * FROM ${ge.tableName}`,this.innerJoinStatement,`WHERE ${B.FullyQualifiedName} = ?`].join(`
`),[t])}async querySymbolsContainingPosition(t,n){return this.query([`SELECT * FROM ${ge.tableName}`,this.innerJoinStatement,`WHERE ${Pt.tableName}.${Ve.FilePath} = ? AND ${ge.tableName}.${B.ExtentStart} <= ? AND (${ge.tableName}.${B.ExtentStart} + ${ge.tableName}.${B.ExtentLength}) >= ?`].join(`
`),[t,n,n])}async querySymbolsContainedByRange(t,n,o){return this.query([`SELECT * FROM ${ge.tableName}`,this.innerJoinStatement,`WHERE ${Pt.tableName}.${Ve.FilePath} = ? AND ${ge.tableName}.${B.ExtentStart} >= ? AND (${ge.tableName}.${B.ExtentStart} + ${ge.tableName}.${B.ExtentLength}) <= ?`,`ORDER BY ${ge.tableName}.${B.ExtentStart}`].join(`
`),[t,n,o])}async querySymbolsByQualifiedNamePrefix(t,n){return this.query([`SELECT * FROM ${ge.tableName}`,this.innerJoinStatement,`WHERE ${Pt.tableName}.${Ve.FilePath} = ? AND ${ge.tableName}.${B.FullyQualifiedName} LIKE ?`,`ORDER BY ${ge.tableName}.${B.ExtentStart}`].join(`
`),[t,`${n}%`])}async insertSymbols(t){return await this.symbolTable.insert(t,!1)}async insertDocument(t,n,o=!1){return await this.documentTable.insert([{filePath:t,lastWriteTimeUtc:n}],o)}async clearAllSymbolsFromDocument(t){return this.symbolTable.clearAllSymbolsFromDocument(t)}async updateDocumentTimestamp(t,n){return this.documentTable.updateTimestamp(t,n)}async deleteAllDocumentsWithPath(t){return this.documentTable.deleteAllWithPath(t)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(t){return this.documentTable.getDocumentByFilePath(t)}async query(t,n){let o=await this.db;return await this.documentTable.init,await this.symbolTable.init,nt(o,t,n)}};r(eu,"DocumentSymbolDatabase");var ei=eu;var tu=class tu{constructor(t){this.database=new ei(t)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(t,n,o){let s=await this.getOrCreateDocumentAsync(t,n);await this.database.clearAllSymbolsFromDocument(s.id),o.length>0&&await this.database.insertSymbols(o.map(u=>({documentId:s.id,fullyQualifiedName:u.fullyQualifiedName,unqualifiedName:u.unqualifiedName,commentStart:u.commentRange.start,commentLength:u.commentRange.length,nameStart:u.nameRange.start,nameLength:u.nameRange.length,bodyStart:u.bodyRange.start,bodyLength:u.bodyRange.length,extentStart:u.extentRange.start,extentLength:u.extentRange.length,symbolKind:u.kind,refKind:u.refKind}))),await this.database.updateDocumentTimestamp(t,n)}async addDocumentsAsync(t){for(let n of t)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(t){return await this.database.deleteAllDocumentsWithPath(t.toLowerCase())}async updateDocumentTimestampAsync(t,n){return await this.database.updateDocumentTimestamp(t.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(t,n){return Zn(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(t,n))}async findPotentialDefinitionsAsync(t,n){let o=[],u=0;for(;u<t.length;){let i=t.slice(u,u+500);u+=500;let a=await this.database.querySymbolsUsingUnqualifiedNames(i,n);o.push(...a)}return Zn(o)}async getDefinitionsAsync(t){return Zn(await this.database.querySymbolsUsingFullyQualifiedName(t))}async findSymbolsContainingPositionAsync(t,n){let o=await this.database.querySymbolsContainingPosition(t.toLowerCase(),n);return Zn(o)}async findSymbolsContainedByRangeAsync(t,n,o){return Zn(await this.database.querySymbolsContainedByRange(t.toLowerCase(),n,o))}async findSymbolsByFullyQualifiedNamePrefix(t,n){return Zn(await this.database.querySymbolsByQualifiedNamePrefix(t.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(t){let n=await this.database.getDocument(t);if(n!=null&&n.at(0))return n[0]}async getOrCreateDocumentAsync(t,n){let o=await this.database.getDocument(t);if(o!=null&&o.at(0))return o[0];await this.database.insertDocument(t,n,!0);let s=await this.database.getDocument(t);if(!s)throw Error("Unable to insert document");return s[0]}};r(tu,"SQLStorageReaderWriter");var ti=tu;function Zn(e){return e.map(t=>new Gn(t.filePath,t.fullyQualifiedName,t.unqualifiedName,new tt(t.commentStart,t.commentLength),new tt(t.nameStart,t.nameLength),new tt(t.bodyStart,t.bodyLength),new tt(t.extentStart,t.extentLength),t.symbolKind,t.refKind))}r(Zn,"symbolsToSymbolRanges");var ri=kt(require("fs/promises"));var nu=class nu{constructor(t,n){this.storage=new ti(t),this.symbolExtractors=n}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(t,n){let o=pu(er(t));if(!o)throw Error(`Cannot resolve a readable file path from ${t}`);let s;try{s=await ri.stat(o)}catch{await this.storage.deleteDocumentAsync(t);return}let u=s.mtimeMs,i=await this.storage.getDocumentAsync(t);if(i&&i.lastWriteTimeUtc>=u)return;let a=this.symbolExtractors.find(d=>d.languageId==n);if(!a)return;let l=(await ri.readFile(o)).toString(),c=await a.extractSymbols(t,l);await this.storage.insertOrReplaceDocumentSymbolsAsync(t,u,c)}};r(nu,"Index");var ni=nu;function Sm(e){let t=e;return typeof(t==null?void 0:t.cwd)=="string"&&Array.isArray(t==null?void 0:t.indexWorkspaceRoots)&&t.indexWorkspaceRoots.every(n=>sb(n))}r(Sm,"isIndexWorkerData");var ou=class ou{constructor(t){this.id=t}};r(ou,"IndexMessage");var ru=ou,_n={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex"};var iu=class iu extends ru{constructor(n,o,s){super(n);this.error=o;this.data=s;this.operation=_n.Response}};r(iu,"ResponseMessage");var Lt=iu;function sb(e){return"databaseFilePath"in e&&"rootPath"in e}r(sb,"isIndexableWorkspaceFolder");var Qn=kt(require("path")),Jn=require("worker_threads");var au=class au{constructor(t){this.index=new ni(t,im),this.contextRetreival=new Zo(this.index.reader,om)}};r(au,"IndexInfo");var oi=au,ii=class ii{constructor(t,n){this.indices=new Map;for(let o of n)this.indices.set(Qn.default.normalize(o.rootPath),new oi(o.databaseFilePath));t.on("message",o=>void ii.dispatchMessage(o,this.indices))}static async dispatchMessage(t,n){var s,u;let o=r(i=>{for(let[a,l]of n)if(Qn.default.normalize(i).startsWith(a))return l},"getIndexInfo");try{if(t.operation===_n.AddOrInvalidated){let i=t,a=(s=o(i.filePath))==null?void 0:s.index,l;a?await a.indexFile(i.filePath,i.languageId):l=new Error(`Index not found for ${i.filePath}`),te==null||te.postMessage(new Lt(t.id,l,void 0))}else if(t.operation===_n.GetContext){let i=t,a=(u=o(i.filePath))==null?void 0:u.contextRetreival,l,c;a?c=await a.getStringifiedContextAtPositionAsync(i.filePath,i.code,i.offset,i.languageId,8e3):l=new Error(`ContextRetrieval not found for ${i.filePath}`),te==null||te.postMessage(new Lt(t.id,l,c))}else if(t.operation===_n.Exit){for(let i of n.values())await i.index.dispose();n.clear(),te==null||te.postMessage(new Lt(t.id,void 0,void 0)),te==null||te.close()}else if(t.operation===_n.CreateIndex){let i=t;n.has(Qn.default.normalize(i.baseWorkspaceFolderPath))||n.set(Qn.default.normalize(i.baseWorkspaceFolderPath),new oi(i.databaseFilePath)),te==null||te.postMessage(new Lt(t.id,void 0,void 0))}else if(t.operation===_n.RemoveIndex){let i=t,a=Qn.default.normalize(i.baseWorkspaceFolderPath);if(n.has(a)){let l=n.get(a);l&&await l.index.dispose(),n.delete(i.baseWorkspaceFolderPath)}te==null||te.postMessage(new Lt(t.id,void 0,void 0))}else te==null||te.postMessage(new Error(`Unknown operation: ${t.operation}`))}catch(i){if(!(i instanceof Error))throw i;te==null||te.postMessage(new Lt(t.id,i,void 0))}}};r(ii,"IndexWorker");var su=ii,te=Jn.parentPort;if(!te)throw new Error("This module should only be used in a worker thread.");if(!Sm(Jn.workerData))throw new Error("Worker data must provide a valid database path.");var ab=Jn.workerData.cwd;process.cwd=()=>ab;new su(te,Jn.workerData.indexWorkspaceRoots);
//# sourceMappingURL=indexWorker.js.map
